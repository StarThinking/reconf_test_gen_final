reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1567176812-172.17.0.18-1599296059969:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35174,DS-5a84ab96-64d4-43db-abae-856cf580812a,DISK], DatanodeInfoWithStorage[127.0.0.1:33630,DS-21d25d9f-d7c9-48ee-8378-428824d20214,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-b3e271cc-9bb4-4c3a-9559-158137243219,DISK], DatanodeInfoWithStorage[127.0.0.1:43198,DS-17584b9b-e3b6-47ba-8dfd-9bb9015282fd,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-317b5cc8-cdc6-448a-8b7c-f7d723ea215d,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,DS-83267d67-2867-43dc-8945-0fea9d1f8ce6,DISK], DatanodeInfoWithStorage[127.0.0.1:39618,DS-78d490fc-94b6-471e-9363-2930015e0ad3,DISK]]; indices=[0, 2, 3, 5, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1567176812-172.17.0.18-1599296059969:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35174,DS-5a84ab96-64d4-43db-abae-856cf580812a,DISK], DatanodeInfoWithStorage[127.0.0.1:33630,DS-21d25d9f-d7c9-48ee-8378-428824d20214,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-b3e271cc-9bb4-4c3a-9559-158137243219,DISK], DatanodeInfoWithStorage[127.0.0.1:43198,DS-17584b9b-e3b6-47ba-8dfd-9bb9015282fd,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-317b5cc8-cdc6-448a-8b7c-f7d723ea215d,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,DS-83267d67-2867-43dc-8945-0fea9d1f8ce6,DISK], DatanodeInfoWithStorage[127.0.0.1:39618,DS-78d490fc-94b6-471e-9363-2930015e0ad3,DISK]]; indices=[0, 2, 3, 5, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1567176812-172.17.0.18-1599296059969:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35174,DS-5a84ab96-64d4-43db-abae-856cf580812a,DISK], DatanodeInfoWithStorage[127.0.0.1:33630,DS-21d25d9f-d7c9-48ee-8378-428824d20214,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-b3e271cc-9bb4-4c3a-9559-158137243219,DISK], DatanodeInfoWithStorage[127.0.0.1:43198,DS-17584b9b-e3b6-47ba-8dfd-9bb9015282fd,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-317b5cc8-cdc6-448a-8b7c-f7d723ea215d,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,DS-83267d67-2867-43dc-8945-0fea9d1f8ce6,DISK], DatanodeInfoWithStorage[127.0.0.1:39618,DS-78d490fc-94b6-471e-9363-2930015e0ad3,DISK]]; indices=[0, 2, 3, 5, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1567176812-172.17.0.18-1599296059969:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35174,DS-5a84ab96-64d4-43db-abae-856cf580812a,DISK], DatanodeInfoWithStorage[127.0.0.1:33630,DS-21d25d9f-d7c9-48ee-8378-428824d20214,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-b3e271cc-9bb4-4c3a-9559-158137243219,DISK], DatanodeInfoWithStorage[127.0.0.1:43198,DS-17584b9b-e3b6-47ba-8dfd-9bb9015282fd,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-317b5cc8-cdc6-448a-8b7c-f7d723ea215d,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,DS-83267d67-2867-43dc-8945-0fea9d1f8ce6,DISK], DatanodeInfoWithStorage[127.0.0.1:39618,DS-78d490fc-94b6-471e-9363-2930015e0ad3,DISK]]; indices=[0, 2, 3, 5, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: File /ec-10-4/striped_file_10_4 could only be written to 4 of the 10 required nodes for RS-10-4-1024k. There are 4 datanode(s) running and 4 node(s) are excluded in this operation.
	at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2226)
	at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2789)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:574)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

stackTrace: org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /ec-10-4/striped_file_10_4 could only be written to 4 of the 10 required nodes for RS-10-4-1024k. There are 4 datanode(s) running and 4 node(s) are excluded in this operation.
	at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2226)
	at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2789)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:574)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)
	at org.apache.hadoop.ipc.Client.call(Client.java:1491)
	at org.apache.hadoop.ipc.Client.call(Client.java:1388)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)
	at com.sun.proxy.$Proxy23.addBlock(Unknown Source)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:517)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)
	at com.sun.proxy.$Proxy24.addBlock(Unknown Source)
	at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)
	at org.apache.hadoop.hdfs.DFSStripedOutputStream.allocateNewBlock(DFSStripedOutputStream.java:480)
	at org.apache.hadoop.hdfs.DFSStripedOutputStream.writeChunk(DFSStripedOutputStream.java:526)
	at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunks(FSOutputSummer.java:217)
	at org.apache.hadoop.fs.FSOutputSummer.write1(FSOutputSummer.java:125)
	at org.apache.hadoop.fs.FSOutputSummer.write(FSOutputSummer.java:111)
	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:57)
	at java.io.DataOutputStream.write(DataOutputStream.java:107)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:96)
	at org.apache.hadoop.hdfs.DFSTestUtil.writeFile(DFSTestUtil.java:865)
	at org.apache.hadoop.hdfs.DFSTestUtil.writeFile(DFSTestUtil.java:886)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:502)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-128774034-172.17.0.18-1599296492152:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32777,DS-ada28baa-1bbf-4f4e-8e8e-4e81afb309ba,DISK], DatanodeInfoWithStorage[127.0.0.1:46749,DS-b392378a-16d6-48c0-98d7-2fc79d8c0964,DISK], DatanodeInfoWithStorage[127.0.0.1:43877,DS-58848c9f-9d21-49eb-ae1d-10fc589499f1,DISK], DatanodeInfoWithStorage[127.0.0.1:45913,DS-611cf9b6-b493-495c-a119-516e41044247,DISK], DatanodeInfoWithStorage[127.0.0.1:35059,DS-20fb8b51-862e-4ba3-849b-5c82bae6c69f,DISK], DatanodeInfoWithStorage[127.0.0.1:39263,DS-a7f39959-e171-4ee9-9cc4-8b12451ad9fe,DISK], DatanodeInfoWithStorage[127.0.0.1:44615,DS-aa244831-2867-4408-a945-685d5e3acbdf,DISK]]; indices=[0, 1, 4, 5, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-128774034-172.17.0.18-1599296492152:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32777,DS-ada28baa-1bbf-4f4e-8e8e-4e81afb309ba,DISK], DatanodeInfoWithStorage[127.0.0.1:46749,DS-b392378a-16d6-48c0-98d7-2fc79d8c0964,DISK], DatanodeInfoWithStorage[127.0.0.1:43877,DS-58848c9f-9d21-49eb-ae1d-10fc589499f1,DISK], DatanodeInfoWithStorage[127.0.0.1:45913,DS-611cf9b6-b493-495c-a119-516e41044247,DISK], DatanodeInfoWithStorage[127.0.0.1:35059,DS-20fb8b51-862e-4ba3-849b-5c82bae6c69f,DISK], DatanodeInfoWithStorage[127.0.0.1:39263,DS-a7f39959-e171-4ee9-9cc4-8b12451ad9fe,DISK], DatanodeInfoWithStorage[127.0.0.1:44615,DS-aa244831-2867-4408-a945-685d5e3acbdf,DISK]]; indices=[0, 1, 4, 5, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-128774034-172.17.0.18-1599296492152:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32777,DS-ada28baa-1bbf-4f4e-8e8e-4e81afb309ba,DISK], DatanodeInfoWithStorage[127.0.0.1:46749,DS-b392378a-16d6-48c0-98d7-2fc79d8c0964,DISK], DatanodeInfoWithStorage[127.0.0.1:43877,DS-58848c9f-9d21-49eb-ae1d-10fc589499f1,DISK], DatanodeInfoWithStorage[127.0.0.1:45913,DS-611cf9b6-b493-495c-a119-516e41044247,DISK], DatanodeInfoWithStorage[127.0.0.1:35059,DS-20fb8b51-862e-4ba3-849b-5c82bae6c69f,DISK], DatanodeInfoWithStorage[127.0.0.1:39263,DS-a7f39959-e171-4ee9-9cc4-8b12451ad9fe,DISK], DatanodeInfoWithStorage[127.0.0.1:44615,DS-aa244831-2867-4408-a945-685d5e3acbdf,DISK]]; indices=[0, 1, 4, 5, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-128774034-172.17.0.18-1599296492152:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32777,DS-ada28baa-1bbf-4f4e-8e8e-4e81afb309ba,DISK], DatanodeInfoWithStorage[127.0.0.1:46749,DS-b392378a-16d6-48c0-98d7-2fc79d8c0964,DISK], DatanodeInfoWithStorage[127.0.0.1:43877,DS-58848c9f-9d21-49eb-ae1d-10fc589499f1,DISK], DatanodeInfoWithStorage[127.0.0.1:45913,DS-611cf9b6-b493-495c-a119-516e41044247,DISK], DatanodeInfoWithStorage[127.0.0.1:35059,DS-20fb8b51-862e-4ba3-849b-5c82bae6c69f,DISK], DatanodeInfoWithStorage[127.0.0.1:39263,DS-a7f39959-e171-4ee9-9cc4-8b12451ad9fe,DISK], DatanodeInfoWithStorage[127.0.0.1:44615,DS-aa244831-2867-4408-a945-685d5e3acbdf,DISK]]; indices=[0, 1, 4, 5, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1638808987-172.17.0.18-1599296941336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34991,DS-51f94401-26a8-4c80-9df6-8da80cc36830,DISK], DatanodeInfoWithStorage[127.0.0.1:41149,DS-25f76442-76e4-4f7f-ac26-43d14a0ab0ce,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-7d68b5b2-f010-4b2f-880d-fc934fa2e65e,DISK], DatanodeInfoWithStorage[127.0.0.1:35739,DS-5e4d02de-2458-4fd2-80b3-5057154e25bf,DISK], DatanodeInfoWithStorage[127.0.0.1:36979,DS-7976ecd4-5da2-4541-bb08-676b800e9b05,DISK], DatanodeInfoWithStorage[127.0.0.1:40223,DS-0eabae3b-c040-4276-ac16-19e8dac97cd1,DISK]]; indices=[0, 1, 2, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1638808987-172.17.0.18-1599296941336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34991,DS-51f94401-26a8-4c80-9df6-8da80cc36830,DISK], DatanodeInfoWithStorage[127.0.0.1:41149,DS-25f76442-76e4-4f7f-ac26-43d14a0ab0ce,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-7d68b5b2-f010-4b2f-880d-fc934fa2e65e,DISK], DatanodeInfoWithStorage[127.0.0.1:35739,DS-5e4d02de-2458-4fd2-80b3-5057154e25bf,DISK], DatanodeInfoWithStorage[127.0.0.1:36979,DS-7976ecd4-5da2-4541-bb08-676b800e9b05,DISK], DatanodeInfoWithStorage[127.0.0.1:40223,DS-0eabae3b-c040-4276-ac16-19e8dac97cd1,DISK]]; indices=[0, 1, 2, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1638808987-172.17.0.18-1599296941336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34991,DS-51f94401-26a8-4c80-9df6-8da80cc36830,DISK], DatanodeInfoWithStorage[127.0.0.1:41149,DS-25f76442-76e4-4f7f-ac26-43d14a0ab0ce,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-7d68b5b2-f010-4b2f-880d-fc934fa2e65e,DISK], DatanodeInfoWithStorage[127.0.0.1:35739,DS-5e4d02de-2458-4fd2-80b3-5057154e25bf,DISK], DatanodeInfoWithStorage[127.0.0.1:36979,DS-7976ecd4-5da2-4541-bb08-676b800e9b05,DISK], DatanodeInfoWithStorage[127.0.0.1:40223,DS-0eabae3b-c040-4276-ac16-19e8dac97cd1,DISK]]; indices=[0, 1, 2, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1638808987-172.17.0.18-1599296941336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34991,DS-51f94401-26a8-4c80-9df6-8da80cc36830,DISK], DatanodeInfoWithStorage[127.0.0.1:41149,DS-25f76442-76e4-4f7f-ac26-43d14a0ab0ce,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-7d68b5b2-f010-4b2f-880d-fc934fa2e65e,DISK], DatanodeInfoWithStorage[127.0.0.1:35739,DS-5e4d02de-2458-4fd2-80b3-5057154e25bf,DISK], DatanodeInfoWithStorage[127.0.0.1:36979,DS-7976ecd4-5da2-4541-bb08-676b800e9b05,DISK], DatanodeInfoWithStorage[127.0.0.1:40223,DS-0eabae3b-c040-4276-ac16-19e8dac97cd1,DISK]]; indices=[0, 1, 2, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-300701158-172.17.0.18-1599296999370:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35906,DS-e0a4fd99-b9f5-4d93-9a9b-29c285c702d4,DISK], DatanodeInfoWithStorage[127.0.0.1:41651,DS-180ab59f-3e96-4d2c-b2f5-8a0b69e2ba89,DISK], DatanodeInfoWithStorage[127.0.0.1:36944,DS-2e6d401d-4e8f-4341-99db-bcec37b9d60e,DISK], DatanodeInfoWithStorage[127.0.0.1:45444,DS-c50fb7e2-1559-43e3-be79-1322a3f9e914,DISK], DatanodeInfoWithStorage[127.0.0.1:45469,DS-ee07d274-99d1-483c-871b-0e5a1c4e1dc3,DISK], DatanodeInfoWithStorage[127.0.0.1:39979,DS-5eb390c6-3fcf-4b4e-a13e-c37814f9e25e,DISK]]; indices=[2, 6, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-300701158-172.17.0.18-1599296999370:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35906,DS-e0a4fd99-b9f5-4d93-9a9b-29c285c702d4,DISK], DatanodeInfoWithStorage[127.0.0.1:41651,DS-180ab59f-3e96-4d2c-b2f5-8a0b69e2ba89,DISK], DatanodeInfoWithStorage[127.0.0.1:36944,DS-2e6d401d-4e8f-4341-99db-bcec37b9d60e,DISK], DatanodeInfoWithStorage[127.0.0.1:45444,DS-c50fb7e2-1559-43e3-be79-1322a3f9e914,DISK], DatanodeInfoWithStorage[127.0.0.1:45469,DS-ee07d274-99d1-483c-871b-0e5a1c4e1dc3,DISK], DatanodeInfoWithStorage[127.0.0.1:39979,DS-5eb390c6-3fcf-4b4e-a13e-c37814f9e25e,DISK]]; indices=[2, 6, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-300701158-172.17.0.18-1599296999370:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35906,DS-e0a4fd99-b9f5-4d93-9a9b-29c285c702d4,DISK], DatanodeInfoWithStorage[127.0.0.1:41651,DS-180ab59f-3e96-4d2c-b2f5-8a0b69e2ba89,DISK], DatanodeInfoWithStorage[127.0.0.1:36944,DS-2e6d401d-4e8f-4341-99db-bcec37b9d60e,DISK], DatanodeInfoWithStorage[127.0.0.1:45444,DS-c50fb7e2-1559-43e3-be79-1322a3f9e914,DISK], DatanodeInfoWithStorage[127.0.0.1:45469,DS-ee07d274-99d1-483c-871b-0e5a1c4e1dc3,DISK], DatanodeInfoWithStorage[127.0.0.1:39979,DS-5eb390c6-3fcf-4b4e-a13e-c37814f9e25e,DISK]]; indices=[2, 6, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-300701158-172.17.0.18-1599296999370:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35906,DS-e0a4fd99-b9f5-4d93-9a9b-29c285c702d4,DISK], DatanodeInfoWithStorage[127.0.0.1:41651,DS-180ab59f-3e96-4d2c-b2f5-8a0b69e2ba89,DISK], DatanodeInfoWithStorage[127.0.0.1:36944,DS-2e6d401d-4e8f-4341-99db-bcec37b9d60e,DISK], DatanodeInfoWithStorage[127.0.0.1:45444,DS-c50fb7e2-1559-43e3-be79-1322a3f9e914,DISK], DatanodeInfoWithStorage[127.0.0.1:45469,DS-ee07d274-99d1-483c-871b-0e5a1c4e1dc3,DISK], DatanodeInfoWithStorage[127.0.0.1:39979,DS-5eb390c6-3fcf-4b4e-a13e-c37814f9e25e,DISK]]; indices=[2, 6, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1395686736-172.17.0.18-1599297095020:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41269,DS-7d9c6252-0c1f-4ad4-9be2-4a24a4bae780,DISK], DatanodeInfoWithStorage[127.0.0.1:38363,DS-700700ce-5a41-4d0f-9963-5e38e3d35b65,DISK], DatanodeInfoWithStorage[127.0.0.1:37339,DS-5936dfb3-ca6a-4089-8d92-8f83158fe5d8,DISK], DatanodeInfoWithStorage[127.0.0.1:35685,DS-0ac8135c-7d77-40ad-8fb9-b2a6535c9dc2,DISK], DatanodeInfoWithStorage[127.0.0.1:46762,DS-cda8b564-031b-47ee-940a-bbd9bd22c02f,DISK], DatanodeInfoWithStorage[127.0.0.1:42804,DS-cf17054a-f5d6-456d-b485-dd82f52c96da,DISK]]; indices=[1, 2, 3, 5, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1395686736-172.17.0.18-1599297095020:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41269,DS-7d9c6252-0c1f-4ad4-9be2-4a24a4bae780,DISK], DatanodeInfoWithStorage[127.0.0.1:38363,DS-700700ce-5a41-4d0f-9963-5e38e3d35b65,DISK], DatanodeInfoWithStorage[127.0.0.1:37339,DS-5936dfb3-ca6a-4089-8d92-8f83158fe5d8,DISK], DatanodeInfoWithStorage[127.0.0.1:35685,DS-0ac8135c-7d77-40ad-8fb9-b2a6535c9dc2,DISK], DatanodeInfoWithStorage[127.0.0.1:46762,DS-cda8b564-031b-47ee-940a-bbd9bd22c02f,DISK], DatanodeInfoWithStorage[127.0.0.1:42804,DS-cf17054a-f5d6-456d-b485-dd82f52c96da,DISK]]; indices=[1, 2, 3, 5, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1395686736-172.17.0.18-1599297095020:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41269,DS-7d9c6252-0c1f-4ad4-9be2-4a24a4bae780,DISK], DatanodeInfoWithStorage[127.0.0.1:38363,DS-700700ce-5a41-4d0f-9963-5e38e3d35b65,DISK], DatanodeInfoWithStorage[127.0.0.1:37339,DS-5936dfb3-ca6a-4089-8d92-8f83158fe5d8,DISK], DatanodeInfoWithStorage[127.0.0.1:35685,DS-0ac8135c-7d77-40ad-8fb9-b2a6535c9dc2,DISK], DatanodeInfoWithStorage[127.0.0.1:46762,DS-cda8b564-031b-47ee-940a-bbd9bd22c02f,DISK], DatanodeInfoWithStorage[127.0.0.1:42804,DS-cf17054a-f5d6-456d-b485-dd82f52c96da,DISK]]; indices=[1, 2, 3, 5, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1395686736-172.17.0.18-1599297095020:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41269,DS-7d9c6252-0c1f-4ad4-9be2-4a24a4bae780,DISK], DatanodeInfoWithStorage[127.0.0.1:38363,DS-700700ce-5a41-4d0f-9963-5e38e3d35b65,DISK], DatanodeInfoWithStorage[127.0.0.1:37339,DS-5936dfb3-ca6a-4089-8d92-8f83158fe5d8,DISK], DatanodeInfoWithStorage[127.0.0.1:35685,DS-0ac8135c-7d77-40ad-8fb9-b2a6535c9dc2,DISK], DatanodeInfoWithStorage[127.0.0.1:46762,DS-cda8b564-031b-47ee-940a-bbd9bd22c02f,DISK], DatanodeInfoWithStorage[127.0.0.1:42804,DS-cf17054a-f5d6-456d-b485-dd82f52c96da,DISK]]; indices=[1, 2, 3, 5, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2084285508-172.17.0.18-1599297179412:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40010,DS-f5be30cb-5034-4199-9205-0d5165529e2a,DISK], DatanodeInfoWithStorage[127.0.0.1:42212,DS-fa44f723-48a5-434e-b4c8-a85ac0b5bd33,DISK], DatanodeInfoWithStorage[127.0.0.1:46349,DS-a250a57d-0167-4fab-b1ed-0819dcacce99,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-751ee633-f7e1-486e-9aa8-f81057e072da,DISK], DatanodeInfoWithStorage[127.0.0.1:36802,DS-785545f1-2982-46ca-a39d-0bd8f38e0605,DISK], DatanodeInfoWithStorage[127.0.0.1:40914,DS-a48d1f28-97bb-43f8-b898-1a57c36c8603,DISK]]; indices=[0, 2, 6, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2084285508-172.17.0.18-1599297179412:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40010,DS-f5be30cb-5034-4199-9205-0d5165529e2a,DISK], DatanodeInfoWithStorage[127.0.0.1:42212,DS-fa44f723-48a5-434e-b4c8-a85ac0b5bd33,DISK], DatanodeInfoWithStorage[127.0.0.1:46349,DS-a250a57d-0167-4fab-b1ed-0819dcacce99,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-751ee633-f7e1-486e-9aa8-f81057e072da,DISK], DatanodeInfoWithStorage[127.0.0.1:36802,DS-785545f1-2982-46ca-a39d-0bd8f38e0605,DISK], DatanodeInfoWithStorage[127.0.0.1:40914,DS-a48d1f28-97bb-43f8-b898-1a57c36c8603,DISK]]; indices=[0, 2, 6, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2084285508-172.17.0.18-1599297179412:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40010,DS-f5be30cb-5034-4199-9205-0d5165529e2a,DISK], DatanodeInfoWithStorage[127.0.0.1:42212,DS-fa44f723-48a5-434e-b4c8-a85ac0b5bd33,DISK], DatanodeInfoWithStorage[127.0.0.1:46349,DS-a250a57d-0167-4fab-b1ed-0819dcacce99,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-751ee633-f7e1-486e-9aa8-f81057e072da,DISK], DatanodeInfoWithStorage[127.0.0.1:36802,DS-785545f1-2982-46ca-a39d-0bd8f38e0605,DISK], DatanodeInfoWithStorage[127.0.0.1:40914,DS-a48d1f28-97bb-43f8-b898-1a57c36c8603,DISK]]; indices=[0, 2, 6, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2084285508-172.17.0.18-1599297179412:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40010,DS-f5be30cb-5034-4199-9205-0d5165529e2a,DISK], DatanodeInfoWithStorage[127.0.0.1:42212,DS-fa44f723-48a5-434e-b4c8-a85ac0b5bd33,DISK], DatanodeInfoWithStorage[127.0.0.1:46349,DS-a250a57d-0167-4fab-b1ed-0819dcacce99,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-751ee633-f7e1-486e-9aa8-f81057e072da,DISK], DatanodeInfoWithStorage[127.0.0.1:36802,DS-785545f1-2982-46ca-a39d-0bd8f38e0605,DISK], DatanodeInfoWithStorage[127.0.0.1:40914,DS-a48d1f28-97bb-43f8-b898-1a57c36c8603,DISK]]; indices=[0, 2, 6, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-784518517-172.17.0.18-1599297308746:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40515,DS-e0e9b480-af91-496f-8f23-64f584ea41ad,DISK], DatanodeInfoWithStorage[127.0.0.1:44397,DS-e23f3fbc-353d-4b16-a1c6-2d46ec6a725f,DISK], DatanodeInfoWithStorage[127.0.0.1:42134,DS-78cf8845-d9eb-49c8-acf2-84c71fccad39,DISK], DatanodeInfoWithStorage[127.0.0.1:41365,DS-e68db7d1-153d-450d-8861-e3ae300bf44a,DISK], DatanodeInfoWithStorage[127.0.0.1:34599,DS-f63a0a9f-2150-413b-8439-a9be261e0516,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-784518517-172.17.0.18-1599297308746:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40515,DS-e0e9b480-af91-496f-8f23-64f584ea41ad,DISK], DatanodeInfoWithStorage[127.0.0.1:44397,DS-e23f3fbc-353d-4b16-a1c6-2d46ec6a725f,DISK], DatanodeInfoWithStorage[127.0.0.1:42134,DS-78cf8845-d9eb-49c8-acf2-84c71fccad39,DISK], DatanodeInfoWithStorage[127.0.0.1:41365,DS-e68db7d1-153d-450d-8861-e3ae300bf44a,DISK], DatanodeInfoWithStorage[127.0.0.1:34599,DS-f63a0a9f-2150-413b-8439-a9be261e0516,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-784518517-172.17.0.18-1599297308746:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40515,DS-e0e9b480-af91-496f-8f23-64f584ea41ad,DISK], DatanodeInfoWithStorage[127.0.0.1:44397,DS-e23f3fbc-353d-4b16-a1c6-2d46ec6a725f,DISK], DatanodeInfoWithStorage[127.0.0.1:42134,DS-78cf8845-d9eb-49c8-acf2-84c71fccad39,DISK], DatanodeInfoWithStorage[127.0.0.1:41365,DS-e68db7d1-153d-450d-8861-e3ae300bf44a,DISK], DatanodeInfoWithStorage[127.0.0.1:34599,DS-f63a0a9f-2150-413b-8439-a9be261e0516,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-784518517-172.17.0.18-1599297308746:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40515,DS-e0e9b480-af91-496f-8f23-64f584ea41ad,DISK], DatanodeInfoWithStorage[127.0.0.1:44397,DS-e23f3fbc-353d-4b16-a1c6-2d46ec6a725f,DISK], DatanodeInfoWithStorage[127.0.0.1:42134,DS-78cf8845-d9eb-49c8-acf2-84c71fccad39,DISK], DatanodeInfoWithStorage[127.0.0.1:41365,DS-e68db7d1-153d-450d-8861-e3ae300bf44a,DISK], DatanodeInfoWithStorage[127.0.0.1:34599,DS-f63a0a9f-2150-413b-8439-a9be261e0516,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-892933708-172.17.0.18-1599297336888:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43466,DS-c60b4c46-d991-41a8-9922-2af699489098,DISK], DatanodeInfoWithStorage[127.0.0.1:46760,DS-9dd4aaf8-24ce-42eb-9217-41d0410f6175,DISK], DatanodeInfoWithStorage[127.0.0.1:45423,DS-85699cf3-d87e-4ddf-a30b-9f09cedd2452,DISK], DatanodeInfoWithStorage[127.0.0.1:43997,DS-34be26d0-b664-453a-b167-cf50ad82c3a9,DISK], DatanodeInfoWithStorage[127.0.0.1:45112,DS-d6af562e-c6f8-49c2-aa48-cb84f17ec164,DISK], DatanodeInfoWithStorage[127.0.0.1:39595,DS-74ad6c03-4c36-49ac-9f96-ef946ee5617f,DISK]]; indices=[2, 5, 6, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-892933708-172.17.0.18-1599297336888:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43466,DS-c60b4c46-d991-41a8-9922-2af699489098,DISK], DatanodeInfoWithStorage[127.0.0.1:46760,DS-9dd4aaf8-24ce-42eb-9217-41d0410f6175,DISK], DatanodeInfoWithStorage[127.0.0.1:45423,DS-85699cf3-d87e-4ddf-a30b-9f09cedd2452,DISK], DatanodeInfoWithStorage[127.0.0.1:43997,DS-34be26d0-b664-453a-b167-cf50ad82c3a9,DISK], DatanodeInfoWithStorage[127.0.0.1:45112,DS-d6af562e-c6f8-49c2-aa48-cb84f17ec164,DISK], DatanodeInfoWithStorage[127.0.0.1:39595,DS-74ad6c03-4c36-49ac-9f96-ef946ee5617f,DISK]]; indices=[2, 5, 6, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-892933708-172.17.0.18-1599297336888:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43466,DS-c60b4c46-d991-41a8-9922-2af699489098,DISK], DatanodeInfoWithStorage[127.0.0.1:46760,DS-9dd4aaf8-24ce-42eb-9217-41d0410f6175,DISK], DatanodeInfoWithStorage[127.0.0.1:45423,DS-85699cf3-d87e-4ddf-a30b-9f09cedd2452,DISK], DatanodeInfoWithStorage[127.0.0.1:43997,DS-34be26d0-b664-453a-b167-cf50ad82c3a9,DISK], DatanodeInfoWithStorage[127.0.0.1:45112,DS-d6af562e-c6f8-49c2-aa48-cb84f17ec164,DISK], DatanodeInfoWithStorage[127.0.0.1:39595,DS-74ad6c03-4c36-49ac-9f96-ef946ee5617f,DISK]]; indices=[2, 5, 6, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-892933708-172.17.0.18-1599297336888:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43466,DS-c60b4c46-d991-41a8-9922-2af699489098,DISK], DatanodeInfoWithStorage[127.0.0.1:46760,DS-9dd4aaf8-24ce-42eb-9217-41d0410f6175,DISK], DatanodeInfoWithStorage[127.0.0.1:45423,DS-85699cf3-d87e-4ddf-a30b-9f09cedd2452,DISK], DatanodeInfoWithStorage[127.0.0.1:43997,DS-34be26d0-b664-453a-b167-cf50ad82c3a9,DISK], DatanodeInfoWithStorage[127.0.0.1:45112,DS-d6af562e-c6f8-49c2-aa48-cb84f17ec164,DISK], DatanodeInfoWithStorage[127.0.0.1:39595,DS-74ad6c03-4c36-49ac-9f96-ef946ee5617f,DISK]]; indices=[2, 5, 6, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1796183601-172.17.0.18-1599297434584:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35758,DS-0919cead-670d-40ab-aca3-58dedf8688ff,DISK], DatanodeInfoWithStorage[127.0.0.1:39648,DS-742a3e56-e3f4-4fb5-9b0e-770ae1690574,DISK], DatanodeInfoWithStorage[127.0.0.1:41791,DS-49a779ae-06b5-44d7-9b4d-0519fabdc830,DISK], DatanodeInfoWithStorage[127.0.0.1:39733,DS-17a7ca3a-d4d2-41a5-a764-bbf7b20af058,DISK], DatanodeInfoWithStorage[127.0.0.1:36841,DS-23eb2e93-4109-40df-990d-9846f228955b,DISK], DatanodeInfoWithStorage[127.0.0.1:44716,DS-eeace579-a316-4d11-9995-66248992f259,DISK]]; indices=[0, 1, 2, 4, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1796183601-172.17.0.18-1599297434584:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35758,DS-0919cead-670d-40ab-aca3-58dedf8688ff,DISK], DatanodeInfoWithStorage[127.0.0.1:39648,DS-742a3e56-e3f4-4fb5-9b0e-770ae1690574,DISK], DatanodeInfoWithStorage[127.0.0.1:41791,DS-49a779ae-06b5-44d7-9b4d-0519fabdc830,DISK], DatanodeInfoWithStorage[127.0.0.1:39733,DS-17a7ca3a-d4d2-41a5-a764-bbf7b20af058,DISK], DatanodeInfoWithStorage[127.0.0.1:36841,DS-23eb2e93-4109-40df-990d-9846f228955b,DISK], DatanodeInfoWithStorage[127.0.0.1:44716,DS-eeace579-a316-4d11-9995-66248992f259,DISK]]; indices=[0, 1, 2, 4, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1796183601-172.17.0.18-1599297434584:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35758,DS-0919cead-670d-40ab-aca3-58dedf8688ff,DISK], DatanodeInfoWithStorage[127.0.0.1:39648,DS-742a3e56-e3f4-4fb5-9b0e-770ae1690574,DISK], DatanodeInfoWithStorage[127.0.0.1:41791,DS-49a779ae-06b5-44d7-9b4d-0519fabdc830,DISK], DatanodeInfoWithStorage[127.0.0.1:39733,DS-17a7ca3a-d4d2-41a5-a764-bbf7b20af058,DISK], DatanodeInfoWithStorage[127.0.0.1:36841,DS-23eb2e93-4109-40df-990d-9846f228955b,DISK], DatanodeInfoWithStorage[127.0.0.1:44716,DS-eeace579-a316-4d11-9995-66248992f259,DISK]]; indices=[0, 1, 2, 4, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1796183601-172.17.0.18-1599297434584:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35758,DS-0919cead-670d-40ab-aca3-58dedf8688ff,DISK], DatanodeInfoWithStorage[127.0.0.1:39648,DS-742a3e56-e3f4-4fb5-9b0e-770ae1690574,DISK], DatanodeInfoWithStorage[127.0.0.1:41791,DS-49a779ae-06b5-44d7-9b4d-0519fabdc830,DISK], DatanodeInfoWithStorage[127.0.0.1:39733,DS-17a7ca3a-d4d2-41a5-a764-bbf7b20af058,DISK], DatanodeInfoWithStorage[127.0.0.1:36841,DS-23eb2e93-4109-40df-990d-9846f228955b,DISK], DatanodeInfoWithStorage[127.0.0.1:44716,DS-eeace579-a316-4d11-9995-66248992f259,DISK]]; indices=[0, 1, 2, 4, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1490219891-172.17.0.18-1599297496428:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45180,DS-d5acc590-26ef-4d17-8db6-1448d7ec5394,DISK], DatanodeInfoWithStorage[127.0.0.1:39783,DS-47993d17-7cc6-469d-88f7-f774729b4da5,DISK], DatanodeInfoWithStorage[127.0.0.1:39836,DS-fc657f54-4101-4b7b-8125-180050220e61,DISK], DatanodeInfoWithStorage[127.0.0.1:43562,DS-44acad1f-b202-4cee-95f2-630ff121dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:38267,DS-ff291359-5158-4e2b-925e-b2d0187d7c94,DISK], DatanodeInfoWithStorage[127.0.0.1:39338,DS-e0ac8606-a42f-4322-8b17-e0f8eabd2191,DISK], DatanodeInfoWithStorage[127.0.0.1:36540,DS-b97a8df1-221f-4dd9-9e8f-3d1a2b65c742,DISK]]; indices=[0, 1, 3, 4, 5, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1490219891-172.17.0.18-1599297496428:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45180,DS-d5acc590-26ef-4d17-8db6-1448d7ec5394,DISK], DatanodeInfoWithStorage[127.0.0.1:39783,DS-47993d17-7cc6-469d-88f7-f774729b4da5,DISK], DatanodeInfoWithStorage[127.0.0.1:39836,DS-fc657f54-4101-4b7b-8125-180050220e61,DISK], DatanodeInfoWithStorage[127.0.0.1:43562,DS-44acad1f-b202-4cee-95f2-630ff121dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:38267,DS-ff291359-5158-4e2b-925e-b2d0187d7c94,DISK], DatanodeInfoWithStorage[127.0.0.1:39338,DS-e0ac8606-a42f-4322-8b17-e0f8eabd2191,DISK], DatanodeInfoWithStorage[127.0.0.1:36540,DS-b97a8df1-221f-4dd9-9e8f-3d1a2b65c742,DISK]]; indices=[0, 1, 3, 4, 5, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1490219891-172.17.0.18-1599297496428:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45180,DS-d5acc590-26ef-4d17-8db6-1448d7ec5394,DISK], DatanodeInfoWithStorage[127.0.0.1:39783,DS-47993d17-7cc6-469d-88f7-f774729b4da5,DISK], DatanodeInfoWithStorage[127.0.0.1:39836,DS-fc657f54-4101-4b7b-8125-180050220e61,DISK], DatanodeInfoWithStorage[127.0.0.1:43562,DS-44acad1f-b202-4cee-95f2-630ff121dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:38267,DS-ff291359-5158-4e2b-925e-b2d0187d7c94,DISK], DatanodeInfoWithStorage[127.0.0.1:39338,DS-e0ac8606-a42f-4322-8b17-e0f8eabd2191,DISK], DatanodeInfoWithStorage[127.0.0.1:36540,DS-b97a8df1-221f-4dd9-9e8f-3d1a2b65c742,DISK]]; indices=[0, 1, 3, 4, 5, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1490219891-172.17.0.18-1599297496428:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45180,DS-d5acc590-26ef-4d17-8db6-1448d7ec5394,DISK], DatanodeInfoWithStorage[127.0.0.1:39783,DS-47993d17-7cc6-469d-88f7-f774729b4da5,DISK], DatanodeInfoWithStorage[127.0.0.1:39836,DS-fc657f54-4101-4b7b-8125-180050220e61,DISK], DatanodeInfoWithStorage[127.0.0.1:43562,DS-44acad1f-b202-4cee-95f2-630ff121dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:38267,DS-ff291359-5158-4e2b-925e-b2d0187d7c94,DISK], DatanodeInfoWithStorage[127.0.0.1:39338,DS-e0ac8606-a42f-4322-8b17-e0f8eabd2191,DISK], DatanodeInfoWithStorage[127.0.0.1:36540,DS-b97a8df1-221f-4dd9-9e8f-3d1a2b65c742,DISK]]; indices=[0, 1, 3, 4, 5, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1288517296-172.17.0.18-1599297588797:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40643,DS-afea4407-2bb2-411b-babb-9280d75244e3,DISK], DatanodeInfoWithStorage[127.0.0.1:34003,DS-ad825f2e-50ff-4039-ba32-fc7f3513f20d,DISK], DatanodeInfoWithStorage[127.0.0.1:43932,DS-9c6a7861-a6bb-4037-b170-f03ac99a7ab9,DISK], DatanodeInfoWithStorage[127.0.0.1:33354,DS-d6feee4f-6125-4f68-92ed-8e32901976cd,DISK], DatanodeInfoWithStorage[127.0.0.1:41221,DS-6e6c4465-dd45-4589-8f19-5ea4bf25a9d3,DISK], DatanodeInfoWithStorage[127.0.0.1:45831,DS-5d7e6f1f-6c16-409b-98e5-4a70f2cdecee,DISK]]; indices=[0, 5, 6, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1288517296-172.17.0.18-1599297588797:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40643,DS-afea4407-2bb2-411b-babb-9280d75244e3,DISK], DatanodeInfoWithStorage[127.0.0.1:34003,DS-ad825f2e-50ff-4039-ba32-fc7f3513f20d,DISK], DatanodeInfoWithStorage[127.0.0.1:43932,DS-9c6a7861-a6bb-4037-b170-f03ac99a7ab9,DISK], DatanodeInfoWithStorage[127.0.0.1:33354,DS-d6feee4f-6125-4f68-92ed-8e32901976cd,DISK], DatanodeInfoWithStorage[127.0.0.1:41221,DS-6e6c4465-dd45-4589-8f19-5ea4bf25a9d3,DISK], DatanodeInfoWithStorage[127.0.0.1:45831,DS-5d7e6f1f-6c16-409b-98e5-4a70f2cdecee,DISK]]; indices=[0, 5, 6, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1288517296-172.17.0.18-1599297588797:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40643,DS-afea4407-2bb2-411b-babb-9280d75244e3,DISK], DatanodeInfoWithStorage[127.0.0.1:34003,DS-ad825f2e-50ff-4039-ba32-fc7f3513f20d,DISK], DatanodeInfoWithStorage[127.0.0.1:43932,DS-9c6a7861-a6bb-4037-b170-f03ac99a7ab9,DISK], DatanodeInfoWithStorage[127.0.0.1:33354,DS-d6feee4f-6125-4f68-92ed-8e32901976cd,DISK], DatanodeInfoWithStorage[127.0.0.1:41221,DS-6e6c4465-dd45-4589-8f19-5ea4bf25a9d3,DISK], DatanodeInfoWithStorage[127.0.0.1:45831,DS-5d7e6f1f-6c16-409b-98e5-4a70f2cdecee,DISK]]; indices=[0, 5, 6, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1288517296-172.17.0.18-1599297588797:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40643,DS-afea4407-2bb2-411b-babb-9280d75244e3,DISK], DatanodeInfoWithStorage[127.0.0.1:34003,DS-ad825f2e-50ff-4039-ba32-fc7f3513f20d,DISK], DatanodeInfoWithStorage[127.0.0.1:43932,DS-9c6a7861-a6bb-4037-b170-f03ac99a7ab9,DISK], DatanodeInfoWithStorage[127.0.0.1:33354,DS-d6feee4f-6125-4f68-92ed-8e32901976cd,DISK], DatanodeInfoWithStorage[127.0.0.1:41221,DS-6e6c4465-dd45-4589-8f19-5ea4bf25a9d3,DISK], DatanodeInfoWithStorage[127.0.0.1:45831,DS-5d7e6f1f-6c16-409b-98e5-4a70f2cdecee,DISK]]; indices=[0, 5, 6, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: File /ec-10-4/striped_file_10_4 could only be written to 4 of the 10 required nodes for RS-10-4-1024k. There are 4 datanode(s) running and 4 node(s) are excluded in this operation.
	at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2226)
	at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2789)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:574)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

stackTrace: org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /ec-10-4/striped_file_10_4 could only be written to 4 of the 10 required nodes for RS-10-4-1024k. There are 4 datanode(s) running and 4 node(s) are excluded in this operation.
	at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2226)
	at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2789)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:574)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)
	at org.apache.hadoop.ipc.Client.call(Client.java:1491)
	at org.apache.hadoop.ipc.Client.call(Client.java:1388)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)
	at com.sun.proxy.$Proxy23.addBlock(Unknown Source)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:517)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)
	at com.sun.proxy.$Proxy26.addBlock(Unknown Source)
	at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)
	at org.apache.hadoop.hdfs.DFSStripedOutputStream.allocateNewBlock(DFSStripedOutputStream.java:480)
	at org.apache.hadoop.hdfs.DFSStripedOutputStream.writeChunk(DFSStripedOutputStream.java:526)
	at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunks(FSOutputSummer.java:217)
	at org.apache.hadoop.fs.FSOutputSummer.write1(FSOutputSummer.java:125)
	at org.apache.hadoop.fs.FSOutputSummer.write(FSOutputSummer.java:111)
	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:57)
	at java.io.DataOutputStream.write(DataOutputStream.java:107)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:96)
	at org.apache.hadoop.hdfs.DFSTestUtil.writeFile(DFSTestUtil.java:865)
	at org.apache.hadoop.hdfs.DFSTestUtil.writeFile(DFSTestUtil.java:886)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:502)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1240620837-172.17.0.18-1599297861361:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38111,DS-b07a270a-a788-471c-aabb-4b24abd8f53c,DISK], DatanodeInfoWithStorage[127.0.0.1:35453,DS-5b06148f-c400-49e1-a830-a881ce0f3450,DISK], DatanodeInfoWithStorage[127.0.0.1:38444,DS-3e7daa8b-5afd-4a84-b89d-1c4be71cacb5,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-7bf71c07-f455-4b57-993f-71f1c2479136,DISK], DatanodeInfoWithStorage[127.0.0.1:37356,DS-75feca1b-0627-4bd9-9ac6-f1c8a7eea8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:36034,DS-b476825d-f337-4820-9196-b425c3878f2c,DISK], DatanodeInfoWithStorage[127.0.0.1:33628,DS-5132dfc9-273a-49e2-a69e-5ee1dc7bc169,DISK]]; indices=[0, 1, 3, 5, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1240620837-172.17.0.18-1599297861361:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38111,DS-b07a270a-a788-471c-aabb-4b24abd8f53c,DISK], DatanodeInfoWithStorage[127.0.0.1:35453,DS-5b06148f-c400-49e1-a830-a881ce0f3450,DISK], DatanodeInfoWithStorage[127.0.0.1:38444,DS-3e7daa8b-5afd-4a84-b89d-1c4be71cacb5,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-7bf71c07-f455-4b57-993f-71f1c2479136,DISK], DatanodeInfoWithStorage[127.0.0.1:37356,DS-75feca1b-0627-4bd9-9ac6-f1c8a7eea8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:36034,DS-b476825d-f337-4820-9196-b425c3878f2c,DISK], DatanodeInfoWithStorage[127.0.0.1:33628,DS-5132dfc9-273a-49e2-a69e-5ee1dc7bc169,DISK]]; indices=[0, 1, 3, 5, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1240620837-172.17.0.18-1599297861361:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38111,DS-b07a270a-a788-471c-aabb-4b24abd8f53c,DISK], DatanodeInfoWithStorage[127.0.0.1:35453,DS-5b06148f-c400-49e1-a830-a881ce0f3450,DISK], DatanodeInfoWithStorage[127.0.0.1:38444,DS-3e7daa8b-5afd-4a84-b89d-1c4be71cacb5,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-7bf71c07-f455-4b57-993f-71f1c2479136,DISK], DatanodeInfoWithStorage[127.0.0.1:37356,DS-75feca1b-0627-4bd9-9ac6-f1c8a7eea8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:36034,DS-b476825d-f337-4820-9196-b425c3878f2c,DISK], DatanodeInfoWithStorage[127.0.0.1:33628,DS-5132dfc9-273a-49e2-a69e-5ee1dc7bc169,DISK]]; indices=[0, 1, 3, 5, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1240620837-172.17.0.18-1599297861361:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38111,DS-b07a270a-a788-471c-aabb-4b24abd8f53c,DISK], DatanodeInfoWithStorage[127.0.0.1:35453,DS-5b06148f-c400-49e1-a830-a881ce0f3450,DISK], DatanodeInfoWithStorage[127.0.0.1:38444,DS-3e7daa8b-5afd-4a84-b89d-1c4be71cacb5,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-7bf71c07-f455-4b57-993f-71f1c2479136,DISK], DatanodeInfoWithStorage[127.0.0.1:37356,DS-75feca1b-0627-4bd9-9ac6-f1c8a7eea8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:36034,DS-b476825d-f337-4820-9196-b425c3878f2c,DISK], DatanodeInfoWithStorage[127.0.0.1:33628,DS-5132dfc9-273a-49e2-a69e-5ee1dc7bc169,DISK]]; indices=[0, 1, 3, 5, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-380603203-172.17.0.18-1599297923650:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45522,DS-1d06edaf-d2e7-48f6-a168-e0bb7b2e2ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:34655,DS-db346242-61ee-4f8e-af35-c08d17779984,DISK], DatanodeInfoWithStorage[127.0.0.1:44842,DS-ac847506-b4fa-4d91-be94-abbf05f681fe,DISK], DatanodeInfoWithStorage[127.0.0.1:40719,DS-078f5984-3825-4bae-9d78-56d768b2bcff,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-3a798822-35e3-4e04-8a1a-6975b454e497,DISK]]; indices=[0, 1, 2, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-380603203-172.17.0.18-1599297923650:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45522,DS-1d06edaf-d2e7-48f6-a168-e0bb7b2e2ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:34655,DS-db346242-61ee-4f8e-af35-c08d17779984,DISK], DatanodeInfoWithStorage[127.0.0.1:44842,DS-ac847506-b4fa-4d91-be94-abbf05f681fe,DISK], DatanodeInfoWithStorage[127.0.0.1:40719,DS-078f5984-3825-4bae-9d78-56d768b2bcff,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-3a798822-35e3-4e04-8a1a-6975b454e497,DISK]]; indices=[0, 1, 2, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-380603203-172.17.0.18-1599297923650:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45522,DS-1d06edaf-d2e7-48f6-a168-e0bb7b2e2ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:34655,DS-db346242-61ee-4f8e-af35-c08d17779984,DISK], DatanodeInfoWithStorage[127.0.0.1:44842,DS-ac847506-b4fa-4d91-be94-abbf05f681fe,DISK], DatanodeInfoWithStorage[127.0.0.1:40719,DS-078f5984-3825-4bae-9d78-56d768b2bcff,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-3a798822-35e3-4e04-8a1a-6975b454e497,DISK]]; indices=[0, 1, 2, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-380603203-172.17.0.18-1599297923650:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45522,DS-1d06edaf-d2e7-48f6-a168-e0bb7b2e2ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:34655,DS-db346242-61ee-4f8e-af35-c08d17779984,DISK], DatanodeInfoWithStorage[127.0.0.1:44842,DS-ac847506-b4fa-4d91-be94-abbf05f681fe,DISK], DatanodeInfoWithStorage[127.0.0.1:40719,DS-078f5984-3825-4bae-9d78-56d768b2bcff,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-3a798822-35e3-4e04-8a1a-6975b454e497,DISK]]; indices=[0, 1, 2, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2045364208-172.17.0.18-1599297953057:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33466,DS-7b62d012-0e3c-4e42-a12c-a90914ac1539,DISK], DatanodeInfoWithStorage[127.0.0.1:45616,DS-c5032df4-88d9-48c9-974b-b522f6b79e89,DISK], DatanodeInfoWithStorage[127.0.0.1:39559,DS-22c828d3-dc1b-420a-9d1b-8152eb056037,DISK], DatanodeInfoWithStorage[127.0.0.1:37882,DS-13ef4b4d-d833-4695-b1cf-a1d35035d6ee,DISK], DatanodeInfoWithStorage[127.0.0.1:42888,DS-0ca50584-a815-4df1-9cd0-38e2cd1da7bd,DISK], DatanodeInfoWithStorage[127.0.0.1:40137,DS-b9b4ad07-c300-4166-9661-be28f91d3091,DISK]]; indices=[0, 1, 3, 4, 6, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2045364208-172.17.0.18-1599297953057:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33466,DS-7b62d012-0e3c-4e42-a12c-a90914ac1539,DISK], DatanodeInfoWithStorage[127.0.0.1:45616,DS-c5032df4-88d9-48c9-974b-b522f6b79e89,DISK], DatanodeInfoWithStorage[127.0.0.1:39559,DS-22c828d3-dc1b-420a-9d1b-8152eb056037,DISK], DatanodeInfoWithStorage[127.0.0.1:37882,DS-13ef4b4d-d833-4695-b1cf-a1d35035d6ee,DISK], DatanodeInfoWithStorage[127.0.0.1:42888,DS-0ca50584-a815-4df1-9cd0-38e2cd1da7bd,DISK], DatanodeInfoWithStorage[127.0.0.1:40137,DS-b9b4ad07-c300-4166-9661-be28f91d3091,DISK]]; indices=[0, 1, 3, 4, 6, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2045364208-172.17.0.18-1599297953057:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33466,DS-7b62d012-0e3c-4e42-a12c-a90914ac1539,DISK], DatanodeInfoWithStorage[127.0.0.1:45616,DS-c5032df4-88d9-48c9-974b-b522f6b79e89,DISK], DatanodeInfoWithStorage[127.0.0.1:39559,DS-22c828d3-dc1b-420a-9d1b-8152eb056037,DISK], DatanodeInfoWithStorage[127.0.0.1:37882,DS-13ef4b4d-d833-4695-b1cf-a1d35035d6ee,DISK], DatanodeInfoWithStorage[127.0.0.1:42888,DS-0ca50584-a815-4df1-9cd0-38e2cd1da7bd,DISK], DatanodeInfoWithStorage[127.0.0.1:40137,DS-b9b4ad07-c300-4166-9661-be28f91d3091,DISK]]; indices=[0, 1, 3, 4, 6, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2045364208-172.17.0.18-1599297953057:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33466,DS-7b62d012-0e3c-4e42-a12c-a90914ac1539,DISK], DatanodeInfoWithStorage[127.0.0.1:45616,DS-c5032df4-88d9-48c9-974b-b522f6b79e89,DISK], DatanodeInfoWithStorage[127.0.0.1:39559,DS-22c828d3-dc1b-420a-9d1b-8152eb056037,DISK], DatanodeInfoWithStorage[127.0.0.1:37882,DS-13ef4b4d-d833-4695-b1cf-a1d35035d6ee,DISK], DatanodeInfoWithStorage[127.0.0.1:42888,DS-0ca50584-a815-4df1-9cd0-38e2cd1da7bd,DISK], DatanodeInfoWithStorage[127.0.0.1:40137,DS-b9b4ad07-c300-4166-9661-be28f91d3091,DISK]]; indices=[0, 1, 3, 4, 6, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-541827196-172.17.0.18-1599298013235:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35032,DS-4843e1c8-80c5-450f-aa3e-2abf8985a658,DISK], DatanodeInfoWithStorage[127.0.0.1:45920,DS-1ff54908-f766-43f9-907d-b3fb524839ff,DISK], DatanodeInfoWithStorage[127.0.0.1:45236,DS-b67f22f9-8ff3-4fb5-b4fb-8ada8facdd1f,DISK], DatanodeInfoWithStorage[127.0.0.1:44759,DS-5cd37567-340c-431c-8e97-29f2a334b43e,DISK], DatanodeInfoWithStorage[127.0.0.1:35190,DS-b5d0be2c-50ae-4baf-804d-451c7bc65e07,DISK]]; indices=[2, 3, 4, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-541827196-172.17.0.18-1599298013235:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35032,DS-4843e1c8-80c5-450f-aa3e-2abf8985a658,DISK], DatanodeInfoWithStorage[127.0.0.1:45920,DS-1ff54908-f766-43f9-907d-b3fb524839ff,DISK], DatanodeInfoWithStorage[127.0.0.1:45236,DS-b67f22f9-8ff3-4fb5-b4fb-8ada8facdd1f,DISK], DatanodeInfoWithStorage[127.0.0.1:44759,DS-5cd37567-340c-431c-8e97-29f2a334b43e,DISK], DatanodeInfoWithStorage[127.0.0.1:35190,DS-b5d0be2c-50ae-4baf-804d-451c7bc65e07,DISK]]; indices=[2, 3, 4, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-541827196-172.17.0.18-1599298013235:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35032,DS-4843e1c8-80c5-450f-aa3e-2abf8985a658,DISK], DatanodeInfoWithStorage[127.0.0.1:45920,DS-1ff54908-f766-43f9-907d-b3fb524839ff,DISK], DatanodeInfoWithStorage[127.0.0.1:45236,DS-b67f22f9-8ff3-4fb5-b4fb-8ada8facdd1f,DISK], DatanodeInfoWithStorage[127.0.0.1:44759,DS-5cd37567-340c-431c-8e97-29f2a334b43e,DISK], DatanodeInfoWithStorage[127.0.0.1:35190,DS-b5d0be2c-50ae-4baf-804d-451c7bc65e07,DISK]]; indices=[2, 3, 4, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-541827196-172.17.0.18-1599298013235:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35032,DS-4843e1c8-80c5-450f-aa3e-2abf8985a658,DISK], DatanodeInfoWithStorage[127.0.0.1:45920,DS-1ff54908-f766-43f9-907d-b3fb524839ff,DISK], DatanodeInfoWithStorage[127.0.0.1:45236,DS-b67f22f9-8ff3-4fb5-b4fb-8ada8facdd1f,DISK], DatanodeInfoWithStorage[127.0.0.1:44759,DS-5cd37567-340c-431c-8e97-29f2a334b43e,DISK], DatanodeInfoWithStorage[127.0.0.1:35190,DS-b5d0be2c-50ae-4baf-804d-451c7bc65e07,DISK]]; indices=[2, 3, 4, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: Zero blocklocations for /ec-10-4/striped_file_10_4. Name node is in safe mode.
The reported blocks 0 needs additional 1 blocks to reach the threshold 0.9990 of total blocks 2.
The minimum number of live datanodes is not required. Safe mode will be turned off automatically once the thresholds have been reached. NamenodeHostName:localhost
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.newSafemodeException(FSNamesystem.java:1476)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1960)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:755)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.getBlockLocations(ClientNamenodeProtocolServerSideTranslatorPB.java:439)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

stackTrace: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.SafeModeException): Zero blocklocations for /ec-10-4/striped_file_10_4. Name node is in safe mode.
The reported blocks 0 needs additional 1 blocks to reach the threshold 0.9990 of total blocks 2.
The minimum number of live datanodes is not required. Safe mode will be turned off automatically once the thresholds have been reached. NamenodeHostName:localhost
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.newSafemodeException(FSNamesystem.java:1476)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1960)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:755)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.getBlockLocations(ClientNamenodeProtocolServerSideTranslatorPB.java:439)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)
	at org.apache.hadoop.ipc.Client.call(Client.java:1491)
	at org.apache.hadoop.ipc.Client.call(Client.java:1388)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)
	at com.sun.proxy.$Proxy23.getBlockLocations(Unknown Source)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.getBlockLocations(ClientNamenodeProtocolTranslatorPB.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)
	at com.sun.proxy.$Proxy24.getBlockLocations(Unknown Source)
	at org.apache.hadoop.hdfs.DFSClient.callGetBlockLocations(DFSClient.java:864)
	at org.apache.hadoop.hdfs.DFSClient.getLocatedBlocks(DFSClient.java:853)
	at org.apache.hadoop.hdfs.DFSClient.getLocatedBlocks(DFSClient.java:842)
	at org.apache.hadoop.hdfs.DFSClient.open(DFSClient.java:1010)
	at org.apache.hadoop.hdfs.DistributedFileSystem$4.doCall(DistributedFileSystem.java:319)
	at org.apache.hadoop.hdfs.DistributedFileSystem$4.doCall(DistributedFileSystem.java:315)
	at org.apache.hadoop.fs.FileSystemLinkResolver.resolve(FileSystemLinkResolver.java:81)
	at org.apache.hadoop.hdfs.DistributedFileSystem.open(DistributedFileSystem.java:327)
	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:899)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1040653483-172.17.0.18-1599298518422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38800,DS-e2503a25-9060-4510-b336-1042338a923a,DISK], DatanodeInfoWithStorage[127.0.0.1:45522,DS-6bdbdeb1-3ea1-4eb4-94eb-768d95aac025,DISK], DatanodeInfoWithStorage[127.0.0.1:46783,DS-32501a88-1b9f-4a69-b43e-f6747e8b4864,DISK], DatanodeInfoWithStorage[127.0.0.1:46129,DS-1af179ca-80d6-4084-9066-08e5202ebba0,DISK], DatanodeInfoWithStorage[127.0.0.1:44843,DS-5a3e308b-fc62-45d3-ad16-4dface87fe76,DISK]]; indices=[0, 2, 4, 7, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1040653483-172.17.0.18-1599298518422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38800,DS-e2503a25-9060-4510-b336-1042338a923a,DISK], DatanodeInfoWithStorage[127.0.0.1:45522,DS-6bdbdeb1-3ea1-4eb4-94eb-768d95aac025,DISK], DatanodeInfoWithStorage[127.0.0.1:46783,DS-32501a88-1b9f-4a69-b43e-f6747e8b4864,DISK], DatanodeInfoWithStorage[127.0.0.1:46129,DS-1af179ca-80d6-4084-9066-08e5202ebba0,DISK], DatanodeInfoWithStorage[127.0.0.1:44843,DS-5a3e308b-fc62-45d3-ad16-4dface87fe76,DISK]]; indices=[0, 2, 4, 7, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1040653483-172.17.0.18-1599298518422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38800,DS-e2503a25-9060-4510-b336-1042338a923a,DISK], DatanodeInfoWithStorage[127.0.0.1:45522,DS-6bdbdeb1-3ea1-4eb4-94eb-768d95aac025,DISK], DatanodeInfoWithStorage[127.0.0.1:46783,DS-32501a88-1b9f-4a69-b43e-f6747e8b4864,DISK], DatanodeInfoWithStorage[127.0.0.1:46129,DS-1af179ca-80d6-4084-9066-08e5202ebba0,DISK], DatanodeInfoWithStorage[127.0.0.1:44843,DS-5a3e308b-fc62-45d3-ad16-4dface87fe76,DISK]]; indices=[0, 2, 4, 7, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1040653483-172.17.0.18-1599298518422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38800,DS-e2503a25-9060-4510-b336-1042338a923a,DISK], DatanodeInfoWithStorage[127.0.0.1:45522,DS-6bdbdeb1-3ea1-4eb4-94eb-768d95aac025,DISK], DatanodeInfoWithStorage[127.0.0.1:46783,DS-32501a88-1b9f-4a69-b43e-f6747e8b4864,DISK], DatanodeInfoWithStorage[127.0.0.1:46129,DS-1af179ca-80d6-4084-9066-08e5202ebba0,DISK], DatanodeInfoWithStorage[127.0.0.1:44843,DS-5a3e308b-fc62-45d3-ad16-4dface87fe76,DISK]]; indices=[0, 2, 4, 7, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1158779641-172.17.0.18-1599298579735:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39594,DS-4642b22f-bc6e-4628-93f5-151cab2f6a35,DISK], DatanodeInfoWithStorage[127.0.0.1:39633,DS-74588250-40e1-45da-9f0b-ba8e4ce98754,DISK], DatanodeInfoWithStorage[127.0.0.1:42496,DS-ca7ec5cd-bc84-4ecb-afc1-3d47fe87f67f,DISK], DatanodeInfoWithStorage[127.0.0.1:39792,DS-9f3056df-edbc-4a2a-b0ec-7bc08fc97d05,DISK], DatanodeInfoWithStorage[127.0.0.1:34403,DS-b20d0b4f-e496-43f7-9ecc-2b055bc718da,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-4300f63b-7d0e-464c-bec3-95f26d4c061b,DISK], DatanodeInfoWithStorage[127.0.0.1:40756,DS-dae95628-7a0f-4476-be9a-cf0d060c3d60,DISK]]; indices=[2, 3, 4, 5, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1158779641-172.17.0.18-1599298579735:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39594,DS-4642b22f-bc6e-4628-93f5-151cab2f6a35,DISK], DatanodeInfoWithStorage[127.0.0.1:39633,DS-74588250-40e1-45da-9f0b-ba8e4ce98754,DISK], DatanodeInfoWithStorage[127.0.0.1:42496,DS-ca7ec5cd-bc84-4ecb-afc1-3d47fe87f67f,DISK], DatanodeInfoWithStorage[127.0.0.1:39792,DS-9f3056df-edbc-4a2a-b0ec-7bc08fc97d05,DISK], DatanodeInfoWithStorage[127.0.0.1:34403,DS-b20d0b4f-e496-43f7-9ecc-2b055bc718da,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-4300f63b-7d0e-464c-bec3-95f26d4c061b,DISK], DatanodeInfoWithStorage[127.0.0.1:40756,DS-dae95628-7a0f-4476-be9a-cf0d060c3d60,DISK]]; indices=[2, 3, 4, 5, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1158779641-172.17.0.18-1599298579735:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39594,DS-4642b22f-bc6e-4628-93f5-151cab2f6a35,DISK], DatanodeInfoWithStorage[127.0.0.1:39633,DS-74588250-40e1-45da-9f0b-ba8e4ce98754,DISK], DatanodeInfoWithStorage[127.0.0.1:42496,DS-ca7ec5cd-bc84-4ecb-afc1-3d47fe87f67f,DISK], DatanodeInfoWithStorage[127.0.0.1:39792,DS-9f3056df-edbc-4a2a-b0ec-7bc08fc97d05,DISK], DatanodeInfoWithStorage[127.0.0.1:34403,DS-b20d0b4f-e496-43f7-9ecc-2b055bc718da,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-4300f63b-7d0e-464c-bec3-95f26d4c061b,DISK], DatanodeInfoWithStorage[127.0.0.1:40756,DS-dae95628-7a0f-4476-be9a-cf0d060c3d60,DISK]]; indices=[2, 3, 4, 5, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1158779641-172.17.0.18-1599298579735:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39594,DS-4642b22f-bc6e-4628-93f5-151cab2f6a35,DISK], DatanodeInfoWithStorage[127.0.0.1:39633,DS-74588250-40e1-45da-9f0b-ba8e4ce98754,DISK], DatanodeInfoWithStorage[127.0.0.1:42496,DS-ca7ec5cd-bc84-4ecb-afc1-3d47fe87f67f,DISK], DatanodeInfoWithStorage[127.0.0.1:39792,DS-9f3056df-edbc-4a2a-b0ec-7bc08fc97d05,DISK], DatanodeInfoWithStorage[127.0.0.1:34403,DS-b20d0b4f-e496-43f7-9ecc-2b055bc718da,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-4300f63b-7d0e-464c-bec3-95f26d4c061b,DISK], DatanodeInfoWithStorage[127.0.0.1:40756,DS-dae95628-7a0f-4476-be9a-cf0d060c3d60,DISK]]; indices=[2, 3, 4, 5, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-218957114-172.17.0.18-1599298607357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34017,DS-94f36938-267e-49ce-854c-35b402d16d59,DISK], DatanodeInfoWithStorage[127.0.0.1:45701,DS-f4197742-3967-4ae2-a979-81ffe656a687,DISK], DatanodeInfoWithStorage[127.0.0.1:43475,DS-12ad250a-75a8-4b64-9ab6-86b668c5078f,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-435189a0-41c2-489d-b1b2-c68e151cb6a5,DISK], DatanodeInfoWithStorage[127.0.0.1:40306,DS-815df09f-a0d0-4b4a-a75f-ab685856d7a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42100,DS-6951e8ac-5217-4f40-8165-1c0020d907e9,DISK], DatanodeInfoWithStorage[127.0.0.1:44494,DS-9269c7b6-81f6-4b0b-8712-49dda7d8481d,DISK]]; indices=[1, 2, 3, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-218957114-172.17.0.18-1599298607357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34017,DS-94f36938-267e-49ce-854c-35b402d16d59,DISK], DatanodeInfoWithStorage[127.0.0.1:45701,DS-f4197742-3967-4ae2-a979-81ffe656a687,DISK], DatanodeInfoWithStorage[127.0.0.1:43475,DS-12ad250a-75a8-4b64-9ab6-86b668c5078f,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-435189a0-41c2-489d-b1b2-c68e151cb6a5,DISK], DatanodeInfoWithStorage[127.0.0.1:40306,DS-815df09f-a0d0-4b4a-a75f-ab685856d7a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42100,DS-6951e8ac-5217-4f40-8165-1c0020d907e9,DISK], DatanodeInfoWithStorage[127.0.0.1:44494,DS-9269c7b6-81f6-4b0b-8712-49dda7d8481d,DISK]]; indices=[1, 2, 3, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-218957114-172.17.0.18-1599298607357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34017,DS-94f36938-267e-49ce-854c-35b402d16d59,DISK], DatanodeInfoWithStorage[127.0.0.1:45701,DS-f4197742-3967-4ae2-a979-81ffe656a687,DISK], DatanodeInfoWithStorage[127.0.0.1:43475,DS-12ad250a-75a8-4b64-9ab6-86b668c5078f,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-435189a0-41c2-489d-b1b2-c68e151cb6a5,DISK], DatanodeInfoWithStorage[127.0.0.1:40306,DS-815df09f-a0d0-4b4a-a75f-ab685856d7a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42100,DS-6951e8ac-5217-4f40-8165-1c0020d907e9,DISK], DatanodeInfoWithStorage[127.0.0.1:44494,DS-9269c7b6-81f6-4b0b-8712-49dda7d8481d,DISK]]; indices=[1, 2, 3, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-218957114-172.17.0.18-1599298607357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34017,DS-94f36938-267e-49ce-854c-35b402d16d59,DISK], DatanodeInfoWithStorage[127.0.0.1:45701,DS-f4197742-3967-4ae2-a979-81ffe656a687,DISK], DatanodeInfoWithStorage[127.0.0.1:43475,DS-12ad250a-75a8-4b64-9ab6-86b668c5078f,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-435189a0-41c2-489d-b1b2-c68e151cb6a5,DISK], DatanodeInfoWithStorage[127.0.0.1:40306,DS-815df09f-a0d0-4b4a-a75f-ab685856d7a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42100,DS-6951e8ac-5217-4f40-8165-1c0020d907e9,DISK], DatanodeInfoWithStorage[127.0.0.1:44494,DS-9269c7b6-81f6-4b0b-8712-49dda7d8481d,DISK]]; indices=[1, 2, 3, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1724847597-172.17.0.18-1599298814719:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34158,DS-1548a350-33b3-4ebc-8b06-a8fb54cabe1f,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-346d335a-69ac-4e19-876e-594426fe0cfa,DISK], DatanodeInfoWithStorage[127.0.0.1:45676,DS-89558744-390b-4949-8122-1b3fa52ee5ec,DISK], DatanodeInfoWithStorage[127.0.0.1:46021,DS-9b47fdd6-4cf5-4201-a3a7-23ae6ba22673,DISK], DatanodeInfoWithStorage[127.0.0.1:44642,DS-e6105e7e-9633-40d4-8067-74b5aa62dd75,DISK], DatanodeInfoWithStorage[127.0.0.1:36048,DS-b0f0c328-0db2-49db-b33e-26e1cc54727e,DISK], DatanodeInfoWithStorage[127.0.0.1:35310,DS-17fddf68-1f17-4d84-bd7b-c7d2d7f66cb8,DISK]]; indices=[1, 3, 4, 5, 6, 7, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1724847597-172.17.0.18-1599298814719:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34158,DS-1548a350-33b3-4ebc-8b06-a8fb54cabe1f,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-346d335a-69ac-4e19-876e-594426fe0cfa,DISK], DatanodeInfoWithStorage[127.0.0.1:45676,DS-89558744-390b-4949-8122-1b3fa52ee5ec,DISK], DatanodeInfoWithStorage[127.0.0.1:46021,DS-9b47fdd6-4cf5-4201-a3a7-23ae6ba22673,DISK], DatanodeInfoWithStorage[127.0.0.1:44642,DS-e6105e7e-9633-40d4-8067-74b5aa62dd75,DISK], DatanodeInfoWithStorage[127.0.0.1:36048,DS-b0f0c328-0db2-49db-b33e-26e1cc54727e,DISK], DatanodeInfoWithStorage[127.0.0.1:35310,DS-17fddf68-1f17-4d84-bd7b-c7d2d7f66cb8,DISK]]; indices=[1, 3, 4, 5, 6, 7, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1724847597-172.17.0.18-1599298814719:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34158,DS-1548a350-33b3-4ebc-8b06-a8fb54cabe1f,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-346d335a-69ac-4e19-876e-594426fe0cfa,DISK], DatanodeInfoWithStorage[127.0.0.1:45676,DS-89558744-390b-4949-8122-1b3fa52ee5ec,DISK], DatanodeInfoWithStorage[127.0.0.1:46021,DS-9b47fdd6-4cf5-4201-a3a7-23ae6ba22673,DISK], DatanodeInfoWithStorage[127.0.0.1:44642,DS-e6105e7e-9633-40d4-8067-74b5aa62dd75,DISK], DatanodeInfoWithStorage[127.0.0.1:36048,DS-b0f0c328-0db2-49db-b33e-26e1cc54727e,DISK], DatanodeInfoWithStorage[127.0.0.1:35310,DS-17fddf68-1f17-4d84-bd7b-c7d2d7f66cb8,DISK]]; indices=[1, 3, 4, 5, 6, 7, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1724847597-172.17.0.18-1599298814719:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34158,DS-1548a350-33b3-4ebc-8b06-a8fb54cabe1f,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-346d335a-69ac-4e19-876e-594426fe0cfa,DISK], DatanodeInfoWithStorage[127.0.0.1:45676,DS-89558744-390b-4949-8122-1b3fa52ee5ec,DISK], DatanodeInfoWithStorage[127.0.0.1:46021,DS-9b47fdd6-4cf5-4201-a3a7-23ae6ba22673,DISK], DatanodeInfoWithStorage[127.0.0.1:44642,DS-e6105e7e-9633-40d4-8067-74b5aa62dd75,DISK], DatanodeInfoWithStorage[127.0.0.1:36048,DS-b0f0c328-0db2-49db-b33e-26e1cc54727e,DISK], DatanodeInfoWithStorage[127.0.0.1:35310,DS-17fddf68-1f17-4d84-bd7b-c7d2d7f66cb8,DISK]]; indices=[1, 3, 4, 5, 6, 7, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2124436700-172.17.0.18-1599298842430:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39495,DS-4dc43312-0ab0-4dbd-91be-1ebe831b6cad,DISK], DatanodeInfoWithStorage[127.0.0.1:38669,DS-f89cf56a-7516-4464-b6f8-0e28132c256c,DISK], DatanodeInfoWithStorage[127.0.0.1:39156,DS-b7e9d427-24ad-495d-8986-3db1c8759d2c,DISK], DatanodeInfoWithStorage[127.0.0.1:34198,DS-90e6ef3f-7dae-4c35-b827-09fc56fb2354,DISK], DatanodeInfoWithStorage[127.0.0.1:39918,DS-90315993-355b-4934-92d4-2825409414ee,DISK], DatanodeInfoWithStorage[127.0.0.1:38114,DS-a471cb13-9cfc-4f0c-b570-6af59bf073aa,DISK], DatanodeInfoWithStorage[127.0.0.1:34849,DS-b49e83b1-6662-4451-8d67-b621cf997a2e,DISK]]; indices=[0, 1, 3, 4, 7, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2124436700-172.17.0.18-1599298842430:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39495,DS-4dc43312-0ab0-4dbd-91be-1ebe831b6cad,DISK], DatanodeInfoWithStorage[127.0.0.1:38669,DS-f89cf56a-7516-4464-b6f8-0e28132c256c,DISK], DatanodeInfoWithStorage[127.0.0.1:39156,DS-b7e9d427-24ad-495d-8986-3db1c8759d2c,DISK], DatanodeInfoWithStorage[127.0.0.1:34198,DS-90e6ef3f-7dae-4c35-b827-09fc56fb2354,DISK], DatanodeInfoWithStorage[127.0.0.1:39918,DS-90315993-355b-4934-92d4-2825409414ee,DISK], DatanodeInfoWithStorage[127.0.0.1:38114,DS-a471cb13-9cfc-4f0c-b570-6af59bf073aa,DISK], DatanodeInfoWithStorage[127.0.0.1:34849,DS-b49e83b1-6662-4451-8d67-b621cf997a2e,DISK]]; indices=[0, 1, 3, 4, 7, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2124436700-172.17.0.18-1599298842430:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39495,DS-4dc43312-0ab0-4dbd-91be-1ebe831b6cad,DISK], DatanodeInfoWithStorage[127.0.0.1:38669,DS-f89cf56a-7516-4464-b6f8-0e28132c256c,DISK], DatanodeInfoWithStorage[127.0.0.1:39156,DS-b7e9d427-24ad-495d-8986-3db1c8759d2c,DISK], DatanodeInfoWithStorage[127.0.0.1:34198,DS-90e6ef3f-7dae-4c35-b827-09fc56fb2354,DISK], DatanodeInfoWithStorage[127.0.0.1:39918,DS-90315993-355b-4934-92d4-2825409414ee,DISK], DatanodeInfoWithStorage[127.0.0.1:38114,DS-a471cb13-9cfc-4f0c-b570-6af59bf073aa,DISK], DatanodeInfoWithStorage[127.0.0.1:34849,DS-b49e83b1-6662-4451-8d67-b621cf997a2e,DISK]]; indices=[0, 1, 3, 4, 7, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2124436700-172.17.0.18-1599298842430:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39495,DS-4dc43312-0ab0-4dbd-91be-1ebe831b6cad,DISK], DatanodeInfoWithStorage[127.0.0.1:38669,DS-f89cf56a-7516-4464-b6f8-0e28132c256c,DISK], DatanodeInfoWithStorage[127.0.0.1:39156,DS-b7e9d427-24ad-495d-8986-3db1c8759d2c,DISK], DatanodeInfoWithStorage[127.0.0.1:34198,DS-90e6ef3f-7dae-4c35-b827-09fc56fb2354,DISK], DatanodeInfoWithStorage[127.0.0.1:39918,DS-90315993-355b-4934-92d4-2825409414ee,DISK], DatanodeInfoWithStorage[127.0.0.1:38114,DS-a471cb13-9cfc-4f0c-b570-6af59bf073aa,DISK], DatanodeInfoWithStorage[127.0.0.1:34849,DS-b49e83b1-6662-4451-8d67-b621cf997a2e,DISK]]; indices=[0, 1, 3, 4, 7, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-332995315-172.17.0.18-1599299066391:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45260,DS-82e2d2f7-94d3-4bbf-b06f-34e69d09957d,DISK], DatanodeInfoWithStorage[127.0.0.1:34756,DS-a548ba2d-7b5a-40a7-a3bb-4086a4b1020b,DISK], DatanodeInfoWithStorage[127.0.0.1:45836,DS-7e66c14d-c3eb-40ca-a1b9-bbd32d9a6020,DISK], DatanodeInfoWithStorage[127.0.0.1:38295,DS-4a2cef16-1c54-4acc-ae0d-a3280f83759f,DISK], DatanodeInfoWithStorage[127.0.0.1:42540,DS-1c544a51-a9bb-42ac-b467-3bf6ac4e9a68,DISK], DatanodeInfoWithStorage[127.0.0.1:37853,DS-496d3a49-109e-43ab-8643-779f741d2cd5,DISK], DatanodeInfoWithStorage[127.0.0.1:38850,DS-e2585a43-28bd-4a25-9fc5-34f40158d1ba,DISK]]; indices=[1, 2, 4, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-332995315-172.17.0.18-1599299066391:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45260,DS-82e2d2f7-94d3-4bbf-b06f-34e69d09957d,DISK], DatanodeInfoWithStorage[127.0.0.1:34756,DS-a548ba2d-7b5a-40a7-a3bb-4086a4b1020b,DISK], DatanodeInfoWithStorage[127.0.0.1:45836,DS-7e66c14d-c3eb-40ca-a1b9-bbd32d9a6020,DISK], DatanodeInfoWithStorage[127.0.0.1:38295,DS-4a2cef16-1c54-4acc-ae0d-a3280f83759f,DISK], DatanodeInfoWithStorage[127.0.0.1:42540,DS-1c544a51-a9bb-42ac-b467-3bf6ac4e9a68,DISK], DatanodeInfoWithStorage[127.0.0.1:37853,DS-496d3a49-109e-43ab-8643-779f741d2cd5,DISK], DatanodeInfoWithStorage[127.0.0.1:38850,DS-e2585a43-28bd-4a25-9fc5-34f40158d1ba,DISK]]; indices=[1, 2, 4, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-332995315-172.17.0.18-1599299066391:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45260,DS-82e2d2f7-94d3-4bbf-b06f-34e69d09957d,DISK], DatanodeInfoWithStorage[127.0.0.1:34756,DS-a548ba2d-7b5a-40a7-a3bb-4086a4b1020b,DISK], DatanodeInfoWithStorage[127.0.0.1:45836,DS-7e66c14d-c3eb-40ca-a1b9-bbd32d9a6020,DISK], DatanodeInfoWithStorage[127.0.0.1:38295,DS-4a2cef16-1c54-4acc-ae0d-a3280f83759f,DISK], DatanodeInfoWithStorage[127.0.0.1:42540,DS-1c544a51-a9bb-42ac-b467-3bf6ac4e9a68,DISK], DatanodeInfoWithStorage[127.0.0.1:37853,DS-496d3a49-109e-43ab-8643-779f741d2cd5,DISK], DatanodeInfoWithStorage[127.0.0.1:38850,DS-e2585a43-28bd-4a25-9fc5-34f40158d1ba,DISK]]; indices=[1, 2, 4, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-332995315-172.17.0.18-1599299066391:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45260,DS-82e2d2f7-94d3-4bbf-b06f-34e69d09957d,DISK], DatanodeInfoWithStorage[127.0.0.1:34756,DS-a548ba2d-7b5a-40a7-a3bb-4086a4b1020b,DISK], DatanodeInfoWithStorage[127.0.0.1:45836,DS-7e66c14d-c3eb-40ca-a1b9-bbd32d9a6020,DISK], DatanodeInfoWithStorage[127.0.0.1:38295,DS-4a2cef16-1c54-4acc-ae0d-a3280f83759f,DISK], DatanodeInfoWithStorage[127.0.0.1:42540,DS-1c544a51-a9bb-42ac-b467-3bf6ac4e9a68,DISK], DatanodeInfoWithStorage[127.0.0.1:37853,DS-496d3a49-109e-43ab-8643-779f741d2cd5,DISK], DatanodeInfoWithStorage[127.0.0.1:38850,DS-e2585a43-28bd-4a25-9fc5-34f40158d1ba,DISK]]; indices=[1, 2, 4, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1956712689-172.17.0.18-1599299157995:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43625,DS-2478fa0e-79e0-4732-85a4-6eb698816f67,DISK], DatanodeInfoWithStorage[127.0.0.1:46316,DS-66259250-c81b-4a75-b123-9affedde2a22,DISK], DatanodeInfoWithStorage[127.0.0.1:39959,DS-5e22cfda-9c06-44d9-847e-d4a20c9c5521,DISK], DatanodeInfoWithStorage[127.0.0.1:38032,DS-dfd73d58-fccb-4a57-b6e9-764f794d64bb,DISK], DatanodeInfoWithStorage[127.0.0.1:41201,DS-ad615c05-ffaa-494b-94ea-dd3cffe54c14,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bb602346-46b7-4801-84d4-d18617be5726,DISK]]; indices=[2, 3, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1956712689-172.17.0.18-1599299157995:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43625,DS-2478fa0e-79e0-4732-85a4-6eb698816f67,DISK], DatanodeInfoWithStorage[127.0.0.1:46316,DS-66259250-c81b-4a75-b123-9affedde2a22,DISK], DatanodeInfoWithStorage[127.0.0.1:39959,DS-5e22cfda-9c06-44d9-847e-d4a20c9c5521,DISK], DatanodeInfoWithStorage[127.0.0.1:38032,DS-dfd73d58-fccb-4a57-b6e9-764f794d64bb,DISK], DatanodeInfoWithStorage[127.0.0.1:41201,DS-ad615c05-ffaa-494b-94ea-dd3cffe54c14,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bb602346-46b7-4801-84d4-d18617be5726,DISK]]; indices=[2, 3, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1956712689-172.17.0.18-1599299157995:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43625,DS-2478fa0e-79e0-4732-85a4-6eb698816f67,DISK], DatanodeInfoWithStorage[127.0.0.1:46316,DS-66259250-c81b-4a75-b123-9affedde2a22,DISK], DatanodeInfoWithStorage[127.0.0.1:39959,DS-5e22cfda-9c06-44d9-847e-d4a20c9c5521,DISK], DatanodeInfoWithStorage[127.0.0.1:38032,DS-dfd73d58-fccb-4a57-b6e9-764f794d64bb,DISK], DatanodeInfoWithStorage[127.0.0.1:41201,DS-ad615c05-ffaa-494b-94ea-dd3cffe54c14,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bb602346-46b7-4801-84d4-d18617be5726,DISK]]; indices=[2, 3, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1956712689-172.17.0.18-1599299157995:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43625,DS-2478fa0e-79e0-4732-85a4-6eb698816f67,DISK], DatanodeInfoWithStorage[127.0.0.1:46316,DS-66259250-c81b-4a75-b123-9affedde2a22,DISK], DatanodeInfoWithStorage[127.0.0.1:39959,DS-5e22cfda-9c06-44d9-847e-d4a20c9c5521,DISK], DatanodeInfoWithStorage[127.0.0.1:38032,DS-dfd73d58-fccb-4a57-b6e9-764f794d64bb,DISK], DatanodeInfoWithStorage[127.0.0.1:41201,DS-ad615c05-ffaa-494b-94ea-dd3cffe54c14,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bb602346-46b7-4801-84d4-d18617be5726,DISK]]; indices=[2, 3, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-147364388-172.17.0.18-1599299186682:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46700,DS-6d92b7f6-d1bc-427f-a646-252df8e85547,DISK], DatanodeInfoWithStorage[127.0.0.1:42157,DS-846eb1e5-650b-46b1-a7d6-6d731b05f0be,DISK], DatanodeInfoWithStorage[127.0.0.1:34337,DS-b03d118d-3e53-466a-b3fa-da076a780ae0,DISK], DatanodeInfoWithStorage[127.0.0.1:40200,DS-6ea22d24-0635-44b5-a3cb-c60dbbd8803a,DISK], DatanodeInfoWithStorage[127.0.0.1:34130,DS-1021cfa4-d530-477c-9a00-bf79a4ceee57,DISK], DatanodeInfoWithStorage[127.0.0.1:34298,DS-787f51e0-ed1f-4e2a-83bf-a941dbb399c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38445,DS-77639480-c009-4f3d-8d47-5b390f08be90,DISK]]; indices=[2, 3, 5, 6, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-147364388-172.17.0.18-1599299186682:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46700,DS-6d92b7f6-d1bc-427f-a646-252df8e85547,DISK], DatanodeInfoWithStorage[127.0.0.1:42157,DS-846eb1e5-650b-46b1-a7d6-6d731b05f0be,DISK], DatanodeInfoWithStorage[127.0.0.1:34337,DS-b03d118d-3e53-466a-b3fa-da076a780ae0,DISK], DatanodeInfoWithStorage[127.0.0.1:40200,DS-6ea22d24-0635-44b5-a3cb-c60dbbd8803a,DISK], DatanodeInfoWithStorage[127.0.0.1:34130,DS-1021cfa4-d530-477c-9a00-bf79a4ceee57,DISK], DatanodeInfoWithStorage[127.0.0.1:34298,DS-787f51e0-ed1f-4e2a-83bf-a941dbb399c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38445,DS-77639480-c009-4f3d-8d47-5b390f08be90,DISK]]; indices=[2, 3, 5, 6, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-147364388-172.17.0.18-1599299186682:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46700,DS-6d92b7f6-d1bc-427f-a646-252df8e85547,DISK], DatanodeInfoWithStorage[127.0.0.1:42157,DS-846eb1e5-650b-46b1-a7d6-6d731b05f0be,DISK], DatanodeInfoWithStorage[127.0.0.1:34337,DS-b03d118d-3e53-466a-b3fa-da076a780ae0,DISK], DatanodeInfoWithStorage[127.0.0.1:40200,DS-6ea22d24-0635-44b5-a3cb-c60dbbd8803a,DISK], DatanodeInfoWithStorage[127.0.0.1:34130,DS-1021cfa4-d530-477c-9a00-bf79a4ceee57,DISK], DatanodeInfoWithStorage[127.0.0.1:34298,DS-787f51e0-ed1f-4e2a-83bf-a941dbb399c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38445,DS-77639480-c009-4f3d-8d47-5b390f08be90,DISK]]; indices=[2, 3, 5, 6, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-147364388-172.17.0.18-1599299186682:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46700,DS-6d92b7f6-d1bc-427f-a646-252df8e85547,DISK], DatanodeInfoWithStorage[127.0.0.1:42157,DS-846eb1e5-650b-46b1-a7d6-6d731b05f0be,DISK], DatanodeInfoWithStorage[127.0.0.1:34337,DS-b03d118d-3e53-466a-b3fa-da076a780ae0,DISK], DatanodeInfoWithStorage[127.0.0.1:40200,DS-6ea22d24-0635-44b5-a3cb-c60dbbd8803a,DISK], DatanodeInfoWithStorage[127.0.0.1:34130,DS-1021cfa4-d530-477c-9a00-bf79a4ceee57,DISK], DatanodeInfoWithStorage[127.0.0.1:34298,DS-787f51e0-ed1f-4e2a-83bf-a941dbb399c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38445,DS-77639480-c009-4f3d-8d47-5b390f08be90,DISK]]; indices=[2, 3, 5, 6, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1841718685-172.17.0.18-1599299281393:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41641,DS-e90afe88-9798-4605-a458-ce8081ba5309,DISK], DatanodeInfoWithStorage[127.0.0.1:46870,DS-1be8f1f5-c9c9-4d24-8fcd-c3828ce864e7,DISK], DatanodeInfoWithStorage[127.0.0.1:37558,DS-b17903d5-c5c7-4728-9191-255a6e113680,DISK], DatanodeInfoWithStorage[127.0.0.1:39799,DS-9ad48cfe-3ed4-4dc1-b413-b1b92e28d54b,DISK], DatanodeInfoWithStorage[127.0.0.1:35409,DS-8967d198-bf71-47ee-a575-a6b6e2fa7988,DISK], DatanodeInfoWithStorage[127.0.0.1:46067,DS-e9992ebc-85be-48ba-aefe-6eec2d1dae01,DISK], DatanodeInfoWithStorage[127.0.0.1:38060,DS-610d158f-387b-444d-bfa2-ffcf90f45f53,DISK]]; indices=[1, 4, 5, 6, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1841718685-172.17.0.18-1599299281393:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41641,DS-e90afe88-9798-4605-a458-ce8081ba5309,DISK], DatanodeInfoWithStorage[127.0.0.1:46870,DS-1be8f1f5-c9c9-4d24-8fcd-c3828ce864e7,DISK], DatanodeInfoWithStorage[127.0.0.1:37558,DS-b17903d5-c5c7-4728-9191-255a6e113680,DISK], DatanodeInfoWithStorage[127.0.0.1:39799,DS-9ad48cfe-3ed4-4dc1-b413-b1b92e28d54b,DISK], DatanodeInfoWithStorage[127.0.0.1:35409,DS-8967d198-bf71-47ee-a575-a6b6e2fa7988,DISK], DatanodeInfoWithStorage[127.0.0.1:46067,DS-e9992ebc-85be-48ba-aefe-6eec2d1dae01,DISK], DatanodeInfoWithStorage[127.0.0.1:38060,DS-610d158f-387b-444d-bfa2-ffcf90f45f53,DISK]]; indices=[1, 4, 5, 6, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1841718685-172.17.0.18-1599299281393:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41641,DS-e90afe88-9798-4605-a458-ce8081ba5309,DISK], DatanodeInfoWithStorage[127.0.0.1:46870,DS-1be8f1f5-c9c9-4d24-8fcd-c3828ce864e7,DISK], DatanodeInfoWithStorage[127.0.0.1:37558,DS-b17903d5-c5c7-4728-9191-255a6e113680,DISK], DatanodeInfoWithStorage[127.0.0.1:39799,DS-9ad48cfe-3ed4-4dc1-b413-b1b92e28d54b,DISK], DatanodeInfoWithStorage[127.0.0.1:35409,DS-8967d198-bf71-47ee-a575-a6b6e2fa7988,DISK], DatanodeInfoWithStorage[127.0.0.1:46067,DS-e9992ebc-85be-48ba-aefe-6eec2d1dae01,DISK], DatanodeInfoWithStorage[127.0.0.1:38060,DS-610d158f-387b-444d-bfa2-ffcf90f45f53,DISK]]; indices=[1, 4, 5, 6, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1841718685-172.17.0.18-1599299281393:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41641,DS-e90afe88-9798-4605-a458-ce8081ba5309,DISK], DatanodeInfoWithStorage[127.0.0.1:46870,DS-1be8f1f5-c9c9-4d24-8fcd-c3828ce864e7,DISK], DatanodeInfoWithStorage[127.0.0.1:37558,DS-b17903d5-c5c7-4728-9191-255a6e113680,DISK], DatanodeInfoWithStorage[127.0.0.1:39799,DS-9ad48cfe-3ed4-4dc1-b413-b1b92e28d54b,DISK], DatanodeInfoWithStorage[127.0.0.1:35409,DS-8967d198-bf71-47ee-a575-a6b6e2fa7988,DISK], DatanodeInfoWithStorage[127.0.0.1:46067,DS-e9992ebc-85be-48ba-aefe-6eec2d1dae01,DISK], DatanodeInfoWithStorage[127.0.0.1:38060,DS-610d158f-387b-444d-bfa2-ffcf90f45f53,DISK]]; indices=[1, 4, 5, 6, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-749556437-172.17.0.18-1599299312436:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44379,DS-8a0a99d8-48ed-47a6-bd4d-e419d492bc42,DISK], DatanodeInfoWithStorage[127.0.0.1:36150,DS-71e53020-bab1-4c5f-9ba3-288ff03b7d19,DISK], DatanodeInfoWithStorage[127.0.0.1:36324,DS-bec57a08-981c-4ccd-afc2-d157299acdaf,DISK], DatanodeInfoWithStorage[127.0.0.1:41754,DS-4a710f0b-e140-46c5-ae38-5f0d82d8ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:33235,DS-de8b40cd-e101-43c3-8252-ae4731c5f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:46447,DS-bdbd93ac-5175-4afe-8273-8cfd9e427ea7,DISK], DatanodeInfoWithStorage[127.0.0.1:45843,DS-8c8f080b-f77f-47b4-9574-7d44ad9a4984,DISK]]; indices=[0, 1, 2, 5, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-749556437-172.17.0.18-1599299312436:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44379,DS-8a0a99d8-48ed-47a6-bd4d-e419d492bc42,DISK], DatanodeInfoWithStorage[127.0.0.1:36150,DS-71e53020-bab1-4c5f-9ba3-288ff03b7d19,DISK], DatanodeInfoWithStorage[127.0.0.1:36324,DS-bec57a08-981c-4ccd-afc2-d157299acdaf,DISK], DatanodeInfoWithStorage[127.0.0.1:41754,DS-4a710f0b-e140-46c5-ae38-5f0d82d8ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:33235,DS-de8b40cd-e101-43c3-8252-ae4731c5f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:46447,DS-bdbd93ac-5175-4afe-8273-8cfd9e427ea7,DISK], DatanodeInfoWithStorage[127.0.0.1:45843,DS-8c8f080b-f77f-47b4-9574-7d44ad9a4984,DISK]]; indices=[0, 1, 2, 5, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-749556437-172.17.0.18-1599299312436:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44379,DS-8a0a99d8-48ed-47a6-bd4d-e419d492bc42,DISK], DatanodeInfoWithStorage[127.0.0.1:36150,DS-71e53020-bab1-4c5f-9ba3-288ff03b7d19,DISK], DatanodeInfoWithStorage[127.0.0.1:36324,DS-bec57a08-981c-4ccd-afc2-d157299acdaf,DISK], DatanodeInfoWithStorage[127.0.0.1:41754,DS-4a710f0b-e140-46c5-ae38-5f0d82d8ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:33235,DS-de8b40cd-e101-43c3-8252-ae4731c5f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:46447,DS-bdbd93ac-5175-4afe-8273-8cfd9e427ea7,DISK], DatanodeInfoWithStorage[127.0.0.1:45843,DS-8c8f080b-f77f-47b4-9574-7d44ad9a4984,DISK]]; indices=[0, 1, 2, 5, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-749556437-172.17.0.18-1599299312436:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44379,DS-8a0a99d8-48ed-47a6-bd4d-e419d492bc42,DISK], DatanodeInfoWithStorage[127.0.0.1:36150,DS-71e53020-bab1-4c5f-9ba3-288ff03b7d19,DISK], DatanodeInfoWithStorage[127.0.0.1:36324,DS-bec57a08-981c-4ccd-afc2-d157299acdaf,DISK], DatanodeInfoWithStorage[127.0.0.1:41754,DS-4a710f0b-e140-46c5-ae38-5f0d82d8ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:33235,DS-de8b40cd-e101-43c3-8252-ae4731c5f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:46447,DS-bdbd93ac-5175-4afe-8273-8cfd9e427ea7,DISK], DatanodeInfoWithStorage[127.0.0.1:45843,DS-8c8f080b-f77f-47b4-9574-7d44ad9a4984,DISK]]; indices=[0, 1, 2, 5, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1161912455-172.17.0.18-1599299337601:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41853,DS-4af1966a-ceca-4718-bc4b-61dd5ebabc6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41539,DS-4087c274-89a9-4e5d-98c0-84bcd86e09bf,DISK], DatanodeInfoWithStorage[127.0.0.1:46332,DS-ec6a9df9-dd22-491a-a614-a1e320e23f08,DISK], DatanodeInfoWithStorage[127.0.0.1:46435,DS-1bdfd8d4-ba13-4564-b664-c4b8c0a9128e,DISK], DatanodeInfoWithStorage[127.0.0.1:36330,DS-02de5358-5e80-4f41-a201-d1918e61317d,DISK], DatanodeInfoWithStorage[127.0.0.1:42333,DS-7a9ca727-6eb9-49ec-b46e-7c22f9c8fa00,DISK]]; indices=[1, 7, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1161912455-172.17.0.18-1599299337601:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41853,DS-4af1966a-ceca-4718-bc4b-61dd5ebabc6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41539,DS-4087c274-89a9-4e5d-98c0-84bcd86e09bf,DISK], DatanodeInfoWithStorage[127.0.0.1:46332,DS-ec6a9df9-dd22-491a-a614-a1e320e23f08,DISK], DatanodeInfoWithStorage[127.0.0.1:46435,DS-1bdfd8d4-ba13-4564-b664-c4b8c0a9128e,DISK], DatanodeInfoWithStorage[127.0.0.1:36330,DS-02de5358-5e80-4f41-a201-d1918e61317d,DISK], DatanodeInfoWithStorage[127.0.0.1:42333,DS-7a9ca727-6eb9-49ec-b46e-7c22f9c8fa00,DISK]]; indices=[1, 7, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1161912455-172.17.0.18-1599299337601:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41853,DS-4af1966a-ceca-4718-bc4b-61dd5ebabc6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41539,DS-4087c274-89a9-4e5d-98c0-84bcd86e09bf,DISK], DatanodeInfoWithStorage[127.0.0.1:46332,DS-ec6a9df9-dd22-491a-a614-a1e320e23f08,DISK], DatanodeInfoWithStorage[127.0.0.1:46435,DS-1bdfd8d4-ba13-4564-b664-c4b8c0a9128e,DISK], DatanodeInfoWithStorage[127.0.0.1:36330,DS-02de5358-5e80-4f41-a201-d1918e61317d,DISK], DatanodeInfoWithStorage[127.0.0.1:42333,DS-7a9ca727-6eb9-49ec-b46e-7c22f9c8fa00,DISK]]; indices=[1, 7, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1161912455-172.17.0.18-1599299337601:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41853,DS-4af1966a-ceca-4718-bc4b-61dd5ebabc6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41539,DS-4087c274-89a9-4e5d-98c0-84bcd86e09bf,DISK], DatanodeInfoWithStorage[127.0.0.1:46332,DS-ec6a9df9-dd22-491a-a614-a1e320e23f08,DISK], DatanodeInfoWithStorage[127.0.0.1:46435,DS-1bdfd8d4-ba13-4564-b664-c4b8c0a9128e,DISK], DatanodeInfoWithStorage[127.0.0.1:36330,DS-02de5358-5e80-4f41-a201-d1918e61317d,DISK], DatanodeInfoWithStorage[127.0.0.1:42333,DS-7a9ca727-6eb9-49ec-b46e-7c22f9c8fa00,DISK]]; indices=[1, 7, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1187275328-172.17.0.18-1599299524077:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43521,DS-74f8d4a9-1941-423d-baa7-d915c7557f50,DISK], DatanodeInfoWithStorage[127.0.0.1:45696,DS-cbfc6c4f-b239-408e-9ce4-f54429d726e4,DISK], DatanodeInfoWithStorage[127.0.0.1:40106,DS-b261625c-36d3-4f83-972e-6970ec6ec158,DISK], DatanodeInfoWithStorage[127.0.0.1:44602,DS-dacf1fc8-f084-4db2-a1f6-019fb7264abc,DISK], DatanodeInfoWithStorage[127.0.0.1:43779,DS-695f6b69-3fd7-4a36-8883-989a59378883,DISK], DatanodeInfoWithStorage[127.0.0.1:38379,DS-4fd94890-8c15-4436-9565-729cd4be05be,DISK], DatanodeInfoWithStorage[127.0.0.1:33563,DS-e6f10b90-5084-4b85-bc04-3f765b31360f,DISK]]; indices=[1, 2, 3, 4, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1187275328-172.17.0.18-1599299524077:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43521,DS-74f8d4a9-1941-423d-baa7-d915c7557f50,DISK], DatanodeInfoWithStorage[127.0.0.1:45696,DS-cbfc6c4f-b239-408e-9ce4-f54429d726e4,DISK], DatanodeInfoWithStorage[127.0.0.1:40106,DS-b261625c-36d3-4f83-972e-6970ec6ec158,DISK], DatanodeInfoWithStorage[127.0.0.1:44602,DS-dacf1fc8-f084-4db2-a1f6-019fb7264abc,DISK], DatanodeInfoWithStorage[127.0.0.1:43779,DS-695f6b69-3fd7-4a36-8883-989a59378883,DISK], DatanodeInfoWithStorage[127.0.0.1:38379,DS-4fd94890-8c15-4436-9565-729cd4be05be,DISK], DatanodeInfoWithStorage[127.0.0.1:33563,DS-e6f10b90-5084-4b85-bc04-3f765b31360f,DISK]]; indices=[1, 2, 3, 4, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1187275328-172.17.0.18-1599299524077:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43521,DS-74f8d4a9-1941-423d-baa7-d915c7557f50,DISK], DatanodeInfoWithStorage[127.0.0.1:45696,DS-cbfc6c4f-b239-408e-9ce4-f54429d726e4,DISK], DatanodeInfoWithStorage[127.0.0.1:40106,DS-b261625c-36d3-4f83-972e-6970ec6ec158,DISK], DatanodeInfoWithStorage[127.0.0.1:44602,DS-dacf1fc8-f084-4db2-a1f6-019fb7264abc,DISK], DatanodeInfoWithStorage[127.0.0.1:43779,DS-695f6b69-3fd7-4a36-8883-989a59378883,DISK], DatanodeInfoWithStorage[127.0.0.1:38379,DS-4fd94890-8c15-4436-9565-729cd4be05be,DISK], DatanodeInfoWithStorage[127.0.0.1:33563,DS-e6f10b90-5084-4b85-bc04-3f765b31360f,DISK]]; indices=[1, 2, 3, 4, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1187275328-172.17.0.18-1599299524077:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43521,DS-74f8d4a9-1941-423d-baa7-d915c7557f50,DISK], DatanodeInfoWithStorage[127.0.0.1:45696,DS-cbfc6c4f-b239-408e-9ce4-f54429d726e4,DISK], DatanodeInfoWithStorage[127.0.0.1:40106,DS-b261625c-36d3-4f83-972e-6970ec6ec158,DISK], DatanodeInfoWithStorage[127.0.0.1:44602,DS-dacf1fc8-f084-4db2-a1f6-019fb7264abc,DISK], DatanodeInfoWithStorage[127.0.0.1:43779,DS-695f6b69-3fd7-4a36-8883-989a59378883,DISK], DatanodeInfoWithStorage[127.0.0.1:38379,DS-4fd94890-8c15-4436-9565-729cd4be05be,DISK], DatanodeInfoWithStorage[127.0.0.1:33563,DS-e6f10b90-5084-4b85-bc04-3f765b31360f,DISK]]; indices=[1, 2, 3, 4, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: Zero blocklocations for /ec-10-4/striped_file_10_4. Name node is in safe mode.
The reported blocks 0 needs additional 1 blocks to reach the threshold 0.9990 of total blocks 2.
The minimum number of live datanodes is not required. Safe mode will be turned off automatically once the thresholds have been reached. NamenodeHostName:localhost
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.newSafemodeException(FSNamesystem.java:1476)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1960)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:755)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.getBlockLocations(ClientNamenodeProtocolServerSideTranslatorPB.java:439)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

stackTrace: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.SafeModeException): Zero blocklocations for /ec-10-4/striped_file_10_4. Name node is in safe mode.
The reported blocks 0 needs additional 1 blocks to reach the threshold 0.9990 of total blocks 2.
The minimum number of live datanodes is not required. Safe mode will be turned off automatically once the thresholds have been reached. NamenodeHostName:localhost
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.newSafemodeException(FSNamesystem.java:1476)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1960)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:755)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.getBlockLocations(ClientNamenodeProtocolServerSideTranslatorPB.java:439)
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:528)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1070)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:999)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:927)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2915)

	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)
	at org.apache.hadoop.ipc.Client.call(Client.java:1491)
	at org.apache.hadoop.ipc.Client.call(Client.java:1388)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)
	at com.sun.proxy.$Proxy23.getBlockLocations(Unknown Source)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.getBlockLocations(ClientNamenodeProtocolTranslatorPB.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)
	at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)
	at com.sun.proxy.$Proxy24.getBlockLocations(Unknown Source)
	at org.apache.hadoop.hdfs.DFSClient.callGetBlockLocations(DFSClient.java:864)
	at org.apache.hadoop.hdfs.DFSClient.getLocatedBlocks(DFSClient.java:853)
	at org.apache.hadoop.hdfs.DFSClient.getLocatedBlocks(DFSClient.java:842)
	at org.apache.hadoop.hdfs.DFSClient.open(DFSClient.java:1010)
	at org.apache.hadoop.hdfs.DistributedFileSystem$4.doCall(DistributedFileSystem.java:319)
	at org.apache.hadoop.hdfs.DistributedFileSystem$4.doCall(DistributedFileSystem.java:315)
	at org.apache.hadoop.fs.FileSystemLinkResolver.resolve(FileSystemLinkResolver.java:81)
	at org.apache.hadoop.hdfs.DistributedFileSystem.open(DistributedFileSystem.java:327)
	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:899)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-547954894-172.17.0.18-1599300104332:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37383,DS-23a51fc5-f52b-4d76-b98e-6d2b4c49580e,DISK], DatanodeInfoWithStorage[127.0.0.1:36140,DS-3442c46e-2eae-4eaa-a621-6664552184a8,DISK], DatanodeInfoWithStorage[127.0.0.1:34906,DS-a91c877b-5e5c-481e-bfef-e1737d6f228a,DISK], DatanodeInfoWithStorage[127.0.0.1:43272,DS-32bb45ad-1157-4c67-9297-17a3f95b256f,DISK], DatanodeInfoWithStorage[127.0.0.1:36636,DS-900e035b-5831-46fb-beea-fb3be690de4f,DISK], DatanodeInfoWithStorage[127.0.0.1:37543,DS-bce0760c-c6cf-4ecd-a942-698e9d4992df,DISK], DatanodeInfoWithStorage[127.0.0.1:42002,DS-c9ce73ea-87b5-46ac-a40f-71a4b3d32def,DISK]]; indices=[0, 3, 5, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-547954894-172.17.0.18-1599300104332:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37383,DS-23a51fc5-f52b-4d76-b98e-6d2b4c49580e,DISK], DatanodeInfoWithStorage[127.0.0.1:36140,DS-3442c46e-2eae-4eaa-a621-6664552184a8,DISK], DatanodeInfoWithStorage[127.0.0.1:34906,DS-a91c877b-5e5c-481e-bfef-e1737d6f228a,DISK], DatanodeInfoWithStorage[127.0.0.1:43272,DS-32bb45ad-1157-4c67-9297-17a3f95b256f,DISK], DatanodeInfoWithStorage[127.0.0.1:36636,DS-900e035b-5831-46fb-beea-fb3be690de4f,DISK], DatanodeInfoWithStorage[127.0.0.1:37543,DS-bce0760c-c6cf-4ecd-a942-698e9d4992df,DISK], DatanodeInfoWithStorage[127.0.0.1:42002,DS-c9ce73ea-87b5-46ac-a40f-71a4b3d32def,DISK]]; indices=[0, 3, 5, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-547954894-172.17.0.18-1599300104332:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37383,DS-23a51fc5-f52b-4d76-b98e-6d2b4c49580e,DISK], DatanodeInfoWithStorage[127.0.0.1:36140,DS-3442c46e-2eae-4eaa-a621-6664552184a8,DISK], DatanodeInfoWithStorage[127.0.0.1:34906,DS-a91c877b-5e5c-481e-bfef-e1737d6f228a,DISK], DatanodeInfoWithStorage[127.0.0.1:43272,DS-32bb45ad-1157-4c67-9297-17a3f95b256f,DISK], DatanodeInfoWithStorage[127.0.0.1:36636,DS-900e035b-5831-46fb-beea-fb3be690de4f,DISK], DatanodeInfoWithStorage[127.0.0.1:37543,DS-bce0760c-c6cf-4ecd-a942-698e9d4992df,DISK], DatanodeInfoWithStorage[127.0.0.1:42002,DS-c9ce73ea-87b5-46ac-a40f-71a4b3d32def,DISK]]; indices=[0, 3, 5, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-547954894-172.17.0.18-1599300104332:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37383,DS-23a51fc5-f52b-4d76-b98e-6d2b4c49580e,DISK], DatanodeInfoWithStorage[127.0.0.1:36140,DS-3442c46e-2eae-4eaa-a621-6664552184a8,DISK], DatanodeInfoWithStorage[127.0.0.1:34906,DS-a91c877b-5e5c-481e-bfef-e1737d6f228a,DISK], DatanodeInfoWithStorage[127.0.0.1:43272,DS-32bb45ad-1157-4c67-9297-17a3f95b256f,DISK], DatanodeInfoWithStorage[127.0.0.1:36636,DS-900e035b-5831-46fb-beea-fb3be690de4f,DISK], DatanodeInfoWithStorage[127.0.0.1:37543,DS-bce0760c-c6cf-4ecd-a942-698e9d4992df,DISK], DatanodeInfoWithStorage[127.0.0.1:42002,DS-c9ce73ea-87b5-46ac-a40f-71a4b3d32def,DISK]]; indices=[0, 3, 5, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-490586258-172.17.0.18-1599300129009:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38253,DS-71aefcc3-8f51-4be1-b4c3-62c0178804f3,DISK], DatanodeInfoWithStorage[127.0.0.1:39098,DS-09cf0059-855f-4e0e-b6f8-1786d18fc9b1,DISK], DatanodeInfoWithStorage[127.0.0.1:45660,DS-1ac35ed3-1fa1-49f0-962b-be61e6ac8e55,DISK], DatanodeInfoWithStorage[127.0.0.1:41430,DS-8ca3ad34-94c2-4ca4-a542-06197ab132cd,DISK], DatanodeInfoWithStorage[127.0.0.1:39593,DS-8dc6ad1b-4f72-4cc0-b6f5-c78dd634e09d,DISK], DatanodeInfoWithStorage[127.0.0.1:45885,DS-80791449-1bd6-422f-859c-2e64991e5de6,DISK], DatanodeInfoWithStorage[127.0.0.1:33735,DS-28f4bad7-19bc-4a3b-b27b-8071924e502c,DISK]]; indices=[0, 2, 3, 4, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-490586258-172.17.0.18-1599300129009:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38253,DS-71aefcc3-8f51-4be1-b4c3-62c0178804f3,DISK], DatanodeInfoWithStorage[127.0.0.1:39098,DS-09cf0059-855f-4e0e-b6f8-1786d18fc9b1,DISK], DatanodeInfoWithStorage[127.0.0.1:45660,DS-1ac35ed3-1fa1-49f0-962b-be61e6ac8e55,DISK], DatanodeInfoWithStorage[127.0.0.1:41430,DS-8ca3ad34-94c2-4ca4-a542-06197ab132cd,DISK], DatanodeInfoWithStorage[127.0.0.1:39593,DS-8dc6ad1b-4f72-4cc0-b6f5-c78dd634e09d,DISK], DatanodeInfoWithStorage[127.0.0.1:45885,DS-80791449-1bd6-422f-859c-2e64991e5de6,DISK], DatanodeInfoWithStorage[127.0.0.1:33735,DS-28f4bad7-19bc-4a3b-b27b-8071924e502c,DISK]]; indices=[0, 2, 3, 4, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-490586258-172.17.0.18-1599300129009:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38253,DS-71aefcc3-8f51-4be1-b4c3-62c0178804f3,DISK], DatanodeInfoWithStorage[127.0.0.1:39098,DS-09cf0059-855f-4e0e-b6f8-1786d18fc9b1,DISK], DatanodeInfoWithStorage[127.0.0.1:45660,DS-1ac35ed3-1fa1-49f0-962b-be61e6ac8e55,DISK], DatanodeInfoWithStorage[127.0.0.1:41430,DS-8ca3ad34-94c2-4ca4-a542-06197ab132cd,DISK], DatanodeInfoWithStorage[127.0.0.1:39593,DS-8dc6ad1b-4f72-4cc0-b6f5-c78dd634e09d,DISK], DatanodeInfoWithStorage[127.0.0.1:45885,DS-80791449-1bd6-422f-859c-2e64991e5de6,DISK], DatanodeInfoWithStorage[127.0.0.1:33735,DS-28f4bad7-19bc-4a3b-b27b-8071924e502c,DISK]]; indices=[0, 2, 3, 4, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-490586258-172.17.0.18-1599300129009:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38253,DS-71aefcc3-8f51-4be1-b4c3-62c0178804f3,DISK], DatanodeInfoWithStorage[127.0.0.1:39098,DS-09cf0059-855f-4e0e-b6f8-1786d18fc9b1,DISK], DatanodeInfoWithStorage[127.0.0.1:45660,DS-1ac35ed3-1fa1-49f0-962b-be61e6ac8e55,DISK], DatanodeInfoWithStorage[127.0.0.1:41430,DS-8ca3ad34-94c2-4ca4-a542-06197ab132cd,DISK], DatanodeInfoWithStorage[127.0.0.1:39593,DS-8dc6ad1b-4f72-4cc0-b6f5-c78dd634e09d,DISK], DatanodeInfoWithStorage[127.0.0.1:45885,DS-80791449-1bd6-422f-859c-2e64991e5de6,DISK], DatanodeInfoWithStorage[127.0.0.1:33735,DS-28f4bad7-19bc-4a3b-b27b-8071924e502c,DISK]]; indices=[0, 2, 3, 4, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.balance.bandwidthPerSec
component: hdfs:DataNode
v1: 10m
v2: 1m
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -3
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-856010587-172.17.0.18-1599300301349:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43080,DS-897e9203-fb20-4b6a-a133-d1737f103c19,DISK], DatanodeInfoWithStorage[127.0.0.1:37273,DS-c6c56d7a-7cf9-49b8-849b-4aaf6504e95b,DISK], DatanodeInfoWithStorage[127.0.0.1:38625,DS-493153bf-bf18-41c2-882f-0412dca2a5af,DISK], DatanodeInfoWithStorage[127.0.0.1:39418,DS-2781da67-37c7-4665-8183-6d25b12121a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38119,DS-1d036eba-73e2-43f9-84af-e31e6cd9a63a,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-cc3d9feb-b479-4cf8-b279-6032cf82b6e9,DISK]]; indices=[5, 6, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-856010587-172.17.0.18-1599300301349:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43080,DS-897e9203-fb20-4b6a-a133-d1737f103c19,DISK], DatanodeInfoWithStorage[127.0.0.1:37273,DS-c6c56d7a-7cf9-49b8-849b-4aaf6504e95b,DISK], DatanodeInfoWithStorage[127.0.0.1:38625,DS-493153bf-bf18-41c2-882f-0412dca2a5af,DISK], DatanodeInfoWithStorage[127.0.0.1:39418,DS-2781da67-37c7-4665-8183-6d25b12121a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38119,DS-1d036eba-73e2-43f9-84af-e31e6cd9a63a,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-cc3d9feb-b479-4cf8-b279-6032cf82b6e9,DISK]]; indices=[5, 6, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-856010587-172.17.0.18-1599300301349:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43080,DS-897e9203-fb20-4b6a-a133-d1737f103c19,DISK], DatanodeInfoWithStorage[127.0.0.1:37273,DS-c6c56d7a-7cf9-49b8-849b-4aaf6504e95b,DISK], DatanodeInfoWithStorage[127.0.0.1:38625,DS-493153bf-bf18-41c2-882f-0412dca2a5af,DISK], DatanodeInfoWithStorage[127.0.0.1:39418,DS-2781da67-37c7-4665-8183-6d25b12121a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38119,DS-1d036eba-73e2-43f9-84af-e31e6cd9a63a,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-cc3d9feb-b479-4cf8-b279-6032cf82b6e9,DISK]]; indices=[5, 6, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-856010587-172.17.0.18-1599300301349:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43080,DS-897e9203-fb20-4b6a-a133-d1737f103c19,DISK], DatanodeInfoWithStorage[127.0.0.1:37273,DS-c6c56d7a-7cf9-49b8-849b-4aaf6504e95b,DISK], DatanodeInfoWithStorage[127.0.0.1:38625,DS-493153bf-bf18-41c2-882f-0412dca2a5af,DISK], DatanodeInfoWithStorage[127.0.0.1:39418,DS-2781da67-37c7-4665-8183-6d25b12121a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38119,DS-1d036eba-73e2-43f9-84af-e31e6cd9a63a,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-cc3d9feb-b479-4cf8-b279-6032cf82b6e9,DISK]]; indices=[5, 6, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


v1v2 failed with probability 14 out of 50
v1v1v2v2 failed with probability 17 out of 50
result: false positive !!!
Total execution time in seconds : 4533
