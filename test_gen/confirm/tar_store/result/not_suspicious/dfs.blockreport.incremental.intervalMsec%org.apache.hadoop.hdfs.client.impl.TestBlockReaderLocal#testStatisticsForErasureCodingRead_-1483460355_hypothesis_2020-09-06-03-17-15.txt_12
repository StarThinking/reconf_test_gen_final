reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-788726551-172.17.0.2-1599362514105:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36585,DS-d191ece1-796f-4f53-a5ca-5761b1f6fe98,DISK], DatanodeInfoWithStorage[127.0.0.1:37451,DS-30c289ca-330e-49ed-8f33-2c0f000d1b3c,DISK], DatanodeInfoWithStorage[127.0.0.1:33350,DS-fd243756-70c4-4846-8d2b-3f6d46002ffa,DISK], DatanodeInfoWithStorage[127.0.0.1:37032,DS-7deeccb9-8205-4469-a834-aec8c3395d37,DISK], DatanodeInfoWithStorage[127.0.0.1:40966,DS-138e8fcd-1af4-4621-a509-718d6b5855c9,DISK], DatanodeInfoWithStorage[127.0.0.1:46223,DS-130773bc-e09b-4b35-b545-c92b80059954,DISK]]; indices=[1, 3, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-788726551-172.17.0.2-1599362514105:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36585,DS-d191ece1-796f-4f53-a5ca-5761b1f6fe98,DISK], DatanodeInfoWithStorage[127.0.0.1:37451,DS-30c289ca-330e-49ed-8f33-2c0f000d1b3c,DISK], DatanodeInfoWithStorage[127.0.0.1:33350,DS-fd243756-70c4-4846-8d2b-3f6d46002ffa,DISK], DatanodeInfoWithStorage[127.0.0.1:37032,DS-7deeccb9-8205-4469-a834-aec8c3395d37,DISK], DatanodeInfoWithStorage[127.0.0.1:40966,DS-138e8fcd-1af4-4621-a509-718d6b5855c9,DISK], DatanodeInfoWithStorage[127.0.0.1:46223,DS-130773bc-e09b-4b35-b545-c92b80059954,DISK]]; indices=[1, 3, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-788726551-172.17.0.2-1599362514105:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36585,DS-d191ece1-796f-4f53-a5ca-5761b1f6fe98,DISK], DatanodeInfoWithStorage[127.0.0.1:37451,DS-30c289ca-330e-49ed-8f33-2c0f000d1b3c,DISK], DatanodeInfoWithStorage[127.0.0.1:33350,DS-fd243756-70c4-4846-8d2b-3f6d46002ffa,DISK], DatanodeInfoWithStorage[127.0.0.1:37032,DS-7deeccb9-8205-4469-a834-aec8c3395d37,DISK], DatanodeInfoWithStorage[127.0.0.1:40966,DS-138e8fcd-1af4-4621-a509-718d6b5855c9,DISK], DatanodeInfoWithStorage[127.0.0.1:46223,DS-130773bc-e09b-4b35-b545-c92b80059954,DISK]]; indices=[1, 3, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-788726551-172.17.0.2-1599362514105:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36585,DS-d191ece1-796f-4f53-a5ca-5761b1f6fe98,DISK], DatanodeInfoWithStorage[127.0.0.1:37451,DS-30c289ca-330e-49ed-8f33-2c0f000d1b3c,DISK], DatanodeInfoWithStorage[127.0.0.1:33350,DS-fd243756-70c4-4846-8d2b-3f6d46002ffa,DISK], DatanodeInfoWithStorage[127.0.0.1:37032,DS-7deeccb9-8205-4469-a834-aec8c3395d37,DISK], DatanodeInfoWithStorage[127.0.0.1:40966,DS-138e8fcd-1af4-4621-a509-718d6b5855c9,DISK], DatanodeInfoWithStorage[127.0.0.1:46223,DS-130773bc-e09b-4b35-b545-c92b80059954,DISK]]; indices=[1, 3, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1153864781-172.17.0.2-1599363515820:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46392,DS-0083ba8e-4935-447c-9cd3-e221a5f9a7b8,DISK], DatanodeInfoWithStorage[127.0.0.1:38840,DS-263e3e60-a21c-4b62-b8dc-9262ad6f98cf,DISK], DatanodeInfoWithStorage[127.0.0.1:33160,DS-7217a7cb-8ced-4800-9711-0214eb5a5a46,DISK], DatanodeInfoWithStorage[127.0.0.1:38652,DS-78dd9780-9c0d-42d6-9090-8466b3fdc187,DISK], DatanodeInfoWithStorage[127.0.0.1:45446,DS-6cfad9e7-a015-4d98-b923-ac7090c8fd9b,DISK], DatanodeInfoWithStorage[127.0.0.1:45001,DS-1cec89a8-51ff-4559-bc3f-580c78b8579a,DISK]]; indices=[0, 3, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1153864781-172.17.0.2-1599363515820:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46392,DS-0083ba8e-4935-447c-9cd3-e221a5f9a7b8,DISK], DatanodeInfoWithStorage[127.0.0.1:38840,DS-263e3e60-a21c-4b62-b8dc-9262ad6f98cf,DISK], DatanodeInfoWithStorage[127.0.0.1:33160,DS-7217a7cb-8ced-4800-9711-0214eb5a5a46,DISK], DatanodeInfoWithStorage[127.0.0.1:38652,DS-78dd9780-9c0d-42d6-9090-8466b3fdc187,DISK], DatanodeInfoWithStorage[127.0.0.1:45446,DS-6cfad9e7-a015-4d98-b923-ac7090c8fd9b,DISK], DatanodeInfoWithStorage[127.0.0.1:45001,DS-1cec89a8-51ff-4559-bc3f-580c78b8579a,DISK]]; indices=[0, 3, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1153864781-172.17.0.2-1599363515820:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46392,DS-0083ba8e-4935-447c-9cd3-e221a5f9a7b8,DISK], DatanodeInfoWithStorage[127.0.0.1:38840,DS-263e3e60-a21c-4b62-b8dc-9262ad6f98cf,DISK], DatanodeInfoWithStorage[127.0.0.1:33160,DS-7217a7cb-8ced-4800-9711-0214eb5a5a46,DISK], DatanodeInfoWithStorage[127.0.0.1:38652,DS-78dd9780-9c0d-42d6-9090-8466b3fdc187,DISK], DatanodeInfoWithStorage[127.0.0.1:45446,DS-6cfad9e7-a015-4d98-b923-ac7090c8fd9b,DISK], DatanodeInfoWithStorage[127.0.0.1:45001,DS-1cec89a8-51ff-4559-bc3f-580c78b8579a,DISK]]; indices=[0, 3, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1153864781-172.17.0.2-1599363515820:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46392,DS-0083ba8e-4935-447c-9cd3-e221a5f9a7b8,DISK], DatanodeInfoWithStorage[127.0.0.1:38840,DS-263e3e60-a21c-4b62-b8dc-9262ad6f98cf,DISK], DatanodeInfoWithStorage[127.0.0.1:33160,DS-7217a7cb-8ced-4800-9711-0214eb5a5a46,DISK], DatanodeInfoWithStorage[127.0.0.1:38652,DS-78dd9780-9c0d-42d6-9090-8466b3fdc187,DISK], DatanodeInfoWithStorage[127.0.0.1:45446,DS-6cfad9e7-a015-4d98-b923-ac7090c8fd9b,DISK], DatanodeInfoWithStorage[127.0.0.1:45001,DS-1cec89a8-51ff-4559-bc3f-580c78b8579a,DISK]]; indices=[0, 3, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-649674656-172.17.0.2-1599363543096:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39139,DS-b30f6818-2e4f-4433-a150-2389c3841fb4,DISK], DatanodeInfoWithStorage[127.0.0.1:39105,DS-fc8d3559-c9da-49f7-b927-1616853709c0,DISK], DatanodeInfoWithStorage[127.0.0.1:37014,DS-92a20e74-eb0f-4f79-a8cf-9940df95e8b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43186,DS-0d32ca45-0265-44c8-a7dd-a029c5cf64a7,DISK], DatanodeInfoWithStorage[127.0.0.1:45740,DS-721e41e4-aa22-4e03-ab0c-14b1324a8f52,DISK], DatanodeInfoWithStorage[127.0.0.1:36563,DS-877f8e7e-b99e-49f9-ba41-e2014c026ebe,DISK]]; indices=[0, 4, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-649674656-172.17.0.2-1599363543096:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39139,DS-b30f6818-2e4f-4433-a150-2389c3841fb4,DISK], DatanodeInfoWithStorage[127.0.0.1:39105,DS-fc8d3559-c9da-49f7-b927-1616853709c0,DISK], DatanodeInfoWithStorage[127.0.0.1:37014,DS-92a20e74-eb0f-4f79-a8cf-9940df95e8b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43186,DS-0d32ca45-0265-44c8-a7dd-a029c5cf64a7,DISK], DatanodeInfoWithStorage[127.0.0.1:45740,DS-721e41e4-aa22-4e03-ab0c-14b1324a8f52,DISK], DatanodeInfoWithStorage[127.0.0.1:36563,DS-877f8e7e-b99e-49f9-ba41-e2014c026ebe,DISK]]; indices=[0, 4, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-649674656-172.17.0.2-1599363543096:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39139,DS-b30f6818-2e4f-4433-a150-2389c3841fb4,DISK], DatanodeInfoWithStorage[127.0.0.1:39105,DS-fc8d3559-c9da-49f7-b927-1616853709c0,DISK], DatanodeInfoWithStorage[127.0.0.1:37014,DS-92a20e74-eb0f-4f79-a8cf-9940df95e8b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43186,DS-0d32ca45-0265-44c8-a7dd-a029c5cf64a7,DISK], DatanodeInfoWithStorage[127.0.0.1:45740,DS-721e41e4-aa22-4e03-ab0c-14b1324a8f52,DISK], DatanodeInfoWithStorage[127.0.0.1:36563,DS-877f8e7e-b99e-49f9-ba41-e2014c026ebe,DISK]]; indices=[0, 4, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-649674656-172.17.0.2-1599363543096:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39139,DS-b30f6818-2e4f-4433-a150-2389c3841fb4,DISK], DatanodeInfoWithStorage[127.0.0.1:39105,DS-fc8d3559-c9da-49f7-b927-1616853709c0,DISK], DatanodeInfoWithStorage[127.0.0.1:37014,DS-92a20e74-eb0f-4f79-a8cf-9940df95e8b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43186,DS-0d32ca45-0265-44c8-a7dd-a029c5cf64a7,DISK], DatanodeInfoWithStorage[127.0.0.1:45740,DS-721e41e4-aa22-4e03-ab0c-14b1324a8f52,DISK], DatanodeInfoWithStorage[127.0.0.1:36563,DS-877f8e7e-b99e-49f9-ba41-e2014c026ebe,DISK]]; indices=[0, 4, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-854826420-172.17.0.2-1599363725210:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37471,DS-f9a53786-e82e-489b-92b5-6c26bfa9340c,DISK], DatanodeInfoWithStorage[127.0.0.1:43438,DS-fb95de5d-5b7a-4605-b3ff-c7caef32faef,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-1e527e60-4b7c-4db9-b7f2-7a8375d23ce9,DISK], DatanodeInfoWithStorage[127.0.0.1:39851,DS-0a5c51a4-3d6f-478a-81e6-be22190263bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36823,DS-f3f3d01f-60a5-4cdf-9937-c37b8aaee123,DISK], DatanodeInfoWithStorage[127.0.0.1:45318,DS-bae6d477-7099-41f3-b78f-6b1c318c161c,DISK]]; indices=[0, 1, 2, 3, 4, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-854826420-172.17.0.2-1599363725210:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37471,DS-f9a53786-e82e-489b-92b5-6c26bfa9340c,DISK], DatanodeInfoWithStorage[127.0.0.1:43438,DS-fb95de5d-5b7a-4605-b3ff-c7caef32faef,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-1e527e60-4b7c-4db9-b7f2-7a8375d23ce9,DISK], DatanodeInfoWithStorage[127.0.0.1:39851,DS-0a5c51a4-3d6f-478a-81e6-be22190263bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36823,DS-f3f3d01f-60a5-4cdf-9937-c37b8aaee123,DISK], DatanodeInfoWithStorage[127.0.0.1:45318,DS-bae6d477-7099-41f3-b78f-6b1c318c161c,DISK]]; indices=[0, 1, 2, 3, 4, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-854826420-172.17.0.2-1599363725210:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37471,DS-f9a53786-e82e-489b-92b5-6c26bfa9340c,DISK], DatanodeInfoWithStorage[127.0.0.1:43438,DS-fb95de5d-5b7a-4605-b3ff-c7caef32faef,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-1e527e60-4b7c-4db9-b7f2-7a8375d23ce9,DISK], DatanodeInfoWithStorage[127.0.0.1:39851,DS-0a5c51a4-3d6f-478a-81e6-be22190263bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36823,DS-f3f3d01f-60a5-4cdf-9937-c37b8aaee123,DISK], DatanodeInfoWithStorage[127.0.0.1:45318,DS-bae6d477-7099-41f3-b78f-6b1c318c161c,DISK]]; indices=[0, 1, 2, 3, 4, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-854826420-172.17.0.2-1599363725210:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37471,DS-f9a53786-e82e-489b-92b5-6c26bfa9340c,DISK], DatanodeInfoWithStorage[127.0.0.1:43438,DS-fb95de5d-5b7a-4605-b3ff-c7caef32faef,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-1e527e60-4b7c-4db9-b7f2-7a8375d23ce9,DISK], DatanodeInfoWithStorage[127.0.0.1:39851,DS-0a5c51a4-3d6f-478a-81e6-be22190263bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36823,DS-f3f3d01f-60a5-4cdf-9937-c37b8aaee123,DISK], DatanodeInfoWithStorage[127.0.0.1:45318,DS-bae6d477-7099-41f3-b78f-6b1c318c161c,DISK]]; indices=[0, 1, 2, 3, 4, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1049081008-172.17.0.2-1599364328497:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43830,DS-37220c51-ac42-46da-b543-2b9552e631fa,DISK], DatanodeInfoWithStorage[127.0.0.1:45528,DS-90db7f44-f984-4ede-870b-712cde509389,DISK], DatanodeInfoWithStorage[127.0.0.1:42242,DS-114a3d18-b477-428d-bfa9-1de042c4e1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:39383,DS-8651393c-a1e0-4955-b2a7-80ae702f7663,DISK], DatanodeInfoWithStorage[127.0.0.1:42460,DS-00fc6d6d-500a-4a78-8773-d65b9bcfbd7c,DISK], DatanodeInfoWithStorage[127.0.0.1:44023,DS-fa977a46-18f6-4b6a-b748-8e150d688c4d,DISK]]; indices=[0, 1, 2, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1049081008-172.17.0.2-1599364328497:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43830,DS-37220c51-ac42-46da-b543-2b9552e631fa,DISK], DatanodeInfoWithStorage[127.0.0.1:45528,DS-90db7f44-f984-4ede-870b-712cde509389,DISK], DatanodeInfoWithStorage[127.0.0.1:42242,DS-114a3d18-b477-428d-bfa9-1de042c4e1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:39383,DS-8651393c-a1e0-4955-b2a7-80ae702f7663,DISK], DatanodeInfoWithStorage[127.0.0.1:42460,DS-00fc6d6d-500a-4a78-8773-d65b9bcfbd7c,DISK], DatanodeInfoWithStorage[127.0.0.1:44023,DS-fa977a46-18f6-4b6a-b748-8e150d688c4d,DISK]]; indices=[0, 1, 2, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1049081008-172.17.0.2-1599364328497:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43830,DS-37220c51-ac42-46da-b543-2b9552e631fa,DISK], DatanodeInfoWithStorage[127.0.0.1:45528,DS-90db7f44-f984-4ede-870b-712cde509389,DISK], DatanodeInfoWithStorage[127.0.0.1:42242,DS-114a3d18-b477-428d-bfa9-1de042c4e1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:39383,DS-8651393c-a1e0-4955-b2a7-80ae702f7663,DISK], DatanodeInfoWithStorage[127.0.0.1:42460,DS-00fc6d6d-500a-4a78-8773-d65b9bcfbd7c,DISK], DatanodeInfoWithStorage[127.0.0.1:44023,DS-fa977a46-18f6-4b6a-b748-8e150d688c4d,DISK]]; indices=[0, 1, 2, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1049081008-172.17.0.2-1599364328497:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43830,DS-37220c51-ac42-46da-b543-2b9552e631fa,DISK], DatanodeInfoWithStorage[127.0.0.1:45528,DS-90db7f44-f984-4ede-870b-712cde509389,DISK], DatanodeInfoWithStorage[127.0.0.1:42242,DS-114a3d18-b477-428d-bfa9-1de042c4e1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:39383,DS-8651393c-a1e0-4955-b2a7-80ae702f7663,DISK], DatanodeInfoWithStorage[127.0.0.1:42460,DS-00fc6d6d-500a-4a78-8773-d65b9bcfbd7c,DISK], DatanodeInfoWithStorage[127.0.0.1:44023,DS-fa977a46-18f6-4b6a-b748-8e150d688c4d,DISK]]; indices=[0, 1, 2, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-373192990-172.17.0.2-1599364697521:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34963,DS-6984d871-8ee0-4ea8-ab54-7f284478e1ca,DISK], DatanodeInfoWithStorage[127.0.0.1:45671,DS-3a435c7d-f104-43ac-9045-bf4ea86e5010,DISK], DatanodeInfoWithStorage[127.0.0.1:35878,DS-fb869cac-9432-4ac8-8453-e145c29801ba,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-a06e45cb-abd8-4d0a-838d-2f5d6b0a0bc6,DISK], DatanodeInfoWithStorage[127.0.0.1:33616,DS-aebe88e7-6135-4799-969b-5e0bf299d447,DISK], DatanodeInfoWithStorage[127.0.0.1:45875,DS-4bdf0934-64fb-4f80-9342-075138c2e47f,DISK]]; indices=[0, 2, 3, 4, 6, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-373192990-172.17.0.2-1599364697521:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34963,DS-6984d871-8ee0-4ea8-ab54-7f284478e1ca,DISK], DatanodeInfoWithStorage[127.0.0.1:45671,DS-3a435c7d-f104-43ac-9045-bf4ea86e5010,DISK], DatanodeInfoWithStorage[127.0.0.1:35878,DS-fb869cac-9432-4ac8-8453-e145c29801ba,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-a06e45cb-abd8-4d0a-838d-2f5d6b0a0bc6,DISK], DatanodeInfoWithStorage[127.0.0.1:33616,DS-aebe88e7-6135-4799-969b-5e0bf299d447,DISK], DatanodeInfoWithStorage[127.0.0.1:45875,DS-4bdf0934-64fb-4f80-9342-075138c2e47f,DISK]]; indices=[0, 2, 3, 4, 6, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-373192990-172.17.0.2-1599364697521:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34963,DS-6984d871-8ee0-4ea8-ab54-7f284478e1ca,DISK], DatanodeInfoWithStorage[127.0.0.1:45671,DS-3a435c7d-f104-43ac-9045-bf4ea86e5010,DISK], DatanodeInfoWithStorage[127.0.0.1:35878,DS-fb869cac-9432-4ac8-8453-e145c29801ba,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-a06e45cb-abd8-4d0a-838d-2f5d6b0a0bc6,DISK], DatanodeInfoWithStorage[127.0.0.1:33616,DS-aebe88e7-6135-4799-969b-5e0bf299d447,DISK], DatanodeInfoWithStorage[127.0.0.1:45875,DS-4bdf0934-64fb-4f80-9342-075138c2e47f,DISK]]; indices=[0, 2, 3, 4, 6, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-373192990-172.17.0.2-1599364697521:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34963,DS-6984d871-8ee0-4ea8-ab54-7f284478e1ca,DISK], DatanodeInfoWithStorage[127.0.0.1:45671,DS-3a435c7d-f104-43ac-9045-bf4ea86e5010,DISK], DatanodeInfoWithStorage[127.0.0.1:35878,DS-fb869cac-9432-4ac8-8453-e145c29801ba,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-a06e45cb-abd8-4d0a-838d-2f5d6b0a0bc6,DISK], DatanodeInfoWithStorage[127.0.0.1:33616,DS-aebe88e7-6135-4799-969b-5e0bf299d447,DISK], DatanodeInfoWithStorage[127.0.0.1:45875,DS-4bdf0934-64fb-4f80-9342-075138c2e47f,DISK]]; indices=[0, 2, 3, 4, 6, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1569652961-172.17.0.2-1599364779967:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34706,DS-f246fca6-0426-4b67-bfe6-34d744de397a,DISK], DatanodeInfoWithStorage[127.0.0.1:36719,DS-d201b179-1221-4658-bdf8-9f6b0672fe2a,DISK], DatanodeInfoWithStorage[127.0.0.1:44220,DS-2656c1e8-b684-4eb0-888a-94ad2f761cef,DISK], DatanodeInfoWithStorage[127.0.0.1:44791,DS-4f2553c2-865b-4037-aa73-d1b4f95f4316,DISK], DatanodeInfoWithStorage[127.0.0.1:40289,DS-9ce76bba-9358-40dc-83b6-f36904082964,DISK], DatanodeInfoWithStorage[127.0.0.1:36736,DS-61c76111-d3f5-4edb-838c-eedaf020301f,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1569652961-172.17.0.2-1599364779967:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34706,DS-f246fca6-0426-4b67-bfe6-34d744de397a,DISK], DatanodeInfoWithStorage[127.0.0.1:36719,DS-d201b179-1221-4658-bdf8-9f6b0672fe2a,DISK], DatanodeInfoWithStorage[127.0.0.1:44220,DS-2656c1e8-b684-4eb0-888a-94ad2f761cef,DISK], DatanodeInfoWithStorage[127.0.0.1:44791,DS-4f2553c2-865b-4037-aa73-d1b4f95f4316,DISK], DatanodeInfoWithStorage[127.0.0.1:40289,DS-9ce76bba-9358-40dc-83b6-f36904082964,DISK], DatanodeInfoWithStorage[127.0.0.1:36736,DS-61c76111-d3f5-4edb-838c-eedaf020301f,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1569652961-172.17.0.2-1599364779967:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34706,DS-f246fca6-0426-4b67-bfe6-34d744de397a,DISK], DatanodeInfoWithStorage[127.0.0.1:36719,DS-d201b179-1221-4658-bdf8-9f6b0672fe2a,DISK], DatanodeInfoWithStorage[127.0.0.1:44220,DS-2656c1e8-b684-4eb0-888a-94ad2f761cef,DISK], DatanodeInfoWithStorage[127.0.0.1:44791,DS-4f2553c2-865b-4037-aa73-d1b4f95f4316,DISK], DatanodeInfoWithStorage[127.0.0.1:40289,DS-9ce76bba-9358-40dc-83b6-f36904082964,DISK], DatanodeInfoWithStorage[127.0.0.1:36736,DS-61c76111-d3f5-4edb-838c-eedaf020301f,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1569652961-172.17.0.2-1599364779967:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34706,DS-f246fca6-0426-4b67-bfe6-34d744de397a,DISK], DatanodeInfoWithStorage[127.0.0.1:36719,DS-d201b179-1221-4658-bdf8-9f6b0672fe2a,DISK], DatanodeInfoWithStorage[127.0.0.1:44220,DS-2656c1e8-b684-4eb0-888a-94ad2f761cef,DISK], DatanodeInfoWithStorage[127.0.0.1:44791,DS-4f2553c2-865b-4037-aa73-d1b4f95f4316,DISK], DatanodeInfoWithStorage[127.0.0.1:40289,DS-9ce76bba-9358-40dc-83b6-f36904082964,DISK], DatanodeInfoWithStorage[127.0.0.1:36736,DS-61c76111-d3f5-4edb-838c-eedaf020301f,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1945862290-172.17.0.2-1599365865448:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34949,DS-6c3d0896-6960-4466-9323-2c76a6257f3c,DISK], DatanodeInfoWithStorage[127.0.0.1:46767,DS-83327e1d-e24a-49ee-afdf-d8831a5ebfb7,DISK], DatanodeInfoWithStorage[127.0.0.1:46667,DS-a99783ab-f02d-4b59-acde-5de4fb027922,DISK], DatanodeInfoWithStorage[127.0.0.1:33499,DS-316fc9af-2574-4c5f-998a-531048dd1a0e,DISK], DatanodeInfoWithStorage[127.0.0.1:43284,DS-5287b3f8-d8af-4bc2-9492-e12c5b561e05,DISK], DatanodeInfoWithStorage[127.0.0.1:37350,DS-e02d62c5-45df-4b4f-92e0-29307b617d04,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1945862290-172.17.0.2-1599365865448:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34949,DS-6c3d0896-6960-4466-9323-2c76a6257f3c,DISK], DatanodeInfoWithStorage[127.0.0.1:46767,DS-83327e1d-e24a-49ee-afdf-d8831a5ebfb7,DISK], DatanodeInfoWithStorage[127.0.0.1:46667,DS-a99783ab-f02d-4b59-acde-5de4fb027922,DISK], DatanodeInfoWithStorage[127.0.0.1:33499,DS-316fc9af-2574-4c5f-998a-531048dd1a0e,DISK], DatanodeInfoWithStorage[127.0.0.1:43284,DS-5287b3f8-d8af-4bc2-9492-e12c5b561e05,DISK], DatanodeInfoWithStorage[127.0.0.1:37350,DS-e02d62c5-45df-4b4f-92e0-29307b617d04,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1945862290-172.17.0.2-1599365865448:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34949,DS-6c3d0896-6960-4466-9323-2c76a6257f3c,DISK], DatanodeInfoWithStorage[127.0.0.1:46767,DS-83327e1d-e24a-49ee-afdf-d8831a5ebfb7,DISK], DatanodeInfoWithStorage[127.0.0.1:46667,DS-a99783ab-f02d-4b59-acde-5de4fb027922,DISK], DatanodeInfoWithStorage[127.0.0.1:33499,DS-316fc9af-2574-4c5f-998a-531048dd1a0e,DISK], DatanodeInfoWithStorage[127.0.0.1:43284,DS-5287b3f8-d8af-4bc2-9492-e12c5b561e05,DISK], DatanodeInfoWithStorage[127.0.0.1:37350,DS-e02d62c5-45df-4b4f-92e0-29307b617d04,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1945862290-172.17.0.2-1599365865448:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34949,DS-6c3d0896-6960-4466-9323-2c76a6257f3c,DISK], DatanodeInfoWithStorage[127.0.0.1:46767,DS-83327e1d-e24a-49ee-afdf-d8831a5ebfb7,DISK], DatanodeInfoWithStorage[127.0.0.1:46667,DS-a99783ab-f02d-4b59-acde-5de4fb027922,DISK], DatanodeInfoWithStorage[127.0.0.1:33499,DS-316fc9af-2574-4c5f-998a-531048dd1a0e,DISK], DatanodeInfoWithStorage[127.0.0.1:43284,DS-5287b3f8-d8af-4bc2-9492-e12c5b561e05,DISK], DatanodeInfoWithStorage[127.0.0.1:37350,DS-e02d62c5-45df-4b4f-92e0-29307b617d04,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1630674635-172.17.0.2-1599365973475:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41872,DS-f26b65e9-8152-4496-b2e1-418a6c153719,DISK], DatanodeInfoWithStorage[127.0.0.1:36044,DS-ffec5e54-4bce-41cb-87bc-909794a99483,DISK], DatanodeInfoWithStorage[127.0.0.1:43703,DS-841abf49-63a0-4335-a102-ac3f437c36f3,DISK], DatanodeInfoWithStorage[127.0.0.1:43171,DS-8db0f708-4ca8-4d75-bc87-f2f1242b9e86,DISK], DatanodeInfoWithStorage[127.0.0.1:42970,DS-4abe1383-c436-4926-beba-db9ebc6a75bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-14d15dbc-3ede-4a0b-a5c8-bfc98f909112,DISK]]; indices=[0, 1, 2, 3, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-1630674635-172.17.0.2-1599365973475:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41872,DS-f26b65e9-8152-4496-b2e1-418a6c153719,DISK], DatanodeInfoWithStorage[127.0.0.1:36044,DS-ffec5e54-4bce-41cb-87bc-909794a99483,DISK], DatanodeInfoWithStorage[127.0.0.1:43703,DS-841abf49-63a0-4335-a102-ac3f437c36f3,DISK], DatanodeInfoWithStorage[127.0.0.1:43171,DS-8db0f708-4ca8-4d75-bc87-f2f1242b9e86,DISK], DatanodeInfoWithStorage[127.0.0.1:42970,DS-4abe1383-c436-4926-beba-db9ebc6a75bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-14d15dbc-3ede-4a0b-a5c8-bfc98f909112,DISK]]; indices=[0, 1, 2, 3, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1630674635-172.17.0.2-1599365973475:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41872,DS-f26b65e9-8152-4496-b2e1-418a6c153719,DISK], DatanodeInfoWithStorage[127.0.0.1:36044,DS-ffec5e54-4bce-41cb-87bc-909794a99483,DISK], DatanodeInfoWithStorage[127.0.0.1:43703,DS-841abf49-63a0-4335-a102-ac3f437c36f3,DISK], DatanodeInfoWithStorage[127.0.0.1:43171,DS-8db0f708-4ca8-4d75-bc87-f2f1242b9e86,DISK], DatanodeInfoWithStorage[127.0.0.1:42970,DS-4abe1383-c436-4926-beba-db9ebc6a75bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-14d15dbc-3ede-4a0b-a5c8-bfc98f909112,DISK]]; indices=[0, 1, 2, 3, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-1630674635-172.17.0.2-1599365973475:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41872,DS-f26b65e9-8152-4496-b2e1-418a6c153719,DISK], DatanodeInfoWithStorage[127.0.0.1:36044,DS-ffec5e54-4bce-41cb-87bc-909794a99483,DISK], DatanodeInfoWithStorage[127.0.0.1:43703,DS-841abf49-63a0-4335-a102-ac3f437c36f3,DISK], DatanodeInfoWithStorage[127.0.0.1:43171,DS-8db0f708-4ca8-4d75-bc87-f2f1242b9e86,DISK], DatanodeInfoWithStorage[127.0.0.1:42970,DS-4abe1383-c436-4926-beba-db9ebc6a75bd,DISK], DatanodeInfoWithStorage[127.0.0.1:36294,DS-14d15dbc-3ede-4a0b-a5c8-bfc98f909112,DISK]]; indices=[0, 1, 2, 3, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-106533793-172.17.0.2-1599366293263:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34562,DS-cd66d093-1aa6-42da-8188-f7a6deb809bf,DISK], DatanodeInfoWithStorage[127.0.0.1:38169,DS-8778b8be-9b44-42dd-8b85-6f1b08ccbd38,DISK], DatanodeInfoWithStorage[127.0.0.1:38153,DS-43771d62-cb84-4e89-88d4-411554eec6c4,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-26981ae1-14e7-4348-9a18-7e61394045fd,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e27fcaeb-cacd-486c-b5ea-606a4dce9f5c,DISK], DatanodeInfoWithStorage[127.0.0.1:40829,DS-d4378e14-d769-4c34-9fe2-0df872e32b4f,DISK]]; indices=[2, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-106533793-172.17.0.2-1599366293263:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34562,DS-cd66d093-1aa6-42da-8188-f7a6deb809bf,DISK], DatanodeInfoWithStorage[127.0.0.1:38169,DS-8778b8be-9b44-42dd-8b85-6f1b08ccbd38,DISK], DatanodeInfoWithStorage[127.0.0.1:38153,DS-43771d62-cb84-4e89-88d4-411554eec6c4,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-26981ae1-14e7-4348-9a18-7e61394045fd,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e27fcaeb-cacd-486c-b5ea-606a4dce9f5c,DISK], DatanodeInfoWithStorage[127.0.0.1:40829,DS-d4378e14-d769-4c34-9fe2-0df872e32b4f,DISK]]; indices=[2, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-106533793-172.17.0.2-1599366293263:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34562,DS-cd66d093-1aa6-42da-8188-f7a6deb809bf,DISK], DatanodeInfoWithStorage[127.0.0.1:38169,DS-8778b8be-9b44-42dd-8b85-6f1b08ccbd38,DISK], DatanodeInfoWithStorage[127.0.0.1:38153,DS-43771d62-cb84-4e89-88d4-411554eec6c4,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-26981ae1-14e7-4348-9a18-7e61394045fd,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e27fcaeb-cacd-486c-b5ea-606a4dce9f5c,DISK], DatanodeInfoWithStorage[127.0.0.1:40829,DS-d4378e14-d769-4c34-9fe2-0df872e32b4f,DISK]]; indices=[2, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-106533793-172.17.0.2-1599366293263:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34562,DS-cd66d093-1aa6-42da-8188-f7a6deb809bf,DISK], DatanodeInfoWithStorage[127.0.0.1:38169,DS-8778b8be-9b44-42dd-8b85-6f1b08ccbd38,DISK], DatanodeInfoWithStorage[127.0.0.1:38153,DS-43771d62-cb84-4e89-88d4-411554eec6c4,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-26981ae1-14e7-4348-9a18-7e61394045fd,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e27fcaeb-cacd-486c-b5ea-606a4dce9f5c,DISK], DatanodeInfoWithStorage[127.0.0.1:40829,DS-d4378e14-d769-4c34-9fe2-0df872e32b4f,DISK]]; indices=[2, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 8 out of 50
v1v1v2v2 failed with probability 6 out of 50
result: might be true error
Total execution time in seconds : 4129
