reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-942375935-172.17.0.4-1599347604840:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42830,DS-89865ae0-15c3-488c-a8fb-178764eecc37,DISK], DatanodeInfoWithStorage[127.0.0.1:36747,DS-ca3a2f25-af52-4d52-91f7-df7c5ca06626,DISK], DatanodeInfoWithStorage[127.0.0.1:39036,DS-3c0631f4-9036-420a-a1fa-62704f4fe0a9,DISK], DatanodeInfoWithStorage[127.0.0.1:36111,DS-0e76ea0d-103a-4ab1-9c60-db4b54fdbd57,DISK], DatanodeInfoWithStorage[127.0.0.1:34953,DS-8ea4edcc-2e94-4293-9727-1770075a9d15,DISK], DatanodeInfoWithStorage[127.0.0.1:45819,DS-bc9e5f51-d94a-4b89-9f51-be7795b202e9,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-942375935-172.17.0.4-1599347604840:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42830,DS-89865ae0-15c3-488c-a8fb-178764eecc37,DISK], DatanodeInfoWithStorage[127.0.0.1:36747,DS-ca3a2f25-af52-4d52-91f7-df7c5ca06626,DISK], DatanodeInfoWithStorage[127.0.0.1:39036,DS-3c0631f4-9036-420a-a1fa-62704f4fe0a9,DISK], DatanodeInfoWithStorage[127.0.0.1:36111,DS-0e76ea0d-103a-4ab1-9c60-db4b54fdbd57,DISK], DatanodeInfoWithStorage[127.0.0.1:34953,DS-8ea4edcc-2e94-4293-9727-1770075a9d15,DISK], DatanodeInfoWithStorage[127.0.0.1:45819,DS-bc9e5f51-d94a-4b89-9f51-be7795b202e9,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-942375935-172.17.0.4-1599347604840:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42830,DS-89865ae0-15c3-488c-a8fb-178764eecc37,DISK], DatanodeInfoWithStorage[127.0.0.1:36747,DS-ca3a2f25-af52-4d52-91f7-df7c5ca06626,DISK], DatanodeInfoWithStorage[127.0.0.1:39036,DS-3c0631f4-9036-420a-a1fa-62704f4fe0a9,DISK], DatanodeInfoWithStorage[127.0.0.1:36111,DS-0e76ea0d-103a-4ab1-9c60-db4b54fdbd57,DISK], DatanodeInfoWithStorage[127.0.0.1:34953,DS-8ea4edcc-2e94-4293-9727-1770075a9d15,DISK], DatanodeInfoWithStorage[127.0.0.1:45819,DS-bc9e5f51-d94a-4b89-9f51-be7795b202e9,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-942375935-172.17.0.4-1599347604840:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42830,DS-89865ae0-15c3-488c-a8fb-178764eecc37,DISK], DatanodeInfoWithStorage[127.0.0.1:36747,DS-ca3a2f25-af52-4d52-91f7-df7c5ca06626,DISK], DatanodeInfoWithStorage[127.0.0.1:39036,DS-3c0631f4-9036-420a-a1fa-62704f4fe0a9,DISK], DatanodeInfoWithStorage[127.0.0.1:36111,DS-0e76ea0d-103a-4ab1-9c60-db4b54fdbd57,DISK], DatanodeInfoWithStorage[127.0.0.1:34953,DS-8ea4edcc-2e94-4293-9727-1770075a9d15,DISK], DatanodeInfoWithStorage[127.0.0.1:45819,DS-bc9e5f51-d94a-4b89-9f51-be7795b202e9,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-281708678-172.17.0.4-1599347671932:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46445,DS-a59804ef-d251-4bbe-9846-7b2b9e2b1752,DISK], DatanodeInfoWithStorage[127.0.0.1:38407,DS-fffe8c7a-66b5-46d8-a929-1d585393ac8d,DISK], DatanodeInfoWithStorage[127.0.0.1:46324,DS-56b95b00-48c5-44c1-95e0-be9ca54ecb7f,DISK], DatanodeInfoWithStorage[127.0.0.1:46106,DS-d3e2e175-ec16-41f4-a917-7650b1adb0eb,DISK], DatanodeInfoWithStorage[127.0.0.1:37649,DS-3558d4cc-51fc-4d8b-86e6-52d768a71b56,DISK], DatanodeInfoWithStorage[127.0.0.1:43399,DS-4fa49a35-4b71-46e5-9f38-bfc9ce1a7c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:46494,DS-82c29ecd-f36e-4869-90aa-c0a634da4ac3,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-5931d1de-2284-4b74-b63c-c2cde9255932,DISK]]; indices=[0, 1, 2, 3, 4, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-281708678-172.17.0.4-1599347671932:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46324,DS-56b95b00-48c5-44c1-95e0-be9ca54ecb7f,DISK], DatanodeInfoWithStorage[127.0.0.1:46106,DS-d3e2e175-ec16-41f4-a917-7650b1adb0eb,DISK], DatanodeInfoWithStorage[127.0.0.1:37649,DS-3558d4cc-51fc-4d8b-86e6-52d768a71b56,DISK], DatanodeInfoWithStorage[127.0.0.1:43399,DS-4fa49a35-4b71-46e5-9f38-bfc9ce1a7c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:46494,DS-82c29ecd-f36e-4869-90aa-c0a634da4ac3,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-5931d1de-2284-4b74-b63c-c2cde9255932,DISK]]; indices=[2, 3, 4, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-281708678-172.17.0.4-1599347671932:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46445,DS-a59804ef-d251-4bbe-9846-7b2b9e2b1752,DISK], DatanodeInfoWithStorage[127.0.0.1:38407,DS-fffe8c7a-66b5-46d8-a929-1d585393ac8d,DISK], DatanodeInfoWithStorage[127.0.0.1:46324,DS-56b95b00-48c5-44c1-95e0-be9ca54ecb7f,DISK], DatanodeInfoWithStorage[127.0.0.1:46106,DS-d3e2e175-ec16-41f4-a917-7650b1adb0eb,DISK], DatanodeInfoWithStorage[127.0.0.1:37649,DS-3558d4cc-51fc-4d8b-86e6-52d768a71b56,DISK], DatanodeInfoWithStorage[127.0.0.1:43399,DS-4fa49a35-4b71-46e5-9f38-bfc9ce1a7c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:46494,DS-82c29ecd-f36e-4869-90aa-c0a634da4ac3,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-5931d1de-2284-4b74-b63c-c2cde9255932,DISK]]; indices=[0, 1, 2, 3, 4, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-281708678-172.17.0.4-1599347671932:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46324,DS-56b95b00-48c5-44c1-95e0-be9ca54ecb7f,DISK], DatanodeInfoWithStorage[127.0.0.1:46106,DS-d3e2e175-ec16-41f4-a917-7650b1adb0eb,DISK], DatanodeInfoWithStorage[127.0.0.1:37649,DS-3558d4cc-51fc-4d8b-86e6-52d768a71b56,DISK], DatanodeInfoWithStorage[127.0.0.1:43399,DS-4fa49a35-4b71-46e5-9f38-bfc9ce1a7c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:46494,DS-82c29ecd-f36e-4869-90aa-c0a634da4ac3,DISK], DatanodeInfoWithStorage[127.0.0.1:37724,DS-5931d1de-2284-4b74-b63c-c2cde9255932,DISK]]; indices=[2, 3, 4, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-731206400-172.17.0.4-1599347761339:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33247,DS-8c17ffec-bf29-40d2-89ef-d8581cffeb5e,DISK], DatanodeInfoWithStorage[127.0.0.1:38663,DS-9844558b-1d89-4433-9870-e25d926e66ad,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bd06469b-296c-421d-9262-eb2998995757,DISK], DatanodeInfoWithStorage[127.0.0.1:37128,DS-5cde02d1-cb88-4d1f-9013-514105898e23,DISK], DatanodeInfoWithStorage[127.0.0.1:33205,DS-9f661677-90ce-4470-b6ae-034e1ebbd608,DISK], DatanodeInfoWithStorage[127.0.0.1:46867,DS-8ccb94c9-887c-4195-8d32-f68d33d0d8e0,DISK]]; indices=[1, 2, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-731206400-172.17.0.4-1599347761339:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33247,DS-8c17ffec-bf29-40d2-89ef-d8581cffeb5e,DISK], DatanodeInfoWithStorage[127.0.0.1:38663,DS-9844558b-1d89-4433-9870-e25d926e66ad,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bd06469b-296c-421d-9262-eb2998995757,DISK], DatanodeInfoWithStorage[127.0.0.1:37128,DS-5cde02d1-cb88-4d1f-9013-514105898e23,DISK], DatanodeInfoWithStorage[127.0.0.1:33205,DS-9f661677-90ce-4470-b6ae-034e1ebbd608,DISK], DatanodeInfoWithStorage[127.0.0.1:46867,DS-8ccb94c9-887c-4195-8d32-f68d33d0d8e0,DISK]]; indices=[1, 2, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-731206400-172.17.0.4-1599347761339:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33247,DS-8c17ffec-bf29-40d2-89ef-d8581cffeb5e,DISK], DatanodeInfoWithStorage[127.0.0.1:38663,DS-9844558b-1d89-4433-9870-e25d926e66ad,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bd06469b-296c-421d-9262-eb2998995757,DISK], DatanodeInfoWithStorage[127.0.0.1:37128,DS-5cde02d1-cb88-4d1f-9013-514105898e23,DISK], DatanodeInfoWithStorage[127.0.0.1:33205,DS-9f661677-90ce-4470-b6ae-034e1ebbd608,DISK], DatanodeInfoWithStorage[127.0.0.1:46867,DS-8ccb94c9-887c-4195-8d32-f68d33d0d8e0,DISK]]; indices=[1, 2, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-731206400-172.17.0.4-1599347761339:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33247,DS-8c17ffec-bf29-40d2-89ef-d8581cffeb5e,DISK], DatanodeInfoWithStorage[127.0.0.1:38663,DS-9844558b-1d89-4433-9870-e25d926e66ad,DISK], DatanodeInfoWithStorage[127.0.0.1:45778,DS-bd06469b-296c-421d-9262-eb2998995757,DISK], DatanodeInfoWithStorage[127.0.0.1:37128,DS-5cde02d1-cb88-4d1f-9013-514105898e23,DISK], DatanodeInfoWithStorage[127.0.0.1:33205,DS-9f661677-90ce-4470-b6ae-034e1ebbd608,DISK], DatanodeInfoWithStorage[127.0.0.1:46867,DS-8ccb94c9-887c-4195-8d32-f68d33d0d8e0,DISK]]; indices=[1, 2, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-196466926-172.17.0.4-1599347881499:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40377,DS-cede2081-cbae-4423-8d2a-531ca1cfb734,DISK], DatanodeInfoWithStorage[127.0.0.1:37422,DS-42c33a8a-2a06-4f1c-b189-7f1442ffe6a6,DISK], DatanodeInfoWithStorage[127.0.0.1:42956,DS-aa1ce028-b4d6-4d7e-bb24-be757288a665,DISK], DatanodeInfoWithStorage[127.0.0.1:33167,DS-78b99658-6dc5-41f8-a42c-3ba00a65cff6,DISK], DatanodeInfoWithStorage[127.0.0.1:33161,DS-3e0dba00-7c72-4940-9ad6-78336920ceb7,DISK], DatanodeInfoWithStorage[127.0.0.1:42780,DS-f1bf388c-533c-4e58-9504-981f3254533f,DISK]]; indices=[0, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-196466926-172.17.0.4-1599347881499:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40377,DS-cede2081-cbae-4423-8d2a-531ca1cfb734,DISK], DatanodeInfoWithStorage[127.0.0.1:37422,DS-42c33a8a-2a06-4f1c-b189-7f1442ffe6a6,DISK], DatanodeInfoWithStorage[127.0.0.1:42956,DS-aa1ce028-b4d6-4d7e-bb24-be757288a665,DISK], DatanodeInfoWithStorage[127.0.0.1:33167,DS-78b99658-6dc5-41f8-a42c-3ba00a65cff6,DISK], DatanodeInfoWithStorage[127.0.0.1:33161,DS-3e0dba00-7c72-4940-9ad6-78336920ceb7,DISK], DatanodeInfoWithStorage[127.0.0.1:42780,DS-f1bf388c-533c-4e58-9504-981f3254533f,DISK]]; indices=[0, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-196466926-172.17.0.4-1599347881499:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40377,DS-cede2081-cbae-4423-8d2a-531ca1cfb734,DISK], DatanodeInfoWithStorage[127.0.0.1:37422,DS-42c33a8a-2a06-4f1c-b189-7f1442ffe6a6,DISK], DatanodeInfoWithStorage[127.0.0.1:42956,DS-aa1ce028-b4d6-4d7e-bb24-be757288a665,DISK], DatanodeInfoWithStorage[127.0.0.1:33167,DS-78b99658-6dc5-41f8-a42c-3ba00a65cff6,DISK], DatanodeInfoWithStorage[127.0.0.1:33161,DS-3e0dba00-7c72-4940-9ad6-78336920ceb7,DISK], DatanodeInfoWithStorage[127.0.0.1:42780,DS-f1bf388c-533c-4e58-9504-981f3254533f,DISK]]; indices=[0, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-196466926-172.17.0.4-1599347881499:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40377,DS-cede2081-cbae-4423-8d2a-531ca1cfb734,DISK], DatanodeInfoWithStorage[127.0.0.1:37422,DS-42c33a8a-2a06-4f1c-b189-7f1442ffe6a6,DISK], DatanodeInfoWithStorage[127.0.0.1:42956,DS-aa1ce028-b4d6-4d7e-bb24-be757288a665,DISK], DatanodeInfoWithStorage[127.0.0.1:33167,DS-78b99658-6dc5-41f8-a42c-3ba00a65cff6,DISK], DatanodeInfoWithStorage[127.0.0.1:33161,DS-3e0dba00-7c72-4940-9ad6-78336920ceb7,DISK], DatanodeInfoWithStorage[127.0.0.1:42780,DS-f1bf388c-533c-4e58-9504-981f3254533f,DISK]]; indices=[0, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-778790733-172.17.0.4-1599348269224:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41483,DS-1b088017-554a-4e8a-804c-247a81a38e8b,DISK], DatanodeInfoWithStorage[127.0.0.1:45109,DS-cd31fb1d-5567-4c0d-9dc6-7e21512ce2d5,DISK], DatanodeInfoWithStorage[127.0.0.1:40918,DS-8cbd7ce4-8707-4899-b266-54a0877d2ec9,DISK], DatanodeInfoWithStorage[127.0.0.1:37008,DS-a681e533-611d-4996-a6df-5cab6a584c49,DISK], DatanodeInfoWithStorage[127.0.0.1:33102,DS-d681a153-2821-4b7d-866e-23d2482a6209,DISK], DatanodeInfoWithStorage[127.0.0.1:33545,DS-c3d847eb-d3fb-4ee6-9c4e-39812d9466bc,DISK]]; indices=[1, 2, 4, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-778790733-172.17.0.4-1599348269224:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41483,DS-1b088017-554a-4e8a-804c-247a81a38e8b,DISK], DatanodeInfoWithStorage[127.0.0.1:45109,DS-cd31fb1d-5567-4c0d-9dc6-7e21512ce2d5,DISK], DatanodeInfoWithStorage[127.0.0.1:40918,DS-8cbd7ce4-8707-4899-b266-54a0877d2ec9,DISK], DatanodeInfoWithStorage[127.0.0.1:37008,DS-a681e533-611d-4996-a6df-5cab6a584c49,DISK], DatanodeInfoWithStorage[127.0.0.1:33102,DS-d681a153-2821-4b7d-866e-23d2482a6209,DISK], DatanodeInfoWithStorage[127.0.0.1:33545,DS-c3d847eb-d3fb-4ee6-9c4e-39812d9466bc,DISK]]; indices=[1, 2, 4, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-778790733-172.17.0.4-1599348269224:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41483,DS-1b088017-554a-4e8a-804c-247a81a38e8b,DISK], DatanodeInfoWithStorage[127.0.0.1:45109,DS-cd31fb1d-5567-4c0d-9dc6-7e21512ce2d5,DISK], DatanodeInfoWithStorage[127.0.0.1:40918,DS-8cbd7ce4-8707-4899-b266-54a0877d2ec9,DISK], DatanodeInfoWithStorage[127.0.0.1:37008,DS-a681e533-611d-4996-a6df-5cab6a584c49,DISK], DatanodeInfoWithStorage[127.0.0.1:33102,DS-d681a153-2821-4b7d-866e-23d2482a6209,DISK], DatanodeInfoWithStorage[127.0.0.1:33545,DS-c3d847eb-d3fb-4ee6-9c4e-39812d9466bc,DISK]]; indices=[1, 2, 4, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-778790733-172.17.0.4-1599348269224:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41483,DS-1b088017-554a-4e8a-804c-247a81a38e8b,DISK], DatanodeInfoWithStorage[127.0.0.1:45109,DS-cd31fb1d-5567-4c0d-9dc6-7e21512ce2d5,DISK], DatanodeInfoWithStorage[127.0.0.1:40918,DS-8cbd7ce4-8707-4899-b266-54a0877d2ec9,DISK], DatanodeInfoWithStorage[127.0.0.1:37008,DS-a681e533-611d-4996-a6df-5cab6a584c49,DISK], DatanodeInfoWithStorage[127.0.0.1:33102,DS-d681a153-2821-4b7d-866e-23d2482a6209,DISK], DatanodeInfoWithStorage[127.0.0.1:33545,DS-c3d847eb-d3fb-4ee6-9c4e-39812d9466bc,DISK]]; indices=[1, 2, 4, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-969601403-172.17.0.4-1599348645218:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33560,DS-049a3ed6-4026-4d3e-98b2-02e70fc0b9a4,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-13a88164-9c37-43a0-bf89-ec64e5083f2b,DISK], DatanodeInfoWithStorage[127.0.0.1:45061,DS-836d339b-480b-4682-8457-da70e741fbb9,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-578f568b-446c-4825-967b-78d4ad386018,DISK], DatanodeInfoWithStorage[127.0.0.1:34671,DS-e474e569-e599-41ae-8f4a-4037e841176b,DISK], DatanodeInfoWithStorage[127.0.0.1:43802,DS-ccd01830-9b75-40ba-8302-f1b55aee1309,DISK]]; indices=[3, 4, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-969601403-172.17.0.4-1599348645218:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33560,DS-049a3ed6-4026-4d3e-98b2-02e70fc0b9a4,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-13a88164-9c37-43a0-bf89-ec64e5083f2b,DISK], DatanodeInfoWithStorage[127.0.0.1:45061,DS-836d339b-480b-4682-8457-da70e741fbb9,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-578f568b-446c-4825-967b-78d4ad386018,DISK], DatanodeInfoWithStorage[127.0.0.1:34671,DS-e474e569-e599-41ae-8f4a-4037e841176b,DISK], DatanodeInfoWithStorage[127.0.0.1:43802,DS-ccd01830-9b75-40ba-8302-f1b55aee1309,DISK]]; indices=[3, 4, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-969601403-172.17.0.4-1599348645218:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33560,DS-049a3ed6-4026-4d3e-98b2-02e70fc0b9a4,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-13a88164-9c37-43a0-bf89-ec64e5083f2b,DISK], DatanodeInfoWithStorage[127.0.0.1:45061,DS-836d339b-480b-4682-8457-da70e741fbb9,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-578f568b-446c-4825-967b-78d4ad386018,DISK], DatanodeInfoWithStorage[127.0.0.1:34671,DS-e474e569-e599-41ae-8f4a-4037e841176b,DISK], DatanodeInfoWithStorage[127.0.0.1:43802,DS-ccd01830-9b75-40ba-8302-f1b55aee1309,DISK]]; indices=[3, 4, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-969601403-172.17.0.4-1599348645218:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33560,DS-049a3ed6-4026-4d3e-98b2-02e70fc0b9a4,DISK], DatanodeInfoWithStorage[127.0.0.1:43536,DS-13a88164-9c37-43a0-bf89-ec64e5083f2b,DISK], DatanodeInfoWithStorage[127.0.0.1:45061,DS-836d339b-480b-4682-8457-da70e741fbb9,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-578f568b-446c-4825-967b-78d4ad386018,DISK], DatanodeInfoWithStorage[127.0.0.1:34671,DS-e474e569-e599-41ae-8f4a-4037e841176b,DISK], DatanodeInfoWithStorage[127.0.0.1:43802,DS-ccd01830-9b75-40ba-8302-f1b55aee1309,DISK]]; indices=[3, 4, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-603996509-172.17.0.4-1599348721035:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35338,DS-2fd164d7-bc66-4512-8b94-40c930f2833b,DISK], DatanodeInfoWithStorage[127.0.0.1:35658,DS-536843fe-69f7-4eb6-b270-7f88828570b6,DISK], DatanodeInfoWithStorage[127.0.0.1:44303,DS-021d9c42-87ad-44a6-a720-f28aeab461d1,DISK], DatanodeInfoWithStorage[127.0.0.1:34431,DS-86ce58cf-a942-4b27-993d-8d9f145c9434,DISK], DatanodeInfoWithStorage[127.0.0.1:39924,DS-9b5329f4-cc62-4029-91f3-949866d28c5b,DISK], DatanodeInfoWithStorage[127.0.0.1:33975,DS-c4443e1b-ea08-4f78-abff-6534293c04f3,DISK]]; indices=[3, 4, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-603996509-172.17.0.4-1599348721035:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35338,DS-2fd164d7-bc66-4512-8b94-40c930f2833b,DISK], DatanodeInfoWithStorage[127.0.0.1:35658,DS-536843fe-69f7-4eb6-b270-7f88828570b6,DISK], DatanodeInfoWithStorage[127.0.0.1:44303,DS-021d9c42-87ad-44a6-a720-f28aeab461d1,DISK], DatanodeInfoWithStorage[127.0.0.1:34431,DS-86ce58cf-a942-4b27-993d-8d9f145c9434,DISK], DatanodeInfoWithStorage[127.0.0.1:39924,DS-9b5329f4-cc62-4029-91f3-949866d28c5b,DISK], DatanodeInfoWithStorage[127.0.0.1:33975,DS-c4443e1b-ea08-4f78-abff-6534293c04f3,DISK]]; indices=[3, 4, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-603996509-172.17.0.4-1599348721035:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35338,DS-2fd164d7-bc66-4512-8b94-40c930f2833b,DISK], DatanodeInfoWithStorage[127.0.0.1:35658,DS-536843fe-69f7-4eb6-b270-7f88828570b6,DISK], DatanodeInfoWithStorage[127.0.0.1:44303,DS-021d9c42-87ad-44a6-a720-f28aeab461d1,DISK], DatanodeInfoWithStorage[127.0.0.1:34431,DS-86ce58cf-a942-4b27-993d-8d9f145c9434,DISK], DatanodeInfoWithStorage[127.0.0.1:39924,DS-9b5329f4-cc62-4029-91f3-949866d28c5b,DISK], DatanodeInfoWithStorage[127.0.0.1:33975,DS-c4443e1b-ea08-4f78-abff-6534293c04f3,DISK]]; indices=[3, 4, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-603996509-172.17.0.4-1599348721035:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35338,DS-2fd164d7-bc66-4512-8b94-40c930f2833b,DISK], DatanodeInfoWithStorage[127.0.0.1:35658,DS-536843fe-69f7-4eb6-b270-7f88828570b6,DISK], DatanodeInfoWithStorage[127.0.0.1:44303,DS-021d9c42-87ad-44a6-a720-f28aeab461d1,DISK], DatanodeInfoWithStorage[127.0.0.1:34431,DS-86ce58cf-a942-4b27-993d-8d9f145c9434,DISK], DatanodeInfoWithStorage[127.0.0.1:39924,DS-9b5329f4-cc62-4029-91f3-949866d28c5b,DISK], DatanodeInfoWithStorage[127.0.0.1:33975,DS-c4443e1b-ea08-4f78-abff-6534293c04f3,DISK]]; indices=[3, 4, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-227989063-172.17.0.4-1599349512301:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46871,DS-10676603-0534-42b6-b746-d71ab1fa74ef,DISK], DatanodeInfoWithStorage[127.0.0.1:41427,DS-efc3974a-970f-49af-91ff-14895c374b53,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,DS-bbdb8545-f30b-4430-8a3f-caf4e3eb2621,DISK], DatanodeInfoWithStorage[127.0.0.1:45285,DS-2614bb9a-ee47-49a5-8cee-c02e7c65c884,DISK], DatanodeInfoWithStorage[127.0.0.1:46086,DS-bbf6b210-d2c5-4d5d-894e-d454341057d0,DISK], DatanodeInfoWithStorage[127.0.0.1:42041,DS-dbb10d04-c319-4689-9529-429322eaba9c,DISK]]; indices=[1, 2, 3, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-227989063-172.17.0.4-1599349512301:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46871,DS-10676603-0534-42b6-b746-d71ab1fa74ef,DISK], DatanodeInfoWithStorage[127.0.0.1:41427,DS-efc3974a-970f-49af-91ff-14895c374b53,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,DS-bbdb8545-f30b-4430-8a3f-caf4e3eb2621,DISK], DatanodeInfoWithStorage[127.0.0.1:45285,DS-2614bb9a-ee47-49a5-8cee-c02e7c65c884,DISK], DatanodeInfoWithStorage[127.0.0.1:46086,DS-bbf6b210-d2c5-4d5d-894e-d454341057d0,DISK], DatanodeInfoWithStorage[127.0.0.1:42041,DS-dbb10d04-c319-4689-9529-429322eaba9c,DISK]]; indices=[1, 2, 3, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-227989063-172.17.0.4-1599349512301:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46871,DS-10676603-0534-42b6-b746-d71ab1fa74ef,DISK], DatanodeInfoWithStorage[127.0.0.1:41427,DS-efc3974a-970f-49af-91ff-14895c374b53,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,DS-bbdb8545-f30b-4430-8a3f-caf4e3eb2621,DISK], DatanodeInfoWithStorage[127.0.0.1:45285,DS-2614bb9a-ee47-49a5-8cee-c02e7c65c884,DISK], DatanodeInfoWithStorage[127.0.0.1:46086,DS-bbf6b210-d2c5-4d5d-894e-d454341057d0,DISK], DatanodeInfoWithStorage[127.0.0.1:42041,DS-dbb10d04-c319-4689-9529-429322eaba9c,DISK]]; indices=[1, 2, 3, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-227989063-172.17.0.4-1599349512301:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46871,DS-10676603-0534-42b6-b746-d71ab1fa74ef,DISK], DatanodeInfoWithStorage[127.0.0.1:41427,DS-efc3974a-970f-49af-91ff-14895c374b53,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,DS-bbdb8545-f30b-4430-8a3f-caf4e3eb2621,DISK], DatanodeInfoWithStorage[127.0.0.1:45285,DS-2614bb9a-ee47-49a5-8cee-c02e7c65c884,DISK], DatanodeInfoWithStorage[127.0.0.1:46086,DS-bbf6b210-d2c5-4d5d-894e-d454341057d0,DISK], DatanodeInfoWithStorage[127.0.0.1:42041,DS-dbb10d04-c319-4689-9529-429322eaba9c,DISK]]; indices=[1, 2, 3, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1701317388-172.17.0.4-1599349747225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37897,DS-afacb311-be61-48eb-bb44-1e8fe1d0942f,DISK], DatanodeInfoWithStorage[127.0.0.1:38764,DS-c2375cde-21d0-49a0-a119-17ad68863edd,DISK], DatanodeInfoWithStorage[127.0.0.1:41202,DS-5267e160-6e88-42fa-b811-35365807e584,DISK], DatanodeInfoWithStorage[127.0.0.1:40504,DS-a7782791-a5eb-4433-8ce9-b051d288374c,DISK], DatanodeInfoWithStorage[127.0.0.1:41914,DS-293abc73-f8b5-4a73-b804-87cf531b283f,DISK], DatanodeInfoWithStorage[127.0.0.1:34457,DS-109e8318-a5da-4cc6-9c1a-b4b610257a2f,DISK]]; indices=[1, 2, 4, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1701317388-172.17.0.4-1599349747225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37897,DS-afacb311-be61-48eb-bb44-1e8fe1d0942f,DISK], DatanodeInfoWithStorage[127.0.0.1:38764,DS-c2375cde-21d0-49a0-a119-17ad68863edd,DISK], DatanodeInfoWithStorage[127.0.0.1:41202,DS-5267e160-6e88-42fa-b811-35365807e584,DISK], DatanodeInfoWithStorage[127.0.0.1:40504,DS-a7782791-a5eb-4433-8ce9-b051d288374c,DISK], DatanodeInfoWithStorage[127.0.0.1:41914,DS-293abc73-f8b5-4a73-b804-87cf531b283f,DISK], DatanodeInfoWithStorage[127.0.0.1:34457,DS-109e8318-a5da-4cc6-9c1a-b4b610257a2f,DISK]]; indices=[1, 2, 4, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1701317388-172.17.0.4-1599349747225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37897,DS-afacb311-be61-48eb-bb44-1e8fe1d0942f,DISK], DatanodeInfoWithStorage[127.0.0.1:38764,DS-c2375cde-21d0-49a0-a119-17ad68863edd,DISK], DatanodeInfoWithStorage[127.0.0.1:41202,DS-5267e160-6e88-42fa-b811-35365807e584,DISK], DatanodeInfoWithStorage[127.0.0.1:40504,DS-a7782791-a5eb-4433-8ce9-b051d288374c,DISK], DatanodeInfoWithStorage[127.0.0.1:41914,DS-293abc73-f8b5-4a73-b804-87cf531b283f,DISK], DatanodeInfoWithStorage[127.0.0.1:34457,DS-109e8318-a5da-4cc6-9c1a-b4b610257a2f,DISK]]; indices=[1, 2, 4, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1701317388-172.17.0.4-1599349747225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37897,DS-afacb311-be61-48eb-bb44-1e8fe1d0942f,DISK], DatanodeInfoWithStorage[127.0.0.1:38764,DS-c2375cde-21d0-49a0-a119-17ad68863edd,DISK], DatanodeInfoWithStorage[127.0.0.1:41202,DS-5267e160-6e88-42fa-b811-35365807e584,DISK], DatanodeInfoWithStorage[127.0.0.1:40504,DS-a7782791-a5eb-4433-8ce9-b051d288374c,DISK], DatanodeInfoWithStorage[127.0.0.1:41914,DS-293abc73-f8b5-4a73-b804-87cf531b283f,DISK], DatanodeInfoWithStorage[127.0.0.1:34457,DS-109e8318-a5da-4cc6-9c1a-b4b610257a2f,DISK]]; indices=[1, 2, 4, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1530147068-172.17.0.4-1599349777225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33557,DS-f71b1198-9b04-4e1e-947e-c77059276348,DISK], DatanodeInfoWithStorage[127.0.0.1:46710,DS-e9554924-b880-4e2a-a897-18d6ec3059e7,DISK], DatanodeInfoWithStorage[127.0.0.1:38199,DS-b32a5af0-a21f-48f9-a506-0faa6b6f60d6,DISK], DatanodeInfoWithStorage[127.0.0.1:40738,DS-840a8cb9-49e5-4b37-b6eb-8f8d6e06b912,DISK], DatanodeInfoWithStorage[127.0.0.1:35992,DS-39a52fc4-8153-40ad-a757-239aeb7bd659,DISK], DatanodeInfoWithStorage[127.0.0.1:36726,DS-0f5e2e91-6e3a-4f98-9a5a-19b2b68d559b,DISK]]; indices=[0, 1, 2, 3, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1530147068-172.17.0.4-1599349777225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33557,DS-f71b1198-9b04-4e1e-947e-c77059276348,DISK], DatanodeInfoWithStorage[127.0.0.1:46710,DS-e9554924-b880-4e2a-a897-18d6ec3059e7,DISK], DatanodeInfoWithStorage[127.0.0.1:38199,DS-b32a5af0-a21f-48f9-a506-0faa6b6f60d6,DISK], DatanodeInfoWithStorage[127.0.0.1:40738,DS-840a8cb9-49e5-4b37-b6eb-8f8d6e06b912,DISK], DatanodeInfoWithStorage[127.0.0.1:35992,DS-39a52fc4-8153-40ad-a757-239aeb7bd659,DISK], DatanodeInfoWithStorage[127.0.0.1:36726,DS-0f5e2e91-6e3a-4f98-9a5a-19b2b68d559b,DISK]]; indices=[0, 1, 2, 3, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1530147068-172.17.0.4-1599349777225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33557,DS-f71b1198-9b04-4e1e-947e-c77059276348,DISK], DatanodeInfoWithStorage[127.0.0.1:46710,DS-e9554924-b880-4e2a-a897-18d6ec3059e7,DISK], DatanodeInfoWithStorage[127.0.0.1:38199,DS-b32a5af0-a21f-48f9-a506-0faa6b6f60d6,DISK], DatanodeInfoWithStorage[127.0.0.1:40738,DS-840a8cb9-49e5-4b37-b6eb-8f8d6e06b912,DISK], DatanodeInfoWithStorage[127.0.0.1:35992,DS-39a52fc4-8153-40ad-a757-239aeb7bd659,DISK], DatanodeInfoWithStorage[127.0.0.1:36726,DS-0f5e2e91-6e3a-4f98-9a5a-19b2b68d559b,DISK]]; indices=[0, 1, 2, 3, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1530147068-172.17.0.4-1599349777225:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33557,DS-f71b1198-9b04-4e1e-947e-c77059276348,DISK], DatanodeInfoWithStorage[127.0.0.1:46710,DS-e9554924-b880-4e2a-a897-18d6ec3059e7,DISK], DatanodeInfoWithStorage[127.0.0.1:38199,DS-b32a5af0-a21f-48f9-a506-0faa6b6f60d6,DISK], DatanodeInfoWithStorage[127.0.0.1:40738,DS-840a8cb9-49e5-4b37-b6eb-8f8d6e06b912,DISK], DatanodeInfoWithStorage[127.0.0.1:35992,DS-39a52fc4-8153-40ad-a757-239aeb7bd659,DISK], DatanodeInfoWithStorage[127.0.0.1:36726,DS-0f5e2e91-6e3a-4f98-9a5a-19b2b68d559b,DISK]]; indices=[0, 1, 2, 3, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1384415727-172.17.0.4-1599349870620:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45783,DS-ba1e2b3b-12f2-4e05-96c3-c5b558c3f45f,DISK], DatanodeInfoWithStorage[127.0.0.1:39136,DS-84f37918-c957-411d-a7f3-1443ee53e87d,DISK], DatanodeInfoWithStorage[127.0.0.1:40010,DS-eadaef7a-45d6-4724-b437-42f51bef3a2c,DISK], DatanodeInfoWithStorage[127.0.0.1:44108,DS-95b234de-ea91-46a0-ab42-096f7b5ad4c1,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-17eb7b50-4c98-49e2-9023-519402477945,DISK], DatanodeInfoWithStorage[127.0.0.1:43922,DS-e11405ba-bbea-492a-b47a-ce111f4da9bd,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1384415727-172.17.0.4-1599349870620:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45783,DS-ba1e2b3b-12f2-4e05-96c3-c5b558c3f45f,DISK], DatanodeInfoWithStorage[127.0.0.1:39136,DS-84f37918-c957-411d-a7f3-1443ee53e87d,DISK], DatanodeInfoWithStorage[127.0.0.1:40010,DS-eadaef7a-45d6-4724-b437-42f51bef3a2c,DISK], DatanodeInfoWithStorage[127.0.0.1:44108,DS-95b234de-ea91-46a0-ab42-096f7b5ad4c1,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-17eb7b50-4c98-49e2-9023-519402477945,DISK], DatanodeInfoWithStorage[127.0.0.1:43922,DS-e11405ba-bbea-492a-b47a-ce111f4da9bd,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1384415727-172.17.0.4-1599349870620:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45783,DS-ba1e2b3b-12f2-4e05-96c3-c5b558c3f45f,DISK], DatanodeInfoWithStorage[127.0.0.1:39136,DS-84f37918-c957-411d-a7f3-1443ee53e87d,DISK], DatanodeInfoWithStorage[127.0.0.1:40010,DS-eadaef7a-45d6-4724-b437-42f51bef3a2c,DISK], DatanodeInfoWithStorage[127.0.0.1:44108,DS-95b234de-ea91-46a0-ab42-096f7b5ad4c1,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-17eb7b50-4c98-49e2-9023-519402477945,DISK], DatanodeInfoWithStorage[127.0.0.1:43922,DS-e11405ba-bbea-492a-b47a-ce111f4da9bd,DISK]]; indices=[1, 2, 3, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1384415727-172.17.0.4-1599349870620:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45783,DS-ba1e2b3b-12f2-4e05-96c3-c5b558c3f45f,DISK], DatanodeInfoWithStorage[127.0.0.1:39136,DS-84f37918-c957-411d-a7f3-1443ee53e87d,DISK], DatanodeInfoWithStorage[127.0.0.1:40010,DS-eadaef7a-45d6-4724-b437-42f51bef3a2c,DISK], DatanodeInfoWithStorage[127.0.0.1:44108,DS-95b234de-ea91-46a0-ab42-096f7b5ad4c1,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-17eb7b50-4c98-49e2-9023-519402477945,DISK], DatanodeInfoWithStorage[127.0.0.1:43922,DS-e11405ba-bbea-492a-b47a-ce111f4da9bd,DISK]]; indices=[1, 2, 3, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1647673498-172.17.0.4-1599350019161:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42341,DS-472f3d30-6629-4c4b-86a4-f50a31467eea,DISK], DatanodeInfoWithStorage[127.0.0.1:43668,DS-234643ec-2d06-4e20-b861-c6b487223f09,DISK], DatanodeInfoWithStorage[127.0.0.1:45359,DS-ff58420d-7a17-40a6-b065-0212dba07618,DISK], DatanodeInfoWithStorage[127.0.0.1:35388,DS-cc13ecb7-bf6b-4405-bd15-58dfa190b4a7,DISK], DatanodeInfoWithStorage[127.0.0.1:34472,DS-8dbdd8f0-5896-470b-8839-f966aaa596a5,DISK], DatanodeInfoWithStorage[127.0.0.1:37372,DS-b4f1d05b-5866-4ff9-851c-f444caba89fc,DISK]]; indices=[0, 1, 3, 4, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1647673498-172.17.0.4-1599350019161:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42341,DS-472f3d30-6629-4c4b-86a4-f50a31467eea,DISK], DatanodeInfoWithStorage[127.0.0.1:43668,DS-234643ec-2d06-4e20-b861-c6b487223f09,DISK], DatanodeInfoWithStorage[127.0.0.1:45359,DS-ff58420d-7a17-40a6-b065-0212dba07618,DISK], DatanodeInfoWithStorage[127.0.0.1:35388,DS-cc13ecb7-bf6b-4405-bd15-58dfa190b4a7,DISK], DatanodeInfoWithStorage[127.0.0.1:34472,DS-8dbdd8f0-5896-470b-8839-f966aaa596a5,DISK], DatanodeInfoWithStorage[127.0.0.1:37372,DS-b4f1d05b-5866-4ff9-851c-f444caba89fc,DISK]]; indices=[0, 1, 3, 4, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1647673498-172.17.0.4-1599350019161:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42341,DS-472f3d30-6629-4c4b-86a4-f50a31467eea,DISK], DatanodeInfoWithStorage[127.0.0.1:43668,DS-234643ec-2d06-4e20-b861-c6b487223f09,DISK], DatanodeInfoWithStorage[127.0.0.1:45359,DS-ff58420d-7a17-40a6-b065-0212dba07618,DISK], DatanodeInfoWithStorage[127.0.0.1:35388,DS-cc13ecb7-bf6b-4405-bd15-58dfa190b4a7,DISK], DatanodeInfoWithStorage[127.0.0.1:34472,DS-8dbdd8f0-5896-470b-8839-f966aaa596a5,DISK], DatanodeInfoWithStorage[127.0.0.1:37372,DS-b4f1d05b-5866-4ff9-851c-f444caba89fc,DISK]]; indices=[0, 1, 3, 4, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1647673498-172.17.0.4-1599350019161:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42341,DS-472f3d30-6629-4c4b-86a4-f50a31467eea,DISK], DatanodeInfoWithStorage[127.0.0.1:43668,DS-234643ec-2d06-4e20-b861-c6b487223f09,DISK], DatanodeInfoWithStorage[127.0.0.1:45359,DS-ff58420d-7a17-40a6-b065-0212dba07618,DISK], DatanodeInfoWithStorage[127.0.0.1:35388,DS-cc13ecb7-bf6b-4405-bd15-58dfa190b4a7,DISK], DatanodeInfoWithStorage[127.0.0.1:34472,DS-8dbdd8f0-5896-470b-8839-f966aaa596a5,DISK], DatanodeInfoWithStorage[127.0.0.1:37372,DS-b4f1d05b-5866-4ff9-851c-f444caba89fc,DISK]]; indices=[0, 1, 3, 4, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-54801932-172.17.0.4-1599350160510:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37545,DS-50b5bc3b-b550-461d-88a4-cb11975bfa46,DISK], DatanodeInfoWithStorage[127.0.0.1:34933,DS-06ff6086-d3c5-49f9-a5d1-72c66185a882,DISK], DatanodeInfoWithStorage[127.0.0.1:34634,DS-72daaff3-2b72-4cdf-baff-47aeda0e923f,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,DS-dd65b09a-1354-4fe3-91c1-6936feeddf63,DISK], DatanodeInfoWithStorage[127.0.0.1:36869,DS-821bef64-685d-4e69-94af-acbd454aba34,DISK], DatanodeInfoWithStorage[127.0.0.1:36554,DS-5feea6fa-d108-4541-bb4f-d8fe905aebdb,DISK]]; indices=[0, 1, 3, 4, 5, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-54801932-172.17.0.4-1599350160510:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37545,DS-50b5bc3b-b550-461d-88a4-cb11975bfa46,DISK], DatanodeInfoWithStorage[127.0.0.1:34933,DS-06ff6086-d3c5-49f9-a5d1-72c66185a882,DISK], DatanodeInfoWithStorage[127.0.0.1:34634,DS-72daaff3-2b72-4cdf-baff-47aeda0e923f,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,DS-dd65b09a-1354-4fe3-91c1-6936feeddf63,DISK], DatanodeInfoWithStorage[127.0.0.1:36869,DS-821bef64-685d-4e69-94af-acbd454aba34,DISK], DatanodeInfoWithStorage[127.0.0.1:36554,DS-5feea6fa-d108-4541-bb4f-d8fe905aebdb,DISK]]; indices=[0, 1, 3, 4, 5, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-54801932-172.17.0.4-1599350160510:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37545,DS-50b5bc3b-b550-461d-88a4-cb11975bfa46,DISK], DatanodeInfoWithStorage[127.0.0.1:34933,DS-06ff6086-d3c5-49f9-a5d1-72c66185a882,DISK], DatanodeInfoWithStorage[127.0.0.1:34634,DS-72daaff3-2b72-4cdf-baff-47aeda0e923f,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,DS-dd65b09a-1354-4fe3-91c1-6936feeddf63,DISK], DatanodeInfoWithStorage[127.0.0.1:36869,DS-821bef64-685d-4e69-94af-acbd454aba34,DISK], DatanodeInfoWithStorage[127.0.0.1:36554,DS-5feea6fa-d108-4541-bb4f-d8fe905aebdb,DISK]]; indices=[0, 1, 3, 4, 5, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-54801932-172.17.0.4-1599350160510:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37545,DS-50b5bc3b-b550-461d-88a4-cb11975bfa46,DISK], DatanodeInfoWithStorage[127.0.0.1:34933,DS-06ff6086-d3c5-49f9-a5d1-72c66185a882,DISK], DatanodeInfoWithStorage[127.0.0.1:34634,DS-72daaff3-2b72-4cdf-baff-47aeda0e923f,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,DS-dd65b09a-1354-4fe3-91c1-6936feeddf63,DISK], DatanodeInfoWithStorage[127.0.0.1:36869,DS-821bef64-685d-4e69-94af-acbd454aba34,DISK], DatanodeInfoWithStorage[127.0.0.1:36554,DS-5feea6fa-d108-4541-bb4f-d8fe905aebdb,DISK]]; indices=[0, 1, 3, 4, 5, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1700818126-172.17.0.4-1599350425545:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38916,DS-1eb46521-6cc7-4f25-9a08-76fac0ed9a49,DISK], DatanodeInfoWithStorage[127.0.0.1:39893,DS-22ee3f76-7bf0-4e86-961c-f3abd08f3d90,DISK], DatanodeInfoWithStorage[127.0.0.1:46294,DS-3f0fde6c-c70e-447e-a6b5-fa9b7876b2af,DISK], DatanodeInfoWithStorage[127.0.0.1:37751,DS-9b2f1f28-6da2-4d85-9155-3d05ec5f232a,DISK], DatanodeInfoWithStorage[127.0.0.1:40486,DS-7fb664d5-192f-4aae-9186-2b43c7ae9099,DISK], DatanodeInfoWithStorage[127.0.0.1:45788,DS-03a6b42e-573a-454c-8496-0026a376d1ef,DISK]]; indices=[0, 1, 3, 4, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1700818126-172.17.0.4-1599350425545:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38916,DS-1eb46521-6cc7-4f25-9a08-76fac0ed9a49,DISK], DatanodeInfoWithStorage[127.0.0.1:39893,DS-22ee3f76-7bf0-4e86-961c-f3abd08f3d90,DISK], DatanodeInfoWithStorage[127.0.0.1:46294,DS-3f0fde6c-c70e-447e-a6b5-fa9b7876b2af,DISK], DatanodeInfoWithStorage[127.0.0.1:37751,DS-9b2f1f28-6da2-4d85-9155-3d05ec5f232a,DISK], DatanodeInfoWithStorage[127.0.0.1:40486,DS-7fb664d5-192f-4aae-9186-2b43c7ae9099,DISK], DatanodeInfoWithStorage[127.0.0.1:45788,DS-03a6b42e-573a-454c-8496-0026a376d1ef,DISK]]; indices=[0, 1, 3, 4, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1700818126-172.17.0.4-1599350425545:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38916,DS-1eb46521-6cc7-4f25-9a08-76fac0ed9a49,DISK], DatanodeInfoWithStorage[127.0.0.1:39893,DS-22ee3f76-7bf0-4e86-961c-f3abd08f3d90,DISK], DatanodeInfoWithStorage[127.0.0.1:46294,DS-3f0fde6c-c70e-447e-a6b5-fa9b7876b2af,DISK], DatanodeInfoWithStorage[127.0.0.1:37751,DS-9b2f1f28-6da2-4d85-9155-3d05ec5f232a,DISK], DatanodeInfoWithStorage[127.0.0.1:40486,DS-7fb664d5-192f-4aae-9186-2b43c7ae9099,DISK], DatanodeInfoWithStorage[127.0.0.1:45788,DS-03a6b42e-573a-454c-8496-0026a376d1ef,DISK]]; indices=[0, 1, 3, 4, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1700818126-172.17.0.4-1599350425545:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38916,DS-1eb46521-6cc7-4f25-9a08-76fac0ed9a49,DISK], DatanodeInfoWithStorage[127.0.0.1:39893,DS-22ee3f76-7bf0-4e86-961c-f3abd08f3d90,DISK], DatanodeInfoWithStorage[127.0.0.1:46294,DS-3f0fde6c-c70e-447e-a6b5-fa9b7876b2af,DISK], DatanodeInfoWithStorage[127.0.0.1:37751,DS-9b2f1f28-6da2-4d85-9155-3d05ec5f232a,DISK], DatanodeInfoWithStorage[127.0.0.1:40486,DS-7fb664d5-192f-4aae-9186-2b43c7ae9099,DISK], DatanodeInfoWithStorage[127.0.0.1:45788,DS-03a6b42e-573a-454c-8496-0026a376d1ef,DISK]]; indices=[0, 1, 3, 4, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-29301638-172.17.0.4-1599350510911:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40408,DS-ced22365-c04a-49ab-83f3-45f1578f76ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45585,DS-375c619d-93a1-45cb-8b3a-54cc9893df03,DISK], DatanodeInfoWithStorage[127.0.0.1:42907,DS-e58e2a97-1571-492e-96a8-98a9263e4332,DISK], DatanodeInfoWithStorage[127.0.0.1:35997,DS-e26e8c15-3ebc-4981-b68a-f1c283a6bc27,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-e416e092-b8fe-4c2f-82bf-cee05214b0db,DISK], DatanodeInfoWithStorage[127.0.0.1:45233,DS-eb97501a-7392-43ea-b72b-bcbff9bb6931,DISK]]; indices=[0, 1, 2, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-29301638-172.17.0.4-1599350510911:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40408,DS-ced22365-c04a-49ab-83f3-45f1578f76ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45585,DS-375c619d-93a1-45cb-8b3a-54cc9893df03,DISK], DatanodeInfoWithStorage[127.0.0.1:42907,DS-e58e2a97-1571-492e-96a8-98a9263e4332,DISK], DatanodeInfoWithStorage[127.0.0.1:35997,DS-e26e8c15-3ebc-4981-b68a-f1c283a6bc27,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-e416e092-b8fe-4c2f-82bf-cee05214b0db,DISK], DatanodeInfoWithStorage[127.0.0.1:45233,DS-eb97501a-7392-43ea-b72b-bcbff9bb6931,DISK]]; indices=[0, 1, 2, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-29301638-172.17.0.4-1599350510911:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40408,DS-ced22365-c04a-49ab-83f3-45f1578f76ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45585,DS-375c619d-93a1-45cb-8b3a-54cc9893df03,DISK], DatanodeInfoWithStorage[127.0.0.1:42907,DS-e58e2a97-1571-492e-96a8-98a9263e4332,DISK], DatanodeInfoWithStorage[127.0.0.1:35997,DS-e26e8c15-3ebc-4981-b68a-f1c283a6bc27,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-e416e092-b8fe-4c2f-82bf-cee05214b0db,DISK], DatanodeInfoWithStorage[127.0.0.1:45233,DS-eb97501a-7392-43ea-b72b-bcbff9bb6931,DISK]]; indices=[0, 1, 2, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-29301638-172.17.0.4-1599350510911:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40408,DS-ced22365-c04a-49ab-83f3-45f1578f76ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45585,DS-375c619d-93a1-45cb-8b3a-54cc9893df03,DISK], DatanodeInfoWithStorage[127.0.0.1:42907,DS-e58e2a97-1571-492e-96a8-98a9263e4332,DISK], DatanodeInfoWithStorage[127.0.0.1:35997,DS-e26e8c15-3ebc-4981-b68a-f1c283a6bc27,DISK], DatanodeInfoWithStorage[127.0.0.1:41055,DS-e416e092-b8fe-4c2f-82bf-cee05214b0db,DISK], DatanodeInfoWithStorage[127.0.0.1:45233,DS-eb97501a-7392-43ea-b72b-bcbff9bb6931,DISK]]; indices=[0, 1, 2, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1808412038-172.17.0.4-1599350855107:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43186,DS-5e42bf65-a557-4ed6-a28c-de7aafce1eb2,DISK], DatanodeInfoWithStorage[127.0.0.1:43784,DS-652491bb-9d3e-4a3d-acbc-ec6701ecc315,DISK], DatanodeInfoWithStorage[127.0.0.1:41693,DS-76a59c83-cfaa-4a74-9d62-69723b87e9cf,DISK], DatanodeInfoWithStorage[127.0.0.1:37141,DS-29b52b6c-03ee-468d-a719-79f538fd4b93,DISK], DatanodeInfoWithStorage[127.0.0.1:33781,DS-ea67e18d-5dbf-425c-a1e6-c21e1035ee9e,DISK], DatanodeInfoWithStorage[127.0.0.1:33254,DS-6a8ba067-e43b-447b-99a4-f26a45502ee6,DISK]]; indices=[0, 1, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1808412038-172.17.0.4-1599350855107:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43186,DS-5e42bf65-a557-4ed6-a28c-de7aafce1eb2,DISK], DatanodeInfoWithStorage[127.0.0.1:43784,DS-652491bb-9d3e-4a3d-acbc-ec6701ecc315,DISK], DatanodeInfoWithStorage[127.0.0.1:41693,DS-76a59c83-cfaa-4a74-9d62-69723b87e9cf,DISK], DatanodeInfoWithStorage[127.0.0.1:37141,DS-29b52b6c-03ee-468d-a719-79f538fd4b93,DISK], DatanodeInfoWithStorage[127.0.0.1:33781,DS-ea67e18d-5dbf-425c-a1e6-c21e1035ee9e,DISK], DatanodeInfoWithStorage[127.0.0.1:33254,DS-6a8ba067-e43b-447b-99a4-f26a45502ee6,DISK]]; indices=[0, 1, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1808412038-172.17.0.4-1599350855107:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43186,DS-5e42bf65-a557-4ed6-a28c-de7aafce1eb2,DISK], DatanodeInfoWithStorage[127.0.0.1:43784,DS-652491bb-9d3e-4a3d-acbc-ec6701ecc315,DISK], DatanodeInfoWithStorage[127.0.0.1:41693,DS-76a59c83-cfaa-4a74-9d62-69723b87e9cf,DISK], DatanodeInfoWithStorage[127.0.0.1:37141,DS-29b52b6c-03ee-468d-a719-79f538fd4b93,DISK], DatanodeInfoWithStorage[127.0.0.1:33781,DS-ea67e18d-5dbf-425c-a1e6-c21e1035ee9e,DISK], DatanodeInfoWithStorage[127.0.0.1:33254,DS-6a8ba067-e43b-447b-99a4-f26a45502ee6,DISK]]; indices=[0, 1, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1808412038-172.17.0.4-1599350855107:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43186,DS-5e42bf65-a557-4ed6-a28c-de7aafce1eb2,DISK], DatanodeInfoWithStorage[127.0.0.1:43784,DS-652491bb-9d3e-4a3d-acbc-ec6701ecc315,DISK], DatanodeInfoWithStorage[127.0.0.1:41693,DS-76a59c83-cfaa-4a74-9d62-69723b87e9cf,DISK], DatanodeInfoWithStorage[127.0.0.1:37141,DS-29b52b6c-03ee-468d-a719-79f538fd4b93,DISK], DatanodeInfoWithStorage[127.0.0.1:33781,DS-ea67e18d-5dbf-425c-a1e6-c21e1035ee9e,DISK], DatanodeInfoWithStorage[127.0.0.1:33254,DS-6a8ba067-e43b-447b-99a4-f26a45502ee6,DISK]]; indices=[0, 1, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.NullPointerException
	at org.apache.hadoop.hdfs.MiniDFSCluster.stopDataNode(MiniDFSCluster.java:2352)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:835)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1183999292-172.17.0.4-1599351127187:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36635,DS-b3c856ce-8c95-4d22-8e90-befd793d555f,DISK], DatanodeInfoWithStorage[127.0.0.1:43569,DS-7ce2d220-f523-4022-9c77-7132aa0437c5,DISK], DatanodeInfoWithStorage[127.0.0.1:38320,DS-87455184-4f14-4008-a371-8d0d1de8981f,DISK], DatanodeInfoWithStorage[127.0.0.1:39780,DS-3708a185-073f-4c91-987e-1f9e79192ed4,DISK], DatanodeInfoWithStorage[127.0.0.1:41072,DS-0e2ef641-8eeb-4098-a244-5ba6d52cc8cc,DISK], DatanodeInfoWithStorage[127.0.0.1:34679,DS-71825fc3-4edf-443e-bd23-6c5359c079f3,DISK]]; indices=[1, 3, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1183999292-172.17.0.4-1599351127187:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36635,DS-b3c856ce-8c95-4d22-8e90-befd793d555f,DISK], DatanodeInfoWithStorage[127.0.0.1:43569,DS-7ce2d220-f523-4022-9c77-7132aa0437c5,DISK], DatanodeInfoWithStorage[127.0.0.1:38320,DS-87455184-4f14-4008-a371-8d0d1de8981f,DISK], DatanodeInfoWithStorage[127.0.0.1:39780,DS-3708a185-073f-4c91-987e-1f9e79192ed4,DISK], DatanodeInfoWithStorage[127.0.0.1:41072,DS-0e2ef641-8eeb-4098-a244-5ba6d52cc8cc,DISK], DatanodeInfoWithStorage[127.0.0.1:34679,DS-71825fc3-4edf-443e-bd23-6c5359c079f3,DISK]]; indices=[1, 3, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1183999292-172.17.0.4-1599351127187:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36635,DS-b3c856ce-8c95-4d22-8e90-befd793d555f,DISK], DatanodeInfoWithStorage[127.0.0.1:43569,DS-7ce2d220-f523-4022-9c77-7132aa0437c5,DISK], DatanodeInfoWithStorage[127.0.0.1:38320,DS-87455184-4f14-4008-a371-8d0d1de8981f,DISK], DatanodeInfoWithStorage[127.0.0.1:39780,DS-3708a185-073f-4c91-987e-1f9e79192ed4,DISK], DatanodeInfoWithStorage[127.0.0.1:41072,DS-0e2ef641-8eeb-4098-a244-5ba6d52cc8cc,DISK], DatanodeInfoWithStorage[127.0.0.1:34679,DS-71825fc3-4edf-443e-bd23-6c5359c079f3,DISK]]; indices=[1, 3, 5, 6, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1183999292-172.17.0.4-1599351127187:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36635,DS-b3c856ce-8c95-4d22-8e90-befd793d555f,DISK], DatanodeInfoWithStorage[127.0.0.1:43569,DS-7ce2d220-f523-4022-9c77-7132aa0437c5,DISK], DatanodeInfoWithStorage[127.0.0.1:38320,DS-87455184-4f14-4008-a371-8d0d1de8981f,DISK], DatanodeInfoWithStorage[127.0.0.1:39780,DS-3708a185-073f-4c91-987e-1f9e79192ed4,DISK], DatanodeInfoWithStorage[127.0.0.1:41072,DS-0e2ef641-8eeb-4098-a244-5ba6d52cc8cc,DISK], DatanodeInfoWithStorage[127.0.0.1:34679,DS-71825fc3-4edf-443e-bd23-6c5359c079f3,DISK]]; indices=[1, 3, 5, 6, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 0
v2: 1000
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal#testStatisticsForErasureCodingRead
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-733103099-172.17.0.4-1599351396010:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35129,DS-54455a33-5e2f-428e-b012-cbc55e33bda0,DISK], DatanodeInfoWithStorage[127.0.0.1:37371,DS-ecb65866-3273-46d5-a087-b18b23f2c5bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36968,DS-6703d957-851a-41e0-ad5d-92678bc5e7c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-984aec42-0b4e-45d9-b56f-eb32c36ca706,DISK], DatanodeInfoWithStorage[127.0.0.1:46080,DS-19d462fe-7810-4535-8de8-198ae8dd35b3,DISK], DatanodeInfoWithStorage[127.0.0.1:42616,DS-8dd4e6c4-1cf6-476f-b4aa-1b90855f37d1,DISK]]; indices=[0, 1, 2, 3, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-733103099-172.17.0.4-1599351396010:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35129,DS-54455a33-5e2f-428e-b012-cbc55e33bda0,DISK], DatanodeInfoWithStorage[127.0.0.1:37371,DS-ecb65866-3273-46d5-a087-b18b23f2c5bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36968,DS-6703d957-851a-41e0-ad5d-92678bc5e7c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-984aec42-0b4e-45d9-b56f-eb32c36ca706,DISK], DatanodeInfoWithStorage[127.0.0.1:46080,DS-19d462fe-7810-4535-8de8-198ae8dd35b3,DISK], DatanodeInfoWithStorage[127.0.0.1:42616,DS-8dd4e6c4-1cf6-476f-b4aa-1b90855f37d1,DISK]]; indices=[0, 1, 2, 3, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=10485883;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-733103099-172.17.0.4-1599351396010:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35129,DS-54455a33-5e2f-428e-b012-cbc55e33bda0,DISK], DatanodeInfoWithStorage[127.0.0.1:37371,DS-ecb65866-3273-46d5-a087-b18b23f2c5bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36968,DS-6703d957-851a-41e0-ad5d-92678bc5e7c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-984aec42-0b4e-45d9-b56f-eb32c36ca706,DISK], DatanodeInfoWithStorage[127.0.0.1:46080,DS-19d462fe-7810-4535-8de8-198ae8dd35b3,DISK], DatanodeInfoWithStorage[127.0.0.1:42616,DS-8dd4e6c4-1cf6-476f-b4aa-1b90855f37d1,DISK]]; indices=[0, 1, 2, 3, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-733103099-172.17.0.4-1599351396010:blk_-9223372036854775792_1002; getBlockSize()=10485883; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35129,DS-54455a33-5e2f-428e-b012-cbc55e33bda0,DISK], DatanodeInfoWithStorage[127.0.0.1:37371,DS-ecb65866-3273-46d5-a087-b18b23f2c5bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36968,DS-6703d957-851a-41e0-ad5d-92678bc5e7c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-984aec42-0b4e-45d9-b56f-eb32c36ca706,DISK], DatanodeInfoWithStorage[127.0.0.1:46080,DS-19d462fe-7810-4535-8de8-198ae8dd35b3,DISK], DatanodeInfoWithStorage[127.0.0.1:42616,DS-8dd4e6c4-1cf6-476f-b4aa-1b90855f37d1,DISK]]; indices=[0, 1, 2, 3, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:149)
	at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:210)
	at org.apache.hadoop.hdfs.client.impl.TestBlockReaderLocal.testStatisticsForErasureCodingRead(TestBlockReaderLocal.java:838)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 16 out of 50
v1v1v2v2 failed with probability 9 out of 50
result: might be true error
Total execution time in seconds : 4028
