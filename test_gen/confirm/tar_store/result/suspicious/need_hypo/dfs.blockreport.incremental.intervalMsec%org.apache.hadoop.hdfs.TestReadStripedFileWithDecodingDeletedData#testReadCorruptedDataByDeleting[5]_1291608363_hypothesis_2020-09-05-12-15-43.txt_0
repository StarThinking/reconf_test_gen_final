reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1308885006-172.17.0.21-1599308159173:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42601,DS-3d7d4b2e-1176-48f8-ad55-829bcc343511,DISK], DatanodeInfoWithStorage[127.0.0.1:44044,DS-092e059f-196e-42c9-ada7-0412a0418969,DISK], DatanodeInfoWithStorage[127.0.0.1:42629,DS-70d08387-62d2-464a-ac81-b015e8feadad,DISK], DatanodeInfoWithStorage[127.0.0.1:43882,DS-4cc6f102-7819-4640-9d59-3ceb3865c266,DISK], DatanodeInfoWithStorage[127.0.0.1:33654,DS-48458315-6c45-4d69-b91c-3aa090a7c72b,DISK], DatanodeInfoWithStorage[127.0.0.1:43740,DS-492abdd1-6900-46ae-8cce-a96e33b5378f,DISK]]; indices=[0, 1, 3, 4, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-1308885006-172.17.0.21-1599308159173:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42601,DS-3d7d4b2e-1176-48f8-ad55-829bcc343511,DISK], DatanodeInfoWithStorage[127.0.0.1:44044,DS-092e059f-196e-42c9-ada7-0412a0418969,DISK], DatanodeInfoWithStorage[127.0.0.1:42629,DS-70d08387-62d2-464a-ac81-b015e8feadad,DISK], DatanodeInfoWithStorage[127.0.0.1:43882,DS-4cc6f102-7819-4640-9d59-3ceb3865c266,DISK], DatanodeInfoWithStorage[127.0.0.1:33654,DS-48458315-6c45-4d69-b91c-3aa090a7c72b,DISK], DatanodeInfoWithStorage[127.0.0.1:43740,DS-492abdd1-6900-46ae-8cce-a96e33b5378f,DISK]]; indices=[0, 1, 3, 4, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1308885006-172.17.0.21-1599308159173:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42601,DS-3d7d4b2e-1176-48f8-ad55-829bcc343511,DISK], DatanodeInfoWithStorage[127.0.0.1:44044,DS-092e059f-196e-42c9-ada7-0412a0418969,DISK], DatanodeInfoWithStorage[127.0.0.1:42629,DS-70d08387-62d2-464a-ac81-b015e8feadad,DISK], DatanodeInfoWithStorage[127.0.0.1:43882,DS-4cc6f102-7819-4640-9d59-3ceb3865c266,DISK], DatanodeInfoWithStorage[127.0.0.1:33654,DS-48458315-6c45-4d69-b91c-3aa090a7c72b,DISK], DatanodeInfoWithStorage[127.0.0.1:43740,DS-492abdd1-6900-46ae-8cce-a96e33b5378f,DISK]]; indices=[0, 1, 3, 4, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-1308885006-172.17.0.21-1599308159173:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42601,DS-3d7d4b2e-1176-48f8-ad55-829bcc343511,DISK], DatanodeInfoWithStorage[127.0.0.1:44044,DS-092e059f-196e-42c9-ada7-0412a0418969,DISK], DatanodeInfoWithStorage[127.0.0.1:42629,DS-70d08387-62d2-464a-ac81-b015e8feadad,DISK], DatanodeInfoWithStorage[127.0.0.1:43882,DS-4cc6f102-7819-4640-9d59-3ceb3865c266,DISK], DatanodeInfoWithStorage[127.0.0.1:33654,DS-48458315-6c45-4d69-b91c-3aa090a7c72b,DISK], DatanodeInfoWithStorage[127.0.0.1:43740,DS-492abdd1-6900-46ae-8cce-a96e33b5378f,DISK]]; indices=[0, 1, 3, 4, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-837558882-172.17.0.21-1599308641106:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44949,DS-9a6f1c5b-2894-4d84-b201-aaf80dda267c,DISK], DatanodeInfoWithStorage[127.0.0.1:37099,DS-e5abdc44-fade-4ce2-9aeb-432cdd487ab5,DISK], DatanodeInfoWithStorage[127.0.0.1:33421,DS-7acf7851-acd4-477e-9929-8405c98b25fe,DISK], DatanodeInfoWithStorage[127.0.0.1:46486,DS-f2339f4d-01b1-4796-bc28-e7ec532464ca,DISK], DatanodeInfoWithStorage[127.0.0.1:40202,DS-82c4d06a-af90-4137-926a-d1ff384a924d,DISK], DatanodeInfoWithStorage[127.0.0.1:35303,DS-1cdfcbb4-a7b6-4f6a-83fb-58f000cc6934,DISK], DatanodeInfoWithStorage[127.0.0.1:41873,DS-e6223501-79c8-4ed2-829b-ff152fb20cce,DISK], DatanodeInfoWithStorage[127.0.0.1:34110,DS-1d50f3a3-2faf-471a-a29c-cd1032ea8373,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-837558882-172.17.0.21-1599308641106:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44949,DS-9a6f1c5b-2894-4d84-b201-aaf80dda267c,DISK], DatanodeInfoWithStorage[127.0.0.1:37099,DS-e5abdc44-fade-4ce2-9aeb-432cdd487ab5,DISK], DatanodeInfoWithStorage[127.0.0.1:33421,DS-7acf7851-acd4-477e-9929-8405c98b25fe,DISK], DatanodeInfoWithStorage[127.0.0.1:46486,DS-f2339f4d-01b1-4796-bc28-e7ec532464ca,DISK], DatanodeInfoWithStorage[127.0.0.1:40202,DS-82c4d06a-af90-4137-926a-d1ff384a924d,DISK], DatanodeInfoWithStorage[127.0.0.1:35303,DS-1cdfcbb4-a7b6-4f6a-83fb-58f000cc6934,DISK], DatanodeInfoWithStorage[127.0.0.1:41873,DS-e6223501-79c8-4ed2-829b-ff152fb20cce,DISK], DatanodeInfoWithStorage[127.0.0.1:34110,DS-1d50f3a3-2faf-471a-a29c-cd1032ea8373,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-837558882-172.17.0.21-1599308641106:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44949,DS-9a6f1c5b-2894-4d84-b201-aaf80dda267c,DISK], DatanodeInfoWithStorage[127.0.0.1:37099,DS-e5abdc44-fade-4ce2-9aeb-432cdd487ab5,DISK], DatanodeInfoWithStorage[127.0.0.1:33421,DS-7acf7851-acd4-477e-9929-8405c98b25fe,DISK], DatanodeInfoWithStorage[127.0.0.1:46486,DS-f2339f4d-01b1-4796-bc28-e7ec532464ca,DISK], DatanodeInfoWithStorage[127.0.0.1:40202,DS-82c4d06a-af90-4137-926a-d1ff384a924d,DISK], DatanodeInfoWithStorage[127.0.0.1:35303,DS-1cdfcbb4-a7b6-4f6a-83fb-58f000cc6934,DISK], DatanodeInfoWithStorage[127.0.0.1:41873,DS-e6223501-79c8-4ed2-829b-ff152fb20cce,DISK], DatanodeInfoWithStorage[127.0.0.1:34110,DS-1d50f3a3-2faf-471a-a29c-cd1032ea8373,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-837558882-172.17.0.21-1599308641106:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44949,DS-9a6f1c5b-2894-4d84-b201-aaf80dda267c,DISK], DatanodeInfoWithStorage[127.0.0.1:37099,DS-e5abdc44-fade-4ce2-9aeb-432cdd487ab5,DISK], DatanodeInfoWithStorage[127.0.0.1:33421,DS-7acf7851-acd4-477e-9929-8405c98b25fe,DISK], DatanodeInfoWithStorage[127.0.0.1:46486,DS-f2339f4d-01b1-4796-bc28-e7ec532464ca,DISK], DatanodeInfoWithStorage[127.0.0.1:40202,DS-82c4d06a-af90-4137-926a-d1ff384a924d,DISK], DatanodeInfoWithStorage[127.0.0.1:35303,DS-1cdfcbb4-a7b6-4f6a-83fb-58f000cc6934,DISK], DatanodeInfoWithStorage[127.0.0.1:41873,DS-e6223501-79c8-4ed2-829b-ff152fb20cce,DISK], DatanodeInfoWithStorage[127.0.0.1:34110,DS-1d50f3a3-2faf-471a-a29c-cd1032ea8373,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1723828177-172.17.0.21-1599309969026:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45958,DS-9ad99009-a244-40b8-ba88-dfd82e8b301d,DISK], DatanodeInfoWithStorage[127.0.0.1:44274,DS-d7032791-8529-4347-86c1-dc9dfd52c337,DISK], DatanodeInfoWithStorage[127.0.0.1:38676,DS-227a3d0d-8e86-474b-b0b4-e56442a8e1bd,DISK], DatanodeInfoWithStorage[127.0.0.1:45818,DS-c083413d-5642-4a38-82f9-cf4f8f9ca2a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42739,DS-30db2c7c-ef7c-4eb0-a50a-20df12a830ad,DISK], DatanodeInfoWithStorage[127.0.0.1:41348,DS-4ac22854-facc-4d83-806d-8d452cc0ba60,DISK], DatanodeInfoWithStorage[127.0.0.1:38721,DS-06cfdcfe-a04c-4d3b-936d-5ccda7f61878,DISK], DatanodeInfoWithStorage[127.0.0.1:37849,DS-2b60572f-ebab-4f0e-b36b-b1c5d5c7bf45,DISK]]; indices=[0, 1, 2, 3, 4, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1723828177-172.17.0.21-1599309969026:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45958,DS-9ad99009-a244-40b8-ba88-dfd82e8b301d,DISK], DatanodeInfoWithStorage[127.0.0.1:44274,DS-d7032791-8529-4347-86c1-dc9dfd52c337,DISK], DatanodeInfoWithStorage[127.0.0.1:38676,DS-227a3d0d-8e86-474b-b0b4-e56442a8e1bd,DISK], DatanodeInfoWithStorage[127.0.0.1:45818,DS-c083413d-5642-4a38-82f9-cf4f8f9ca2a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42739,DS-30db2c7c-ef7c-4eb0-a50a-20df12a830ad,DISK], DatanodeInfoWithStorage[127.0.0.1:41348,DS-4ac22854-facc-4d83-806d-8d452cc0ba60,DISK], DatanodeInfoWithStorage[127.0.0.1:38721,DS-06cfdcfe-a04c-4d3b-936d-5ccda7f61878,DISK], DatanodeInfoWithStorage[127.0.0.1:37849,DS-2b60572f-ebab-4f0e-b36b-b1c5d5c7bf45,DISK]]; indices=[0, 1, 2, 3, 4, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1723828177-172.17.0.21-1599309969026:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45958,DS-9ad99009-a244-40b8-ba88-dfd82e8b301d,DISK], DatanodeInfoWithStorage[127.0.0.1:44274,DS-d7032791-8529-4347-86c1-dc9dfd52c337,DISK], DatanodeInfoWithStorage[127.0.0.1:38676,DS-227a3d0d-8e86-474b-b0b4-e56442a8e1bd,DISK], DatanodeInfoWithStorage[127.0.0.1:45818,DS-c083413d-5642-4a38-82f9-cf4f8f9ca2a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42739,DS-30db2c7c-ef7c-4eb0-a50a-20df12a830ad,DISK], DatanodeInfoWithStorage[127.0.0.1:41348,DS-4ac22854-facc-4d83-806d-8d452cc0ba60,DISK], DatanodeInfoWithStorage[127.0.0.1:38721,DS-06cfdcfe-a04c-4d3b-936d-5ccda7f61878,DISK], DatanodeInfoWithStorage[127.0.0.1:37849,DS-2b60572f-ebab-4f0e-b36b-b1c5d5c7bf45,DISK]]; indices=[0, 1, 2, 3, 4, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1723828177-172.17.0.21-1599309969026:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45958,DS-9ad99009-a244-40b8-ba88-dfd82e8b301d,DISK], DatanodeInfoWithStorage[127.0.0.1:44274,DS-d7032791-8529-4347-86c1-dc9dfd52c337,DISK], DatanodeInfoWithStorage[127.0.0.1:38676,DS-227a3d0d-8e86-474b-b0b4-e56442a8e1bd,DISK], DatanodeInfoWithStorage[127.0.0.1:45818,DS-c083413d-5642-4a38-82f9-cf4f8f9ca2a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42739,DS-30db2c7c-ef7c-4eb0-a50a-20df12a830ad,DISK], DatanodeInfoWithStorage[127.0.0.1:41348,DS-4ac22854-facc-4d83-806d-8d452cc0ba60,DISK], DatanodeInfoWithStorage[127.0.0.1:38721,DS-06cfdcfe-a04c-4d3b-936d-5ccda7f61878,DISK], DatanodeInfoWithStorage[127.0.0.1:37849,DS-2b60572f-ebab-4f0e-b36b-b1c5d5c7bf45,DISK]]; indices=[0, 1, 2, 3, 4, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-377420041-172.17.0.21-1599310861855:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37913,DS-f810d996-c06b-4886-a4ee-8ad8342a1862,DISK], DatanodeInfoWithStorage[127.0.0.1:45244,DS-948b6f11-33f0-4bfd-af58-b9c1e9ea8e0f,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-ec7c1479-6005-4c3e-9804-2200f1d2f1d3,DISK], DatanodeInfoWithStorage[127.0.0.1:40222,DS-895e8934-6ea9-4a1f-b9c5-c7f3a29869b6,DISK], DatanodeInfoWithStorage[127.0.0.1:45122,DS-9951a396-e5fc-426c-a43f-1be60b26feaa,DISK], DatanodeInfoWithStorage[127.0.0.1:38979,DS-5819ea47-4038-4a1c-af05-5fc63e8d47e9,DISK]]; indices=[0, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-377420041-172.17.0.21-1599310861855:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37913,DS-f810d996-c06b-4886-a4ee-8ad8342a1862,DISK], DatanodeInfoWithStorage[127.0.0.1:45244,DS-948b6f11-33f0-4bfd-af58-b9c1e9ea8e0f,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-ec7c1479-6005-4c3e-9804-2200f1d2f1d3,DISK], DatanodeInfoWithStorage[127.0.0.1:40222,DS-895e8934-6ea9-4a1f-b9c5-c7f3a29869b6,DISK], DatanodeInfoWithStorage[127.0.0.1:45122,DS-9951a396-e5fc-426c-a43f-1be60b26feaa,DISK], DatanodeInfoWithStorage[127.0.0.1:38979,DS-5819ea47-4038-4a1c-af05-5fc63e8d47e9,DISK]]; indices=[0, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-377420041-172.17.0.21-1599310861855:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37913,DS-f810d996-c06b-4886-a4ee-8ad8342a1862,DISK], DatanodeInfoWithStorage[127.0.0.1:45244,DS-948b6f11-33f0-4bfd-af58-b9c1e9ea8e0f,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-ec7c1479-6005-4c3e-9804-2200f1d2f1d3,DISK], DatanodeInfoWithStorage[127.0.0.1:40222,DS-895e8934-6ea9-4a1f-b9c5-c7f3a29869b6,DISK], DatanodeInfoWithStorage[127.0.0.1:45122,DS-9951a396-e5fc-426c-a43f-1be60b26feaa,DISK], DatanodeInfoWithStorage[127.0.0.1:38979,DS-5819ea47-4038-4a1c-af05-5fc63e8d47e9,DISK]]; indices=[0, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-377420041-172.17.0.21-1599310861855:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37913,DS-f810d996-c06b-4886-a4ee-8ad8342a1862,DISK], DatanodeInfoWithStorage[127.0.0.1:45244,DS-948b6f11-33f0-4bfd-af58-b9c1e9ea8e0f,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-ec7c1479-6005-4c3e-9804-2200f1d2f1d3,DISK], DatanodeInfoWithStorage[127.0.0.1:40222,DS-895e8934-6ea9-4a1f-b9c5-c7f3a29869b6,DISK], DatanodeInfoWithStorage[127.0.0.1:45122,DS-9951a396-e5fc-426c-a43f-1be60b26feaa,DISK], DatanodeInfoWithStorage[127.0.0.1:38979,DS-5819ea47-4038-4a1c-af05-5fc63e8d47e9,DISK]]; indices=[0, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-435016759-172.17.0.21-1599311211604:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33284,DS-06d12fa6-5f2d-4f52-a2cd-e5d9b5b9203e,DISK], DatanodeInfoWithStorage[127.0.0.1:38067,DS-f8de7c76-facf-4fcb-a4dc-665a97c7f870,DISK], DatanodeInfoWithStorage[127.0.0.1:39526,DS-50d4bdcd-8dc7-4d3b-a110-b7264fb65571,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-6e0b6dda-62ac-4df8-a3c9-e0be4d8b486c,DISK], DatanodeInfoWithStorage[127.0.0.1:40649,DS-26c1ea0a-e857-4f9b-a89c-34b02c75b6d6,DISK], DatanodeInfoWithStorage[127.0.0.1:36359,DS-88cc2aeb-1e1b-4575-89c6-d2dd64e9667f,DISK]]; indices=[0, 1, 2, 3, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-435016759-172.17.0.21-1599311211604:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33284,DS-06d12fa6-5f2d-4f52-a2cd-e5d9b5b9203e,DISK], DatanodeInfoWithStorage[127.0.0.1:38067,DS-f8de7c76-facf-4fcb-a4dc-665a97c7f870,DISK], DatanodeInfoWithStorage[127.0.0.1:39526,DS-50d4bdcd-8dc7-4d3b-a110-b7264fb65571,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-6e0b6dda-62ac-4df8-a3c9-e0be4d8b486c,DISK], DatanodeInfoWithStorage[127.0.0.1:40649,DS-26c1ea0a-e857-4f9b-a89c-34b02c75b6d6,DISK], DatanodeInfoWithStorage[127.0.0.1:36359,DS-88cc2aeb-1e1b-4575-89c6-d2dd64e9667f,DISK]]; indices=[0, 1, 2, 3, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-435016759-172.17.0.21-1599311211604:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33284,DS-06d12fa6-5f2d-4f52-a2cd-e5d9b5b9203e,DISK], DatanodeInfoWithStorage[127.0.0.1:38067,DS-f8de7c76-facf-4fcb-a4dc-665a97c7f870,DISK], DatanodeInfoWithStorage[127.0.0.1:39526,DS-50d4bdcd-8dc7-4d3b-a110-b7264fb65571,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-6e0b6dda-62ac-4df8-a3c9-e0be4d8b486c,DISK], DatanodeInfoWithStorage[127.0.0.1:40649,DS-26c1ea0a-e857-4f9b-a89c-34b02c75b6d6,DISK], DatanodeInfoWithStorage[127.0.0.1:36359,DS-88cc2aeb-1e1b-4575-89c6-d2dd64e9667f,DISK]]; indices=[0, 1, 2, 3, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-435016759-172.17.0.21-1599311211604:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33284,DS-06d12fa6-5f2d-4f52-a2cd-e5d9b5b9203e,DISK], DatanodeInfoWithStorage[127.0.0.1:38067,DS-f8de7c76-facf-4fcb-a4dc-665a97c7f870,DISK], DatanodeInfoWithStorage[127.0.0.1:39526,DS-50d4bdcd-8dc7-4d3b-a110-b7264fb65571,DISK], DatanodeInfoWithStorage[127.0.0.1:46608,DS-6e0b6dda-62ac-4df8-a3c9-e0be4d8b486c,DISK], DatanodeInfoWithStorage[127.0.0.1:40649,DS-26c1ea0a-e857-4f9b-a89c-34b02c75b6d6,DISK], DatanodeInfoWithStorage[127.0.0.1:36359,DS-88cc2aeb-1e1b-4575-89c6-d2dd64e9667f,DISK]]; indices=[0, 1, 2, 3, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1596418098-172.17.0.21-1599312002403:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41834,DS-237e05a1-cf74-4f1d-9ef0-b1c5c39fb560,DISK], DatanodeInfoWithStorage[127.0.0.1:43855,DS-4c6d168a-e910-4283-aa96-5a185eb64a37,DISK], DatanodeInfoWithStorage[127.0.0.1:43444,DS-27edfb8f-03e6-4856-a1be-7fef6850635e,DISK], DatanodeInfoWithStorage[127.0.0.1:37651,DS-fc0b21a8-fbfd-4927-895d-908636cc9ec0,DISK], DatanodeInfoWithStorage[127.0.0.1:35676,DS-38c12085-ece1-4f2e-9ab1-9c87586c9bfe,DISK], DatanodeInfoWithStorage[127.0.0.1:33008,DS-35538c21-e394-4a9a-9c45-9fdca243ed1f,DISK]]; indices=[0, 1, 3, 5, 6, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1596418098-172.17.0.21-1599312002403:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41834,DS-237e05a1-cf74-4f1d-9ef0-b1c5c39fb560,DISK], DatanodeInfoWithStorage[127.0.0.1:43855,DS-4c6d168a-e910-4283-aa96-5a185eb64a37,DISK], DatanodeInfoWithStorage[127.0.0.1:43444,DS-27edfb8f-03e6-4856-a1be-7fef6850635e,DISK], DatanodeInfoWithStorage[127.0.0.1:37651,DS-fc0b21a8-fbfd-4927-895d-908636cc9ec0,DISK], DatanodeInfoWithStorage[127.0.0.1:35676,DS-38c12085-ece1-4f2e-9ab1-9c87586c9bfe,DISK], DatanodeInfoWithStorage[127.0.0.1:33008,DS-35538c21-e394-4a9a-9c45-9fdca243ed1f,DISK]]; indices=[0, 1, 3, 5, 6, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1596418098-172.17.0.21-1599312002403:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41834,DS-237e05a1-cf74-4f1d-9ef0-b1c5c39fb560,DISK], DatanodeInfoWithStorage[127.0.0.1:43855,DS-4c6d168a-e910-4283-aa96-5a185eb64a37,DISK], DatanodeInfoWithStorage[127.0.0.1:43444,DS-27edfb8f-03e6-4856-a1be-7fef6850635e,DISK], DatanodeInfoWithStorage[127.0.0.1:37651,DS-fc0b21a8-fbfd-4927-895d-908636cc9ec0,DISK], DatanodeInfoWithStorage[127.0.0.1:35676,DS-38c12085-ece1-4f2e-9ab1-9c87586c9bfe,DISK], DatanodeInfoWithStorage[127.0.0.1:33008,DS-35538c21-e394-4a9a-9c45-9fdca243ed1f,DISK]]; indices=[0, 1, 3, 5, 6, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1596418098-172.17.0.21-1599312002403:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41834,DS-237e05a1-cf74-4f1d-9ef0-b1c5c39fb560,DISK], DatanodeInfoWithStorage[127.0.0.1:43855,DS-4c6d168a-e910-4283-aa96-5a185eb64a37,DISK], DatanodeInfoWithStorage[127.0.0.1:43444,DS-27edfb8f-03e6-4856-a1be-7fef6850635e,DISK], DatanodeInfoWithStorage[127.0.0.1:37651,DS-fc0b21a8-fbfd-4927-895d-908636cc9ec0,DISK], DatanodeInfoWithStorage[127.0.0.1:35676,DS-38c12085-ece1-4f2e-9ab1-9c87586c9bfe,DISK], DatanodeInfoWithStorage[127.0.0.1:33008,DS-35538c21-e394-4a9a-9c45-9fdca243ed1f,DISK]]; indices=[0, 1, 3, 5, 6, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1214503073-172.17.0.21-1599312027765:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42898,DS-92e3b342-3ed7-4642-8b70-9150409a035e,DISK], DatanodeInfoWithStorage[127.0.0.1:33452,DS-2d053713-a7dc-4f95-adec-2a0603e87101,DISK], DatanodeInfoWithStorage[127.0.0.1:39884,DS-ee8e53b3-0377-485b-a262-cccec616cf4f,DISK], DatanodeInfoWithStorage[127.0.0.1:38231,DS-38268bca-a804-4f1e-93a3-f6917712d097,DISK], DatanodeInfoWithStorage[127.0.0.1:32926,DS-fc929682-69dc-46b8-8952-a85510fa403c,DISK], DatanodeInfoWithStorage[127.0.0.1:42635,DS-411befdb-b163-4dab-8a50-6157477c3018,DISK]]; indices=[0, 2, 3, 4, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1214503073-172.17.0.21-1599312027765:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42898,DS-92e3b342-3ed7-4642-8b70-9150409a035e,DISK], DatanodeInfoWithStorage[127.0.0.1:38099,DS-4d3b4655-a2b4-4507-a8e8-848414678028,DISK], DatanodeInfoWithStorage[127.0.0.1:33452,DS-2d053713-a7dc-4f95-adec-2a0603e87101,DISK], DatanodeInfoWithStorage[127.0.0.1:39884,DS-ee8e53b3-0377-485b-a262-cccec616cf4f,DISK], DatanodeInfoWithStorage[127.0.0.1:38231,DS-38268bca-a804-4f1e-93a3-f6917712d097,DISK], DatanodeInfoWithStorage[127.0.0.1:32926,DS-fc929682-69dc-46b8-8952-a85510fa403c,DISK], DatanodeInfoWithStorage[127.0.0.1:42635,DS-411befdb-b163-4dab-8a50-6157477c3018,DISK]]; indices=[0, 1, 2, 3, 4, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1214503073-172.17.0.21-1599312027765:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42898,DS-92e3b342-3ed7-4642-8b70-9150409a035e,DISK], DatanodeInfoWithStorage[127.0.0.1:33452,DS-2d053713-a7dc-4f95-adec-2a0603e87101,DISK], DatanodeInfoWithStorage[127.0.0.1:39884,DS-ee8e53b3-0377-485b-a262-cccec616cf4f,DISK], DatanodeInfoWithStorage[127.0.0.1:38231,DS-38268bca-a804-4f1e-93a3-f6917712d097,DISK], DatanodeInfoWithStorage[127.0.0.1:32926,DS-fc929682-69dc-46b8-8952-a85510fa403c,DISK], DatanodeInfoWithStorage[127.0.0.1:42635,DS-411befdb-b163-4dab-8a50-6157477c3018,DISK]]; indices=[0, 2, 3, 4, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1214503073-172.17.0.21-1599312027765:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42898,DS-92e3b342-3ed7-4642-8b70-9150409a035e,DISK], DatanodeInfoWithStorage[127.0.0.1:38099,DS-4d3b4655-a2b4-4507-a8e8-848414678028,DISK], DatanodeInfoWithStorage[127.0.0.1:33452,DS-2d053713-a7dc-4f95-adec-2a0603e87101,DISK], DatanodeInfoWithStorage[127.0.0.1:39884,DS-ee8e53b3-0377-485b-a262-cccec616cf4f,DISK], DatanodeInfoWithStorage[127.0.0.1:38231,DS-38268bca-a804-4f1e-93a3-f6917712d097,DISK], DatanodeInfoWithStorage[127.0.0.1:32926,DS-fc929682-69dc-46b8-8952-a85510fa403c,DISK], DatanodeInfoWithStorage[127.0.0.1:42635,DS-411befdb-b163-4dab-8a50-6157477c3018,DISK]]; indices=[0, 1, 2, 3, 4, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1816776831-172.17.0.21-1599312122718:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40786,DS-f3128b4f-bcc0-49f3-ac9d-94bc4b12d3d1,DISK], DatanodeInfoWithStorage[127.0.0.1:35322,DS-ad2cae19-3765-4524-9d5d-4efe06f54cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:39727,DS-4e3694a0-951b-40ff-9214-92be4dd0f5d9,DISK], DatanodeInfoWithStorage[127.0.0.1:36557,DS-b3f440e5-021a-4b00-bb27-c18b9ea551aa,DISK], DatanodeInfoWithStorage[127.0.0.1:38650,DS-1b77fd0d-c31d-47e1-93c3-4f6574985892,DISK], DatanodeInfoWithStorage[127.0.0.1:33306,DS-43cf3bf0-1a0c-4664-97ae-329ddc1fa90f,DISK], DatanodeInfoWithStorage[127.0.0.1:34633,DS-ccaab62d-f139-41e8-bf3a-01244e018cda,DISK], DatanodeInfoWithStorage[127.0.0.1:40163,DS-7879adbf-2b91-4119-bb9c-c286651c4fd9,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-1816776831-172.17.0.21-1599312122718:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40786,DS-f3128b4f-bcc0-49f3-ac9d-94bc4b12d3d1,DISK], DatanodeInfoWithStorage[127.0.0.1:35322,DS-ad2cae19-3765-4524-9d5d-4efe06f54cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:39727,DS-4e3694a0-951b-40ff-9214-92be4dd0f5d9,DISK], DatanodeInfoWithStorage[127.0.0.1:36557,DS-b3f440e5-021a-4b00-bb27-c18b9ea551aa,DISK], DatanodeInfoWithStorage[127.0.0.1:38650,DS-1b77fd0d-c31d-47e1-93c3-4f6574985892,DISK], DatanodeInfoWithStorage[127.0.0.1:33306,DS-43cf3bf0-1a0c-4664-97ae-329ddc1fa90f,DISK], DatanodeInfoWithStorage[127.0.0.1:34633,DS-ccaab62d-f139-41e8-bf3a-01244e018cda,DISK], DatanodeInfoWithStorage[127.0.0.1:40163,DS-7879adbf-2b91-4119-bb9c-c286651c4fd9,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1816776831-172.17.0.21-1599312122718:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40786,DS-f3128b4f-bcc0-49f3-ac9d-94bc4b12d3d1,DISK], DatanodeInfoWithStorage[127.0.0.1:35322,DS-ad2cae19-3765-4524-9d5d-4efe06f54cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:39727,DS-4e3694a0-951b-40ff-9214-92be4dd0f5d9,DISK], DatanodeInfoWithStorage[127.0.0.1:36557,DS-b3f440e5-021a-4b00-bb27-c18b9ea551aa,DISK], DatanodeInfoWithStorage[127.0.0.1:38650,DS-1b77fd0d-c31d-47e1-93c3-4f6574985892,DISK], DatanodeInfoWithStorage[127.0.0.1:33306,DS-43cf3bf0-1a0c-4664-97ae-329ddc1fa90f,DISK], DatanodeInfoWithStorage[127.0.0.1:34633,DS-ccaab62d-f139-41e8-bf3a-01244e018cda,DISK], DatanodeInfoWithStorage[127.0.0.1:40163,DS-7879adbf-2b91-4119-bb9c-c286651c4fd9,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-1816776831-172.17.0.21-1599312122718:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40786,DS-f3128b4f-bcc0-49f3-ac9d-94bc4b12d3d1,DISK], DatanodeInfoWithStorage[127.0.0.1:35322,DS-ad2cae19-3765-4524-9d5d-4efe06f54cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:39727,DS-4e3694a0-951b-40ff-9214-92be4dd0f5d9,DISK], DatanodeInfoWithStorage[127.0.0.1:36557,DS-b3f440e5-021a-4b00-bb27-c18b9ea551aa,DISK], DatanodeInfoWithStorage[127.0.0.1:38650,DS-1b77fd0d-c31d-47e1-93c3-4f6574985892,DISK], DatanodeInfoWithStorage[127.0.0.1:33306,DS-43cf3bf0-1a0c-4664-97ae-329ddc1fa90f,DISK], DatanodeInfoWithStorage[127.0.0.1:34633,DS-ccaab62d-f139-41e8-bf3a-01244e018cda,DISK], DatanodeInfoWithStorage[127.0.0.1:40163,DS-7879adbf-2b91-4119-bb9c-c286651c4fd9,DISK]]; indices=[0, 1, 2, 3, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1743970595-172.17.0.21-1599312891365:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46061,DS-3d74cf39-3a91-4d95-8d7e-79567ab247bf,DISK], DatanodeInfoWithStorage[127.0.0.1:43978,DS-4e5620af-57a8-4bf3-8ee8-4c79ec1574ed,DISK], DatanodeInfoWithStorage[127.0.0.1:41116,DS-79c79136-f208-4632-88a1-1a0724711320,DISK], DatanodeInfoWithStorage[127.0.0.1:40216,DS-e23a79d2-2a40-4b35-a5c8-0c34a5c8a12c,DISK], DatanodeInfoWithStorage[127.0.0.1:40088,DS-3eb45237-a629-4dbb-a09e-2da7ae5cdfd0,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-02c6d2d9-87de-4f44-87b6-577863e7daac,DISK]]; indices=[0, 1, 2, 3, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1743970595-172.17.0.21-1599312891365:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46061,DS-3d74cf39-3a91-4d95-8d7e-79567ab247bf,DISK], DatanodeInfoWithStorage[127.0.0.1:43978,DS-4e5620af-57a8-4bf3-8ee8-4c79ec1574ed,DISK], DatanodeInfoWithStorage[127.0.0.1:41116,DS-79c79136-f208-4632-88a1-1a0724711320,DISK], DatanodeInfoWithStorage[127.0.0.1:40216,DS-e23a79d2-2a40-4b35-a5c8-0c34a5c8a12c,DISK], DatanodeInfoWithStorage[127.0.0.1:40088,DS-3eb45237-a629-4dbb-a09e-2da7ae5cdfd0,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-02c6d2d9-87de-4f44-87b6-577863e7daac,DISK]]; indices=[0, 1, 2, 3, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1743970595-172.17.0.21-1599312891365:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46061,DS-3d74cf39-3a91-4d95-8d7e-79567ab247bf,DISK], DatanodeInfoWithStorage[127.0.0.1:43978,DS-4e5620af-57a8-4bf3-8ee8-4c79ec1574ed,DISK], DatanodeInfoWithStorage[127.0.0.1:41116,DS-79c79136-f208-4632-88a1-1a0724711320,DISK], DatanodeInfoWithStorage[127.0.0.1:40216,DS-e23a79d2-2a40-4b35-a5c8-0c34a5c8a12c,DISK], DatanodeInfoWithStorage[127.0.0.1:40088,DS-3eb45237-a629-4dbb-a09e-2da7ae5cdfd0,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-02c6d2d9-87de-4f44-87b6-577863e7daac,DISK]]; indices=[0, 1, 2, 3, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1743970595-172.17.0.21-1599312891365:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46061,DS-3d74cf39-3a91-4d95-8d7e-79567ab247bf,DISK], DatanodeInfoWithStorage[127.0.0.1:43978,DS-4e5620af-57a8-4bf3-8ee8-4c79ec1574ed,DISK], DatanodeInfoWithStorage[127.0.0.1:41116,DS-79c79136-f208-4632-88a1-1a0724711320,DISK], DatanodeInfoWithStorage[127.0.0.1:40216,DS-e23a79d2-2a40-4b35-a5c8-0c34a5c8a12c,DISK], DatanodeInfoWithStorage[127.0.0.1:40088,DS-3eb45237-a629-4dbb-a09e-2da7ae5cdfd0,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-02c6d2d9-87de-4f44-87b6-577863e7daac,DISK]]; indices=[0, 1, 2, 3, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-324291055-172.17.0.21-1599313634827:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44940,DS-3b50f6a5-e3f3-41ed-92c9-c9d47ad82f9a,DISK], DatanodeInfoWithStorage[127.0.0.1:36484,DS-502d7ccd-a657-49cb-926a-9e42f4a69bf1,DISK], DatanodeInfoWithStorage[127.0.0.1:41810,DS-b5b67c93-b40d-4a2d-96b6-19f6064a3c12,DISK], DatanodeInfoWithStorage[127.0.0.1:42234,DS-2127d4f0-56fb-4527-a5f6-e79bcdc1d563,DISK], DatanodeInfoWithStorage[127.0.0.1:40315,DS-9e28d13c-1261-4a3d-a334-794347b04112,DISK], DatanodeInfoWithStorage[127.0.0.1:34765,DS-5fa79b20-b0a2-44d5-a7f4-5d119c4167d4,DISK]]; indices=[0, 1, 3, 4, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-324291055-172.17.0.21-1599313634827:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44940,DS-3b50f6a5-e3f3-41ed-92c9-c9d47ad82f9a,DISK], DatanodeInfoWithStorage[127.0.0.1:36484,DS-502d7ccd-a657-49cb-926a-9e42f4a69bf1,DISK], DatanodeInfoWithStorage[127.0.0.1:41810,DS-b5b67c93-b40d-4a2d-96b6-19f6064a3c12,DISK], DatanodeInfoWithStorage[127.0.0.1:42234,DS-2127d4f0-56fb-4527-a5f6-e79bcdc1d563,DISK], DatanodeInfoWithStorage[127.0.0.1:40315,DS-9e28d13c-1261-4a3d-a334-794347b04112,DISK], DatanodeInfoWithStorage[127.0.0.1:34765,DS-5fa79b20-b0a2-44d5-a7f4-5d119c4167d4,DISK]]; indices=[0, 1, 3, 4, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-324291055-172.17.0.21-1599313634827:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44940,DS-3b50f6a5-e3f3-41ed-92c9-c9d47ad82f9a,DISK], DatanodeInfoWithStorage[127.0.0.1:36484,DS-502d7ccd-a657-49cb-926a-9e42f4a69bf1,DISK], DatanodeInfoWithStorage[127.0.0.1:41810,DS-b5b67c93-b40d-4a2d-96b6-19f6064a3c12,DISK], DatanodeInfoWithStorage[127.0.0.1:42234,DS-2127d4f0-56fb-4527-a5f6-e79bcdc1d563,DISK], DatanodeInfoWithStorage[127.0.0.1:40315,DS-9e28d13c-1261-4a3d-a334-794347b04112,DISK], DatanodeInfoWithStorage[127.0.0.1:34765,DS-5fa79b20-b0a2-44d5-a7f4-5d119c4167d4,DISK]]; indices=[0, 1, 3, 4, 5, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-324291055-172.17.0.21-1599313634827:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44940,DS-3b50f6a5-e3f3-41ed-92c9-c9d47ad82f9a,DISK], DatanodeInfoWithStorage[127.0.0.1:36484,DS-502d7ccd-a657-49cb-926a-9e42f4a69bf1,DISK], DatanodeInfoWithStorage[127.0.0.1:41810,DS-b5b67c93-b40d-4a2d-96b6-19f6064a3c12,DISK], DatanodeInfoWithStorage[127.0.0.1:42234,DS-2127d4f0-56fb-4527-a5f6-e79bcdc1d563,DISK], DatanodeInfoWithStorage[127.0.0.1:40315,DS-9e28d13c-1261-4a3d-a334-794347b04112,DISK], DatanodeInfoWithStorage[127.0.0.1:34765,DS-5fa79b20-b0a2-44d5-a7f4-5d119c4167d4,DISK]]; indices=[0, 1, 3, 4, 5, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-227992370-172.17.0.21-1599315394280:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40561,DS-296b76a5-df3e-4245-a884-a61beb8b035a,DISK], DatanodeInfoWithStorage[127.0.0.1:34181,DS-7da22f42-5daf-47a0-b8e4-2fbe213bfa8d,DISK], DatanodeInfoWithStorage[127.0.0.1:41712,DS-7676025e-3850-475c-b94d-eb121322605c,DISK], DatanodeInfoWithStorage[127.0.0.1:35582,DS-1b337cb9-392e-45c1-b9f3-e67a67743941,DISK], DatanodeInfoWithStorage[127.0.0.1:36185,DS-4dbae519-f3a4-45dc-80d1-e0ee687f970e,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-c5b88346-42af-43d0-8d53-cfcf33ba2a70,DISK]]; indices=[0, 1, 2, 4, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-227992370-172.17.0.21-1599315394280:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40561,DS-296b76a5-df3e-4245-a884-a61beb8b035a,DISK], DatanodeInfoWithStorage[127.0.0.1:34181,DS-7da22f42-5daf-47a0-b8e4-2fbe213bfa8d,DISK], DatanodeInfoWithStorage[127.0.0.1:41712,DS-7676025e-3850-475c-b94d-eb121322605c,DISK], DatanodeInfoWithStorage[127.0.0.1:35582,DS-1b337cb9-392e-45c1-b9f3-e67a67743941,DISK], DatanodeInfoWithStorage[127.0.0.1:36185,DS-4dbae519-f3a4-45dc-80d1-e0ee687f970e,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-c5b88346-42af-43d0-8d53-cfcf33ba2a70,DISK]]; indices=[0, 1, 2, 4, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-227992370-172.17.0.21-1599315394280:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40561,DS-296b76a5-df3e-4245-a884-a61beb8b035a,DISK], DatanodeInfoWithStorage[127.0.0.1:34181,DS-7da22f42-5daf-47a0-b8e4-2fbe213bfa8d,DISK], DatanodeInfoWithStorage[127.0.0.1:41712,DS-7676025e-3850-475c-b94d-eb121322605c,DISK], DatanodeInfoWithStorage[127.0.0.1:35582,DS-1b337cb9-392e-45c1-b9f3-e67a67743941,DISK], DatanodeInfoWithStorage[127.0.0.1:36185,DS-4dbae519-f3a4-45dc-80d1-e0ee687f970e,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-c5b88346-42af-43d0-8d53-cfcf33ba2a70,DISK]]; indices=[0, 1, 2, 4, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-227992370-172.17.0.21-1599315394280:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40561,DS-296b76a5-df3e-4245-a884-a61beb8b035a,DISK], DatanodeInfoWithStorage[127.0.0.1:34181,DS-7da22f42-5daf-47a0-b8e4-2fbe213bfa8d,DISK], DatanodeInfoWithStorage[127.0.0.1:41712,DS-7676025e-3850-475c-b94d-eb121322605c,DISK], DatanodeInfoWithStorage[127.0.0.1:35582,DS-1b337cb9-392e-45c1-b9f3-e67a67743941,DISK], DatanodeInfoWithStorage[127.0.0.1:36185,DS-4dbae519-f3a4-45dc-80d1-e0ee687f970e,DISK], DatanodeInfoWithStorage[127.0.0.1:46485,DS-c5b88346-42af-43d0-8d53-cfcf33ba2a70,DISK]]; indices=[0, 1, 2, 4, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1832061512-172.17.0.21-1599315557465:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42012,DS-00e9e86d-ee99-4a87-9277-8725770044f7,DISK], DatanodeInfoWithStorage[127.0.0.1:43508,DS-f68b1621-75a8-48a1-bb23-4e3ed543a5bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35022,DS-e197f7f1-da28-45c3-b2eb-b53e40e688eb,DISK], DatanodeInfoWithStorage[127.0.0.1:38616,DS-88222605-d3a7-4f1a-a431-a40ea3757666,DISK], DatanodeInfoWithStorage[127.0.0.1:42499,DS-3f510ed1-85a3-420a-adec-89cd7ed520ba,DISK], DatanodeInfoWithStorage[127.0.0.1:39713,DS-cff77bb4-f7be-419a-ba89-b1b2ee4041b7,DISK]]; indices=[0, 1, 2, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1832061512-172.17.0.21-1599315557465:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42012,DS-00e9e86d-ee99-4a87-9277-8725770044f7,DISK], DatanodeInfoWithStorage[127.0.0.1:43508,DS-f68b1621-75a8-48a1-bb23-4e3ed543a5bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35022,DS-e197f7f1-da28-45c3-b2eb-b53e40e688eb,DISK], DatanodeInfoWithStorage[127.0.0.1:38616,DS-88222605-d3a7-4f1a-a431-a40ea3757666,DISK], DatanodeInfoWithStorage[127.0.0.1:42499,DS-3f510ed1-85a3-420a-adec-89cd7ed520ba,DISK], DatanodeInfoWithStorage[127.0.0.1:39713,DS-cff77bb4-f7be-419a-ba89-b1b2ee4041b7,DISK]]; indices=[0, 1, 2, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1832061512-172.17.0.21-1599315557465:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42012,DS-00e9e86d-ee99-4a87-9277-8725770044f7,DISK], DatanodeInfoWithStorage[127.0.0.1:43508,DS-f68b1621-75a8-48a1-bb23-4e3ed543a5bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35022,DS-e197f7f1-da28-45c3-b2eb-b53e40e688eb,DISK], DatanodeInfoWithStorage[127.0.0.1:38616,DS-88222605-d3a7-4f1a-a431-a40ea3757666,DISK], DatanodeInfoWithStorage[127.0.0.1:42499,DS-3f510ed1-85a3-420a-adec-89cd7ed520ba,DISK], DatanodeInfoWithStorage[127.0.0.1:39713,DS-cff77bb4-f7be-419a-ba89-b1b2ee4041b7,DISK]]; indices=[0, 1, 2, 5, 7, 8]}];  lastLocatedBlock=LocatedStripedBlock{BP-1832061512-172.17.0.21-1599315557465:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42012,DS-00e9e86d-ee99-4a87-9277-8725770044f7,DISK], DatanodeInfoWithStorage[127.0.0.1:43508,DS-f68b1621-75a8-48a1-bb23-4e3ed543a5bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35022,DS-e197f7f1-da28-45c3-b2eb-b53e40e688eb,DISK], DatanodeInfoWithStorage[127.0.0.1:38616,DS-88222605-d3a7-4f1a-a431-a40ea3757666,DISK], DatanodeInfoWithStorage[127.0.0.1:42499,DS-3f510ed1-85a3-420a-adec-89cd7ed520ba,DISK], DatanodeInfoWithStorage[127.0.0.1:39713,DS-cff77bb4-f7be-419a-ba89-b1b2ee4041b7,DISK]]; indices=[0, 1, 2, 5, 7, 8]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1560938305-172.17.0.21-1599315904098:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35676,DS-94e1428e-8767-4dab-b70f-527b0710deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35153,DS-a6f52695-790f-43ac-9928-81fc8a6e09ca,DISK], DatanodeInfoWithStorage[127.0.0.1:38548,DS-43c24bca-77ee-4cb0-9769-c8f40c006ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:46408,DS-f2130f32-413c-4c5b-b1c5-708fa5402813,DISK], DatanodeInfoWithStorage[127.0.0.1:34786,DS-62c7d4f8-f9fd-4f7b-8060-9cb5c1901218,DISK], DatanodeInfoWithStorage[127.0.0.1:32831,DS-a7935cbc-b008-417a-903b-0b69d5bf821a,DISK]]; indices=[0, 2, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-1560938305-172.17.0.21-1599315904098:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35676,DS-94e1428e-8767-4dab-b70f-527b0710deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35153,DS-a6f52695-790f-43ac-9928-81fc8a6e09ca,DISK], DatanodeInfoWithStorage[127.0.0.1:38548,DS-43c24bca-77ee-4cb0-9769-c8f40c006ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:46408,DS-f2130f32-413c-4c5b-b1c5-708fa5402813,DISK], DatanodeInfoWithStorage[127.0.0.1:34786,DS-62c7d4f8-f9fd-4f7b-8060-9cb5c1901218,DISK], DatanodeInfoWithStorage[127.0.0.1:32831,DS-a7935cbc-b008-417a-903b-0b69d5bf821a,DISK]]; indices=[0, 2, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=4194181, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=25165701;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1560938305-172.17.0.21-1599315904098:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35676,DS-94e1428e-8767-4dab-b70f-527b0710deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35153,DS-a6f52695-790f-43ac-9928-81fc8a6e09ca,DISK], DatanodeInfoWithStorage[127.0.0.1:38548,DS-43c24bca-77ee-4cb0-9769-c8f40c006ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:46408,DS-f2130f32-413c-4c5b-b1c5-708fa5402813,DISK], DatanodeInfoWithStorage[127.0.0.1:34786,DS-62c7d4f8-f9fd-4f7b-8060-9cb5c1901218,DISK], DatanodeInfoWithStorage[127.0.0.1:32831,DS-a7935cbc-b008-417a-903b-0b69d5bf821a,DISK]]; indices=[0, 2, 4, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-1560938305-172.17.0.21-1599315904098:blk_-9223372036854775792_1001; getBlockSize()=25165701; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35676,DS-94e1428e-8767-4dab-b70f-527b0710deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35153,DS-a6f52695-790f-43ac-9928-81fc8a6e09ca,DISK], DatanodeInfoWithStorage[127.0.0.1:38548,DS-43c24bca-77ee-4cb0-9769-c8f40c006ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:46408,DS-f2130f32-413c-4c5b-b1c5-708fa5402813,DISK], DatanodeInfoWithStorage[127.0.0.1:34786,DS-62c7d4f8-f9fd-4f7b-8060-9cb5c1901218,DISK], DatanodeInfoWithStorage[127.0.0.1:32831,DS-a7935cbc-b008-417a-903b-0b69d5bf821a,DISK]]; indices=[0, 2, 4, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-6-3-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=6, numParityUnits=3]], CellSize=1048576, Id=1]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.fetchBlockByteRange(DFSStripedInputStream.java:507)
	at org.apache.hadoop.hdfs.DFSInputStream.pread(DFSInputStream.java:1360)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1324)
	at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:121)
	at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:111)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:106)
	at org.apache.hadoop.hdfs.StripedFileTestUtil.verifyPread(StripedFileTestUtil.java:86)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.verifyRead(ReadStripedFileWithDecodingHelper.java:139)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:221)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.blockreport.incremental.intervalMsec
component: hdfs:DataNode
v1: 10000
v2: 0
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData#testReadCorruptedDataByDeleting[5]
reconfPoint: -2
result: -1
failureMessage: null
stackTrace: java.lang.IllegalArgumentException
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:127)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImplTestUtils.<init>(FsDatasetImplTestUtils.java:210)
	at org.apache.hadoop.hdfs.server.datanode.FsDatasetImplTestUtilsFactory.newInstance(FsDatasetImplTestUtilsFactory.java:30)
	at org.apache.hadoop.hdfs.MiniDFSCluster.getFsDatasetTestUtils(MiniDFSCluster.java:1983)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesHelper(MiniDFSCluster.java:2206)
	at org.apache.hadoop.hdfs.MiniDFSCluster.corruptBlockOnDataNodesByDeletingBlockFile(MiniDFSCluster.java:2238)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.corruptBlocks(ReadStripedFileWithDecodingHelper.java:256)
	at org.apache.hadoop.hdfs.ReadStripedFileWithDecodingHelper.testReadWithBlockCorrupted(ReadStripedFileWithDecodingHelper.java:217)
	at org.apache.hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData.testReadCorruptedDataByDeleting(TestReadStripedFileWithDecodingDeletedData.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 15 out of 50
v1v1v2v2 failed with probability 5 out of 50
result: might be true error
Total execution time in seconds : 9125
