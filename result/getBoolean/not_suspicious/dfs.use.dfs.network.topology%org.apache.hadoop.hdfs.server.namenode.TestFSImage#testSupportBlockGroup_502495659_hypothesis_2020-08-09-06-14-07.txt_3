reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-738054455-172.17.0.21-1596954254434:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46864,DS-d2711cbc-dd6f-40d9-bb8c-7e0e8034f667,DISK], DatanodeInfoWithStorage[127.0.0.1:38526,DS-4d80f611-b48b-443a-8441-98701e5d2a6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42835,DS-3f5c791d-662b-4093-8633-be2d7013cbec,DISK], DatanodeInfoWithStorage[127.0.0.1:36015,DS-222002b7-23e3-40ed-9ea5-9268a847eb6c,DISK], DatanodeInfoWithStorage[127.0.0.1:42641,DS-dc0dbf26-b479-4779-a7d7-b48d3a6a0daa,DISK]]; indices=[0, 1, 4, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-738054455-172.17.0.21-1596954254434:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46864,DS-d2711cbc-dd6f-40d9-bb8c-7e0e8034f667,DISK], DatanodeInfoWithStorage[127.0.0.1:38526,DS-4d80f611-b48b-443a-8441-98701e5d2a6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42835,DS-3f5c791d-662b-4093-8633-be2d7013cbec,DISK], DatanodeInfoWithStorage[127.0.0.1:36015,DS-222002b7-23e3-40ed-9ea5-9268a847eb6c,DISK], DatanodeInfoWithStorage[127.0.0.1:42641,DS-dc0dbf26-b479-4779-a7d7-b48d3a6a0daa,DISK]]; indices=[0, 1, 4, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-738054455-172.17.0.21-1596954254434:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46864,DS-d2711cbc-dd6f-40d9-bb8c-7e0e8034f667,DISK], DatanodeInfoWithStorage[127.0.0.1:38526,DS-4d80f611-b48b-443a-8441-98701e5d2a6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42835,DS-3f5c791d-662b-4093-8633-be2d7013cbec,DISK], DatanodeInfoWithStorage[127.0.0.1:36015,DS-222002b7-23e3-40ed-9ea5-9268a847eb6c,DISK], DatanodeInfoWithStorage[127.0.0.1:42641,DS-dc0dbf26-b479-4779-a7d7-b48d3a6a0daa,DISK]]; indices=[0, 1, 4, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-738054455-172.17.0.21-1596954254434:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46864,DS-d2711cbc-dd6f-40d9-bb8c-7e0e8034f667,DISK], DatanodeInfoWithStorage[127.0.0.1:38526,DS-4d80f611-b48b-443a-8441-98701e5d2a6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42835,DS-3f5c791d-662b-4093-8633-be2d7013cbec,DISK], DatanodeInfoWithStorage[127.0.0.1:36015,DS-222002b7-23e3-40ed-9ea5-9268a847eb6c,DISK], DatanodeInfoWithStorage[127.0.0.1:42641,DS-dc0dbf26-b479-4779-a7d7-b48d3a6a0daa,DISK]]; indices=[0, 1, 4, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1581190532-172.17.0.21-1596955048997:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38371,DS-68454d84-093a-471d-b164-c19545c49460,DISK], DatanodeInfoWithStorage[127.0.0.1:33687,DS-dffc7e05-6101-45c6-873a-316c0b7ffb04,DISK], DatanodeInfoWithStorage[127.0.0.1:38314,DS-66720391-c6a7-4d09-97cc-2ef375d5169d,DISK], DatanodeInfoWithStorage[127.0.0.1:36482,DS-401d338f-4597-438c-96b2-e05f4062df21,DISK], DatanodeInfoWithStorage[127.0.0.1:42339,DS-f1257d47-9450-4484-99b3-65e9a79e75e9,DISK], DatanodeInfoWithStorage[127.0.0.1:35457,DS-2149b83e-8977-4c69-b0c4-74e777f66c2f,DISK], DatanodeInfoWithStorage[127.0.0.1:37969,DS-81bf0f36-3411-430e-b42a-7844fbec5fea,DISK]]; indices=[0, 1, 3, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1581190532-172.17.0.21-1596955048997:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38371,DS-68454d84-093a-471d-b164-c19545c49460,DISK], DatanodeInfoWithStorage[127.0.0.1:33687,DS-dffc7e05-6101-45c6-873a-316c0b7ffb04,DISK], DatanodeInfoWithStorage[127.0.0.1:38314,DS-66720391-c6a7-4d09-97cc-2ef375d5169d,DISK], DatanodeInfoWithStorage[127.0.0.1:36482,DS-401d338f-4597-438c-96b2-e05f4062df21,DISK], DatanodeInfoWithStorage[127.0.0.1:42339,DS-f1257d47-9450-4484-99b3-65e9a79e75e9,DISK], DatanodeInfoWithStorage[127.0.0.1:35457,DS-2149b83e-8977-4c69-b0c4-74e777f66c2f,DISK], DatanodeInfoWithStorage[127.0.0.1:37969,DS-81bf0f36-3411-430e-b42a-7844fbec5fea,DISK]]; indices=[0, 1, 3, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1581190532-172.17.0.21-1596955048997:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38371,DS-68454d84-093a-471d-b164-c19545c49460,DISK], DatanodeInfoWithStorage[127.0.0.1:33687,DS-dffc7e05-6101-45c6-873a-316c0b7ffb04,DISK], DatanodeInfoWithStorage[127.0.0.1:38314,DS-66720391-c6a7-4d09-97cc-2ef375d5169d,DISK], DatanodeInfoWithStorage[127.0.0.1:36482,DS-401d338f-4597-438c-96b2-e05f4062df21,DISK], DatanodeInfoWithStorage[127.0.0.1:42339,DS-f1257d47-9450-4484-99b3-65e9a79e75e9,DISK], DatanodeInfoWithStorage[127.0.0.1:35457,DS-2149b83e-8977-4c69-b0c4-74e777f66c2f,DISK], DatanodeInfoWithStorage[127.0.0.1:37969,DS-81bf0f36-3411-430e-b42a-7844fbec5fea,DISK]]; indices=[0, 1, 3, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1581190532-172.17.0.21-1596955048997:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38371,DS-68454d84-093a-471d-b164-c19545c49460,DISK], DatanodeInfoWithStorage[127.0.0.1:33687,DS-dffc7e05-6101-45c6-873a-316c0b7ffb04,DISK], DatanodeInfoWithStorage[127.0.0.1:38314,DS-66720391-c6a7-4d09-97cc-2ef375d5169d,DISK], DatanodeInfoWithStorage[127.0.0.1:36482,DS-401d338f-4597-438c-96b2-e05f4062df21,DISK], DatanodeInfoWithStorage[127.0.0.1:42339,DS-f1257d47-9450-4484-99b3-65e9a79e75e9,DISK], DatanodeInfoWithStorage[127.0.0.1:35457,DS-2149b83e-8977-4c69-b0c4-74e777f66c2f,DISK], DatanodeInfoWithStorage[127.0.0.1:37969,DS-81bf0f36-3411-430e-b42a-7844fbec5fea,DISK]]; indices=[0, 1, 3, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1498443708-172.17.0.21-1596956532547:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37331,DS-8465ad6c-6afc-4d57-82ce-7a03b60aadc9,DISK], DatanodeInfoWithStorage[127.0.0.1:46803,DS-6bdd782a-8558-4802-a904-6ddaa5bdd470,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-33c44d05-7e6b-4a8a-9b8d-ae6b091b2447,DISK], DatanodeInfoWithStorage[127.0.0.1:38820,DS-db3ab379-d475-45fd-a329-6484c16dc3f5,DISK], DatanodeInfoWithStorage[127.0.0.1:32839,DS-6d923e5f-7069-40e9-8156-e10ed47d360f,DISK], DatanodeInfoWithStorage[127.0.0.1:45760,DS-36c57d9a-2d68-4fbf-9022-c871d5e2146d,DISK], DatanodeInfoWithStorage[127.0.0.1:33121,DS-e64fec45-bee2-4f48-8d6f-be78ea0834e2,DISK]]; indices=[1, 2, 3, 4, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1498443708-172.17.0.21-1596956532547:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37331,DS-8465ad6c-6afc-4d57-82ce-7a03b60aadc9,DISK], DatanodeInfoWithStorage[127.0.0.1:46803,DS-6bdd782a-8558-4802-a904-6ddaa5bdd470,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-33c44d05-7e6b-4a8a-9b8d-ae6b091b2447,DISK], DatanodeInfoWithStorage[127.0.0.1:38820,DS-db3ab379-d475-45fd-a329-6484c16dc3f5,DISK], DatanodeInfoWithStorage[127.0.0.1:32839,DS-6d923e5f-7069-40e9-8156-e10ed47d360f,DISK], DatanodeInfoWithStorage[127.0.0.1:45760,DS-36c57d9a-2d68-4fbf-9022-c871d5e2146d,DISK], DatanodeInfoWithStorage[127.0.0.1:33121,DS-e64fec45-bee2-4f48-8d6f-be78ea0834e2,DISK]]; indices=[1, 2, 3, 4, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1498443708-172.17.0.21-1596956532547:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37331,DS-8465ad6c-6afc-4d57-82ce-7a03b60aadc9,DISK], DatanodeInfoWithStorage[127.0.0.1:46803,DS-6bdd782a-8558-4802-a904-6ddaa5bdd470,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-33c44d05-7e6b-4a8a-9b8d-ae6b091b2447,DISK], DatanodeInfoWithStorage[127.0.0.1:38820,DS-db3ab379-d475-45fd-a329-6484c16dc3f5,DISK], DatanodeInfoWithStorage[127.0.0.1:32839,DS-6d923e5f-7069-40e9-8156-e10ed47d360f,DISK], DatanodeInfoWithStorage[127.0.0.1:45760,DS-36c57d9a-2d68-4fbf-9022-c871d5e2146d,DISK], DatanodeInfoWithStorage[127.0.0.1:33121,DS-e64fec45-bee2-4f48-8d6f-be78ea0834e2,DISK]]; indices=[1, 2, 3, 4, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1498443708-172.17.0.21-1596956532547:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37331,DS-8465ad6c-6afc-4d57-82ce-7a03b60aadc9,DISK], DatanodeInfoWithStorage[127.0.0.1:46803,DS-6bdd782a-8558-4802-a904-6ddaa5bdd470,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-33c44d05-7e6b-4a8a-9b8d-ae6b091b2447,DISK], DatanodeInfoWithStorage[127.0.0.1:38820,DS-db3ab379-d475-45fd-a329-6484c16dc3f5,DISK], DatanodeInfoWithStorage[127.0.0.1:32839,DS-6d923e5f-7069-40e9-8156-e10ed47d360f,DISK], DatanodeInfoWithStorage[127.0.0.1:45760,DS-36c57d9a-2d68-4fbf-9022-c871d5e2146d,DISK], DatanodeInfoWithStorage[127.0.0.1:33121,DS-e64fec45-bee2-4f48-8d6f-be78ea0834e2,DISK]]; indices=[1, 2, 3, 4, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-936972564-172.17.0.21-1596956759791:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46315,DS-d89de33d-cc62-4fec-a38e-6de02fefab61,DISK], DatanodeInfoWithStorage[127.0.0.1:38927,DS-a0c1d7ea-0c49-43d6-9e52-954d6e170659,DISK], DatanodeInfoWithStorage[127.0.0.1:37584,DS-08d2ac28-e3c6-46b6-b61c-dab841914211,DISK], DatanodeInfoWithStorage[127.0.0.1:43150,DS-089fa87a-adc2-47d1-8cc7-cb0dbbb6a490,DISK], DatanodeInfoWithStorage[127.0.0.1:38142,DS-ecc8d427-b6d2-4493-a098-d0247cdd82af,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,DS-5b9b0dc3-2f2c-4541-8cb8-aa0708db410b,DISK]]; indices=[2, 4, 5, 6, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-936972564-172.17.0.21-1596956759791:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46315,DS-d89de33d-cc62-4fec-a38e-6de02fefab61,DISK], DatanodeInfoWithStorage[127.0.0.1:38927,DS-a0c1d7ea-0c49-43d6-9e52-954d6e170659,DISK], DatanodeInfoWithStorage[127.0.0.1:37584,DS-08d2ac28-e3c6-46b6-b61c-dab841914211,DISK], DatanodeInfoWithStorage[127.0.0.1:43150,DS-089fa87a-adc2-47d1-8cc7-cb0dbbb6a490,DISK], DatanodeInfoWithStorage[127.0.0.1:38142,DS-ecc8d427-b6d2-4493-a098-d0247cdd82af,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,DS-5b9b0dc3-2f2c-4541-8cb8-aa0708db410b,DISK]]; indices=[2, 4, 5, 6, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-936972564-172.17.0.21-1596956759791:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46315,DS-d89de33d-cc62-4fec-a38e-6de02fefab61,DISK], DatanodeInfoWithStorage[127.0.0.1:38927,DS-a0c1d7ea-0c49-43d6-9e52-954d6e170659,DISK], DatanodeInfoWithStorage[127.0.0.1:37584,DS-08d2ac28-e3c6-46b6-b61c-dab841914211,DISK], DatanodeInfoWithStorage[127.0.0.1:43150,DS-089fa87a-adc2-47d1-8cc7-cb0dbbb6a490,DISK], DatanodeInfoWithStorage[127.0.0.1:38142,DS-ecc8d427-b6d2-4493-a098-d0247cdd82af,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,DS-5b9b0dc3-2f2c-4541-8cb8-aa0708db410b,DISK]]; indices=[2, 4, 5, 6, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-936972564-172.17.0.21-1596956759791:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46315,DS-d89de33d-cc62-4fec-a38e-6de02fefab61,DISK], DatanodeInfoWithStorage[127.0.0.1:38927,DS-a0c1d7ea-0c49-43d6-9e52-954d6e170659,DISK], DatanodeInfoWithStorage[127.0.0.1:37584,DS-08d2ac28-e3c6-46b6-b61c-dab841914211,DISK], DatanodeInfoWithStorage[127.0.0.1:43150,DS-089fa87a-adc2-47d1-8cc7-cb0dbbb6a490,DISK], DatanodeInfoWithStorage[127.0.0.1:38142,DS-ecc8d427-b6d2-4493-a098-d0247cdd82af,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,DS-5b9b0dc3-2f2c-4541-8cb8-aa0708db410b,DISK]]; indices=[2, 4, 5, 6, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1063495785-172.17.0.21-1596957090273:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43515,DS-a2c58652-b0a3-4b77-95e2-b12ec264cac5,DISK], DatanodeInfoWithStorage[127.0.0.1:41772,DS-111f248c-c661-4b32-84c7-fad2db587e51,DISK], DatanodeInfoWithStorage[127.0.0.1:44662,DS-f42d0817-20bd-434e-bff2-0ec71c755192,DISK], DatanodeInfoWithStorage[127.0.0.1:35767,DS-b63730f8-6518-42ce-8b21-47922370260d,DISK], DatanodeInfoWithStorage[127.0.0.1:37863,DS-8fbf098f-892f-4827-806e-7acbf4177a42,DISK], DatanodeInfoWithStorage[127.0.0.1:36081,DS-ada97f65-f1fa-447e-a7dd-c0c92b78cf3e,DISK], DatanodeInfoWithStorage[127.0.0.1:39825,DS-63e6483d-5dce-4dc4-9c66-51f024852e62,DISK]]; indices=[0, 3, 4, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1063495785-172.17.0.21-1596957090273:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43515,DS-a2c58652-b0a3-4b77-95e2-b12ec264cac5,DISK], DatanodeInfoWithStorage[127.0.0.1:41772,DS-111f248c-c661-4b32-84c7-fad2db587e51,DISK], DatanodeInfoWithStorage[127.0.0.1:44662,DS-f42d0817-20bd-434e-bff2-0ec71c755192,DISK], DatanodeInfoWithStorage[127.0.0.1:35767,DS-b63730f8-6518-42ce-8b21-47922370260d,DISK], DatanodeInfoWithStorage[127.0.0.1:37863,DS-8fbf098f-892f-4827-806e-7acbf4177a42,DISK], DatanodeInfoWithStorage[127.0.0.1:36081,DS-ada97f65-f1fa-447e-a7dd-c0c92b78cf3e,DISK], DatanodeInfoWithStorage[127.0.0.1:39825,DS-63e6483d-5dce-4dc4-9c66-51f024852e62,DISK]]; indices=[0, 3, 4, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1063495785-172.17.0.21-1596957090273:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43515,DS-a2c58652-b0a3-4b77-95e2-b12ec264cac5,DISK], DatanodeInfoWithStorage[127.0.0.1:41772,DS-111f248c-c661-4b32-84c7-fad2db587e51,DISK], DatanodeInfoWithStorage[127.0.0.1:44662,DS-f42d0817-20bd-434e-bff2-0ec71c755192,DISK], DatanodeInfoWithStorage[127.0.0.1:35767,DS-b63730f8-6518-42ce-8b21-47922370260d,DISK], DatanodeInfoWithStorage[127.0.0.1:37863,DS-8fbf098f-892f-4827-806e-7acbf4177a42,DISK], DatanodeInfoWithStorage[127.0.0.1:36081,DS-ada97f65-f1fa-447e-a7dd-c0c92b78cf3e,DISK], DatanodeInfoWithStorage[127.0.0.1:39825,DS-63e6483d-5dce-4dc4-9c66-51f024852e62,DISK]]; indices=[0, 3, 4, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1063495785-172.17.0.21-1596957090273:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43515,DS-a2c58652-b0a3-4b77-95e2-b12ec264cac5,DISK], DatanodeInfoWithStorage[127.0.0.1:41772,DS-111f248c-c661-4b32-84c7-fad2db587e51,DISK], DatanodeInfoWithStorage[127.0.0.1:44662,DS-f42d0817-20bd-434e-bff2-0ec71c755192,DISK], DatanodeInfoWithStorage[127.0.0.1:35767,DS-b63730f8-6518-42ce-8b21-47922370260d,DISK], DatanodeInfoWithStorage[127.0.0.1:37863,DS-8fbf098f-892f-4827-806e-7acbf4177a42,DISK], DatanodeInfoWithStorage[127.0.0.1:36081,DS-ada97f65-f1fa-447e-a7dd-c0c92b78cf3e,DISK], DatanodeInfoWithStorage[127.0.0.1:39825,DS-63e6483d-5dce-4dc4-9c66-51f024852e62,DISK]]; indices=[0, 3, 4, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-82771954-172.17.0.21-1596957611104:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39697,DS-94974359-8bf7-446c-b710-21ae124ac607,DISK], DatanodeInfoWithStorage[127.0.0.1:43695,DS-f4143c9d-80a6-4717-9d42-dd05aff591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45580,DS-9b6d7700-55f1-415c-aef4-9678b197ea03,DISK], DatanodeInfoWithStorage[127.0.0.1:34068,DS-3e0ce777-c27e-46ad-a173-0e5b3b5286a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35631,DS-446f15a7-c0e6-4a3a-b294-523497f75ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:38864,DS-e5bf9630-e925-48d4-9adc-2190f8a13e75,DISK], DatanodeInfoWithStorage[127.0.0.1:38766,DS-56ef424a-1616-4e55-a43b-5cff1cb0e02a,DISK]]; indices=[0, 1, 2, 3, 4, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-82771954-172.17.0.21-1596957611104:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39697,DS-94974359-8bf7-446c-b710-21ae124ac607,DISK], DatanodeInfoWithStorage[127.0.0.1:43695,DS-f4143c9d-80a6-4717-9d42-dd05aff591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45580,DS-9b6d7700-55f1-415c-aef4-9678b197ea03,DISK], DatanodeInfoWithStorage[127.0.0.1:34068,DS-3e0ce777-c27e-46ad-a173-0e5b3b5286a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35631,DS-446f15a7-c0e6-4a3a-b294-523497f75ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:38864,DS-e5bf9630-e925-48d4-9adc-2190f8a13e75,DISK], DatanodeInfoWithStorage[127.0.0.1:38766,DS-56ef424a-1616-4e55-a43b-5cff1cb0e02a,DISK]]; indices=[0, 1, 2, 3, 4, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-82771954-172.17.0.21-1596957611104:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39697,DS-94974359-8bf7-446c-b710-21ae124ac607,DISK], DatanodeInfoWithStorage[127.0.0.1:43695,DS-f4143c9d-80a6-4717-9d42-dd05aff591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45580,DS-9b6d7700-55f1-415c-aef4-9678b197ea03,DISK], DatanodeInfoWithStorage[127.0.0.1:34068,DS-3e0ce777-c27e-46ad-a173-0e5b3b5286a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35631,DS-446f15a7-c0e6-4a3a-b294-523497f75ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:38864,DS-e5bf9630-e925-48d4-9adc-2190f8a13e75,DISK], DatanodeInfoWithStorage[127.0.0.1:38766,DS-56ef424a-1616-4e55-a43b-5cff1cb0e02a,DISK]]; indices=[0, 1, 2, 3, 4, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-82771954-172.17.0.21-1596957611104:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39697,DS-94974359-8bf7-446c-b710-21ae124ac607,DISK], DatanodeInfoWithStorage[127.0.0.1:43695,DS-f4143c9d-80a6-4717-9d42-dd05aff591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:45580,DS-9b6d7700-55f1-415c-aef4-9678b197ea03,DISK], DatanodeInfoWithStorage[127.0.0.1:34068,DS-3e0ce777-c27e-46ad-a173-0e5b3b5286a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35631,DS-446f15a7-c0e6-4a3a-b294-523497f75ef0,DISK], DatanodeInfoWithStorage[127.0.0.1:38864,DS-e5bf9630-e925-48d4-9adc-2190f8a13e75,DISK], DatanodeInfoWithStorage[127.0.0.1:38766,DS-56ef424a-1616-4e55-a43b-5cff1cb0e02a,DISK]]; indices=[0, 1, 2, 3, 4, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1886659127-172.17.0.21-1596958086246:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40340,DS-fa406766-3ee9-440c-83b7-d967d9709c8e,DISK], DatanodeInfoWithStorage[127.0.0.1:44377,DS-b4b09bcf-3709-4de6-84d1-a5120f015def,DISK], DatanodeInfoWithStorage[127.0.0.1:39396,DS-132c3d1f-35a7-4b22-9198-c5659d265050,DISK], DatanodeInfoWithStorage[127.0.0.1:34421,DS-97881197-dec6-476c-9277-5eb599297d93,DISK], DatanodeInfoWithStorage[127.0.0.1:33505,DS-a6585eed-4d64-4eae-bd90-d4ecf5a81cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:40903,DS-2b85737e-7d7d-422b-9687-5fa5debba81f,DISK], DatanodeInfoWithStorage[127.0.0.1:34757,DS-d66c8015-af10-4350-9dcc-4407a1ae0b30,DISK]]; indices=[0, 2, 3, 4, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1886659127-172.17.0.21-1596958086246:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40340,DS-fa406766-3ee9-440c-83b7-d967d9709c8e,DISK], DatanodeInfoWithStorage[127.0.0.1:44377,DS-b4b09bcf-3709-4de6-84d1-a5120f015def,DISK], DatanodeInfoWithStorage[127.0.0.1:39396,DS-132c3d1f-35a7-4b22-9198-c5659d265050,DISK], DatanodeInfoWithStorage[127.0.0.1:34421,DS-97881197-dec6-476c-9277-5eb599297d93,DISK], DatanodeInfoWithStorage[127.0.0.1:33505,DS-a6585eed-4d64-4eae-bd90-d4ecf5a81cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:40903,DS-2b85737e-7d7d-422b-9687-5fa5debba81f,DISK], DatanodeInfoWithStorage[127.0.0.1:34757,DS-d66c8015-af10-4350-9dcc-4407a1ae0b30,DISK]]; indices=[0, 2, 3, 4, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1886659127-172.17.0.21-1596958086246:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40340,DS-fa406766-3ee9-440c-83b7-d967d9709c8e,DISK], DatanodeInfoWithStorage[127.0.0.1:44377,DS-b4b09bcf-3709-4de6-84d1-a5120f015def,DISK], DatanodeInfoWithStorage[127.0.0.1:39396,DS-132c3d1f-35a7-4b22-9198-c5659d265050,DISK], DatanodeInfoWithStorage[127.0.0.1:34421,DS-97881197-dec6-476c-9277-5eb599297d93,DISK], DatanodeInfoWithStorage[127.0.0.1:33505,DS-a6585eed-4d64-4eae-bd90-d4ecf5a81cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:40903,DS-2b85737e-7d7d-422b-9687-5fa5debba81f,DISK], DatanodeInfoWithStorage[127.0.0.1:34757,DS-d66c8015-af10-4350-9dcc-4407a1ae0b30,DISK]]; indices=[0, 2, 3, 4, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1886659127-172.17.0.21-1596958086246:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40340,DS-fa406766-3ee9-440c-83b7-d967d9709c8e,DISK], DatanodeInfoWithStorage[127.0.0.1:44377,DS-b4b09bcf-3709-4de6-84d1-a5120f015def,DISK], DatanodeInfoWithStorage[127.0.0.1:39396,DS-132c3d1f-35a7-4b22-9198-c5659d265050,DISK], DatanodeInfoWithStorage[127.0.0.1:34421,DS-97881197-dec6-476c-9277-5eb599297d93,DISK], DatanodeInfoWithStorage[127.0.0.1:33505,DS-a6585eed-4d64-4eae-bd90-d4ecf5a81cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:40903,DS-2b85737e-7d7d-422b-9687-5fa5debba81f,DISK], DatanodeInfoWithStorage[127.0.0.1:34757,DS-d66c8015-af10-4350-9dcc-4407a1ae0b30,DISK]]; indices=[0, 2, 3, 4, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1074540530-172.17.0.21-1596958129560:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43498,DS-f7c1e397-e446-4936-8781-1e12a4b6f88b,DISK], DatanodeInfoWithStorage[127.0.0.1:44270,DS-8ebeb7bc-7f18-450c-883b-2eaeee61d297,DISK], DatanodeInfoWithStorage[127.0.0.1:39058,DS-780f2479-9f2e-49bf-a250-6a47e052a6f3,DISK], DatanodeInfoWithStorage[127.0.0.1:44927,DS-e7fb138c-7d48-40c8-a8e3-2d2f5a1ad696,DISK], DatanodeInfoWithStorage[127.0.0.1:43390,DS-8acb1a76-028a-4a39-b4c4-2a97296ad7de,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-3cc73678-4288-4b20-9ee0-b9b1cf44f1db,DISK]]; indices=[0, 1, 2, 3, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1074540530-172.17.0.21-1596958129560:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43498,DS-f7c1e397-e446-4936-8781-1e12a4b6f88b,DISK], DatanodeInfoWithStorage[127.0.0.1:44270,DS-8ebeb7bc-7f18-450c-883b-2eaeee61d297,DISK], DatanodeInfoWithStorage[127.0.0.1:39058,DS-780f2479-9f2e-49bf-a250-6a47e052a6f3,DISK], DatanodeInfoWithStorage[127.0.0.1:44927,DS-e7fb138c-7d48-40c8-a8e3-2d2f5a1ad696,DISK], DatanodeInfoWithStorage[127.0.0.1:43390,DS-8acb1a76-028a-4a39-b4c4-2a97296ad7de,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-3cc73678-4288-4b20-9ee0-b9b1cf44f1db,DISK]]; indices=[0, 1, 2, 3, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1074540530-172.17.0.21-1596958129560:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43498,DS-f7c1e397-e446-4936-8781-1e12a4b6f88b,DISK], DatanodeInfoWithStorage[127.0.0.1:44270,DS-8ebeb7bc-7f18-450c-883b-2eaeee61d297,DISK], DatanodeInfoWithStorage[127.0.0.1:39058,DS-780f2479-9f2e-49bf-a250-6a47e052a6f3,DISK], DatanodeInfoWithStorage[127.0.0.1:44927,DS-e7fb138c-7d48-40c8-a8e3-2d2f5a1ad696,DISK], DatanodeInfoWithStorage[127.0.0.1:43390,DS-8acb1a76-028a-4a39-b4c4-2a97296ad7de,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-3cc73678-4288-4b20-9ee0-b9b1cf44f1db,DISK]]; indices=[0, 1, 2, 3, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1074540530-172.17.0.21-1596958129560:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43498,DS-f7c1e397-e446-4936-8781-1e12a4b6f88b,DISK], DatanodeInfoWithStorage[127.0.0.1:44270,DS-8ebeb7bc-7f18-450c-883b-2eaeee61d297,DISK], DatanodeInfoWithStorage[127.0.0.1:39058,DS-780f2479-9f2e-49bf-a250-6a47e052a6f3,DISK], DatanodeInfoWithStorage[127.0.0.1:44927,DS-e7fb138c-7d48-40c8-a8e3-2d2f5a1ad696,DISK], DatanodeInfoWithStorage[127.0.0.1:43390,DS-8acb1a76-028a-4a39-b4c4-2a97296ad7de,DISK], DatanodeInfoWithStorage[127.0.0.1:37945,DS-3cc73678-4288-4b20-9ee0-b9b1cf44f1db,DISK]]; indices=[0, 1, 2, 3, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-373213313-172.17.0.21-1596958167843:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34281,DS-fe8507b2-b17a-46d8-b0ea-7b1ded8ba81b,DISK], DatanodeInfoWithStorage[127.0.0.1:37581,DS-63d06537-c8c4-46b2-bd18-06666da30059,DISK], DatanodeInfoWithStorage[127.0.0.1:33463,DS-cf554134-c60d-4fe4-be51-64e4c7701819,DISK], DatanodeInfoWithStorage[127.0.0.1:35614,DS-46a65d8d-4501-4404-b846-2406266ac0b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43159,DS-5d719de2-03de-4afc-8745-dfc9d0768997,DISK], DatanodeInfoWithStorage[127.0.0.1:39788,DS-bbefb667-fc60-4dbf-bcd3-6b71ee215a45,DISK], DatanodeInfoWithStorage[127.0.0.1:35525,DS-74c81bf8-dc57-4696-9cf5-2b919502a2ef,DISK]]; indices=[1, 2, 4, 5, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-373213313-172.17.0.21-1596958167843:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34281,DS-fe8507b2-b17a-46d8-b0ea-7b1ded8ba81b,DISK], DatanodeInfoWithStorage[127.0.0.1:37581,DS-63d06537-c8c4-46b2-bd18-06666da30059,DISK], DatanodeInfoWithStorage[127.0.0.1:33463,DS-cf554134-c60d-4fe4-be51-64e4c7701819,DISK], DatanodeInfoWithStorage[127.0.0.1:35614,DS-46a65d8d-4501-4404-b846-2406266ac0b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43159,DS-5d719de2-03de-4afc-8745-dfc9d0768997,DISK], DatanodeInfoWithStorage[127.0.0.1:39788,DS-bbefb667-fc60-4dbf-bcd3-6b71ee215a45,DISK], DatanodeInfoWithStorage[127.0.0.1:35525,DS-74c81bf8-dc57-4696-9cf5-2b919502a2ef,DISK]]; indices=[1, 2, 4, 5, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-373213313-172.17.0.21-1596958167843:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34281,DS-fe8507b2-b17a-46d8-b0ea-7b1ded8ba81b,DISK], DatanodeInfoWithStorage[127.0.0.1:37581,DS-63d06537-c8c4-46b2-bd18-06666da30059,DISK], DatanodeInfoWithStorage[127.0.0.1:33463,DS-cf554134-c60d-4fe4-be51-64e4c7701819,DISK], DatanodeInfoWithStorage[127.0.0.1:35614,DS-46a65d8d-4501-4404-b846-2406266ac0b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43159,DS-5d719de2-03de-4afc-8745-dfc9d0768997,DISK], DatanodeInfoWithStorage[127.0.0.1:39788,DS-bbefb667-fc60-4dbf-bcd3-6b71ee215a45,DISK], DatanodeInfoWithStorage[127.0.0.1:35525,DS-74c81bf8-dc57-4696-9cf5-2b919502a2ef,DISK]]; indices=[1, 2, 4, 5, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-373213313-172.17.0.21-1596958167843:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34281,DS-fe8507b2-b17a-46d8-b0ea-7b1ded8ba81b,DISK], DatanodeInfoWithStorage[127.0.0.1:37581,DS-63d06537-c8c4-46b2-bd18-06666da30059,DISK], DatanodeInfoWithStorage[127.0.0.1:33463,DS-cf554134-c60d-4fe4-be51-64e4c7701819,DISK], DatanodeInfoWithStorage[127.0.0.1:35614,DS-46a65d8d-4501-4404-b846-2406266ac0b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43159,DS-5d719de2-03de-4afc-8745-dfc9d0768997,DISK], DatanodeInfoWithStorage[127.0.0.1:39788,DS-bbefb667-fc60-4dbf-bcd3-6b71ee215a45,DISK], DatanodeInfoWithStorage[127.0.0.1:35525,DS-74c81bf8-dc57-4696-9cf5-2b919502a2ef,DISK]]; indices=[1, 2, 4, 5, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1582539288-172.17.0.21-1596958401535:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44910,DS-c6101fb2-05f0-4ab8-8294-4b86b9a133cd,DISK], DatanodeInfoWithStorage[127.0.0.1:35319,DS-dd0dfd5d-380a-4cb4-bf5a-b3c1cb1a5010,DISK], DatanodeInfoWithStorage[127.0.0.1:44142,DS-cbf6002d-f06b-49f5-93e5-c7529adbe16c,DISK], DatanodeInfoWithStorage[127.0.0.1:43314,DS-f2318f5c-ecee-49cb-9222-b07e1ca6e560,DISK], DatanodeInfoWithStorage[127.0.0.1:42595,DS-3473857c-8c70-40f2-9955-8ce60b4fce76,DISK], DatanodeInfoWithStorage[127.0.0.1:38135,DS-7c6d3750-1a79-4baf-b5eb-a0888fb2685b,DISK], DatanodeInfoWithStorage[127.0.0.1:35532,DS-d7a34b20-5bbc-47c7-9830-898b2d6c6d75,DISK]]; indices=[2, 4, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1582539288-172.17.0.21-1596958401535:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44910,DS-c6101fb2-05f0-4ab8-8294-4b86b9a133cd,DISK], DatanodeInfoWithStorage[127.0.0.1:35319,DS-dd0dfd5d-380a-4cb4-bf5a-b3c1cb1a5010,DISK], DatanodeInfoWithStorage[127.0.0.1:44142,DS-cbf6002d-f06b-49f5-93e5-c7529adbe16c,DISK], DatanodeInfoWithStorage[127.0.0.1:43314,DS-f2318f5c-ecee-49cb-9222-b07e1ca6e560,DISK], DatanodeInfoWithStorage[127.0.0.1:42595,DS-3473857c-8c70-40f2-9955-8ce60b4fce76,DISK], DatanodeInfoWithStorage[127.0.0.1:38135,DS-7c6d3750-1a79-4baf-b5eb-a0888fb2685b,DISK], DatanodeInfoWithStorage[127.0.0.1:35532,DS-d7a34b20-5bbc-47c7-9830-898b2d6c6d75,DISK]]; indices=[2, 4, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1582539288-172.17.0.21-1596958401535:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44910,DS-c6101fb2-05f0-4ab8-8294-4b86b9a133cd,DISK], DatanodeInfoWithStorage[127.0.0.1:35319,DS-dd0dfd5d-380a-4cb4-bf5a-b3c1cb1a5010,DISK], DatanodeInfoWithStorage[127.0.0.1:44142,DS-cbf6002d-f06b-49f5-93e5-c7529adbe16c,DISK], DatanodeInfoWithStorage[127.0.0.1:43314,DS-f2318f5c-ecee-49cb-9222-b07e1ca6e560,DISK], DatanodeInfoWithStorage[127.0.0.1:42595,DS-3473857c-8c70-40f2-9955-8ce60b4fce76,DISK], DatanodeInfoWithStorage[127.0.0.1:38135,DS-7c6d3750-1a79-4baf-b5eb-a0888fb2685b,DISK], DatanodeInfoWithStorage[127.0.0.1:35532,DS-d7a34b20-5bbc-47c7-9830-898b2d6c6d75,DISK]]; indices=[2, 4, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1582539288-172.17.0.21-1596958401535:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44910,DS-c6101fb2-05f0-4ab8-8294-4b86b9a133cd,DISK], DatanodeInfoWithStorage[127.0.0.1:35319,DS-dd0dfd5d-380a-4cb4-bf5a-b3c1cb1a5010,DISK], DatanodeInfoWithStorage[127.0.0.1:44142,DS-cbf6002d-f06b-49f5-93e5-c7529adbe16c,DISK], DatanodeInfoWithStorage[127.0.0.1:43314,DS-f2318f5c-ecee-49cb-9222-b07e1ca6e560,DISK], DatanodeInfoWithStorage[127.0.0.1:42595,DS-3473857c-8c70-40f2-9955-8ce60b4fce76,DISK], DatanodeInfoWithStorage[127.0.0.1:38135,DS-7c6d3750-1a79-4baf-b5eb-a0888fb2685b,DISK], DatanodeInfoWithStorage[127.0.0.1:35532,DS-d7a34b20-5bbc-47c7-9830-898b2d6c6d75,DISK]]; indices=[2, 4, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-667902618-172.17.0.21-1596958446144:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44763,DS-5dcb33f4-050e-47d2-91a5-ac91607b9127,DISK], DatanodeInfoWithStorage[127.0.0.1:46440,DS-dbbbf50f-218a-4b5b-8cd3-19de83bfd58d,DISK], DatanodeInfoWithStorage[127.0.0.1:32982,DS-648813cb-a48f-441b-8432-d389396630c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-c4fa041c-fcae-42f6-9705-55b9d74e45d1,DISK], DatanodeInfoWithStorage[127.0.0.1:41180,DS-621f6232-1591-4dc8-85ed-258768a54a50,DISK], DatanodeInfoWithStorage[127.0.0.1:45050,DS-456ac5ea-ee4b-4313-a38a-df574c948cd4,DISK]]; indices=[0, 1, 2, 3, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-667902618-172.17.0.21-1596958446144:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44763,DS-5dcb33f4-050e-47d2-91a5-ac91607b9127,DISK], DatanodeInfoWithStorage[127.0.0.1:46440,DS-dbbbf50f-218a-4b5b-8cd3-19de83bfd58d,DISK], DatanodeInfoWithStorage[127.0.0.1:32982,DS-648813cb-a48f-441b-8432-d389396630c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-c4fa041c-fcae-42f6-9705-55b9d74e45d1,DISK], DatanodeInfoWithStorage[127.0.0.1:41180,DS-621f6232-1591-4dc8-85ed-258768a54a50,DISK], DatanodeInfoWithStorage[127.0.0.1:45050,DS-456ac5ea-ee4b-4313-a38a-df574c948cd4,DISK]]; indices=[0, 1, 2, 3, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-667902618-172.17.0.21-1596958446144:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44763,DS-5dcb33f4-050e-47d2-91a5-ac91607b9127,DISK], DatanodeInfoWithStorage[127.0.0.1:46440,DS-dbbbf50f-218a-4b5b-8cd3-19de83bfd58d,DISK], DatanodeInfoWithStorage[127.0.0.1:32982,DS-648813cb-a48f-441b-8432-d389396630c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-c4fa041c-fcae-42f6-9705-55b9d74e45d1,DISK], DatanodeInfoWithStorage[127.0.0.1:41180,DS-621f6232-1591-4dc8-85ed-258768a54a50,DISK], DatanodeInfoWithStorage[127.0.0.1:45050,DS-456ac5ea-ee4b-4313-a38a-df574c948cd4,DISK]]; indices=[0, 1, 2, 3, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-667902618-172.17.0.21-1596958446144:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44763,DS-5dcb33f4-050e-47d2-91a5-ac91607b9127,DISK], DatanodeInfoWithStorage[127.0.0.1:46440,DS-dbbbf50f-218a-4b5b-8cd3-19de83bfd58d,DISK], DatanodeInfoWithStorage[127.0.0.1:32982,DS-648813cb-a48f-441b-8432-d389396630c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-c4fa041c-fcae-42f6-9705-55b9d74e45d1,DISK], DatanodeInfoWithStorage[127.0.0.1:41180,DS-621f6232-1591-4dc8-85ed-258768a54a50,DISK], DatanodeInfoWithStorage[127.0.0.1:45050,DS-456ac5ea-ee4b-4313-a38a-df574c948cd4,DISK]]; indices=[0, 1, 2, 3, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1364161222-172.17.0.21-1596958535873:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33461,DS-78b7950d-7abe-43c5-b5c4-706d25bd41a9,DISK], DatanodeInfoWithStorage[127.0.0.1:46690,DS-fba91d04-d4b0-4e8c-91c6-ff2d010a696b,DISK], DatanodeInfoWithStorage[127.0.0.1:38442,DS-7f6fcf06-2468-4299-bf69-6f30223ef38a,DISK], DatanodeInfoWithStorage[127.0.0.1:46254,DS-94d785de-663c-465c-bebe-1a188515b09b,DISK], DatanodeInfoWithStorage[127.0.0.1:43265,DS-e04ca9c8-293c-42d3-8f43-279f11aa24b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43221,DS-8b4f4ed8-b10c-4863-aa64-bf7dabfebe25,DISK], DatanodeInfoWithStorage[127.0.0.1:46031,DS-804d15b4-d1dc-4126-9a27-0f6997d79e7b,DISK]]; indices=[1, 2, 3, 5, 6, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-1364161222-172.17.0.21-1596958535873:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33461,DS-78b7950d-7abe-43c5-b5c4-706d25bd41a9,DISK], DatanodeInfoWithStorage[127.0.0.1:46690,DS-fba91d04-d4b0-4e8c-91c6-ff2d010a696b,DISK], DatanodeInfoWithStorage[127.0.0.1:38442,DS-7f6fcf06-2468-4299-bf69-6f30223ef38a,DISK], DatanodeInfoWithStorage[127.0.0.1:46254,DS-94d785de-663c-465c-bebe-1a188515b09b,DISK], DatanodeInfoWithStorage[127.0.0.1:43265,DS-e04ca9c8-293c-42d3-8f43-279f11aa24b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43221,DS-8b4f4ed8-b10c-4863-aa64-bf7dabfebe25,DISK], DatanodeInfoWithStorage[127.0.0.1:46031,DS-804d15b4-d1dc-4126-9a27-0f6997d79e7b,DISK]]; indices=[1, 2, 3, 5, 6, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1364161222-172.17.0.21-1596958535873:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33461,DS-78b7950d-7abe-43c5-b5c4-706d25bd41a9,DISK], DatanodeInfoWithStorage[127.0.0.1:46690,DS-fba91d04-d4b0-4e8c-91c6-ff2d010a696b,DISK], DatanodeInfoWithStorage[127.0.0.1:38442,DS-7f6fcf06-2468-4299-bf69-6f30223ef38a,DISK], DatanodeInfoWithStorage[127.0.0.1:46254,DS-94d785de-663c-465c-bebe-1a188515b09b,DISK], DatanodeInfoWithStorage[127.0.0.1:43265,DS-e04ca9c8-293c-42d3-8f43-279f11aa24b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43221,DS-8b4f4ed8-b10c-4863-aa64-bf7dabfebe25,DISK], DatanodeInfoWithStorage[127.0.0.1:46031,DS-804d15b4-d1dc-4126-9a27-0f6997d79e7b,DISK]]; indices=[1, 2, 3, 5, 6, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-1364161222-172.17.0.21-1596958535873:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33461,DS-78b7950d-7abe-43c5-b5c4-706d25bd41a9,DISK], DatanodeInfoWithStorage[127.0.0.1:46690,DS-fba91d04-d4b0-4e8c-91c6-ff2d010a696b,DISK], DatanodeInfoWithStorage[127.0.0.1:38442,DS-7f6fcf06-2468-4299-bf69-6f30223ef38a,DISK], DatanodeInfoWithStorage[127.0.0.1:46254,DS-94d785de-663c-465c-bebe-1a188515b09b,DISK], DatanodeInfoWithStorage[127.0.0.1:43265,DS-e04ca9c8-293c-42d3-8f43-279f11aa24b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43221,DS-8b4f4ed8-b10c-4863-aa64-bf7dabfebe25,DISK], DatanodeInfoWithStorage[127.0.0.1:46031,DS-804d15b4-d1dc-4126-9a27-0f6997d79e7b,DISK]]; indices=[1, 2, 3, 5, 6, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-971620834-172.17.0.21-1596958759783:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44969,DS-f50ecb11-883f-4db8-bdb0-92caaac73a13,DISK], DatanodeInfoWithStorage[127.0.0.1:46410,DS-1821667e-6b7e-456a-9d05-006e591ac8e5,DISK], DatanodeInfoWithStorage[127.0.0.1:36436,DS-c9f48d57-3060-40ba-bdc7-c1955f03eee5,DISK], DatanodeInfoWithStorage[127.0.0.1:34325,DS-b1b7885d-801b-45bb-ae86-b0d749791561,DISK], DatanodeInfoWithStorage[127.0.0.1:34866,DS-a30e06ee-dab3-4ab5-9ec4-baab6c3321b3,DISK], DatanodeInfoWithStorage[127.0.0.1:45550,DS-1fa5f275-c1f2-4382-bcdf-09017234b3f5,DISK]]; indices=[1, 5, 6, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-971620834-172.17.0.21-1596958759783:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44969,DS-f50ecb11-883f-4db8-bdb0-92caaac73a13,DISK], DatanodeInfoWithStorage[127.0.0.1:46410,DS-1821667e-6b7e-456a-9d05-006e591ac8e5,DISK], DatanodeInfoWithStorage[127.0.0.1:36436,DS-c9f48d57-3060-40ba-bdc7-c1955f03eee5,DISK], DatanodeInfoWithStorage[127.0.0.1:34325,DS-b1b7885d-801b-45bb-ae86-b0d749791561,DISK], DatanodeInfoWithStorage[127.0.0.1:34866,DS-a30e06ee-dab3-4ab5-9ec4-baab6c3321b3,DISK], DatanodeInfoWithStorage[127.0.0.1:45550,DS-1fa5f275-c1f2-4382-bcdf-09017234b3f5,DISK]]; indices=[1, 5, 6, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-971620834-172.17.0.21-1596958759783:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44969,DS-f50ecb11-883f-4db8-bdb0-92caaac73a13,DISK], DatanodeInfoWithStorage[127.0.0.1:46410,DS-1821667e-6b7e-456a-9d05-006e591ac8e5,DISK], DatanodeInfoWithStorage[127.0.0.1:36436,DS-c9f48d57-3060-40ba-bdc7-c1955f03eee5,DISK], DatanodeInfoWithStorage[127.0.0.1:34325,DS-b1b7885d-801b-45bb-ae86-b0d749791561,DISK], DatanodeInfoWithStorage[127.0.0.1:34866,DS-a30e06ee-dab3-4ab5-9ec4-baab6c3321b3,DISK], DatanodeInfoWithStorage[127.0.0.1:45550,DS-1fa5f275-c1f2-4382-bcdf-09017234b3f5,DISK]]; indices=[1, 5, 6, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-971620834-172.17.0.21-1596958759783:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44969,DS-f50ecb11-883f-4db8-bdb0-92caaac73a13,DISK], DatanodeInfoWithStorage[127.0.0.1:46410,DS-1821667e-6b7e-456a-9d05-006e591ac8e5,DISK], DatanodeInfoWithStorage[127.0.0.1:36436,DS-c9f48d57-3060-40ba-bdc7-c1955f03eee5,DISK], DatanodeInfoWithStorage[127.0.0.1:34325,DS-b1b7885d-801b-45bb-ae86-b0d749791561,DISK], DatanodeInfoWithStorage[127.0.0.1:34866,DS-a30e06ee-dab3-4ab5-9ec4-baab6c3321b3,DISK], DatanodeInfoWithStorage[127.0.0.1:45550,DS-1fa5f275-c1f2-4382-bcdf-09017234b3f5,DISK]]; indices=[1, 5, 6, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-484267094-172.17.0.21-1596959033222:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44956,DS-c4a31c03-fec9-4ec8-9353-ab5a361d2ef4,DISK], DatanodeInfoWithStorage[127.0.0.1:41948,DS-92caf238-1926-4a08-aef6-50e4e29ca431,DISK], DatanodeInfoWithStorage[127.0.0.1:38946,DS-094b2f6a-af11-4638-961a-56e44821768a,DISK], DatanodeInfoWithStorage[127.0.0.1:46343,DS-f765771e-4cdb-45e4-8b87-ec2e79bb5fe5,DISK], DatanodeInfoWithStorage[127.0.0.1:37501,DS-49ff7a96-0569-44c8-94bc-9d823c58777f,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-5e214f25-a7b0-4a86-927e-cdaaf4684550,DISK], DatanodeInfoWithStorage[127.0.0.1:39608,DS-b48f3da0-ddf0-4ee4-be4e-3fc8dd980af2,DISK]]; indices=[0, 2, 3, 4, 5, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-484267094-172.17.0.21-1596959033222:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44956,DS-c4a31c03-fec9-4ec8-9353-ab5a361d2ef4,DISK], DatanodeInfoWithStorage[127.0.0.1:41948,DS-92caf238-1926-4a08-aef6-50e4e29ca431,DISK], DatanodeInfoWithStorage[127.0.0.1:38946,DS-094b2f6a-af11-4638-961a-56e44821768a,DISK], DatanodeInfoWithStorage[127.0.0.1:46343,DS-f765771e-4cdb-45e4-8b87-ec2e79bb5fe5,DISK], DatanodeInfoWithStorage[127.0.0.1:37501,DS-49ff7a96-0569-44c8-94bc-9d823c58777f,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-5e214f25-a7b0-4a86-927e-cdaaf4684550,DISK], DatanodeInfoWithStorage[127.0.0.1:39608,DS-b48f3da0-ddf0-4ee4-be4e-3fc8dd980af2,DISK]]; indices=[0, 2, 3, 4, 5, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-484267094-172.17.0.21-1596959033222:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44956,DS-c4a31c03-fec9-4ec8-9353-ab5a361d2ef4,DISK], DatanodeInfoWithStorage[127.0.0.1:41948,DS-92caf238-1926-4a08-aef6-50e4e29ca431,DISK], DatanodeInfoWithStorage[127.0.0.1:38946,DS-094b2f6a-af11-4638-961a-56e44821768a,DISK], DatanodeInfoWithStorage[127.0.0.1:46343,DS-f765771e-4cdb-45e4-8b87-ec2e79bb5fe5,DISK], DatanodeInfoWithStorage[127.0.0.1:37501,DS-49ff7a96-0569-44c8-94bc-9d823c58777f,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-5e214f25-a7b0-4a86-927e-cdaaf4684550,DISK], DatanodeInfoWithStorage[127.0.0.1:39608,DS-b48f3da0-ddf0-4ee4-be4e-3fc8dd980af2,DISK]]; indices=[0, 2, 3, 4, 5, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-484267094-172.17.0.21-1596959033222:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44956,DS-c4a31c03-fec9-4ec8-9353-ab5a361d2ef4,DISK], DatanodeInfoWithStorage[127.0.0.1:41948,DS-92caf238-1926-4a08-aef6-50e4e29ca431,DISK], DatanodeInfoWithStorage[127.0.0.1:38946,DS-094b2f6a-af11-4638-961a-56e44821768a,DISK], DatanodeInfoWithStorage[127.0.0.1:46343,DS-f765771e-4cdb-45e4-8b87-ec2e79bb5fe5,DISK], DatanodeInfoWithStorage[127.0.0.1:37501,DS-49ff7a96-0569-44c8-94bc-9d823c58777f,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-5e214f25-a7b0-4a86-927e-cdaaf4684550,DISK], DatanodeInfoWithStorage[127.0.0.1:39608,DS-b48f3da0-ddf0-4ee4-be4e-3fc8dd980af2,DISK]]; indices=[0, 2, 3, 4, 5, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-962899154-172.17.0.21-1596959118443:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37599,DS-c2d695f5-55f0-45e8-b38a-685081863aeb,DISK], DatanodeInfoWithStorage[127.0.0.1:38407,DS-75b9e5e8-c140-418d-84f8-7dee6982d7c9,DISK], DatanodeInfoWithStorage[127.0.0.1:40640,DS-6bd0a69e-77de-42c8-9641-7566fe70dbf2,DISK], DatanodeInfoWithStorage[127.0.0.1:37854,DS-6a2b9fc9-9087-4559-b6d8-c78204ad6fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:34276,DS-a3eca97a-f98f-4bc7-b5f4-680ece161a50,DISK], DatanodeInfoWithStorage[127.0.0.1:41950,DS-ff5b9bb9-1165-4bc9-949c-68b3825478d7,DISK]]; indices=[1, 2, 3, 5, 7, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-962899154-172.17.0.21-1596959118443:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37599,DS-c2d695f5-55f0-45e8-b38a-685081863aeb,DISK], DatanodeInfoWithStorage[127.0.0.1:38407,DS-75b9e5e8-c140-418d-84f8-7dee6982d7c9,DISK], DatanodeInfoWithStorage[127.0.0.1:40640,DS-6bd0a69e-77de-42c8-9641-7566fe70dbf2,DISK], DatanodeInfoWithStorage[127.0.0.1:37854,DS-6a2b9fc9-9087-4559-b6d8-c78204ad6fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:34276,DS-a3eca97a-f98f-4bc7-b5f4-680ece161a50,DISK], DatanodeInfoWithStorage[127.0.0.1:41950,DS-ff5b9bb9-1165-4bc9-949c-68b3825478d7,DISK]]; indices=[1, 2, 3, 5, 7, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-962899154-172.17.0.21-1596959118443:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37599,DS-c2d695f5-55f0-45e8-b38a-685081863aeb,DISK], DatanodeInfoWithStorage[127.0.0.1:38407,DS-75b9e5e8-c140-418d-84f8-7dee6982d7c9,DISK], DatanodeInfoWithStorage[127.0.0.1:40640,DS-6bd0a69e-77de-42c8-9641-7566fe70dbf2,DISK], DatanodeInfoWithStorage[127.0.0.1:37854,DS-6a2b9fc9-9087-4559-b6d8-c78204ad6fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:34276,DS-a3eca97a-f98f-4bc7-b5f4-680ece161a50,DISK], DatanodeInfoWithStorage[127.0.0.1:41950,DS-ff5b9bb9-1165-4bc9-949c-68b3825478d7,DISK]]; indices=[1, 2, 3, 5, 7, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-962899154-172.17.0.21-1596959118443:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37599,DS-c2d695f5-55f0-45e8-b38a-685081863aeb,DISK], DatanodeInfoWithStorage[127.0.0.1:38407,DS-75b9e5e8-c140-418d-84f8-7dee6982d7c9,DISK], DatanodeInfoWithStorage[127.0.0.1:40640,DS-6bd0a69e-77de-42c8-9641-7566fe70dbf2,DISK], DatanodeInfoWithStorage[127.0.0.1:37854,DS-6a2b9fc9-9087-4559-b6d8-c78204ad6fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:34276,DS-a3eca97a-f98f-4bc7-b5f4-680ece161a50,DISK], DatanodeInfoWithStorage[127.0.0.1:41950,DS-ff5b9bb9-1165-4bc9-949c-68b3825478d7,DISK]]; indices=[1, 2, 3, 5, 7, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-771395938-172.17.0.21-1596959513078:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33094,DS-d24c187f-0216-4f50-9b54-c3df47ed0173,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,DS-17bd2d33-2308-4b4c-8724-801d00b5db43,DISK], DatanodeInfoWithStorage[127.0.0.1:42586,DS-89bdc5e1-6590-4e5e-bf16-36188853cdce,DISK], DatanodeInfoWithStorage[127.0.0.1:34109,DS-2370aecf-843d-4269-8c26-dc7092af6637,DISK], DatanodeInfoWithStorage[127.0.0.1:35423,DS-3072276c-55ed-4cdd-97c0-a8aa47ea0407,DISK], DatanodeInfoWithStorage[127.0.0.1:42551,DS-500c1ea2-2a7f-44e6-916f-0448242355bb,DISK], DatanodeInfoWithStorage[127.0.0.1:39350,DS-71cb923e-3674-45dd-9769-1fa15ff56c08,DISK]]; indices=[0, 1, 2, 3, 5, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-771395938-172.17.0.21-1596959513078:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33094,DS-d24c187f-0216-4f50-9b54-c3df47ed0173,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,DS-17bd2d33-2308-4b4c-8724-801d00b5db43,DISK], DatanodeInfoWithStorage[127.0.0.1:42586,DS-89bdc5e1-6590-4e5e-bf16-36188853cdce,DISK], DatanodeInfoWithStorage[127.0.0.1:34109,DS-2370aecf-843d-4269-8c26-dc7092af6637,DISK], DatanodeInfoWithStorage[127.0.0.1:35423,DS-3072276c-55ed-4cdd-97c0-a8aa47ea0407,DISK], DatanodeInfoWithStorage[127.0.0.1:42551,DS-500c1ea2-2a7f-44e6-916f-0448242355bb,DISK], DatanodeInfoWithStorage[127.0.0.1:39350,DS-71cb923e-3674-45dd-9769-1fa15ff56c08,DISK]]; indices=[0, 1, 2, 3, 5, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-771395938-172.17.0.21-1596959513078:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33094,DS-d24c187f-0216-4f50-9b54-c3df47ed0173,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,DS-17bd2d33-2308-4b4c-8724-801d00b5db43,DISK], DatanodeInfoWithStorage[127.0.0.1:42586,DS-89bdc5e1-6590-4e5e-bf16-36188853cdce,DISK], DatanodeInfoWithStorage[127.0.0.1:34109,DS-2370aecf-843d-4269-8c26-dc7092af6637,DISK], DatanodeInfoWithStorage[127.0.0.1:35423,DS-3072276c-55ed-4cdd-97c0-a8aa47ea0407,DISK], DatanodeInfoWithStorage[127.0.0.1:42551,DS-500c1ea2-2a7f-44e6-916f-0448242355bb,DISK], DatanodeInfoWithStorage[127.0.0.1:39350,DS-71cb923e-3674-45dd-9769-1fa15ff56c08,DISK]]; indices=[0, 1, 2, 3, 5, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-771395938-172.17.0.21-1596959513078:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33094,DS-d24c187f-0216-4f50-9b54-c3df47ed0173,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,DS-17bd2d33-2308-4b4c-8724-801d00b5db43,DISK], DatanodeInfoWithStorage[127.0.0.1:42586,DS-89bdc5e1-6590-4e5e-bf16-36188853cdce,DISK], DatanodeInfoWithStorage[127.0.0.1:34109,DS-2370aecf-843d-4269-8c26-dc7092af6637,DISK], DatanodeInfoWithStorage[127.0.0.1:35423,DS-3072276c-55ed-4cdd-97c0-a8aa47ea0407,DISK], DatanodeInfoWithStorage[127.0.0.1:42551,DS-500c1ea2-2a7f-44e6-916f-0448242355bb,DISK], DatanodeInfoWithStorage[127.0.0.1:39350,DS-71cb923e-3674-45dd-9769-1fa15ff56c08,DISK]]; indices=[0, 1, 2, 3, 5, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-557153819-172.17.0.21-1596959546483:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41938,DS-521c3af8-8126-4098-805e-43dcb226b67d,DISK], DatanodeInfoWithStorage[127.0.0.1:46404,DS-c64a755a-ffc5-4d4c-8229-462109109e04,DISK], DatanodeInfoWithStorage[127.0.0.1:43373,DS-44bd6373-465e-4bc5-ac7a-17b798756277,DISK], DatanodeInfoWithStorage[127.0.0.1:44651,DS-21e8c1a7-0583-4065-8626-8f6bf2a92ad5,DISK], DatanodeInfoWithStorage[127.0.0.1:39179,DS-9d4e0e26-309a-4dd5-bea3-8ec534103562,DISK], DatanodeInfoWithStorage[127.0.0.1:33315,DS-35414bb2-4ee9-4fae-87df-e6bf9f5ef03a,DISK], DatanodeInfoWithStorage[127.0.0.1:35373,DS-4c9bc63d-829e-4249-8690-2fddc2d61246,DISK]]; indices=[0, 3, 5, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-557153819-172.17.0.21-1596959546483:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41938,DS-521c3af8-8126-4098-805e-43dcb226b67d,DISK], DatanodeInfoWithStorage[127.0.0.1:46404,DS-c64a755a-ffc5-4d4c-8229-462109109e04,DISK], DatanodeInfoWithStorage[127.0.0.1:43373,DS-44bd6373-465e-4bc5-ac7a-17b798756277,DISK], DatanodeInfoWithStorage[127.0.0.1:44651,DS-21e8c1a7-0583-4065-8626-8f6bf2a92ad5,DISK], DatanodeInfoWithStorage[127.0.0.1:39179,DS-9d4e0e26-309a-4dd5-bea3-8ec534103562,DISK], DatanodeInfoWithStorage[127.0.0.1:33315,DS-35414bb2-4ee9-4fae-87df-e6bf9f5ef03a,DISK], DatanodeInfoWithStorage[127.0.0.1:35373,DS-4c9bc63d-829e-4249-8690-2fddc2d61246,DISK]]; indices=[0, 3, 5, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-557153819-172.17.0.21-1596959546483:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41938,DS-521c3af8-8126-4098-805e-43dcb226b67d,DISK], DatanodeInfoWithStorage[127.0.0.1:46404,DS-c64a755a-ffc5-4d4c-8229-462109109e04,DISK], DatanodeInfoWithStorage[127.0.0.1:43373,DS-44bd6373-465e-4bc5-ac7a-17b798756277,DISK], DatanodeInfoWithStorage[127.0.0.1:44651,DS-21e8c1a7-0583-4065-8626-8f6bf2a92ad5,DISK], DatanodeInfoWithStorage[127.0.0.1:39179,DS-9d4e0e26-309a-4dd5-bea3-8ec534103562,DISK], DatanodeInfoWithStorage[127.0.0.1:33315,DS-35414bb2-4ee9-4fae-87df-e6bf9f5ef03a,DISK], DatanodeInfoWithStorage[127.0.0.1:35373,DS-4c9bc63d-829e-4249-8690-2fddc2d61246,DISK]]; indices=[0, 3, 5, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-557153819-172.17.0.21-1596959546483:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41938,DS-521c3af8-8126-4098-805e-43dcb226b67d,DISK], DatanodeInfoWithStorage[127.0.0.1:46404,DS-c64a755a-ffc5-4d4c-8229-462109109e04,DISK], DatanodeInfoWithStorage[127.0.0.1:43373,DS-44bd6373-465e-4bc5-ac7a-17b798756277,DISK], DatanodeInfoWithStorage[127.0.0.1:44651,DS-21e8c1a7-0583-4065-8626-8f6bf2a92ad5,DISK], DatanodeInfoWithStorage[127.0.0.1:39179,DS-9d4e0e26-309a-4dd5-bea3-8ec534103562,DISK], DatanodeInfoWithStorage[127.0.0.1:33315,DS-35414bb2-4ee9-4fae-87df-e6bf9f5ef03a,DISK], DatanodeInfoWithStorage[127.0.0.1:35373,DS-4c9bc63d-829e-4249-8690-2fddc2d61246,DISK]]; indices=[0, 3, 5, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1906490122-172.17.0.21-1596959857133:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37686,DS-189fb70a-fd08-496d-8bd2-e5187e10cceb,DISK], DatanodeInfoWithStorage[127.0.0.1:41835,DS-7545e05b-2747-4ebe-afa3-85285bd99073,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,DS-16e8992a-6f4d-4655-bdb9-0507430b6439,DISK], DatanodeInfoWithStorage[127.0.0.1:39389,DS-9eac8cb8-a8cb-488c-8c1f-4f76d73a7576,DISK], DatanodeInfoWithStorage[127.0.0.1:45975,DS-d4971a71-a5e0-4ddb-b5df-308a07a1b98c,DISK], DatanodeInfoWithStorage[127.0.0.1:40484,DS-2de7b605-e9ba-43ed-82fe-d3c41b985da9,DISK]]; indices=[1, 3, 4, 5, 10, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1906490122-172.17.0.21-1596959857133:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37686,DS-189fb70a-fd08-496d-8bd2-e5187e10cceb,DISK], DatanodeInfoWithStorage[127.0.0.1:41835,DS-7545e05b-2747-4ebe-afa3-85285bd99073,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,DS-16e8992a-6f4d-4655-bdb9-0507430b6439,DISK], DatanodeInfoWithStorage[127.0.0.1:39389,DS-9eac8cb8-a8cb-488c-8c1f-4f76d73a7576,DISK], DatanodeInfoWithStorage[127.0.0.1:45975,DS-d4971a71-a5e0-4ddb-b5df-308a07a1b98c,DISK], DatanodeInfoWithStorage[127.0.0.1:40484,DS-2de7b605-e9ba-43ed-82fe-d3c41b985da9,DISK]]; indices=[1, 3, 4, 5, 10, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1906490122-172.17.0.21-1596959857133:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37686,DS-189fb70a-fd08-496d-8bd2-e5187e10cceb,DISK], DatanodeInfoWithStorage[127.0.0.1:41835,DS-7545e05b-2747-4ebe-afa3-85285bd99073,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,DS-16e8992a-6f4d-4655-bdb9-0507430b6439,DISK], DatanodeInfoWithStorage[127.0.0.1:39389,DS-9eac8cb8-a8cb-488c-8c1f-4f76d73a7576,DISK], DatanodeInfoWithStorage[127.0.0.1:45975,DS-d4971a71-a5e0-4ddb-b5df-308a07a1b98c,DISK], DatanodeInfoWithStorage[127.0.0.1:40484,DS-2de7b605-e9ba-43ed-82fe-d3c41b985da9,DISK]]; indices=[1, 3, 4, 5, 10, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1906490122-172.17.0.21-1596959857133:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37686,DS-189fb70a-fd08-496d-8bd2-e5187e10cceb,DISK], DatanodeInfoWithStorage[127.0.0.1:41835,DS-7545e05b-2747-4ebe-afa3-85285bd99073,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,DS-16e8992a-6f4d-4655-bdb9-0507430b6439,DISK], DatanodeInfoWithStorage[127.0.0.1:39389,DS-9eac8cb8-a8cb-488c-8c1f-4f76d73a7576,DISK], DatanodeInfoWithStorage[127.0.0.1:45975,DS-d4971a71-a5e0-4ddb-b5df-308a07a1b98c,DISK], DatanodeInfoWithStorage[127.0.0.1:40484,DS-2de7b605-e9ba-43ed-82fe-d3c41b985da9,DISK]]; indices=[1, 3, 4, 5, 10, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.use.dfs.network.topology
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1620089890-172.17.0.21-1596959948496:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45019,DS-1ee8cc15-97c2-4494-8ab6-c0e950149ff2,DISK], DatanodeInfoWithStorage[127.0.0.1:44610,DS-d5c1966c-50c8-43ba-854b-0063c3cfabfd,DISK], DatanodeInfoWithStorage[127.0.0.1:34043,DS-c4da6e79-c8b1-4440-a998-5b39deecd1a0,DISK], DatanodeInfoWithStorage[127.0.0.1:37845,DS-7fc699fd-c287-4866-90c6-3c27ed6b5686,DISK], DatanodeInfoWithStorage[127.0.0.1:44302,DS-eac19d0f-c31a-47c7-8504-22c7a9a13996,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-b6016f5f-6d87-44a3-9729-68e9b3182fce,DISK], DatanodeInfoWithStorage[127.0.0.1:40475,DS-ed034267-9fc4-4d05-be40-1d03b09fd101,DISK]]; indices=[1, 2, 5, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1620089890-172.17.0.21-1596959948496:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45019,DS-1ee8cc15-97c2-4494-8ab6-c0e950149ff2,DISK], DatanodeInfoWithStorage[127.0.0.1:44610,DS-d5c1966c-50c8-43ba-854b-0063c3cfabfd,DISK], DatanodeInfoWithStorage[127.0.0.1:34043,DS-c4da6e79-c8b1-4440-a998-5b39deecd1a0,DISK], DatanodeInfoWithStorage[127.0.0.1:37845,DS-7fc699fd-c287-4866-90c6-3c27ed6b5686,DISK], DatanodeInfoWithStorage[127.0.0.1:44302,DS-eac19d0f-c31a-47c7-8504-22c7a9a13996,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-b6016f5f-6d87-44a3-9729-68e9b3182fce,DISK], DatanodeInfoWithStorage[127.0.0.1:40475,DS-ed034267-9fc4-4d05-be40-1d03b09fd101,DISK]]; indices=[1, 2, 5, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1620089890-172.17.0.21-1596959948496:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45019,DS-1ee8cc15-97c2-4494-8ab6-c0e950149ff2,DISK], DatanodeInfoWithStorage[127.0.0.1:44610,DS-d5c1966c-50c8-43ba-854b-0063c3cfabfd,DISK], DatanodeInfoWithStorage[127.0.0.1:34043,DS-c4da6e79-c8b1-4440-a998-5b39deecd1a0,DISK], DatanodeInfoWithStorage[127.0.0.1:37845,DS-7fc699fd-c287-4866-90c6-3c27ed6b5686,DISK], DatanodeInfoWithStorage[127.0.0.1:44302,DS-eac19d0f-c31a-47c7-8504-22c7a9a13996,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-b6016f5f-6d87-44a3-9729-68e9b3182fce,DISK], DatanodeInfoWithStorage[127.0.0.1:40475,DS-ed034267-9fc4-4d05-be40-1d03b09fd101,DISK]]; indices=[1, 2, 5, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1620089890-172.17.0.21-1596959948496:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45019,DS-1ee8cc15-97c2-4494-8ab6-c0e950149ff2,DISK], DatanodeInfoWithStorage[127.0.0.1:44610,DS-d5c1966c-50c8-43ba-854b-0063c3cfabfd,DISK], DatanodeInfoWithStorage[127.0.0.1:34043,DS-c4da6e79-c8b1-4440-a998-5b39deecd1a0,DISK], DatanodeInfoWithStorage[127.0.0.1:37845,DS-7fc699fd-c287-4866-90c6-3c27ed6b5686,DISK], DatanodeInfoWithStorage[127.0.0.1:44302,DS-eac19d0f-c31a-47c7-8504-22c7a9a13996,DISK], DatanodeInfoWithStorage[127.0.0.1:41115,DS-b6016f5f-6d87-44a3-9729-68e9b3182fce,DISK], DatanodeInfoWithStorage[127.0.0.1:40475,DS-ed034267-9fc4-4d05-be40-1d03b09fd101,DISK]]; indices=[1, 2, 5, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 8 out of 50
v1v1v2v2 failed with probability 11 out of 50
result: false positive !!!
Total execution time in seconds : 6998
