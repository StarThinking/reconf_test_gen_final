reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-541708115-172.17.0.10-1596917557963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43993,DS-cc406754-8b7a-4b62-95ae-dcb6121a35b6,DISK], DatanodeInfoWithStorage[127.0.0.1:35748,DS-46711c3b-db3f-47ef-9467-2399c52be264,DISK], DatanodeInfoWithStorage[127.0.0.1:45823,DS-3f5f9212-09b2-4f9f-8bef-9c949a614e14,DISK], DatanodeInfoWithStorage[127.0.0.1:39789,DS-70a13c47-fcf8-4f62-8f4d-2cc2635d4617,DISK], DatanodeInfoWithStorage[127.0.0.1:45355,DS-78ab0055-bc24-4a29-bacb-2f8c64e588aa,DISK], DatanodeInfoWithStorage[127.0.0.1:43576,DS-9e8a56b0-742f-485c-b635-c5bae5db0e2d,DISK], DatanodeInfoWithStorage[127.0.0.1:39366,DS-6be6bbbb-6a84-45fa-8287-6d338dc735f7,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-541708115-172.17.0.10-1596917557963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43993,DS-cc406754-8b7a-4b62-95ae-dcb6121a35b6,DISK], DatanodeInfoWithStorage[127.0.0.1:35748,DS-46711c3b-db3f-47ef-9467-2399c52be264,DISK], DatanodeInfoWithStorage[127.0.0.1:45823,DS-3f5f9212-09b2-4f9f-8bef-9c949a614e14,DISK], DatanodeInfoWithStorage[127.0.0.1:39789,DS-70a13c47-fcf8-4f62-8f4d-2cc2635d4617,DISK], DatanodeInfoWithStorage[127.0.0.1:45355,DS-78ab0055-bc24-4a29-bacb-2f8c64e588aa,DISK], DatanodeInfoWithStorage[127.0.0.1:43576,DS-9e8a56b0-742f-485c-b635-c5bae5db0e2d,DISK], DatanodeInfoWithStorage[127.0.0.1:39366,DS-6be6bbbb-6a84-45fa-8287-6d338dc735f7,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-541708115-172.17.0.10-1596917557963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43993,DS-cc406754-8b7a-4b62-95ae-dcb6121a35b6,DISK], DatanodeInfoWithStorage[127.0.0.1:35748,DS-46711c3b-db3f-47ef-9467-2399c52be264,DISK], DatanodeInfoWithStorage[127.0.0.1:45823,DS-3f5f9212-09b2-4f9f-8bef-9c949a614e14,DISK], DatanodeInfoWithStorage[127.0.0.1:39789,DS-70a13c47-fcf8-4f62-8f4d-2cc2635d4617,DISK], DatanodeInfoWithStorage[127.0.0.1:45355,DS-78ab0055-bc24-4a29-bacb-2f8c64e588aa,DISK], DatanodeInfoWithStorage[127.0.0.1:43576,DS-9e8a56b0-742f-485c-b635-c5bae5db0e2d,DISK], DatanodeInfoWithStorage[127.0.0.1:39366,DS-6be6bbbb-6a84-45fa-8287-6d338dc735f7,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-541708115-172.17.0.10-1596917557963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43993,DS-cc406754-8b7a-4b62-95ae-dcb6121a35b6,DISK], DatanodeInfoWithStorage[127.0.0.1:35748,DS-46711c3b-db3f-47ef-9467-2399c52be264,DISK], DatanodeInfoWithStorage[127.0.0.1:45823,DS-3f5f9212-09b2-4f9f-8bef-9c949a614e14,DISK], DatanodeInfoWithStorage[127.0.0.1:39789,DS-70a13c47-fcf8-4f62-8f4d-2cc2635d4617,DISK], DatanodeInfoWithStorage[127.0.0.1:45355,DS-78ab0055-bc24-4a29-bacb-2f8c64e588aa,DISK], DatanodeInfoWithStorage[127.0.0.1:43576,DS-9e8a56b0-742f-485c-b635-c5bae5db0e2d,DISK], DatanodeInfoWithStorage[127.0.0.1:39366,DS-6be6bbbb-6a84-45fa-8287-6d338dc735f7,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-185254293-172.17.0.10-1596917688963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39501,DS-fe0bfd2c-07aa-4db9-a322-4ee60a96ab69,DISK], DatanodeInfoWithStorage[127.0.0.1:35743,DS-527e0388-6b6b-44fb-b36a-a695c10d636c,DISK], DatanodeInfoWithStorage[127.0.0.1:43223,DS-2eaaf354-16ae-4f47-bb2c-ab48f0ab299f,DISK], DatanodeInfoWithStorage[127.0.0.1:44219,DS-46e6bac1-c46b-4395-aeb1-e75f6b5ef468,DISK], DatanodeInfoWithStorage[127.0.0.1:40745,DS-79526510-4246-4377-8fce-50333a99ef55,DISK]]; indices=[1, 3, 4, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-185254293-172.17.0.10-1596917688963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39501,DS-fe0bfd2c-07aa-4db9-a322-4ee60a96ab69,DISK], DatanodeInfoWithStorage[127.0.0.1:35743,DS-527e0388-6b6b-44fb-b36a-a695c10d636c,DISK], DatanodeInfoWithStorage[127.0.0.1:43223,DS-2eaaf354-16ae-4f47-bb2c-ab48f0ab299f,DISK], DatanodeInfoWithStorage[127.0.0.1:44219,DS-46e6bac1-c46b-4395-aeb1-e75f6b5ef468,DISK], DatanodeInfoWithStorage[127.0.0.1:40745,DS-79526510-4246-4377-8fce-50333a99ef55,DISK]]; indices=[1, 3, 4, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-185254293-172.17.0.10-1596917688963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39501,DS-fe0bfd2c-07aa-4db9-a322-4ee60a96ab69,DISK], DatanodeInfoWithStorage[127.0.0.1:35743,DS-527e0388-6b6b-44fb-b36a-a695c10d636c,DISK], DatanodeInfoWithStorage[127.0.0.1:43223,DS-2eaaf354-16ae-4f47-bb2c-ab48f0ab299f,DISK], DatanodeInfoWithStorage[127.0.0.1:44219,DS-46e6bac1-c46b-4395-aeb1-e75f6b5ef468,DISK], DatanodeInfoWithStorage[127.0.0.1:40745,DS-79526510-4246-4377-8fce-50333a99ef55,DISK]]; indices=[1, 3, 4, 7, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-185254293-172.17.0.10-1596917688963:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39501,DS-fe0bfd2c-07aa-4db9-a322-4ee60a96ab69,DISK], DatanodeInfoWithStorage[127.0.0.1:35743,DS-527e0388-6b6b-44fb-b36a-a695c10d636c,DISK], DatanodeInfoWithStorage[127.0.0.1:43223,DS-2eaaf354-16ae-4f47-bb2c-ab48f0ab299f,DISK], DatanodeInfoWithStorage[127.0.0.1:44219,DS-46e6bac1-c46b-4395-aeb1-e75f6b5ef468,DISK], DatanodeInfoWithStorage[127.0.0.1:40745,DS-79526510-4246-4377-8fce-50333a99ef55,DISK]]; indices=[1, 3, 4, 7, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-896437173-172.17.0.10-1596917848819:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46746,DS-a8c12f27-a306-47f1-bebd-eb9306883295,DISK], DatanodeInfoWithStorage[127.0.0.1:37566,DS-68734a0c-d287-4933-9a78-7a2d7e8e53a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35943,DS-d2ab5177-21ca-4f7d-9dc9-5627bdc44d78,DISK], DatanodeInfoWithStorage[127.0.0.1:35424,DS-cff11764-c2a0-4400-acca-6105af13e4c7,DISK], DatanodeInfoWithStorage[127.0.0.1:46827,DS-f6a972fc-0e15-4187-a37c-4ab378c1d340,DISK], DatanodeInfoWithStorage[127.0.0.1:33757,DS-170673a8-fef6-48dc-851e-c9421b27fb5b,DISK], DatanodeInfoWithStorage[127.0.0.1:42837,DS-9bdc423b-a21d-4318-82bc-2238cfea98ff,DISK]]; indices=[1, 2, 3, 4, 5, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-896437173-172.17.0.10-1596917848819:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46746,DS-a8c12f27-a306-47f1-bebd-eb9306883295,DISK], DatanodeInfoWithStorage[127.0.0.1:37566,DS-68734a0c-d287-4933-9a78-7a2d7e8e53a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35943,DS-d2ab5177-21ca-4f7d-9dc9-5627bdc44d78,DISK], DatanodeInfoWithStorage[127.0.0.1:35424,DS-cff11764-c2a0-4400-acca-6105af13e4c7,DISK], DatanodeInfoWithStorage[127.0.0.1:46827,DS-f6a972fc-0e15-4187-a37c-4ab378c1d340,DISK], DatanodeInfoWithStorage[127.0.0.1:33757,DS-170673a8-fef6-48dc-851e-c9421b27fb5b,DISK], DatanodeInfoWithStorage[127.0.0.1:42837,DS-9bdc423b-a21d-4318-82bc-2238cfea98ff,DISK]]; indices=[1, 2, 3, 4, 5, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-896437173-172.17.0.10-1596917848819:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46746,DS-a8c12f27-a306-47f1-bebd-eb9306883295,DISK], DatanodeInfoWithStorage[127.0.0.1:37566,DS-68734a0c-d287-4933-9a78-7a2d7e8e53a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35943,DS-d2ab5177-21ca-4f7d-9dc9-5627bdc44d78,DISK], DatanodeInfoWithStorage[127.0.0.1:35424,DS-cff11764-c2a0-4400-acca-6105af13e4c7,DISK], DatanodeInfoWithStorage[127.0.0.1:46827,DS-f6a972fc-0e15-4187-a37c-4ab378c1d340,DISK], DatanodeInfoWithStorage[127.0.0.1:33757,DS-170673a8-fef6-48dc-851e-c9421b27fb5b,DISK], DatanodeInfoWithStorage[127.0.0.1:42837,DS-9bdc423b-a21d-4318-82bc-2238cfea98ff,DISK]]; indices=[1, 2, 3, 4, 5, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-896437173-172.17.0.10-1596917848819:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46746,DS-a8c12f27-a306-47f1-bebd-eb9306883295,DISK], DatanodeInfoWithStorage[127.0.0.1:37566,DS-68734a0c-d287-4933-9a78-7a2d7e8e53a6,DISK], DatanodeInfoWithStorage[127.0.0.1:35943,DS-d2ab5177-21ca-4f7d-9dc9-5627bdc44d78,DISK], DatanodeInfoWithStorage[127.0.0.1:35424,DS-cff11764-c2a0-4400-acca-6105af13e4c7,DISK], DatanodeInfoWithStorage[127.0.0.1:46827,DS-f6a972fc-0e15-4187-a37c-4ab378c1d340,DISK], DatanodeInfoWithStorage[127.0.0.1:33757,DS-170673a8-fef6-48dc-851e-c9421b27fb5b,DISK], DatanodeInfoWithStorage[127.0.0.1:42837,DS-9bdc423b-a21d-4318-82bc-2238cfea98ff,DISK]]; indices=[1, 2, 3, 4, 5, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1325529852-172.17.0.10-1596918214908:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46267,DS-00aa2b1a-9c20-4427-86f3-83fb9bd80d76,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-cbac5b9b-7060-49a8-a759-955873f699eb,DISK], DatanodeInfoWithStorage[127.0.0.1:32920,DS-938a2902-88b9-4128-aaaa-a94dffa21eb3,DISK], DatanodeInfoWithStorage[127.0.0.1:44431,DS-0418b9cc-e20f-41fd-85b8-3073def2f511,DISK], DatanodeInfoWithStorage[127.0.0.1:39070,DS-53fe1000-bf40-4990-9ec0-881ac43ae598,DISK], DatanodeInfoWithStorage[127.0.0.1:42072,DS-57c4ae37-730d-4ef6-8b18-75a1eabb54d6,DISK]]; indices=[0, 2, 3, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1325529852-172.17.0.10-1596918214908:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46267,DS-00aa2b1a-9c20-4427-86f3-83fb9bd80d76,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-cbac5b9b-7060-49a8-a759-955873f699eb,DISK], DatanodeInfoWithStorage[127.0.0.1:32920,DS-938a2902-88b9-4128-aaaa-a94dffa21eb3,DISK], DatanodeInfoWithStorage[127.0.0.1:44431,DS-0418b9cc-e20f-41fd-85b8-3073def2f511,DISK], DatanodeInfoWithStorage[127.0.0.1:39070,DS-53fe1000-bf40-4990-9ec0-881ac43ae598,DISK], DatanodeInfoWithStorage[127.0.0.1:42072,DS-57c4ae37-730d-4ef6-8b18-75a1eabb54d6,DISK]]; indices=[0, 2, 3, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1325529852-172.17.0.10-1596918214908:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46267,DS-00aa2b1a-9c20-4427-86f3-83fb9bd80d76,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-cbac5b9b-7060-49a8-a759-955873f699eb,DISK], DatanodeInfoWithStorage[127.0.0.1:32920,DS-938a2902-88b9-4128-aaaa-a94dffa21eb3,DISK], DatanodeInfoWithStorage[127.0.0.1:44431,DS-0418b9cc-e20f-41fd-85b8-3073def2f511,DISK], DatanodeInfoWithStorage[127.0.0.1:39070,DS-53fe1000-bf40-4990-9ec0-881ac43ae598,DISK], DatanodeInfoWithStorage[127.0.0.1:42072,DS-57c4ae37-730d-4ef6-8b18-75a1eabb54d6,DISK]]; indices=[0, 2, 3, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1325529852-172.17.0.10-1596918214908:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46267,DS-00aa2b1a-9c20-4427-86f3-83fb9bd80d76,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-cbac5b9b-7060-49a8-a759-955873f699eb,DISK], DatanodeInfoWithStorage[127.0.0.1:32920,DS-938a2902-88b9-4128-aaaa-a94dffa21eb3,DISK], DatanodeInfoWithStorage[127.0.0.1:44431,DS-0418b9cc-e20f-41fd-85b8-3073def2f511,DISK], DatanodeInfoWithStorage[127.0.0.1:39070,DS-53fe1000-bf40-4990-9ec0-881ac43ae598,DISK], DatanodeInfoWithStorage[127.0.0.1:42072,DS-57c4ae37-730d-4ef6-8b18-75a1eabb54d6,DISK]]; indices=[0, 2, 3, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1843382131-172.17.0.10-1596918590714:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42511,DS-3db29c5c-76a1-4346-80c1-886f50d8a1d2,DISK], DatanodeInfoWithStorage[127.0.0.1:38393,DS-97ecbec7-ceee-4df7-b2eb-09d47e6cfb67,DISK], DatanodeInfoWithStorage[127.0.0.1:41537,DS-3296288e-9ce6-410f-b6f7-cf65c6d81c6d,DISK], DatanodeInfoWithStorage[127.0.0.1:34947,DS-42ab3c2a-126c-4031-b28c-2f37e6698858,DISK], DatanodeInfoWithStorage[127.0.0.1:44609,DS-b6c9405a-7777-4767-ad41-f55435377d6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-6cd6e331-2917-4d3e-8846-312638736c91,DISK]]; indices=[0, 1, 3, 4, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1843382131-172.17.0.10-1596918590714:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42511,DS-3db29c5c-76a1-4346-80c1-886f50d8a1d2,DISK], DatanodeInfoWithStorage[127.0.0.1:38393,DS-97ecbec7-ceee-4df7-b2eb-09d47e6cfb67,DISK], DatanodeInfoWithStorage[127.0.0.1:41537,DS-3296288e-9ce6-410f-b6f7-cf65c6d81c6d,DISK], DatanodeInfoWithStorage[127.0.0.1:34947,DS-42ab3c2a-126c-4031-b28c-2f37e6698858,DISK], DatanodeInfoWithStorage[127.0.0.1:44609,DS-b6c9405a-7777-4767-ad41-f55435377d6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-6cd6e331-2917-4d3e-8846-312638736c91,DISK]]; indices=[0, 1, 3, 4, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1843382131-172.17.0.10-1596918590714:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42511,DS-3db29c5c-76a1-4346-80c1-886f50d8a1d2,DISK], DatanodeInfoWithStorage[127.0.0.1:38393,DS-97ecbec7-ceee-4df7-b2eb-09d47e6cfb67,DISK], DatanodeInfoWithStorage[127.0.0.1:41537,DS-3296288e-9ce6-410f-b6f7-cf65c6d81c6d,DISK], DatanodeInfoWithStorage[127.0.0.1:34947,DS-42ab3c2a-126c-4031-b28c-2f37e6698858,DISK], DatanodeInfoWithStorage[127.0.0.1:44609,DS-b6c9405a-7777-4767-ad41-f55435377d6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-6cd6e331-2917-4d3e-8846-312638736c91,DISK]]; indices=[0, 1, 3, 4, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1843382131-172.17.0.10-1596918590714:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42511,DS-3db29c5c-76a1-4346-80c1-886f50d8a1d2,DISK], DatanodeInfoWithStorage[127.0.0.1:38393,DS-97ecbec7-ceee-4df7-b2eb-09d47e6cfb67,DISK], DatanodeInfoWithStorage[127.0.0.1:41537,DS-3296288e-9ce6-410f-b6f7-cf65c6d81c6d,DISK], DatanodeInfoWithStorage[127.0.0.1:34947,DS-42ab3c2a-126c-4031-b28c-2f37e6698858,DISK], DatanodeInfoWithStorage[127.0.0.1:44609,DS-b6c9405a-7777-4767-ad41-f55435377d6a,DISK], DatanodeInfoWithStorage[127.0.0.1:42783,DS-6cd6e331-2917-4d3e-8846-312638736c91,DISK]]; indices=[0, 1, 3, 4, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-706241753-172.17.0.10-1596919454243:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34422,DS-d701f282-22e3-4cbf-9efe-d9fdd3df70e4,DISK], DatanodeInfoWithStorage[127.0.0.1:35449,DS-31924824-dec1-4580-8d71-7176ee6b6521,DISK], DatanodeInfoWithStorage[127.0.0.1:43633,DS-103e6afe-21af-4d8c-b013-1d26870196e3,DISK], DatanodeInfoWithStorage[127.0.0.1:46371,DS-71b0e087-24da-472c-9658-48d22397e125,DISK], DatanodeInfoWithStorage[127.0.0.1:40500,DS-b525d9ab-7157-4c02-9b29-21edc23f7ac0,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-5198de33-37b8-4a76-8678-d3b2cd0f4d13,DISK], DatanodeInfoWithStorage[127.0.0.1:36961,DS-5c72f96a-d5a7-4f93-80d3-f699ebae879e,DISK]]; indices=[0, 1, 2, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-706241753-172.17.0.10-1596919454243:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34422,DS-d701f282-22e3-4cbf-9efe-d9fdd3df70e4,DISK], DatanodeInfoWithStorage[127.0.0.1:35449,DS-31924824-dec1-4580-8d71-7176ee6b6521,DISK], DatanodeInfoWithStorage[127.0.0.1:43633,DS-103e6afe-21af-4d8c-b013-1d26870196e3,DISK], DatanodeInfoWithStorage[127.0.0.1:46371,DS-71b0e087-24da-472c-9658-48d22397e125,DISK], DatanodeInfoWithStorage[127.0.0.1:40500,DS-b525d9ab-7157-4c02-9b29-21edc23f7ac0,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-5198de33-37b8-4a76-8678-d3b2cd0f4d13,DISK], DatanodeInfoWithStorage[127.0.0.1:36961,DS-5c72f96a-d5a7-4f93-80d3-f699ebae879e,DISK]]; indices=[0, 1, 2, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-706241753-172.17.0.10-1596919454243:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34422,DS-d701f282-22e3-4cbf-9efe-d9fdd3df70e4,DISK], DatanodeInfoWithStorage[127.0.0.1:35449,DS-31924824-dec1-4580-8d71-7176ee6b6521,DISK], DatanodeInfoWithStorage[127.0.0.1:43633,DS-103e6afe-21af-4d8c-b013-1d26870196e3,DISK], DatanodeInfoWithStorage[127.0.0.1:46371,DS-71b0e087-24da-472c-9658-48d22397e125,DISK], DatanodeInfoWithStorage[127.0.0.1:40500,DS-b525d9ab-7157-4c02-9b29-21edc23f7ac0,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-5198de33-37b8-4a76-8678-d3b2cd0f4d13,DISK], DatanodeInfoWithStorage[127.0.0.1:36961,DS-5c72f96a-d5a7-4f93-80d3-f699ebae879e,DISK]]; indices=[0, 1, 2, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-706241753-172.17.0.10-1596919454243:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34422,DS-d701f282-22e3-4cbf-9efe-d9fdd3df70e4,DISK], DatanodeInfoWithStorage[127.0.0.1:35449,DS-31924824-dec1-4580-8d71-7176ee6b6521,DISK], DatanodeInfoWithStorage[127.0.0.1:43633,DS-103e6afe-21af-4d8c-b013-1d26870196e3,DISK], DatanodeInfoWithStorage[127.0.0.1:46371,DS-71b0e087-24da-472c-9658-48d22397e125,DISK], DatanodeInfoWithStorage[127.0.0.1:40500,DS-b525d9ab-7157-4c02-9b29-21edc23f7ac0,DISK], DatanodeInfoWithStorage[127.0.0.1:46247,DS-5198de33-37b8-4a76-8678-d3b2cd0f4d13,DISK], DatanodeInfoWithStorage[127.0.0.1:36961,DS-5c72f96a-d5a7-4f93-80d3-f699ebae879e,DISK]]; indices=[0, 1, 2, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-677295797-172.17.0.10-1596919939530:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32816,DS-f20fe66f-8dcb-4594-9eca-a7bdf7b7af70,DISK], DatanodeInfoWithStorage[127.0.0.1:43834,DS-5fca1d49-6789-4737-af99-c211d0b4fb72,DISK], DatanodeInfoWithStorage[127.0.0.1:38911,DS-0ca243ec-d6e0-431d-b073-068bd061363e,DISK], DatanodeInfoWithStorage[127.0.0.1:44708,DS-16f0b524-aab0-44bc-818b-eb0094b182a4,DISK], DatanodeInfoWithStorage[127.0.0.1:35362,DS-d31c3bcb-ca08-47ab-a293-904523959801,DISK], DatanodeInfoWithStorage[127.0.0.1:37381,DS-51f7da40-66cb-4740-9b17-ee71c8a99560,DISK]]; indices=[2, 3, 6, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-677295797-172.17.0.10-1596919939530:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32816,DS-f20fe66f-8dcb-4594-9eca-a7bdf7b7af70,DISK], DatanodeInfoWithStorage[127.0.0.1:43834,DS-5fca1d49-6789-4737-af99-c211d0b4fb72,DISK], DatanodeInfoWithStorage[127.0.0.1:38911,DS-0ca243ec-d6e0-431d-b073-068bd061363e,DISK], DatanodeInfoWithStorage[127.0.0.1:44708,DS-16f0b524-aab0-44bc-818b-eb0094b182a4,DISK], DatanodeInfoWithStorage[127.0.0.1:35362,DS-d31c3bcb-ca08-47ab-a293-904523959801,DISK], DatanodeInfoWithStorage[127.0.0.1:37381,DS-51f7da40-66cb-4740-9b17-ee71c8a99560,DISK]]; indices=[2, 3, 6, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-677295797-172.17.0.10-1596919939530:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32816,DS-f20fe66f-8dcb-4594-9eca-a7bdf7b7af70,DISK], DatanodeInfoWithStorage[127.0.0.1:43834,DS-5fca1d49-6789-4737-af99-c211d0b4fb72,DISK], DatanodeInfoWithStorage[127.0.0.1:38911,DS-0ca243ec-d6e0-431d-b073-068bd061363e,DISK], DatanodeInfoWithStorage[127.0.0.1:44708,DS-16f0b524-aab0-44bc-818b-eb0094b182a4,DISK], DatanodeInfoWithStorage[127.0.0.1:35362,DS-d31c3bcb-ca08-47ab-a293-904523959801,DISK], DatanodeInfoWithStorage[127.0.0.1:37381,DS-51f7da40-66cb-4740-9b17-ee71c8a99560,DISK]]; indices=[2, 3, 6, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-677295797-172.17.0.10-1596919939530:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32816,DS-f20fe66f-8dcb-4594-9eca-a7bdf7b7af70,DISK], DatanodeInfoWithStorage[127.0.0.1:43834,DS-5fca1d49-6789-4737-af99-c211d0b4fb72,DISK], DatanodeInfoWithStorage[127.0.0.1:38911,DS-0ca243ec-d6e0-431d-b073-068bd061363e,DISK], DatanodeInfoWithStorage[127.0.0.1:44708,DS-16f0b524-aab0-44bc-818b-eb0094b182a4,DISK], DatanodeInfoWithStorage[127.0.0.1:35362,DS-d31c3bcb-ca08-47ab-a293-904523959801,DISK], DatanodeInfoWithStorage[127.0.0.1:37381,DS-51f7da40-66cb-4740-9b17-ee71c8a99560,DISK]]; indices=[2, 3, 6, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-635469162-172.17.0.10-1596919975163:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41729,DS-8df23417-4d68-4569-aa80-178d00a8099b,DISK], DatanodeInfoWithStorage[127.0.0.1:35999,DS-77ca12e9-1655-44ce-80d0-857d7b19432d,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-596526b7-cd4f-4237-a3cd-a3a26d35ba22,DISK], DatanodeInfoWithStorage[127.0.0.1:35580,DS-95e55296-7a70-43aa-a9ef-97108128a123,DISK], DatanodeInfoWithStorage[127.0.0.1:37704,DS-5422857d-0b6e-4af6-a05b-cfd4547ef5c3,DISK], DatanodeInfoWithStorage[127.0.0.1:46264,DS-ae767c88-3bdf-4109-b7f8-e959d2f2ec51,DISK], DatanodeInfoWithStorage[127.0.0.1:45604,DS-ab608968-3e5e-437a-be0d-2e92d28554ce,DISK]]; indices=[1, 2, 3, 6, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-635469162-172.17.0.10-1596919975163:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41729,DS-8df23417-4d68-4569-aa80-178d00a8099b,DISK], DatanodeInfoWithStorage[127.0.0.1:35999,DS-77ca12e9-1655-44ce-80d0-857d7b19432d,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-596526b7-cd4f-4237-a3cd-a3a26d35ba22,DISK], DatanodeInfoWithStorage[127.0.0.1:35580,DS-95e55296-7a70-43aa-a9ef-97108128a123,DISK], DatanodeInfoWithStorage[127.0.0.1:37704,DS-5422857d-0b6e-4af6-a05b-cfd4547ef5c3,DISK], DatanodeInfoWithStorage[127.0.0.1:46264,DS-ae767c88-3bdf-4109-b7f8-e959d2f2ec51,DISK], DatanodeInfoWithStorage[127.0.0.1:45604,DS-ab608968-3e5e-437a-be0d-2e92d28554ce,DISK]]; indices=[1, 2, 3, 6, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-635469162-172.17.0.10-1596919975163:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41729,DS-8df23417-4d68-4569-aa80-178d00a8099b,DISK], DatanodeInfoWithStorage[127.0.0.1:35999,DS-77ca12e9-1655-44ce-80d0-857d7b19432d,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-596526b7-cd4f-4237-a3cd-a3a26d35ba22,DISK], DatanodeInfoWithStorage[127.0.0.1:35580,DS-95e55296-7a70-43aa-a9ef-97108128a123,DISK], DatanodeInfoWithStorage[127.0.0.1:37704,DS-5422857d-0b6e-4af6-a05b-cfd4547ef5c3,DISK], DatanodeInfoWithStorage[127.0.0.1:46264,DS-ae767c88-3bdf-4109-b7f8-e959d2f2ec51,DISK], DatanodeInfoWithStorage[127.0.0.1:45604,DS-ab608968-3e5e-437a-be0d-2e92d28554ce,DISK]]; indices=[1, 2, 3, 6, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-635469162-172.17.0.10-1596919975163:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41729,DS-8df23417-4d68-4569-aa80-178d00a8099b,DISK], DatanodeInfoWithStorage[127.0.0.1:35999,DS-77ca12e9-1655-44ce-80d0-857d7b19432d,DISK], DatanodeInfoWithStorage[127.0.0.1:38910,DS-596526b7-cd4f-4237-a3cd-a3a26d35ba22,DISK], DatanodeInfoWithStorage[127.0.0.1:35580,DS-95e55296-7a70-43aa-a9ef-97108128a123,DISK], DatanodeInfoWithStorage[127.0.0.1:37704,DS-5422857d-0b6e-4af6-a05b-cfd4547ef5c3,DISK], DatanodeInfoWithStorage[127.0.0.1:46264,DS-ae767c88-3bdf-4109-b7f8-e959d2f2ec51,DISK], DatanodeInfoWithStorage[127.0.0.1:45604,DS-ab608968-3e5e-437a-be0d-2e92d28554ce,DISK]]; indices=[1, 2, 3, 6, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1130603844-172.17.0.10-1596920933141:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34851,DS-e7f53b25-4b19-49c1-bcd9-aba6e757c448,DISK], DatanodeInfoWithStorage[127.0.0.1:42671,DS-717410fa-8866-472e-a34a-ae5db9ed15c5,DISK], DatanodeInfoWithStorage[127.0.0.1:43145,DS-a91c0573-a597-48ca-9ae2-cdbf09252c24,DISK], DatanodeInfoWithStorage[127.0.0.1:45511,DS-30820fa3-b912-4b8e-ae21-e8a2807e61da,DISK], DatanodeInfoWithStorage[127.0.0.1:35865,DS-39ee6057-bab5-4828-b158-eebd8012da22,DISK], DatanodeInfoWithStorage[127.0.0.1:37976,DS-40e22002-728f-44b1-8e60-869a1c55675a,DISK], DatanodeInfoWithStorage[127.0.0.1:44723,DS-ef98ed14-eadf-41ac-9d21-b2777e76b811,DISK]]; indices=[0, 2, 3, 4, 5, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1130603844-172.17.0.10-1596920933141:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34851,DS-e7f53b25-4b19-49c1-bcd9-aba6e757c448,DISK], DatanodeInfoWithStorage[127.0.0.1:42671,DS-717410fa-8866-472e-a34a-ae5db9ed15c5,DISK], DatanodeInfoWithStorage[127.0.0.1:43145,DS-a91c0573-a597-48ca-9ae2-cdbf09252c24,DISK], DatanodeInfoWithStorage[127.0.0.1:45511,DS-30820fa3-b912-4b8e-ae21-e8a2807e61da,DISK], DatanodeInfoWithStorage[127.0.0.1:35865,DS-39ee6057-bab5-4828-b158-eebd8012da22,DISK], DatanodeInfoWithStorage[127.0.0.1:37976,DS-40e22002-728f-44b1-8e60-869a1c55675a,DISK], DatanodeInfoWithStorage[127.0.0.1:44723,DS-ef98ed14-eadf-41ac-9d21-b2777e76b811,DISK]]; indices=[0, 2, 3, 4, 5, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1130603844-172.17.0.10-1596920933141:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34851,DS-e7f53b25-4b19-49c1-bcd9-aba6e757c448,DISK], DatanodeInfoWithStorage[127.0.0.1:42671,DS-717410fa-8866-472e-a34a-ae5db9ed15c5,DISK], DatanodeInfoWithStorage[127.0.0.1:43145,DS-a91c0573-a597-48ca-9ae2-cdbf09252c24,DISK], DatanodeInfoWithStorage[127.0.0.1:45511,DS-30820fa3-b912-4b8e-ae21-e8a2807e61da,DISK], DatanodeInfoWithStorage[127.0.0.1:35865,DS-39ee6057-bab5-4828-b158-eebd8012da22,DISK], DatanodeInfoWithStorage[127.0.0.1:37976,DS-40e22002-728f-44b1-8e60-869a1c55675a,DISK], DatanodeInfoWithStorage[127.0.0.1:44723,DS-ef98ed14-eadf-41ac-9d21-b2777e76b811,DISK]]; indices=[0, 2, 3, 4, 5, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1130603844-172.17.0.10-1596920933141:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34851,DS-e7f53b25-4b19-49c1-bcd9-aba6e757c448,DISK], DatanodeInfoWithStorage[127.0.0.1:42671,DS-717410fa-8866-472e-a34a-ae5db9ed15c5,DISK], DatanodeInfoWithStorage[127.0.0.1:43145,DS-a91c0573-a597-48ca-9ae2-cdbf09252c24,DISK], DatanodeInfoWithStorage[127.0.0.1:45511,DS-30820fa3-b912-4b8e-ae21-e8a2807e61da,DISK], DatanodeInfoWithStorage[127.0.0.1:35865,DS-39ee6057-bab5-4828-b158-eebd8012da22,DISK], DatanodeInfoWithStorage[127.0.0.1:37976,DS-40e22002-728f-44b1-8e60-869a1c55675a,DISK], DatanodeInfoWithStorage[127.0.0.1:44723,DS-ef98ed14-eadf-41ac-9d21-b2777e76b811,DISK]]; indices=[0, 2, 3, 4, 5, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1445196301-172.17.0.10-1596921576952:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45181,DS-e1fb34f7-b6a3-4928-8831-802980e6b609,DISK], DatanodeInfoWithStorage[127.0.0.1:46637,DS-1d51b3ca-c1d6-48f1-922d-d3e1796cf8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:39653,DS-16a7bd59-913c-45d9-b4d5-0ff89fd7d1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:33775,DS-907fd47b-721f-4a32-894c-357bae184e5e,DISK], DatanodeInfoWithStorage[127.0.0.1:39009,DS-e21df2dc-e862-44be-96a4-8f4356508bd6,DISK], DatanodeInfoWithStorage[127.0.0.1:41004,DS-9d49cfb4-ff88-4f8b-ab3e-4c8c80574b90,DISK], DatanodeInfoWithStorage[127.0.0.1:37781,DS-8a281f24-5ef4-4c28-8176-a3c2ad5fbf3c,DISK]]; indices=[1, 2, 5, 6, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1445196301-172.17.0.10-1596921576952:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45181,DS-e1fb34f7-b6a3-4928-8831-802980e6b609,DISK], DatanodeInfoWithStorage[127.0.0.1:46637,DS-1d51b3ca-c1d6-48f1-922d-d3e1796cf8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:39653,DS-16a7bd59-913c-45d9-b4d5-0ff89fd7d1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:33775,DS-907fd47b-721f-4a32-894c-357bae184e5e,DISK], DatanodeInfoWithStorage[127.0.0.1:39009,DS-e21df2dc-e862-44be-96a4-8f4356508bd6,DISK], DatanodeInfoWithStorage[127.0.0.1:41004,DS-9d49cfb4-ff88-4f8b-ab3e-4c8c80574b90,DISK], DatanodeInfoWithStorage[127.0.0.1:37781,DS-8a281f24-5ef4-4c28-8176-a3c2ad5fbf3c,DISK]]; indices=[1, 2, 5, 6, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1445196301-172.17.0.10-1596921576952:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45181,DS-e1fb34f7-b6a3-4928-8831-802980e6b609,DISK], DatanodeInfoWithStorage[127.0.0.1:46637,DS-1d51b3ca-c1d6-48f1-922d-d3e1796cf8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:39653,DS-16a7bd59-913c-45d9-b4d5-0ff89fd7d1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:33775,DS-907fd47b-721f-4a32-894c-357bae184e5e,DISK], DatanodeInfoWithStorage[127.0.0.1:39009,DS-e21df2dc-e862-44be-96a4-8f4356508bd6,DISK], DatanodeInfoWithStorage[127.0.0.1:41004,DS-9d49cfb4-ff88-4f8b-ab3e-4c8c80574b90,DISK], DatanodeInfoWithStorage[127.0.0.1:37781,DS-8a281f24-5ef4-4c28-8176-a3c2ad5fbf3c,DISK]]; indices=[1, 2, 5, 6, 7, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1445196301-172.17.0.10-1596921576952:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45181,DS-e1fb34f7-b6a3-4928-8831-802980e6b609,DISK], DatanodeInfoWithStorage[127.0.0.1:46637,DS-1d51b3ca-c1d6-48f1-922d-d3e1796cf8b3,DISK], DatanodeInfoWithStorage[127.0.0.1:39653,DS-16a7bd59-913c-45d9-b4d5-0ff89fd7d1fb,DISK], DatanodeInfoWithStorage[127.0.0.1:33775,DS-907fd47b-721f-4a32-894c-357bae184e5e,DISK], DatanodeInfoWithStorage[127.0.0.1:39009,DS-e21df2dc-e862-44be-96a4-8f4356508bd6,DISK], DatanodeInfoWithStorage[127.0.0.1:41004,DS-9d49cfb4-ff88-4f8b-ab3e-4c8c80574b90,DISK], DatanodeInfoWithStorage[127.0.0.1:37781,DS-8a281f24-5ef4-4c28-8176-a3c2ad5fbf3c,DISK]]; indices=[1, 2, 5, 6, 7, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-245055729-172.17.0.10-1596921662733:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35101,DS-ec5e3f30-6f77-424b-9b24-e5f903302e86,DISK], DatanodeInfoWithStorage[127.0.0.1:37944,DS-100041d0-3d61-4a46-91e7-d6c67de222d8,DISK], DatanodeInfoWithStorage[127.0.0.1:37110,DS-2aa5c287-88ec-4ee3-947f-b1472930bb2e,DISK], DatanodeInfoWithStorage[127.0.0.1:41050,DS-c68fd7cf-83c2-48ba-86b7-155ba19b4f37,DISK], DatanodeInfoWithStorage[127.0.0.1:38281,DS-4c261f23-c428-47af-b53a-94a680698133,DISK], DatanodeInfoWithStorage[127.0.0.1:33471,DS-141c236e-0c75-4c85-ae68-e497afb90231,DISK], DatanodeInfoWithStorage[127.0.0.1:34930,DS-79542613-3202-4b23-92a0-ac2a31710c49,DISK]]; indices=[0, 3, 4, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-245055729-172.17.0.10-1596921662733:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35101,DS-ec5e3f30-6f77-424b-9b24-e5f903302e86,DISK], DatanodeInfoWithStorage[127.0.0.1:37944,DS-100041d0-3d61-4a46-91e7-d6c67de222d8,DISK], DatanodeInfoWithStorage[127.0.0.1:37110,DS-2aa5c287-88ec-4ee3-947f-b1472930bb2e,DISK], DatanodeInfoWithStorage[127.0.0.1:41050,DS-c68fd7cf-83c2-48ba-86b7-155ba19b4f37,DISK], DatanodeInfoWithStorage[127.0.0.1:38281,DS-4c261f23-c428-47af-b53a-94a680698133,DISK], DatanodeInfoWithStorage[127.0.0.1:33471,DS-141c236e-0c75-4c85-ae68-e497afb90231,DISK], DatanodeInfoWithStorage[127.0.0.1:34930,DS-79542613-3202-4b23-92a0-ac2a31710c49,DISK]]; indices=[0, 3, 4, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-245055729-172.17.0.10-1596921662733:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35101,DS-ec5e3f30-6f77-424b-9b24-e5f903302e86,DISK], DatanodeInfoWithStorage[127.0.0.1:37944,DS-100041d0-3d61-4a46-91e7-d6c67de222d8,DISK], DatanodeInfoWithStorage[127.0.0.1:37110,DS-2aa5c287-88ec-4ee3-947f-b1472930bb2e,DISK], DatanodeInfoWithStorage[127.0.0.1:41050,DS-c68fd7cf-83c2-48ba-86b7-155ba19b4f37,DISK], DatanodeInfoWithStorage[127.0.0.1:38281,DS-4c261f23-c428-47af-b53a-94a680698133,DISK], DatanodeInfoWithStorage[127.0.0.1:33471,DS-141c236e-0c75-4c85-ae68-e497afb90231,DISK], DatanodeInfoWithStorage[127.0.0.1:34930,DS-79542613-3202-4b23-92a0-ac2a31710c49,DISK]]; indices=[0, 3, 4, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-245055729-172.17.0.10-1596921662733:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35101,DS-ec5e3f30-6f77-424b-9b24-e5f903302e86,DISK], DatanodeInfoWithStorage[127.0.0.1:37944,DS-100041d0-3d61-4a46-91e7-d6c67de222d8,DISK], DatanodeInfoWithStorage[127.0.0.1:37110,DS-2aa5c287-88ec-4ee3-947f-b1472930bb2e,DISK], DatanodeInfoWithStorage[127.0.0.1:41050,DS-c68fd7cf-83c2-48ba-86b7-155ba19b4f37,DISK], DatanodeInfoWithStorage[127.0.0.1:38281,DS-4c261f23-c428-47af-b53a-94a680698133,DISK], DatanodeInfoWithStorage[127.0.0.1:33471,DS-141c236e-0c75-4c85-ae68-e497afb90231,DISK], DatanodeInfoWithStorage[127.0.0.1:34930,DS-79542613-3202-4b23-92a0-ac2a31710c49,DISK]]; indices=[0, 3, 4, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-733834033-172.17.0.10-1596921856061:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35611,DS-fc8cf437-f09c-449b-a9ce-e7489e5b0e4d,DISK], DatanodeInfoWithStorage[127.0.0.1:39599,DS-04b4ce18-e1dd-469f-9c1d-13ff8b7984d4,DISK], DatanodeInfoWithStorage[127.0.0.1:43831,DS-022e555d-13d8-4a95-8512-783412e30d29,DISK], DatanodeInfoWithStorage[127.0.0.1:43038,DS-e072ff7b-043d-4b6f-b723-d33a078e96ad,DISK], DatanodeInfoWithStorage[127.0.0.1:38916,DS-6ac22b64-c751-4d8d-bd5c-62df7f4ecc14,DISK]]; indices=[0, 4, 6, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-733834033-172.17.0.10-1596921856061:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35611,DS-fc8cf437-f09c-449b-a9ce-e7489e5b0e4d,DISK], DatanodeInfoWithStorage[127.0.0.1:39599,DS-04b4ce18-e1dd-469f-9c1d-13ff8b7984d4,DISK], DatanodeInfoWithStorage[127.0.0.1:43831,DS-022e555d-13d8-4a95-8512-783412e30d29,DISK], DatanodeInfoWithStorage[127.0.0.1:43038,DS-e072ff7b-043d-4b6f-b723-d33a078e96ad,DISK], DatanodeInfoWithStorage[127.0.0.1:38916,DS-6ac22b64-c751-4d8d-bd5c-62df7f4ecc14,DISK]]; indices=[0, 4, 6, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-733834033-172.17.0.10-1596921856061:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35611,DS-fc8cf437-f09c-449b-a9ce-e7489e5b0e4d,DISK], DatanodeInfoWithStorage[127.0.0.1:39599,DS-04b4ce18-e1dd-469f-9c1d-13ff8b7984d4,DISK], DatanodeInfoWithStorage[127.0.0.1:43831,DS-022e555d-13d8-4a95-8512-783412e30d29,DISK], DatanodeInfoWithStorage[127.0.0.1:43038,DS-e072ff7b-043d-4b6f-b723-d33a078e96ad,DISK], DatanodeInfoWithStorage[127.0.0.1:38916,DS-6ac22b64-c751-4d8d-bd5c-62df7f4ecc14,DISK]]; indices=[0, 4, 6, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-733834033-172.17.0.10-1596921856061:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35611,DS-fc8cf437-f09c-449b-a9ce-e7489e5b0e4d,DISK], DatanodeInfoWithStorage[127.0.0.1:39599,DS-04b4ce18-e1dd-469f-9c1d-13ff8b7984d4,DISK], DatanodeInfoWithStorage[127.0.0.1:43831,DS-022e555d-13d8-4a95-8512-783412e30d29,DISK], DatanodeInfoWithStorage[127.0.0.1:43038,DS-e072ff7b-043d-4b6f-b723-d33a078e96ad,DISK], DatanodeInfoWithStorage[127.0.0.1:38916,DS-6ac22b64-c751-4d8d-bd5c-62df7f4ecc14,DISK]]; indices=[0, 4, 6, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1740379335-172.17.0.10-1596921895902:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32974,DS-cbd7de86-a70c-4b02-8077-ff8e8d9f73b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43665,DS-66716cfb-70cf-429b-968e-c76af1118c14,DISK], DatanodeInfoWithStorage[127.0.0.1:33644,DS-3ce0de12-c54f-4c69-bc20-b64fb1870a68,DISK], DatanodeInfoWithStorage[127.0.0.1:36601,DS-c4dc347f-cbd3-4e8e-9889-94d9dcbc49a9,DISK], DatanodeInfoWithStorage[127.0.0.1:42237,DS-98652a37-d501-40b0-9577-084169a1b034,DISK], DatanodeInfoWithStorage[127.0.0.1:36975,DS-bc72cf01-bda9-4841-85a7-4d32daea3f4d,DISK]]; indices=[1, 3, 6, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1740379335-172.17.0.10-1596921895902:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32974,DS-cbd7de86-a70c-4b02-8077-ff8e8d9f73b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43665,DS-66716cfb-70cf-429b-968e-c76af1118c14,DISK], DatanodeInfoWithStorage[127.0.0.1:33644,DS-3ce0de12-c54f-4c69-bc20-b64fb1870a68,DISK], DatanodeInfoWithStorage[127.0.0.1:36601,DS-c4dc347f-cbd3-4e8e-9889-94d9dcbc49a9,DISK], DatanodeInfoWithStorage[127.0.0.1:42237,DS-98652a37-d501-40b0-9577-084169a1b034,DISK], DatanodeInfoWithStorage[127.0.0.1:36975,DS-bc72cf01-bda9-4841-85a7-4d32daea3f4d,DISK]]; indices=[1, 3, 6, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1740379335-172.17.0.10-1596921895902:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32974,DS-cbd7de86-a70c-4b02-8077-ff8e8d9f73b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43665,DS-66716cfb-70cf-429b-968e-c76af1118c14,DISK], DatanodeInfoWithStorage[127.0.0.1:33644,DS-3ce0de12-c54f-4c69-bc20-b64fb1870a68,DISK], DatanodeInfoWithStorage[127.0.0.1:36601,DS-c4dc347f-cbd3-4e8e-9889-94d9dcbc49a9,DISK], DatanodeInfoWithStorage[127.0.0.1:42237,DS-98652a37-d501-40b0-9577-084169a1b034,DISK], DatanodeInfoWithStorage[127.0.0.1:36975,DS-bc72cf01-bda9-4841-85a7-4d32daea3f4d,DISK]]; indices=[1, 3, 6, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1740379335-172.17.0.10-1596921895902:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32974,DS-cbd7de86-a70c-4b02-8077-ff8e8d9f73b9,DISK], DatanodeInfoWithStorage[127.0.0.1:43665,DS-66716cfb-70cf-429b-968e-c76af1118c14,DISK], DatanodeInfoWithStorage[127.0.0.1:33644,DS-3ce0de12-c54f-4c69-bc20-b64fb1870a68,DISK], DatanodeInfoWithStorage[127.0.0.1:36601,DS-c4dc347f-cbd3-4e8e-9889-94d9dcbc49a9,DISK], DatanodeInfoWithStorage[127.0.0.1:42237,DS-98652a37-d501-40b0-9577-084169a1b034,DISK], DatanodeInfoWithStorage[127.0.0.1:36975,DS-bc72cf01-bda9-4841-85a7-4d32daea3f4d,DISK]]; indices=[1, 3, 6, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-797645184-172.17.0.10-1596921977250:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42491,DS-f2ab1f74-96bd-43e6-904e-2f9409df49ea,DISK], DatanodeInfoWithStorage[127.0.0.1:41063,DS-f0c66e2d-9c22-4194-86fd-c486b7904d79,DISK], DatanodeInfoWithStorage[127.0.0.1:46462,DS-2dd82627-59e4-484d-a685-d0f796a053a9,DISK], DatanodeInfoWithStorage[127.0.0.1:35859,DS-c1e9e28c-727e-484b-8f4b-4e5644984bd2,DISK], DatanodeInfoWithStorage[127.0.0.1:34533,DS-0b7aa20e-dce6-4d04-902f-24c1cc1a6f72,DISK], DatanodeInfoWithStorage[127.0.0.1:44913,DS-198a5744-2bfa-4a8d-be49-fd0c1db1f91f,DISK]]; indices=[0, 3, 7, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-797645184-172.17.0.10-1596921977250:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42491,DS-f2ab1f74-96bd-43e6-904e-2f9409df49ea,DISK], DatanodeInfoWithStorage[127.0.0.1:41063,DS-f0c66e2d-9c22-4194-86fd-c486b7904d79,DISK], DatanodeInfoWithStorage[127.0.0.1:46462,DS-2dd82627-59e4-484d-a685-d0f796a053a9,DISK], DatanodeInfoWithStorage[127.0.0.1:35859,DS-c1e9e28c-727e-484b-8f4b-4e5644984bd2,DISK], DatanodeInfoWithStorage[127.0.0.1:34533,DS-0b7aa20e-dce6-4d04-902f-24c1cc1a6f72,DISK], DatanodeInfoWithStorage[127.0.0.1:44913,DS-198a5744-2bfa-4a8d-be49-fd0c1db1f91f,DISK]]; indices=[0, 3, 7, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-797645184-172.17.0.10-1596921977250:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42491,DS-f2ab1f74-96bd-43e6-904e-2f9409df49ea,DISK], DatanodeInfoWithStorage[127.0.0.1:41063,DS-f0c66e2d-9c22-4194-86fd-c486b7904d79,DISK], DatanodeInfoWithStorage[127.0.0.1:46462,DS-2dd82627-59e4-484d-a685-d0f796a053a9,DISK], DatanodeInfoWithStorage[127.0.0.1:35859,DS-c1e9e28c-727e-484b-8f4b-4e5644984bd2,DISK], DatanodeInfoWithStorage[127.0.0.1:34533,DS-0b7aa20e-dce6-4d04-902f-24c1cc1a6f72,DISK], DatanodeInfoWithStorage[127.0.0.1:44913,DS-198a5744-2bfa-4a8d-be49-fd0c1db1f91f,DISK]]; indices=[0, 3, 7, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-797645184-172.17.0.10-1596921977250:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42491,DS-f2ab1f74-96bd-43e6-904e-2f9409df49ea,DISK], DatanodeInfoWithStorage[127.0.0.1:41063,DS-f0c66e2d-9c22-4194-86fd-c486b7904d79,DISK], DatanodeInfoWithStorage[127.0.0.1:46462,DS-2dd82627-59e4-484d-a685-d0f796a053a9,DISK], DatanodeInfoWithStorage[127.0.0.1:35859,DS-c1e9e28c-727e-484b-8f4b-4e5644984bd2,DISK], DatanodeInfoWithStorage[127.0.0.1:34533,DS-0b7aa20e-dce6-4d04-902f-24c1cc1a6f72,DISK], DatanodeInfoWithStorage[127.0.0.1:44913,DS-198a5744-2bfa-4a8d-be49-fd0c1db1f91f,DISK]]; indices=[0, 3, 7, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1465448793-172.17.0.10-1596922321722:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35749,DS-825a0730-e970-491b-bbf0-52c0443d136f,DISK], DatanodeInfoWithStorage[127.0.0.1:42307,DS-7fbcaeb6-079a-4a51-bcf1-04c3e9e8499b,DISK], DatanodeInfoWithStorage[127.0.0.1:33653,DS-dee4931c-533c-4319-b7ad-4874b3d4a5e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34035,DS-e18f16a1-ffa8-4d48-ab11-f8662ed11fae,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,DS-f0beec8c-04c1-4428-a618-4fc82bc15565,DISK]]; indices=[1, 3, 4, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1465448793-172.17.0.10-1596922321722:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35749,DS-825a0730-e970-491b-bbf0-52c0443d136f,DISK], DatanodeInfoWithStorage[127.0.0.1:42307,DS-7fbcaeb6-079a-4a51-bcf1-04c3e9e8499b,DISK], DatanodeInfoWithStorage[127.0.0.1:33653,DS-dee4931c-533c-4319-b7ad-4874b3d4a5e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34035,DS-e18f16a1-ffa8-4d48-ab11-f8662ed11fae,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,DS-f0beec8c-04c1-4428-a618-4fc82bc15565,DISK]]; indices=[1, 3, 4, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1465448793-172.17.0.10-1596922321722:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35749,DS-825a0730-e970-491b-bbf0-52c0443d136f,DISK], DatanodeInfoWithStorage[127.0.0.1:42307,DS-7fbcaeb6-079a-4a51-bcf1-04c3e9e8499b,DISK], DatanodeInfoWithStorage[127.0.0.1:33653,DS-dee4931c-533c-4319-b7ad-4874b3d4a5e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34035,DS-e18f16a1-ffa8-4d48-ab11-f8662ed11fae,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,DS-f0beec8c-04c1-4428-a618-4fc82bc15565,DISK]]; indices=[1, 3, 4, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1465448793-172.17.0.10-1596922321722:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35749,DS-825a0730-e970-491b-bbf0-52c0443d136f,DISK], DatanodeInfoWithStorage[127.0.0.1:42307,DS-7fbcaeb6-079a-4a51-bcf1-04c3e9e8499b,DISK], DatanodeInfoWithStorage[127.0.0.1:33653,DS-dee4931c-533c-4319-b7ad-4874b3d4a5e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34035,DS-e18f16a1-ffa8-4d48-ab11-f8662ed11fae,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,DS-f0beec8c-04c1-4428-a618-4fc82bc15565,DISK]]; indices=[1, 3, 4, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-241379160-172.17.0.10-1596922630106:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39535,DS-86d72984-6959-4c2b-a5a8-fa844ee90d3f,DISK], DatanodeInfoWithStorage[127.0.0.1:44435,DS-e28883d1-d538-4174-86c5-e6e9be3f5fbd,DISK], DatanodeInfoWithStorage[127.0.0.1:46126,DS-75f3ba43-8fed-42ac-b9e0-2fa2754c203f,DISK], DatanodeInfoWithStorage[127.0.0.1:42953,DS-b364c6ae-52eb-4d53-a1e6-437c3707a125,DISK], DatanodeInfoWithStorage[127.0.0.1:46854,DS-45dc5907-12b3-4f06-8dc0-3f4ce39104bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35056,DS-4eb0043d-47b0-4742-9caf-ff3b992800f5,DISK]]; indices=[1, 2, 3, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-241379160-172.17.0.10-1596922630106:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39535,DS-86d72984-6959-4c2b-a5a8-fa844ee90d3f,DISK], DatanodeInfoWithStorage[127.0.0.1:44435,DS-e28883d1-d538-4174-86c5-e6e9be3f5fbd,DISK], DatanodeInfoWithStorage[127.0.0.1:46126,DS-75f3ba43-8fed-42ac-b9e0-2fa2754c203f,DISK], DatanodeInfoWithStorage[127.0.0.1:42953,DS-b364c6ae-52eb-4d53-a1e6-437c3707a125,DISK], DatanodeInfoWithStorage[127.0.0.1:46854,DS-45dc5907-12b3-4f06-8dc0-3f4ce39104bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35056,DS-4eb0043d-47b0-4742-9caf-ff3b992800f5,DISK]]; indices=[1, 2, 3, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-241379160-172.17.0.10-1596922630106:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39535,DS-86d72984-6959-4c2b-a5a8-fa844ee90d3f,DISK], DatanodeInfoWithStorage[127.0.0.1:44435,DS-e28883d1-d538-4174-86c5-e6e9be3f5fbd,DISK], DatanodeInfoWithStorage[127.0.0.1:46126,DS-75f3ba43-8fed-42ac-b9e0-2fa2754c203f,DISK], DatanodeInfoWithStorage[127.0.0.1:42953,DS-b364c6ae-52eb-4d53-a1e6-437c3707a125,DISK], DatanodeInfoWithStorage[127.0.0.1:46854,DS-45dc5907-12b3-4f06-8dc0-3f4ce39104bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35056,DS-4eb0043d-47b0-4742-9caf-ff3b992800f5,DISK]]; indices=[1, 2, 3, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-241379160-172.17.0.10-1596922630106:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39535,DS-86d72984-6959-4c2b-a5a8-fa844ee90d3f,DISK], DatanodeInfoWithStorage[127.0.0.1:44435,DS-e28883d1-d538-4174-86c5-e6e9be3f5fbd,DISK], DatanodeInfoWithStorage[127.0.0.1:46126,DS-75f3ba43-8fed-42ac-b9e0-2fa2754c203f,DISK], DatanodeInfoWithStorage[127.0.0.1:42953,DS-b364c6ae-52eb-4d53-a1e6-437c3707a125,DISK], DatanodeInfoWithStorage[127.0.0.1:46854,DS-45dc5907-12b3-4f06-8dc0-3f4ce39104bd,DISK], DatanodeInfoWithStorage[127.0.0.1:35056,DS-4eb0043d-47b0-4742-9caf-ff3b992800f5,DISK]]; indices=[1, 2, 3, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1464319600-172.17.0.10-1596922661653:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35567,DS-55308919-5bc3-4a90-88da-4373010440aa,DISK], DatanodeInfoWithStorage[127.0.0.1:39192,DS-36a34ac9-ca46-43c2-8df7-55b00542cc54,DISK], DatanodeInfoWithStorage[127.0.0.1:36058,DS-962c1bb4-2804-44a9-ba55-1e29c5dc9900,DISK], DatanodeInfoWithStorage[127.0.0.1:43708,DS-927e2af7-49f7-4796-b0d6-210fd9bc479f,DISK], DatanodeInfoWithStorage[127.0.0.1:33739,DS-29334469-3757-43f6-b6b8-16e8cd32bcc6,DISK]]; indices=[0, 1, 6, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1464319600-172.17.0.10-1596922661653:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35567,DS-55308919-5bc3-4a90-88da-4373010440aa,DISK], DatanodeInfoWithStorage[127.0.0.1:39192,DS-36a34ac9-ca46-43c2-8df7-55b00542cc54,DISK], DatanodeInfoWithStorage[127.0.0.1:36058,DS-962c1bb4-2804-44a9-ba55-1e29c5dc9900,DISK], DatanodeInfoWithStorage[127.0.0.1:43708,DS-927e2af7-49f7-4796-b0d6-210fd9bc479f,DISK], DatanodeInfoWithStorage[127.0.0.1:33739,DS-29334469-3757-43f6-b6b8-16e8cd32bcc6,DISK]]; indices=[0, 1, 6, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1464319600-172.17.0.10-1596922661653:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35567,DS-55308919-5bc3-4a90-88da-4373010440aa,DISK], DatanodeInfoWithStorage[127.0.0.1:39192,DS-36a34ac9-ca46-43c2-8df7-55b00542cc54,DISK], DatanodeInfoWithStorage[127.0.0.1:36058,DS-962c1bb4-2804-44a9-ba55-1e29c5dc9900,DISK], DatanodeInfoWithStorage[127.0.0.1:43708,DS-927e2af7-49f7-4796-b0d6-210fd9bc479f,DISK], DatanodeInfoWithStorage[127.0.0.1:33739,DS-29334469-3757-43f6-b6b8-16e8cd32bcc6,DISK]]; indices=[0, 1, 6, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1464319600-172.17.0.10-1596922661653:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35567,DS-55308919-5bc3-4a90-88da-4373010440aa,DISK], DatanodeInfoWithStorage[127.0.0.1:39192,DS-36a34ac9-ca46-43c2-8df7-55b00542cc54,DISK], DatanodeInfoWithStorage[127.0.0.1:36058,DS-962c1bb4-2804-44a9-ba55-1e29c5dc9900,DISK], DatanodeInfoWithStorage[127.0.0.1:43708,DS-927e2af7-49f7-4796-b0d6-210fd9bc479f,DISK], DatanodeInfoWithStorage[127.0.0.1:33739,DS-29334469-3757-43f6-b6b8-16e8cd32bcc6,DISK]]; indices=[0, 1, 6, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-427152632-172.17.0.10-1596922780731:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34285,DS-65c99f2b-899f-40b7-a0ec-017a0c7ac197,DISK], DatanodeInfoWithStorage[127.0.0.1:34999,DS-dea70d24-8b13-4491-93b2-2cbb67577ec4,DISK], DatanodeInfoWithStorage[127.0.0.1:40342,DS-76fa24f9-4e52-41d4-9be0-94855c95cbab,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-39dc704d-a6d4-47cd-b53a-8133ddfd33cc,DISK], DatanodeInfoWithStorage[127.0.0.1:39131,DS-875d9dc9-7f97-40a5-a662-063d6a41a5a7,DISK], DatanodeInfoWithStorage[127.0.0.1:43616,DS-8d01451d-0cc6-4708-9dd3-4aaeb67c4ba8,DISK], DatanodeInfoWithStorage[127.0.0.1:45798,DS-dd35c202-4a77-4604-8582-e199959ddc87,DISK]]; indices=[2, 3, 4, 6, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-427152632-172.17.0.10-1596922780731:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34285,DS-65c99f2b-899f-40b7-a0ec-017a0c7ac197,DISK], DatanodeInfoWithStorage[127.0.0.1:34999,DS-dea70d24-8b13-4491-93b2-2cbb67577ec4,DISK], DatanodeInfoWithStorage[127.0.0.1:40342,DS-76fa24f9-4e52-41d4-9be0-94855c95cbab,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-39dc704d-a6d4-47cd-b53a-8133ddfd33cc,DISK], DatanodeInfoWithStorage[127.0.0.1:39131,DS-875d9dc9-7f97-40a5-a662-063d6a41a5a7,DISK], DatanodeInfoWithStorage[127.0.0.1:43616,DS-8d01451d-0cc6-4708-9dd3-4aaeb67c4ba8,DISK], DatanodeInfoWithStorage[127.0.0.1:45798,DS-dd35c202-4a77-4604-8582-e199959ddc87,DISK]]; indices=[2, 3, 4, 6, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-427152632-172.17.0.10-1596922780731:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34285,DS-65c99f2b-899f-40b7-a0ec-017a0c7ac197,DISK], DatanodeInfoWithStorage[127.0.0.1:34999,DS-dea70d24-8b13-4491-93b2-2cbb67577ec4,DISK], DatanodeInfoWithStorage[127.0.0.1:40342,DS-76fa24f9-4e52-41d4-9be0-94855c95cbab,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-39dc704d-a6d4-47cd-b53a-8133ddfd33cc,DISK], DatanodeInfoWithStorage[127.0.0.1:39131,DS-875d9dc9-7f97-40a5-a662-063d6a41a5a7,DISK], DatanodeInfoWithStorage[127.0.0.1:43616,DS-8d01451d-0cc6-4708-9dd3-4aaeb67c4ba8,DISK], DatanodeInfoWithStorage[127.0.0.1:45798,DS-dd35c202-4a77-4604-8582-e199959ddc87,DISK]]; indices=[2, 3, 4, 6, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-427152632-172.17.0.10-1596922780731:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34285,DS-65c99f2b-899f-40b7-a0ec-017a0c7ac197,DISK], DatanodeInfoWithStorage[127.0.0.1:34999,DS-dea70d24-8b13-4491-93b2-2cbb67577ec4,DISK], DatanodeInfoWithStorage[127.0.0.1:40342,DS-76fa24f9-4e52-41d4-9be0-94855c95cbab,DISK], DatanodeInfoWithStorage[127.0.0.1:33009,DS-39dc704d-a6d4-47cd-b53a-8133ddfd33cc,DISK], DatanodeInfoWithStorage[127.0.0.1:39131,DS-875d9dc9-7f97-40a5-a662-063d6a41a5a7,DISK], DatanodeInfoWithStorage[127.0.0.1:43616,DS-8d01451d-0cc6-4708-9dd3-4aaeb67c4ba8,DISK], DatanodeInfoWithStorage[127.0.0.1:45798,DS-dd35c202-4a77-4604-8582-e199959ddc87,DISK]]; indices=[2, 3, 4, 6, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-476473762-172.17.0.10-1596923088223:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44953,DS-53bede9d-6fc3-492b-9c25-4540a0dd73c3,DISK], DatanodeInfoWithStorage[127.0.0.1:42054,DS-5aeae17a-6ee2-4681-9e06-435ce8eb4ffc,DISK], DatanodeInfoWithStorage[127.0.0.1:32880,DS-223bc8e1-ad17-4533-b472-9acd5f455e61,DISK], DatanodeInfoWithStorage[127.0.0.1:39699,DS-1902797d-bb45-42f2-81bc-6d33d8b06845,DISK], DatanodeInfoWithStorage[127.0.0.1:37170,DS-f766735a-ab65-4fdd-8df4-af79f1db48b7,DISK]]; indices=[0, 2, 5, 6, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-476473762-172.17.0.10-1596923088223:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44953,DS-53bede9d-6fc3-492b-9c25-4540a0dd73c3,DISK], DatanodeInfoWithStorage[127.0.0.1:42054,DS-5aeae17a-6ee2-4681-9e06-435ce8eb4ffc,DISK], DatanodeInfoWithStorage[127.0.0.1:32880,DS-223bc8e1-ad17-4533-b472-9acd5f455e61,DISK], DatanodeInfoWithStorage[127.0.0.1:39699,DS-1902797d-bb45-42f2-81bc-6d33d8b06845,DISK], DatanodeInfoWithStorage[127.0.0.1:37170,DS-f766735a-ab65-4fdd-8df4-af79f1db48b7,DISK]]; indices=[0, 2, 5, 6, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-476473762-172.17.0.10-1596923088223:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44953,DS-53bede9d-6fc3-492b-9c25-4540a0dd73c3,DISK], DatanodeInfoWithStorage[127.0.0.1:42054,DS-5aeae17a-6ee2-4681-9e06-435ce8eb4ffc,DISK], DatanodeInfoWithStorage[127.0.0.1:32880,DS-223bc8e1-ad17-4533-b472-9acd5f455e61,DISK], DatanodeInfoWithStorage[127.0.0.1:39699,DS-1902797d-bb45-42f2-81bc-6d33d8b06845,DISK], DatanodeInfoWithStorage[127.0.0.1:37170,DS-f766735a-ab65-4fdd-8df4-af79f1db48b7,DISK]]; indices=[0, 2, 5, 6, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-476473762-172.17.0.10-1596923088223:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44953,DS-53bede9d-6fc3-492b-9c25-4540a0dd73c3,DISK], DatanodeInfoWithStorage[127.0.0.1:42054,DS-5aeae17a-6ee2-4681-9e06-435ce8eb4ffc,DISK], DatanodeInfoWithStorage[127.0.0.1:32880,DS-223bc8e1-ad17-4533-b472-9acd5f455e61,DISK], DatanodeInfoWithStorage[127.0.0.1:39699,DS-1902797d-bb45-42f2-81bc-6d33d8b06845,DISK], DatanodeInfoWithStorage[127.0.0.1:37170,DS-f766735a-ab65-4fdd-8df4-af79f1db48b7,DISK]]; indices=[0, 2, 5, 6, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-211217749-172.17.0.10-1596923125318:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40566,DS-731b27b8-54a1-4054-8857-c41f8c6cf48d,DISK], DatanodeInfoWithStorage[127.0.0.1:39078,DS-eb83d5fe-668e-4a01-8e47-d825a6bd6115,DISK], DatanodeInfoWithStorage[127.0.0.1:37659,DS-0f3cb169-cf12-46b1-8512-c9f80c339cea,DISK], DatanodeInfoWithStorage[127.0.0.1:39564,DS-7ca4cc28-bafe-4220-9140-b0dbf889292f,DISK], DatanodeInfoWithStorage[127.0.0.1:34994,DS-58a869a6-db31-46c3-a88d-b7e5e246a0bc,DISK], DatanodeInfoWithStorage[127.0.0.1:33614,DS-21e800a2-0e02-428a-b66d-7797e55feb04,DISK]]; indices=[0, 2, 3, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-211217749-172.17.0.10-1596923125318:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40566,DS-731b27b8-54a1-4054-8857-c41f8c6cf48d,DISK], DatanodeInfoWithStorage[127.0.0.1:39078,DS-eb83d5fe-668e-4a01-8e47-d825a6bd6115,DISK], DatanodeInfoWithStorage[127.0.0.1:37659,DS-0f3cb169-cf12-46b1-8512-c9f80c339cea,DISK], DatanodeInfoWithStorage[127.0.0.1:39564,DS-7ca4cc28-bafe-4220-9140-b0dbf889292f,DISK], DatanodeInfoWithStorage[127.0.0.1:34994,DS-58a869a6-db31-46c3-a88d-b7e5e246a0bc,DISK], DatanodeInfoWithStorage[127.0.0.1:33614,DS-21e800a2-0e02-428a-b66d-7797e55feb04,DISK]]; indices=[0, 2, 3, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-211217749-172.17.0.10-1596923125318:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40566,DS-731b27b8-54a1-4054-8857-c41f8c6cf48d,DISK], DatanodeInfoWithStorage[127.0.0.1:39078,DS-eb83d5fe-668e-4a01-8e47-d825a6bd6115,DISK], DatanodeInfoWithStorage[127.0.0.1:37659,DS-0f3cb169-cf12-46b1-8512-c9f80c339cea,DISK], DatanodeInfoWithStorage[127.0.0.1:39564,DS-7ca4cc28-bafe-4220-9140-b0dbf889292f,DISK], DatanodeInfoWithStorage[127.0.0.1:34994,DS-58a869a6-db31-46c3-a88d-b7e5e246a0bc,DISK], DatanodeInfoWithStorage[127.0.0.1:33614,DS-21e800a2-0e02-428a-b66d-7797e55feb04,DISK]]; indices=[0, 2, 3, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-211217749-172.17.0.10-1596923125318:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40566,DS-731b27b8-54a1-4054-8857-c41f8c6cf48d,DISK], DatanodeInfoWithStorage[127.0.0.1:39078,DS-eb83d5fe-668e-4a01-8e47-d825a6bd6115,DISK], DatanodeInfoWithStorage[127.0.0.1:37659,DS-0f3cb169-cf12-46b1-8512-c9f80c339cea,DISK], DatanodeInfoWithStorage[127.0.0.1:39564,DS-7ca4cc28-bafe-4220-9140-b0dbf889292f,DISK], DatanodeInfoWithStorage[127.0.0.1:34994,DS-58a869a6-db31-46c3-a88d-b7e5e246a0bc,DISK], DatanodeInfoWithStorage[127.0.0.1:33614,DS-21e800a2-0e02-428a-b66d-7797e55feb04,DISK]]; indices=[0, 2, 3, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1206855421-172.17.0.10-1596923388825:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32950,DS-45aad982-f58e-4ae5-a46b-4c3d0924c3d3,DISK], DatanodeInfoWithStorage[127.0.0.1:33518,DS-7bca8d8a-8ced-4b86-a558-986acefe5e13,DISK], DatanodeInfoWithStorage[127.0.0.1:44862,DS-981382fb-f8f1-4b52-9590-2337b03864bb,DISK], DatanodeInfoWithStorage[127.0.0.1:35078,DS-e3b1184f-844d-41b2-9843-673ede6f088e,DISK], DatanodeInfoWithStorage[127.0.0.1:35516,DS-dff45346-5dfc-4815-ba0e-865ae8e7ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34892,DS-48afc112-dd86-45ad-a4ae-fc84dc478200,DISK], DatanodeInfoWithStorage[127.0.0.1:42412,DS-98f37832-955a-4ff0-bb74-d488e1d73925,DISK]]; indices=[0, 5, 7, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1206855421-172.17.0.10-1596923388825:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32950,DS-45aad982-f58e-4ae5-a46b-4c3d0924c3d3,DISK], DatanodeInfoWithStorage[127.0.0.1:33518,DS-7bca8d8a-8ced-4b86-a558-986acefe5e13,DISK], DatanodeInfoWithStorage[127.0.0.1:44862,DS-981382fb-f8f1-4b52-9590-2337b03864bb,DISK], DatanodeInfoWithStorage[127.0.0.1:35078,DS-e3b1184f-844d-41b2-9843-673ede6f088e,DISK], DatanodeInfoWithStorage[127.0.0.1:35516,DS-dff45346-5dfc-4815-ba0e-865ae8e7ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34892,DS-48afc112-dd86-45ad-a4ae-fc84dc478200,DISK], DatanodeInfoWithStorage[127.0.0.1:42412,DS-98f37832-955a-4ff0-bb74-d488e1d73925,DISK]]; indices=[0, 5, 7, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1206855421-172.17.0.10-1596923388825:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32950,DS-45aad982-f58e-4ae5-a46b-4c3d0924c3d3,DISK], DatanodeInfoWithStorage[127.0.0.1:33518,DS-7bca8d8a-8ced-4b86-a558-986acefe5e13,DISK], DatanodeInfoWithStorage[127.0.0.1:44862,DS-981382fb-f8f1-4b52-9590-2337b03864bb,DISK], DatanodeInfoWithStorage[127.0.0.1:35078,DS-e3b1184f-844d-41b2-9843-673ede6f088e,DISK], DatanodeInfoWithStorage[127.0.0.1:35516,DS-dff45346-5dfc-4815-ba0e-865ae8e7ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34892,DS-48afc112-dd86-45ad-a4ae-fc84dc478200,DISK], DatanodeInfoWithStorage[127.0.0.1:42412,DS-98f37832-955a-4ff0-bb74-d488e1d73925,DISK]]; indices=[0, 5, 7, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1206855421-172.17.0.10-1596923388825:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32950,DS-45aad982-f58e-4ae5-a46b-4c3d0924c3d3,DISK], DatanodeInfoWithStorage[127.0.0.1:33518,DS-7bca8d8a-8ced-4b86-a558-986acefe5e13,DISK], DatanodeInfoWithStorage[127.0.0.1:44862,DS-981382fb-f8f1-4b52-9590-2337b03864bb,DISK], DatanodeInfoWithStorage[127.0.0.1:35078,DS-e3b1184f-844d-41b2-9843-673ede6f088e,DISK], DatanodeInfoWithStorage[127.0.0.1:35516,DS-dff45346-5dfc-4815-ba0e-865ae8e7ec6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34892,DS-48afc112-dd86-45ad-a4ae-fc84dc478200,DISK], DatanodeInfoWithStorage[127.0.0.1:42412,DS-98f37832-955a-4ff0-bb74-d488e1d73925,DISK]]; indices=[0, 5, 7, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-397229665-172.17.0.10-1596923763614:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43932,DS-c76d7176-d617-4811-a95a-ff9dfc88595c,DISK], DatanodeInfoWithStorage[127.0.0.1:44961,DS-39491003-b85b-4143-a1d7-eb49c6fa8fa0,DISK], DatanodeInfoWithStorage[127.0.0.1:45645,DS-0dec122b-6596-4514-8b4c-2158c8da9ba1,DISK], DatanodeInfoWithStorage[127.0.0.1:43542,DS-12340095-3a4b-44b1-9501-a5b0e706415b,DISK], DatanodeInfoWithStorage[127.0.0.1:37614,DS-04f0ef75-b45a-45a6-8048-fe1eadb34ab2,DISK]]; indices=[5, 6, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-397229665-172.17.0.10-1596923763614:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43932,DS-c76d7176-d617-4811-a95a-ff9dfc88595c,DISK], DatanodeInfoWithStorage[127.0.0.1:44961,DS-39491003-b85b-4143-a1d7-eb49c6fa8fa0,DISK], DatanodeInfoWithStorage[127.0.0.1:45645,DS-0dec122b-6596-4514-8b4c-2158c8da9ba1,DISK], DatanodeInfoWithStorage[127.0.0.1:43542,DS-12340095-3a4b-44b1-9501-a5b0e706415b,DISK], DatanodeInfoWithStorage[127.0.0.1:37614,DS-04f0ef75-b45a-45a6-8048-fe1eadb34ab2,DISK]]; indices=[5, 6, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-397229665-172.17.0.10-1596923763614:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43932,DS-c76d7176-d617-4811-a95a-ff9dfc88595c,DISK], DatanodeInfoWithStorage[127.0.0.1:44961,DS-39491003-b85b-4143-a1d7-eb49c6fa8fa0,DISK], DatanodeInfoWithStorage[127.0.0.1:45645,DS-0dec122b-6596-4514-8b4c-2158c8da9ba1,DISK], DatanodeInfoWithStorage[127.0.0.1:43542,DS-12340095-3a4b-44b1-9501-a5b0e706415b,DISK], DatanodeInfoWithStorage[127.0.0.1:37614,DS-04f0ef75-b45a-45a6-8048-fe1eadb34ab2,DISK]]; indices=[5, 6, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-397229665-172.17.0.10-1596923763614:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43932,DS-c76d7176-d617-4811-a95a-ff9dfc88595c,DISK], DatanodeInfoWithStorage[127.0.0.1:44961,DS-39491003-b85b-4143-a1d7-eb49c6fa8fa0,DISK], DatanodeInfoWithStorage[127.0.0.1:45645,DS-0dec122b-6596-4514-8b4c-2158c8da9ba1,DISK], DatanodeInfoWithStorage[127.0.0.1:43542,DS-12340095-3a4b-44b1-9501-a5b0e706415b,DISK], DatanodeInfoWithStorage[127.0.0.1:37614,DS-04f0ef75-b45a-45a6-8048-fe1eadb34ab2,DISK]]; indices=[5, 6, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.namenode.snapshotdiff.allow.snap-root-descendant
component: hdfs:NameNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1187286147-172.17.0.10-1596923798196:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33331,DS-6e33ba36-8071-444e-99ba-c439087f7c7a,DISK], DatanodeInfoWithStorage[127.0.0.1:45769,DS-211b67ce-72c0-48ae-a2aa-35e8503dbe5e,DISK], DatanodeInfoWithStorage[127.0.0.1:46775,DS-2cb414be-b27e-443f-a5f2-b68fd7d0f7bf,DISK], DatanodeInfoWithStorage[127.0.0.1:39393,DS-b35c4bea-c819-42c0-9b30-7fa118d0a26b,DISK], DatanodeInfoWithStorage[127.0.0.1:40076,DS-252d76b6-0821-497c-98c8-890ddf0b31ef,DISK], DatanodeInfoWithStorage[127.0.0.1:34625,DS-c5297e2c-75a4-40fe-b209-9c5065586849,DISK]]; indices=[0, 1, 3, 5, 6, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-1187286147-172.17.0.10-1596923798196:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33331,DS-6e33ba36-8071-444e-99ba-c439087f7c7a,DISK], DatanodeInfoWithStorage[127.0.0.1:45769,DS-211b67ce-72c0-48ae-a2aa-35e8503dbe5e,DISK], DatanodeInfoWithStorage[127.0.0.1:46775,DS-2cb414be-b27e-443f-a5f2-b68fd7d0f7bf,DISK], DatanodeInfoWithStorage[127.0.0.1:39393,DS-b35c4bea-c819-42c0-9b30-7fa118d0a26b,DISK], DatanodeInfoWithStorage[127.0.0.1:40076,DS-252d76b6-0821-497c-98c8-890ddf0b31ef,DISK], DatanodeInfoWithStorage[127.0.0.1:34625,DS-c5297e2c-75a4-40fe-b209-9c5065586849,DISK]]; indices=[0, 1, 3, 5, 6, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1187286147-172.17.0.10-1596923798196:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33331,DS-6e33ba36-8071-444e-99ba-c439087f7c7a,DISK], DatanodeInfoWithStorage[127.0.0.1:45769,DS-211b67ce-72c0-48ae-a2aa-35e8503dbe5e,DISK], DatanodeInfoWithStorage[127.0.0.1:46775,DS-2cb414be-b27e-443f-a5f2-b68fd7d0f7bf,DISK], DatanodeInfoWithStorage[127.0.0.1:39393,DS-b35c4bea-c819-42c0-9b30-7fa118d0a26b,DISK], DatanodeInfoWithStorage[127.0.0.1:40076,DS-252d76b6-0821-497c-98c8-890ddf0b31ef,DISK], DatanodeInfoWithStorage[127.0.0.1:34625,DS-c5297e2c-75a4-40fe-b209-9c5065586849,DISK]]; indices=[0, 1, 3, 5, 6, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-1187286147-172.17.0.10-1596923798196:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33331,DS-6e33ba36-8071-444e-99ba-c439087f7c7a,DISK], DatanodeInfoWithStorage[127.0.0.1:45769,DS-211b67ce-72c0-48ae-a2aa-35e8503dbe5e,DISK], DatanodeInfoWithStorage[127.0.0.1:46775,DS-2cb414be-b27e-443f-a5f2-b68fd7d0f7bf,DISK], DatanodeInfoWithStorage[127.0.0.1:39393,DS-b35c4bea-c819-42c0-9b30-7fa118d0a26b,DISK], DatanodeInfoWithStorage[127.0.0.1:40076,DS-252d76b6-0821-497c-98c8-890ddf0b31ef,DISK], DatanodeInfoWithStorage[127.0.0.1:34625,DS-c5297e2c-75a4-40fe-b209-9c5065586849,DISK]]; indices=[0, 1, 3, 5, 6, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


v1v2 failed with probability 10 out of 50
v1v1v2v2 failed with probability 13 out of 50
result: false positive !!!
Total execution time in seconds : 6526
