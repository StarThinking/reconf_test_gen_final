reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1347154980-172.17.0.18-1596976429965:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42958,DS-bb20986a-52f1-49f4-b82f-d409ba883d1b,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-b62c6180-40de-4d30-93e1-b7d5d32d7446,DISK], DatanodeInfoWithStorage[127.0.0.1:38989,DS-25589c50-fdbe-4594-b6aa-66b8ff1dc92a,DISK], DatanodeInfoWithStorage[127.0.0.1:33738,DS-feec19d8-f449-4a3c-a829-65d5c30182fb,DISK], DatanodeInfoWithStorage[127.0.0.1:41895,DS-9618f9d6-4711-461f-9108-d456f5c47532,DISK], DatanodeInfoWithStorage[127.0.0.1:45584,DS-982f6f3c-fcb9-480b-ad7a-0d31b5a2b6da,DISK]]; indices=[0, 3, 6, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1347154980-172.17.0.18-1596976429965:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42958,DS-bb20986a-52f1-49f4-b82f-d409ba883d1b,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-b62c6180-40de-4d30-93e1-b7d5d32d7446,DISK], DatanodeInfoWithStorage[127.0.0.1:38989,DS-25589c50-fdbe-4594-b6aa-66b8ff1dc92a,DISK], DatanodeInfoWithStorage[127.0.0.1:33738,DS-feec19d8-f449-4a3c-a829-65d5c30182fb,DISK], DatanodeInfoWithStorage[127.0.0.1:41895,DS-9618f9d6-4711-461f-9108-d456f5c47532,DISK], DatanodeInfoWithStorage[127.0.0.1:45584,DS-982f6f3c-fcb9-480b-ad7a-0d31b5a2b6da,DISK]]; indices=[0, 3, 6, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1347154980-172.17.0.18-1596976429965:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42958,DS-bb20986a-52f1-49f4-b82f-d409ba883d1b,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-b62c6180-40de-4d30-93e1-b7d5d32d7446,DISK], DatanodeInfoWithStorage[127.0.0.1:38989,DS-25589c50-fdbe-4594-b6aa-66b8ff1dc92a,DISK], DatanodeInfoWithStorage[127.0.0.1:33738,DS-feec19d8-f449-4a3c-a829-65d5c30182fb,DISK], DatanodeInfoWithStorage[127.0.0.1:41895,DS-9618f9d6-4711-461f-9108-d456f5c47532,DISK], DatanodeInfoWithStorage[127.0.0.1:45584,DS-982f6f3c-fcb9-480b-ad7a-0d31b5a2b6da,DISK]]; indices=[0, 3, 6, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1347154980-172.17.0.18-1596976429965:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42958,DS-bb20986a-52f1-49f4-b82f-d409ba883d1b,DISK], DatanodeInfoWithStorage[127.0.0.1:40385,DS-b62c6180-40de-4d30-93e1-b7d5d32d7446,DISK], DatanodeInfoWithStorage[127.0.0.1:38989,DS-25589c50-fdbe-4594-b6aa-66b8ff1dc92a,DISK], DatanodeInfoWithStorage[127.0.0.1:33738,DS-feec19d8-f449-4a3c-a829-65d5c30182fb,DISK], DatanodeInfoWithStorage[127.0.0.1:41895,DS-9618f9d6-4711-461f-9108-d456f5c47532,DISK], DatanodeInfoWithStorage[127.0.0.1:45584,DS-982f6f3c-fcb9-480b-ad7a-0d31b5a2b6da,DISK]]; indices=[0, 3, 6, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1345116001-172.17.0.18-1596976739143:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34267,DS-d9b18f9c-1263-4e11-aa24-25343a5608d9,DISK], DatanodeInfoWithStorage[127.0.0.1:37933,DS-293bb908-1a98-4c80-a643-021426645182,DISK], DatanodeInfoWithStorage[127.0.0.1:44727,DS-0695b8b3-3d8d-4c00-8657-fd0d7a54ba6b,DISK], DatanodeInfoWithStorage[127.0.0.1:37445,DS-0971b61b-d3e7-437e-b3f2-91b631768590,DISK], DatanodeInfoWithStorage[127.0.0.1:40514,DS-25391b25-d7c5-485f-9f7e-be5ecf9b2efd,DISK], DatanodeInfoWithStorage[127.0.0.1:38608,DS-fb6103e4-9893-4bf9-861b-571f15306015,DISK]]; indices=[0, 3, 4, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1345116001-172.17.0.18-1596976739143:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34267,DS-d9b18f9c-1263-4e11-aa24-25343a5608d9,DISK], DatanodeInfoWithStorage[127.0.0.1:37933,DS-293bb908-1a98-4c80-a643-021426645182,DISK], DatanodeInfoWithStorage[127.0.0.1:44727,DS-0695b8b3-3d8d-4c00-8657-fd0d7a54ba6b,DISK], DatanodeInfoWithStorage[127.0.0.1:37445,DS-0971b61b-d3e7-437e-b3f2-91b631768590,DISK], DatanodeInfoWithStorage[127.0.0.1:40514,DS-25391b25-d7c5-485f-9f7e-be5ecf9b2efd,DISK], DatanodeInfoWithStorage[127.0.0.1:38608,DS-fb6103e4-9893-4bf9-861b-571f15306015,DISK]]; indices=[0, 3, 4, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1345116001-172.17.0.18-1596976739143:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34267,DS-d9b18f9c-1263-4e11-aa24-25343a5608d9,DISK], DatanodeInfoWithStorage[127.0.0.1:37933,DS-293bb908-1a98-4c80-a643-021426645182,DISK], DatanodeInfoWithStorage[127.0.0.1:44727,DS-0695b8b3-3d8d-4c00-8657-fd0d7a54ba6b,DISK], DatanodeInfoWithStorage[127.0.0.1:37445,DS-0971b61b-d3e7-437e-b3f2-91b631768590,DISK], DatanodeInfoWithStorage[127.0.0.1:40514,DS-25391b25-d7c5-485f-9f7e-be5ecf9b2efd,DISK], DatanodeInfoWithStorage[127.0.0.1:38608,DS-fb6103e4-9893-4bf9-861b-571f15306015,DISK]]; indices=[0, 3, 4, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1345116001-172.17.0.18-1596976739143:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34267,DS-d9b18f9c-1263-4e11-aa24-25343a5608d9,DISK], DatanodeInfoWithStorage[127.0.0.1:37933,DS-293bb908-1a98-4c80-a643-021426645182,DISK], DatanodeInfoWithStorage[127.0.0.1:44727,DS-0695b8b3-3d8d-4c00-8657-fd0d7a54ba6b,DISK], DatanodeInfoWithStorage[127.0.0.1:37445,DS-0971b61b-d3e7-437e-b3f2-91b631768590,DISK], DatanodeInfoWithStorage[127.0.0.1:40514,DS-25391b25-d7c5-485f-9f7e-be5ecf9b2efd,DISK], DatanodeInfoWithStorage[127.0.0.1:38608,DS-fb6103e4-9893-4bf9-861b-571f15306015,DISK]]; indices=[0, 3, 4, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-108844390-172.17.0.18-1596976975585:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40399,DS-4ecc8fb2-c6ea-465b-ba3c-028710a47644,DISK], DatanodeInfoWithStorage[127.0.0.1:45657,DS-88015f69-ad6e-4390-978e-c3a05b861470,DISK], DatanodeInfoWithStorage[127.0.0.1:36561,DS-6cb060b9-8f03-4180-ab47-17909ad698ef,DISK], DatanodeInfoWithStorage[127.0.0.1:37409,DS-e5f5c32a-5987-4a83-920a-bcbe4aae6e02,DISK], DatanodeInfoWithStorage[127.0.0.1:34648,DS-39c8f36e-1b79-4c3f-8c4a-e7cb857c316a,DISK], DatanodeInfoWithStorage[127.0.0.1:34718,DS-dfb8302c-4ff1-4d50-a797-9dfd35a81a57,DISK], DatanodeInfoWithStorage[127.0.0.1:45008,DS-40b5d7c4-062b-4e35-9ec1-81655002246f,DISK]]; indices=[3, 4, 5, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-108844390-172.17.0.18-1596976975585:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40399,DS-4ecc8fb2-c6ea-465b-ba3c-028710a47644,DISK], DatanodeInfoWithStorage[127.0.0.1:45657,DS-88015f69-ad6e-4390-978e-c3a05b861470,DISK], DatanodeInfoWithStorage[127.0.0.1:36561,DS-6cb060b9-8f03-4180-ab47-17909ad698ef,DISK], DatanodeInfoWithStorage[127.0.0.1:37409,DS-e5f5c32a-5987-4a83-920a-bcbe4aae6e02,DISK], DatanodeInfoWithStorage[127.0.0.1:34648,DS-39c8f36e-1b79-4c3f-8c4a-e7cb857c316a,DISK], DatanodeInfoWithStorage[127.0.0.1:34718,DS-dfb8302c-4ff1-4d50-a797-9dfd35a81a57,DISK], DatanodeInfoWithStorage[127.0.0.1:45008,DS-40b5d7c4-062b-4e35-9ec1-81655002246f,DISK]]; indices=[3, 4, 5, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-108844390-172.17.0.18-1596976975585:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40399,DS-4ecc8fb2-c6ea-465b-ba3c-028710a47644,DISK], DatanodeInfoWithStorage[127.0.0.1:45657,DS-88015f69-ad6e-4390-978e-c3a05b861470,DISK], DatanodeInfoWithStorage[127.0.0.1:36561,DS-6cb060b9-8f03-4180-ab47-17909ad698ef,DISK], DatanodeInfoWithStorage[127.0.0.1:37409,DS-e5f5c32a-5987-4a83-920a-bcbe4aae6e02,DISK], DatanodeInfoWithStorage[127.0.0.1:34648,DS-39c8f36e-1b79-4c3f-8c4a-e7cb857c316a,DISK], DatanodeInfoWithStorage[127.0.0.1:34718,DS-dfb8302c-4ff1-4d50-a797-9dfd35a81a57,DISK], DatanodeInfoWithStorage[127.0.0.1:45008,DS-40b5d7c4-062b-4e35-9ec1-81655002246f,DISK]]; indices=[3, 4, 5, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-108844390-172.17.0.18-1596976975585:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40399,DS-4ecc8fb2-c6ea-465b-ba3c-028710a47644,DISK], DatanodeInfoWithStorage[127.0.0.1:45657,DS-88015f69-ad6e-4390-978e-c3a05b861470,DISK], DatanodeInfoWithStorage[127.0.0.1:36561,DS-6cb060b9-8f03-4180-ab47-17909ad698ef,DISK], DatanodeInfoWithStorage[127.0.0.1:37409,DS-e5f5c32a-5987-4a83-920a-bcbe4aae6e02,DISK], DatanodeInfoWithStorage[127.0.0.1:34648,DS-39c8f36e-1b79-4c3f-8c4a-e7cb857c316a,DISK], DatanodeInfoWithStorage[127.0.0.1:34718,DS-dfb8302c-4ff1-4d50-a797-9dfd35a81a57,DISK], DatanodeInfoWithStorage[127.0.0.1:45008,DS-40b5d7c4-062b-4e35-9ec1-81655002246f,DISK]]; indices=[3, 4, 5, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1639286014-172.17.0.18-1596977484000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46578,DS-62daedcf-7af4-4409-ac37-89d4c8fb6239,DISK], DatanodeInfoWithStorage[127.0.0.1:45152,DS-57bf4b60-0385-42c1-b600-29163e8ed5e3,DISK], DatanodeInfoWithStorage[127.0.0.1:41668,DS-149e6bc5-d171-44b0-8823-f84fee3c1438,DISK], DatanodeInfoWithStorage[127.0.0.1:36336,DS-53c46fb7-f829-4420-9b77-95c795777449,DISK], DatanodeInfoWithStorage[127.0.0.1:37646,DS-c7467b57-72ea-435d-ab91-c178a32eab5f,DISK], DatanodeInfoWithStorage[127.0.0.1:41578,DS-b0c2075f-646e-46bc-80f8-530abc765b4d,DISK], DatanodeInfoWithStorage[127.0.0.1:38272,DS-6cc18138-fa71-4117-b663-15b0b827f347,DISK]]; indices=[0, 3, 5, 6, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1639286014-172.17.0.18-1596977484000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46578,DS-62daedcf-7af4-4409-ac37-89d4c8fb6239,DISK], DatanodeInfoWithStorage[127.0.0.1:45152,DS-57bf4b60-0385-42c1-b600-29163e8ed5e3,DISK], DatanodeInfoWithStorage[127.0.0.1:41668,DS-149e6bc5-d171-44b0-8823-f84fee3c1438,DISK], DatanodeInfoWithStorage[127.0.0.1:36336,DS-53c46fb7-f829-4420-9b77-95c795777449,DISK], DatanodeInfoWithStorage[127.0.0.1:37646,DS-c7467b57-72ea-435d-ab91-c178a32eab5f,DISK], DatanodeInfoWithStorage[127.0.0.1:41578,DS-b0c2075f-646e-46bc-80f8-530abc765b4d,DISK], DatanodeInfoWithStorage[127.0.0.1:38272,DS-6cc18138-fa71-4117-b663-15b0b827f347,DISK]]; indices=[0, 3, 5, 6, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1639286014-172.17.0.18-1596977484000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46578,DS-62daedcf-7af4-4409-ac37-89d4c8fb6239,DISK], DatanodeInfoWithStorage[127.0.0.1:45152,DS-57bf4b60-0385-42c1-b600-29163e8ed5e3,DISK], DatanodeInfoWithStorage[127.0.0.1:41668,DS-149e6bc5-d171-44b0-8823-f84fee3c1438,DISK], DatanodeInfoWithStorage[127.0.0.1:36336,DS-53c46fb7-f829-4420-9b77-95c795777449,DISK], DatanodeInfoWithStorage[127.0.0.1:37646,DS-c7467b57-72ea-435d-ab91-c178a32eab5f,DISK], DatanodeInfoWithStorage[127.0.0.1:41578,DS-b0c2075f-646e-46bc-80f8-530abc765b4d,DISK], DatanodeInfoWithStorage[127.0.0.1:38272,DS-6cc18138-fa71-4117-b663-15b0b827f347,DISK]]; indices=[0, 3, 5, 6, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1639286014-172.17.0.18-1596977484000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46578,DS-62daedcf-7af4-4409-ac37-89d4c8fb6239,DISK], DatanodeInfoWithStorage[127.0.0.1:45152,DS-57bf4b60-0385-42c1-b600-29163e8ed5e3,DISK], DatanodeInfoWithStorage[127.0.0.1:41668,DS-149e6bc5-d171-44b0-8823-f84fee3c1438,DISK], DatanodeInfoWithStorage[127.0.0.1:36336,DS-53c46fb7-f829-4420-9b77-95c795777449,DISK], DatanodeInfoWithStorage[127.0.0.1:37646,DS-c7467b57-72ea-435d-ab91-c178a32eab5f,DISK], DatanodeInfoWithStorage[127.0.0.1:41578,DS-b0c2075f-646e-46bc-80f8-530abc765b4d,DISK], DatanodeInfoWithStorage[127.0.0.1:38272,DS-6cc18138-fa71-4117-b663-15b0b827f347,DISK]]; indices=[0, 3, 5, 6, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-210572908-172.17.0.18-1596977530991:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44277,DS-3a4da2e9-8dbc-4ef5-a7fc-80600e6fe120,DISK], DatanodeInfoWithStorage[127.0.0.1:45142,DS-d693047f-cb74-4df7-88b8-1547ccb77c7b,DISK], DatanodeInfoWithStorage[127.0.0.1:37034,DS-2f8efdc0-5b8e-4006-a02a-aab151426247,DISK], DatanodeInfoWithStorage[127.0.0.1:33641,DS-a2a44e29-9b23-4d6b-b445-0bc690d5105f,DISK], DatanodeInfoWithStorage[127.0.0.1:38981,DS-d801145d-b773-4aeb-b006-4f8974ff4cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:34046,DS-317362e8-70a5-4764-904e-abde9e85c0fd,DISK]]; indices=[0, 2, 4, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-210572908-172.17.0.18-1596977530991:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44277,DS-3a4da2e9-8dbc-4ef5-a7fc-80600e6fe120,DISK], DatanodeInfoWithStorage[127.0.0.1:45142,DS-d693047f-cb74-4df7-88b8-1547ccb77c7b,DISK], DatanodeInfoWithStorage[127.0.0.1:37034,DS-2f8efdc0-5b8e-4006-a02a-aab151426247,DISK], DatanodeInfoWithStorage[127.0.0.1:33641,DS-a2a44e29-9b23-4d6b-b445-0bc690d5105f,DISK], DatanodeInfoWithStorage[127.0.0.1:38981,DS-d801145d-b773-4aeb-b006-4f8974ff4cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:34046,DS-317362e8-70a5-4764-904e-abde9e85c0fd,DISK]]; indices=[0, 2, 4, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-210572908-172.17.0.18-1596977530991:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44277,DS-3a4da2e9-8dbc-4ef5-a7fc-80600e6fe120,DISK], DatanodeInfoWithStorage[127.0.0.1:45142,DS-d693047f-cb74-4df7-88b8-1547ccb77c7b,DISK], DatanodeInfoWithStorage[127.0.0.1:37034,DS-2f8efdc0-5b8e-4006-a02a-aab151426247,DISK], DatanodeInfoWithStorage[127.0.0.1:33641,DS-a2a44e29-9b23-4d6b-b445-0bc690d5105f,DISK], DatanodeInfoWithStorage[127.0.0.1:38981,DS-d801145d-b773-4aeb-b006-4f8974ff4cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:34046,DS-317362e8-70a5-4764-904e-abde9e85c0fd,DISK]]; indices=[0, 2, 4, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-210572908-172.17.0.18-1596977530991:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44277,DS-3a4da2e9-8dbc-4ef5-a7fc-80600e6fe120,DISK], DatanodeInfoWithStorage[127.0.0.1:45142,DS-d693047f-cb74-4df7-88b8-1547ccb77c7b,DISK], DatanodeInfoWithStorage[127.0.0.1:37034,DS-2f8efdc0-5b8e-4006-a02a-aab151426247,DISK], DatanodeInfoWithStorage[127.0.0.1:33641,DS-a2a44e29-9b23-4d6b-b445-0bc690d5105f,DISK], DatanodeInfoWithStorage[127.0.0.1:38981,DS-d801145d-b773-4aeb-b006-4f8974ff4cd3,DISK], DatanodeInfoWithStorage[127.0.0.1:34046,DS-317362e8-70a5-4764-904e-abde9e85c0fd,DISK]]; indices=[0, 2, 4, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1267341506-172.17.0.18-1596977880465:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44411,DS-6ee8ab5b-499c-4d2f-8591-395bb644121f,DISK], DatanodeInfoWithStorage[127.0.0.1:36856,DS-85cd1241-eed6-4850-b547-91bd5ab051f5,DISK], DatanodeInfoWithStorage[127.0.0.1:44510,DS-0315a3aa-1a1e-424d-938e-5616d2df887b,DISK], DatanodeInfoWithStorage[127.0.0.1:40198,DS-c43b258d-63cd-4c4f-997d-8122bbff5fee,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-c74759e0-cb5b-417f-8bc4-1a2c98bd85eb,DISK], DatanodeInfoWithStorage[127.0.0.1:45290,DS-926a4cc9-a6f6-4617-974c-484a0e729feb,DISK], DatanodeInfoWithStorage[127.0.0.1:44721,DS-284d638e-16e8-4639-9e82-2496aa1bdb86,DISK]]; indices=[0, 5, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1267341506-172.17.0.18-1596977880465:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44411,DS-6ee8ab5b-499c-4d2f-8591-395bb644121f,DISK], DatanodeInfoWithStorage[127.0.0.1:36856,DS-85cd1241-eed6-4850-b547-91bd5ab051f5,DISK], DatanodeInfoWithStorage[127.0.0.1:44510,DS-0315a3aa-1a1e-424d-938e-5616d2df887b,DISK], DatanodeInfoWithStorage[127.0.0.1:40198,DS-c43b258d-63cd-4c4f-997d-8122bbff5fee,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-c74759e0-cb5b-417f-8bc4-1a2c98bd85eb,DISK], DatanodeInfoWithStorage[127.0.0.1:45290,DS-926a4cc9-a6f6-4617-974c-484a0e729feb,DISK], DatanodeInfoWithStorage[127.0.0.1:44721,DS-284d638e-16e8-4639-9e82-2496aa1bdb86,DISK]]; indices=[0, 5, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1267341506-172.17.0.18-1596977880465:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44411,DS-6ee8ab5b-499c-4d2f-8591-395bb644121f,DISK], DatanodeInfoWithStorage[127.0.0.1:36856,DS-85cd1241-eed6-4850-b547-91bd5ab051f5,DISK], DatanodeInfoWithStorage[127.0.0.1:44510,DS-0315a3aa-1a1e-424d-938e-5616d2df887b,DISK], DatanodeInfoWithStorage[127.0.0.1:40198,DS-c43b258d-63cd-4c4f-997d-8122bbff5fee,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-c74759e0-cb5b-417f-8bc4-1a2c98bd85eb,DISK], DatanodeInfoWithStorage[127.0.0.1:45290,DS-926a4cc9-a6f6-4617-974c-484a0e729feb,DISK], DatanodeInfoWithStorage[127.0.0.1:44721,DS-284d638e-16e8-4639-9e82-2496aa1bdb86,DISK]]; indices=[0, 5, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1267341506-172.17.0.18-1596977880465:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44411,DS-6ee8ab5b-499c-4d2f-8591-395bb644121f,DISK], DatanodeInfoWithStorage[127.0.0.1:36856,DS-85cd1241-eed6-4850-b547-91bd5ab051f5,DISK], DatanodeInfoWithStorage[127.0.0.1:44510,DS-0315a3aa-1a1e-424d-938e-5616d2df887b,DISK], DatanodeInfoWithStorage[127.0.0.1:40198,DS-c43b258d-63cd-4c4f-997d-8122bbff5fee,DISK], DatanodeInfoWithStorage[127.0.0.1:40151,DS-c74759e0-cb5b-417f-8bc4-1a2c98bd85eb,DISK], DatanodeInfoWithStorage[127.0.0.1:45290,DS-926a4cc9-a6f6-4617-974c-484a0e729feb,DISK], DatanodeInfoWithStorage[127.0.0.1:44721,DS-284d638e-16e8-4639-9e82-2496aa1bdb86,DISK]]; indices=[0, 5, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1954393647-172.17.0.18-1596977917769:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33619,DS-967d3934-852e-43cf-b49d-38269c40a2bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36907,DS-7ea9a177-7d98-4fac-a2f8-32a367d0a172,DISK], DatanodeInfoWithStorage[127.0.0.1:46724,DS-5abd8118-39fd-4fde-82e5-ef171722da92,DISK], DatanodeInfoWithStorage[127.0.0.1:33112,DS-e0e51c4e-6664-49d7-a27a-63a7b3386e53,DISK], DatanodeInfoWithStorage[127.0.0.1:39677,DS-f12a1c05-4af2-4b1f-a417-92ef03ec2b49,DISK], DatanodeInfoWithStorage[127.0.0.1:40772,DS-e1caff3f-29a9-4621-a661-444b49227271,DISK], DatanodeInfoWithStorage[127.0.0.1:37300,DS-ee350d06-79d8-4810-9751-2f2a9993992a,DISK]]; indices=[0, 1, 2, 7, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1954393647-172.17.0.18-1596977917769:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33619,DS-967d3934-852e-43cf-b49d-38269c40a2bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36907,DS-7ea9a177-7d98-4fac-a2f8-32a367d0a172,DISK], DatanodeInfoWithStorage[127.0.0.1:46724,DS-5abd8118-39fd-4fde-82e5-ef171722da92,DISK], DatanodeInfoWithStorage[127.0.0.1:33112,DS-e0e51c4e-6664-49d7-a27a-63a7b3386e53,DISK], DatanodeInfoWithStorage[127.0.0.1:39677,DS-f12a1c05-4af2-4b1f-a417-92ef03ec2b49,DISK], DatanodeInfoWithStorage[127.0.0.1:40772,DS-e1caff3f-29a9-4621-a661-444b49227271,DISK], DatanodeInfoWithStorage[127.0.0.1:37300,DS-ee350d06-79d8-4810-9751-2f2a9993992a,DISK]]; indices=[0, 1, 2, 7, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1954393647-172.17.0.18-1596977917769:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33619,DS-967d3934-852e-43cf-b49d-38269c40a2bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36907,DS-7ea9a177-7d98-4fac-a2f8-32a367d0a172,DISK], DatanodeInfoWithStorage[127.0.0.1:46724,DS-5abd8118-39fd-4fde-82e5-ef171722da92,DISK], DatanodeInfoWithStorage[127.0.0.1:33112,DS-e0e51c4e-6664-49d7-a27a-63a7b3386e53,DISK], DatanodeInfoWithStorage[127.0.0.1:39677,DS-f12a1c05-4af2-4b1f-a417-92ef03ec2b49,DISK], DatanodeInfoWithStorage[127.0.0.1:40772,DS-e1caff3f-29a9-4621-a661-444b49227271,DISK], DatanodeInfoWithStorage[127.0.0.1:37300,DS-ee350d06-79d8-4810-9751-2f2a9993992a,DISK]]; indices=[0, 1, 2, 7, 10, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1954393647-172.17.0.18-1596977917769:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33619,DS-967d3934-852e-43cf-b49d-38269c40a2bc,DISK], DatanodeInfoWithStorage[127.0.0.1:36907,DS-7ea9a177-7d98-4fac-a2f8-32a367d0a172,DISK], DatanodeInfoWithStorage[127.0.0.1:46724,DS-5abd8118-39fd-4fde-82e5-ef171722da92,DISK], DatanodeInfoWithStorage[127.0.0.1:33112,DS-e0e51c4e-6664-49d7-a27a-63a7b3386e53,DISK], DatanodeInfoWithStorage[127.0.0.1:39677,DS-f12a1c05-4af2-4b1f-a417-92ef03ec2b49,DISK], DatanodeInfoWithStorage[127.0.0.1:40772,DS-e1caff3f-29a9-4621-a661-444b49227271,DISK], DatanodeInfoWithStorage[127.0.0.1:37300,DS-ee350d06-79d8-4810-9751-2f2a9993992a,DISK]]; indices=[0, 1, 2, 7, 10, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-870194281-172.17.0.18-1596978192128:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34470,DS-178edd75-ce7b-448e-8f4e-fbe5f124d689,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-41cb3286-e8ef-4dc6-86d0-19400c4aa8df,DISK], DatanodeInfoWithStorage[127.0.0.1:44538,DS-ec52c575-4774-42b9-a974-493fdcced840,DISK], DatanodeInfoWithStorage[127.0.0.1:39200,DS-90cc56b4-4326-4d5e-b2f4-915587b90b6d,DISK], DatanodeInfoWithStorage[127.0.0.1:37089,DS-2f07396b-b6e7-489d-9263-f7eecd6a0796,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-d8dba2e2-cf34-4e11-ae62-042759ddbc59,DISK], DatanodeInfoWithStorage[127.0.0.1:34640,DS-83b22e63-ecc9-4b2a-8756-a6ee5c672634,DISK]]; indices=[0, 1, 2, 3, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-870194281-172.17.0.18-1596978192128:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34470,DS-178edd75-ce7b-448e-8f4e-fbe5f124d689,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-41cb3286-e8ef-4dc6-86d0-19400c4aa8df,DISK], DatanodeInfoWithStorage[127.0.0.1:44538,DS-ec52c575-4774-42b9-a974-493fdcced840,DISK], DatanodeInfoWithStorage[127.0.0.1:39200,DS-90cc56b4-4326-4d5e-b2f4-915587b90b6d,DISK], DatanodeInfoWithStorage[127.0.0.1:37089,DS-2f07396b-b6e7-489d-9263-f7eecd6a0796,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-d8dba2e2-cf34-4e11-ae62-042759ddbc59,DISK], DatanodeInfoWithStorage[127.0.0.1:34640,DS-83b22e63-ecc9-4b2a-8756-a6ee5c672634,DISK]]; indices=[0, 1, 2, 3, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-870194281-172.17.0.18-1596978192128:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34470,DS-178edd75-ce7b-448e-8f4e-fbe5f124d689,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-41cb3286-e8ef-4dc6-86d0-19400c4aa8df,DISK], DatanodeInfoWithStorage[127.0.0.1:44538,DS-ec52c575-4774-42b9-a974-493fdcced840,DISK], DatanodeInfoWithStorage[127.0.0.1:39200,DS-90cc56b4-4326-4d5e-b2f4-915587b90b6d,DISK], DatanodeInfoWithStorage[127.0.0.1:37089,DS-2f07396b-b6e7-489d-9263-f7eecd6a0796,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-d8dba2e2-cf34-4e11-ae62-042759ddbc59,DISK], DatanodeInfoWithStorage[127.0.0.1:34640,DS-83b22e63-ecc9-4b2a-8756-a6ee5c672634,DISK]]; indices=[0, 1, 2, 3, 5, 6, 7]}];  lastLocatedBlock=LocatedStripedBlock{BP-870194281-172.17.0.18-1596978192128:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34470,DS-178edd75-ce7b-448e-8f4e-fbe5f124d689,DISK], DatanodeInfoWithStorage[127.0.0.1:46028,DS-41cb3286-e8ef-4dc6-86d0-19400c4aa8df,DISK], DatanodeInfoWithStorage[127.0.0.1:44538,DS-ec52c575-4774-42b9-a974-493fdcced840,DISK], DatanodeInfoWithStorage[127.0.0.1:39200,DS-90cc56b4-4326-4d5e-b2f4-915587b90b6d,DISK], DatanodeInfoWithStorage[127.0.0.1:37089,DS-2f07396b-b6e7-489d-9263-f7eecd6a0796,DISK], DatanodeInfoWithStorage[127.0.0.1:33126,DS-d8dba2e2-cf34-4e11-ae62-042759ddbc59,DISK], DatanodeInfoWithStorage[127.0.0.1:34640,DS-83b22e63-ecc9-4b2a-8756-a6ee5c672634,DISK]]; indices=[0, 1, 2, 3, 5, 6, 7]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-119529423-172.17.0.18-1596978240508:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41984,DS-8589a124-d920-41bc-9ebe-1ed85a9f9bc9,DISK], DatanodeInfoWithStorage[127.0.0.1:38634,DS-e0cb5ac9-0aae-4a25-948e-651fb33762a1,DISK], DatanodeInfoWithStorage[127.0.0.1:45349,DS-b2011f8b-4517-4f69-8594-fafe2367875d,DISK], DatanodeInfoWithStorage[127.0.0.1:42292,DS-36f95592-a846-44a6-83af-85c6aa68472a,DISK], DatanodeInfoWithStorage[127.0.0.1:42909,DS-adb7584b-365a-495b-9b95-d4436f1cd71d,DISK], DatanodeInfoWithStorage[127.0.0.1:34354,DS-f14a99b8-e275-42c0-a080-cbce04217838,DISK]]; indices=[0, 1, 3, 4, 6, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-119529423-172.17.0.18-1596978240508:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41984,DS-8589a124-d920-41bc-9ebe-1ed85a9f9bc9,DISK], DatanodeInfoWithStorage[127.0.0.1:38634,DS-e0cb5ac9-0aae-4a25-948e-651fb33762a1,DISK], DatanodeInfoWithStorage[127.0.0.1:45349,DS-b2011f8b-4517-4f69-8594-fafe2367875d,DISK], DatanodeInfoWithStorage[127.0.0.1:42292,DS-36f95592-a846-44a6-83af-85c6aa68472a,DISK], DatanodeInfoWithStorage[127.0.0.1:42909,DS-adb7584b-365a-495b-9b95-d4436f1cd71d,DISK], DatanodeInfoWithStorage[127.0.0.1:34354,DS-f14a99b8-e275-42c0-a080-cbce04217838,DISK]]; indices=[0, 1, 3, 4, 6, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-119529423-172.17.0.18-1596978240508:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41984,DS-8589a124-d920-41bc-9ebe-1ed85a9f9bc9,DISK], DatanodeInfoWithStorage[127.0.0.1:38634,DS-e0cb5ac9-0aae-4a25-948e-651fb33762a1,DISK], DatanodeInfoWithStorage[127.0.0.1:45349,DS-b2011f8b-4517-4f69-8594-fafe2367875d,DISK], DatanodeInfoWithStorage[127.0.0.1:42292,DS-36f95592-a846-44a6-83af-85c6aa68472a,DISK], DatanodeInfoWithStorage[127.0.0.1:42909,DS-adb7584b-365a-495b-9b95-d4436f1cd71d,DISK], DatanodeInfoWithStorage[127.0.0.1:34354,DS-f14a99b8-e275-42c0-a080-cbce04217838,DISK]]; indices=[0, 1, 3, 4, 6, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-119529423-172.17.0.18-1596978240508:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41984,DS-8589a124-d920-41bc-9ebe-1ed85a9f9bc9,DISK], DatanodeInfoWithStorage[127.0.0.1:38634,DS-e0cb5ac9-0aae-4a25-948e-651fb33762a1,DISK], DatanodeInfoWithStorage[127.0.0.1:45349,DS-b2011f8b-4517-4f69-8594-fafe2367875d,DISK], DatanodeInfoWithStorage[127.0.0.1:42292,DS-36f95592-a846-44a6-83af-85c6aa68472a,DISK], DatanodeInfoWithStorage[127.0.0.1:42909,DS-adb7584b-365a-495b-9b95-d4436f1cd71d,DISK], DatanodeInfoWithStorage[127.0.0.1:34354,DS-f14a99b8-e275-42c0-a080-cbce04217838,DISK]]; indices=[0, 1, 3, 4, 6, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2041050951-172.17.0.18-1596978632928:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42039,DS-9c4cacdc-b3a6-4c9b-b385-ede988481db0,DISK], DatanodeInfoWithStorage[127.0.0.1:45071,DS-daa8ad99-6b39-4c3f-a4ad-7761bdce85d3,DISK], DatanodeInfoWithStorage[127.0.0.1:43395,DS-69b8dc05-2efb-4887-951b-4543280a06f1,DISK], DatanodeInfoWithStorage[127.0.0.1:41951,DS-109a4e69-8490-489a-9fe4-c6ba14a186c7,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-514535cc-f028-4cbb-86f8-20e9755e5e40,DISK], DatanodeInfoWithStorage[127.0.0.1:40586,DS-e44a4c71-06d7-4db3-9b26-469fbc06dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:45417,DS-66538824-5344-426b-b149-f5add5ff9801,DISK]]; indices=[0, 1, 4, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-2041050951-172.17.0.18-1596978632928:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42039,DS-9c4cacdc-b3a6-4c9b-b385-ede988481db0,DISK], DatanodeInfoWithStorage[127.0.0.1:45071,DS-daa8ad99-6b39-4c3f-a4ad-7761bdce85d3,DISK], DatanodeInfoWithStorage[127.0.0.1:43395,DS-69b8dc05-2efb-4887-951b-4543280a06f1,DISK], DatanodeInfoWithStorage[127.0.0.1:41951,DS-109a4e69-8490-489a-9fe4-c6ba14a186c7,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-514535cc-f028-4cbb-86f8-20e9755e5e40,DISK], DatanodeInfoWithStorage[127.0.0.1:40586,DS-e44a4c71-06d7-4db3-9b26-469fbc06dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:45417,DS-66538824-5344-426b-b149-f5add5ff9801,DISK]]; indices=[0, 1, 4, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2041050951-172.17.0.18-1596978632928:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42039,DS-9c4cacdc-b3a6-4c9b-b385-ede988481db0,DISK], DatanodeInfoWithStorage[127.0.0.1:45071,DS-daa8ad99-6b39-4c3f-a4ad-7761bdce85d3,DISK], DatanodeInfoWithStorage[127.0.0.1:43395,DS-69b8dc05-2efb-4887-951b-4543280a06f1,DISK], DatanodeInfoWithStorage[127.0.0.1:41951,DS-109a4e69-8490-489a-9fe4-c6ba14a186c7,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-514535cc-f028-4cbb-86f8-20e9755e5e40,DISK], DatanodeInfoWithStorage[127.0.0.1:40586,DS-e44a4c71-06d7-4db3-9b26-469fbc06dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:45417,DS-66538824-5344-426b-b149-f5add5ff9801,DISK]]; indices=[0, 1, 4, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-2041050951-172.17.0.18-1596978632928:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42039,DS-9c4cacdc-b3a6-4c9b-b385-ede988481db0,DISK], DatanodeInfoWithStorage[127.0.0.1:45071,DS-daa8ad99-6b39-4c3f-a4ad-7761bdce85d3,DISK], DatanodeInfoWithStorage[127.0.0.1:43395,DS-69b8dc05-2efb-4887-951b-4543280a06f1,DISK], DatanodeInfoWithStorage[127.0.0.1:41951,DS-109a4e69-8490-489a-9fe4-c6ba14a186c7,DISK], DatanodeInfoWithStorage[127.0.0.1:34261,DS-514535cc-f028-4cbb-86f8-20e9755e5e40,DISK], DatanodeInfoWithStorage[127.0.0.1:40586,DS-e44a4c71-06d7-4db3-9b26-469fbc06dcc5,DISK], DatanodeInfoWithStorage[127.0.0.1:45417,DS-66538824-5344-426b-b149-f5add5ff9801,DISK]]; indices=[0, 1, 4, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1755245026-172.17.0.18-1596978714543:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39101,DS-b96702ac-0cd1-4925-9495-8f162c9094a3,DISK], DatanodeInfoWithStorage[127.0.0.1:33453,DS-09abecad-bda6-4fc9-bbbd-fcdfbc0f45b4,DISK], DatanodeInfoWithStorage[127.0.0.1:32943,DS-2761eacf-5e22-44c5-b13a-24dfb73d2ad2,DISK], DatanodeInfoWithStorage[127.0.0.1:36972,DS-fbfec9ef-956d-43be-85e5-57fb8d4425c3,DISK], DatanodeInfoWithStorage[127.0.0.1:40652,DS-5484fbda-1764-479f-a95d-b3017e031678,DISK], DatanodeInfoWithStorage[127.0.0.1:37364,DS-4cdc0c69-bd63-4116-8da4-f281947d6edc,DISK], DatanodeInfoWithStorage[127.0.0.1:38390,DS-765e150e-abb1-4a25-856f-59cfbdcc791a,DISK]]; indices=[1, 2, 4, 5, 6, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1755245026-172.17.0.18-1596978714543:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39101,DS-b96702ac-0cd1-4925-9495-8f162c9094a3,DISK], DatanodeInfoWithStorage[127.0.0.1:33453,DS-09abecad-bda6-4fc9-bbbd-fcdfbc0f45b4,DISK], DatanodeInfoWithStorage[127.0.0.1:32943,DS-2761eacf-5e22-44c5-b13a-24dfb73d2ad2,DISK], DatanodeInfoWithStorage[127.0.0.1:36972,DS-fbfec9ef-956d-43be-85e5-57fb8d4425c3,DISK], DatanodeInfoWithStorage[127.0.0.1:40652,DS-5484fbda-1764-479f-a95d-b3017e031678,DISK], DatanodeInfoWithStorage[127.0.0.1:37364,DS-4cdc0c69-bd63-4116-8da4-f281947d6edc,DISK], DatanodeInfoWithStorage[127.0.0.1:38390,DS-765e150e-abb1-4a25-856f-59cfbdcc791a,DISK]]; indices=[1, 2, 4, 5, 6, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1755245026-172.17.0.18-1596978714543:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39101,DS-b96702ac-0cd1-4925-9495-8f162c9094a3,DISK], DatanodeInfoWithStorage[127.0.0.1:33453,DS-09abecad-bda6-4fc9-bbbd-fcdfbc0f45b4,DISK], DatanodeInfoWithStorage[127.0.0.1:32943,DS-2761eacf-5e22-44c5-b13a-24dfb73d2ad2,DISK], DatanodeInfoWithStorage[127.0.0.1:36972,DS-fbfec9ef-956d-43be-85e5-57fb8d4425c3,DISK], DatanodeInfoWithStorage[127.0.0.1:40652,DS-5484fbda-1764-479f-a95d-b3017e031678,DISK], DatanodeInfoWithStorage[127.0.0.1:37364,DS-4cdc0c69-bd63-4116-8da4-f281947d6edc,DISK], DatanodeInfoWithStorage[127.0.0.1:38390,DS-765e150e-abb1-4a25-856f-59cfbdcc791a,DISK]]; indices=[1, 2, 4, 5, 6, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1755245026-172.17.0.18-1596978714543:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39101,DS-b96702ac-0cd1-4925-9495-8f162c9094a3,DISK], DatanodeInfoWithStorage[127.0.0.1:33453,DS-09abecad-bda6-4fc9-bbbd-fcdfbc0f45b4,DISK], DatanodeInfoWithStorage[127.0.0.1:32943,DS-2761eacf-5e22-44c5-b13a-24dfb73d2ad2,DISK], DatanodeInfoWithStorage[127.0.0.1:36972,DS-fbfec9ef-956d-43be-85e5-57fb8d4425c3,DISK], DatanodeInfoWithStorage[127.0.0.1:40652,DS-5484fbda-1764-479f-a95d-b3017e031678,DISK], DatanodeInfoWithStorage[127.0.0.1:37364,DS-4cdc0c69-bd63-4116-8da4-f281947d6edc,DISK], DatanodeInfoWithStorage[127.0.0.1:38390,DS-765e150e-abb1-4a25-856f-59cfbdcc791a,DISK]]; indices=[1, 2, 4, 5, 6, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1604105279-172.17.0.18-1596978841749:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44857,DS-152ada03-cc1e-480a-b0cf-2ad97e598d25,DISK], DatanodeInfoWithStorage[127.0.0.1:37619,DS-75ab1909-6076-4074-8740-e7e8d72d17eb,DISK], DatanodeInfoWithStorage[127.0.0.1:39835,DS-cfd6a2ad-1b3a-43a4-b1c4-a06d6492e46f,DISK], DatanodeInfoWithStorage[127.0.0.1:46433,DS-84a8e2db-7907-45da-ae8e-cf0ffd7d146f,DISK], DatanodeInfoWithStorage[127.0.0.1:38703,DS-be0cfaf0-25f1-488f-8bca-1d1be1aabc25,DISK], DatanodeInfoWithStorage[127.0.0.1:37277,DS-d3fa5ad3-9dc6-4436-a03e-df58c898e8eb,DISK], DatanodeInfoWithStorage[127.0.0.1:42594,DS-ec2f778c-c85c-40dd-b123-550ecd056258,DISK]]; indices=[0, 1, 2, 3, 5, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1604105279-172.17.0.18-1596978841749:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44857,DS-152ada03-cc1e-480a-b0cf-2ad97e598d25,DISK], DatanodeInfoWithStorage[127.0.0.1:37619,DS-75ab1909-6076-4074-8740-e7e8d72d17eb,DISK], DatanodeInfoWithStorage[127.0.0.1:39835,DS-cfd6a2ad-1b3a-43a4-b1c4-a06d6492e46f,DISK], DatanodeInfoWithStorage[127.0.0.1:46433,DS-84a8e2db-7907-45da-ae8e-cf0ffd7d146f,DISK], DatanodeInfoWithStorage[127.0.0.1:38703,DS-be0cfaf0-25f1-488f-8bca-1d1be1aabc25,DISK], DatanodeInfoWithStorage[127.0.0.1:37277,DS-d3fa5ad3-9dc6-4436-a03e-df58c898e8eb,DISK], DatanodeInfoWithStorage[127.0.0.1:42594,DS-ec2f778c-c85c-40dd-b123-550ecd056258,DISK]]; indices=[0, 1, 2, 3, 5, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1604105279-172.17.0.18-1596978841749:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44857,DS-152ada03-cc1e-480a-b0cf-2ad97e598d25,DISK], DatanodeInfoWithStorage[127.0.0.1:37619,DS-75ab1909-6076-4074-8740-e7e8d72d17eb,DISK], DatanodeInfoWithStorage[127.0.0.1:39835,DS-cfd6a2ad-1b3a-43a4-b1c4-a06d6492e46f,DISK], DatanodeInfoWithStorage[127.0.0.1:46433,DS-84a8e2db-7907-45da-ae8e-cf0ffd7d146f,DISK], DatanodeInfoWithStorage[127.0.0.1:38703,DS-be0cfaf0-25f1-488f-8bca-1d1be1aabc25,DISK], DatanodeInfoWithStorage[127.0.0.1:37277,DS-d3fa5ad3-9dc6-4436-a03e-df58c898e8eb,DISK], DatanodeInfoWithStorage[127.0.0.1:42594,DS-ec2f778c-c85c-40dd-b123-550ecd056258,DISK]]; indices=[0, 1, 2, 3, 5, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1604105279-172.17.0.18-1596978841749:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44857,DS-152ada03-cc1e-480a-b0cf-2ad97e598d25,DISK], DatanodeInfoWithStorage[127.0.0.1:37619,DS-75ab1909-6076-4074-8740-e7e8d72d17eb,DISK], DatanodeInfoWithStorage[127.0.0.1:39835,DS-cfd6a2ad-1b3a-43a4-b1c4-a06d6492e46f,DISK], DatanodeInfoWithStorage[127.0.0.1:46433,DS-84a8e2db-7907-45da-ae8e-cf0ffd7d146f,DISK], DatanodeInfoWithStorage[127.0.0.1:38703,DS-be0cfaf0-25f1-488f-8bca-1d1be1aabc25,DISK], DatanodeInfoWithStorage[127.0.0.1:37277,DS-d3fa5ad3-9dc6-4436-a03e-df58c898e8eb,DISK], DatanodeInfoWithStorage[127.0.0.1:42594,DS-ec2f778c-c85c-40dd-b123-550ecd056258,DISK]]; indices=[0, 1, 2, 3, 5, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-65144240-172.17.0.18-1596979018433:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34684,DS-f4eb03bb-7f65-4d29-a0ce-69591a53a0c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46449,DS-ea5dbec1-37b0-4c2b-90ce-043980e529de,DISK], DatanodeInfoWithStorage[127.0.0.1:36894,DS-266f6057-6de9-4dc0-9e6a-7685f43f4c24,DISK], DatanodeInfoWithStorage[127.0.0.1:36249,DS-85ddc86e-38d5-4b98-bd0d-4793538ad153,DISK], DatanodeInfoWithStorage[127.0.0.1:42346,DS-1beaa80b-35f1-4016-986c-cc32e9bc208c,DISK], DatanodeInfoWithStorage[127.0.0.1:38673,DS-42310456-556f-4166-8c05-bc24dcdced6a,DISK], DatanodeInfoWithStorage[127.0.0.1:39176,DS-fdcbad17-d556-48f2-8516-155616ba16f8,DISK]]; indices=[1, 2, 3, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-65144240-172.17.0.18-1596979018433:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34684,DS-f4eb03bb-7f65-4d29-a0ce-69591a53a0c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46449,DS-ea5dbec1-37b0-4c2b-90ce-043980e529de,DISK], DatanodeInfoWithStorage[127.0.0.1:36894,DS-266f6057-6de9-4dc0-9e6a-7685f43f4c24,DISK], DatanodeInfoWithStorage[127.0.0.1:36249,DS-85ddc86e-38d5-4b98-bd0d-4793538ad153,DISK], DatanodeInfoWithStorage[127.0.0.1:42346,DS-1beaa80b-35f1-4016-986c-cc32e9bc208c,DISK], DatanodeInfoWithStorage[127.0.0.1:38673,DS-42310456-556f-4166-8c05-bc24dcdced6a,DISK], DatanodeInfoWithStorage[127.0.0.1:39176,DS-fdcbad17-d556-48f2-8516-155616ba16f8,DISK]]; indices=[1, 2, 3, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-65144240-172.17.0.18-1596979018433:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34684,DS-f4eb03bb-7f65-4d29-a0ce-69591a53a0c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46449,DS-ea5dbec1-37b0-4c2b-90ce-043980e529de,DISK], DatanodeInfoWithStorage[127.0.0.1:36894,DS-266f6057-6de9-4dc0-9e6a-7685f43f4c24,DISK], DatanodeInfoWithStorage[127.0.0.1:36249,DS-85ddc86e-38d5-4b98-bd0d-4793538ad153,DISK], DatanodeInfoWithStorage[127.0.0.1:42346,DS-1beaa80b-35f1-4016-986c-cc32e9bc208c,DISK], DatanodeInfoWithStorage[127.0.0.1:38673,DS-42310456-556f-4166-8c05-bc24dcdced6a,DISK], DatanodeInfoWithStorage[127.0.0.1:39176,DS-fdcbad17-d556-48f2-8516-155616ba16f8,DISK]]; indices=[1, 2, 3, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-65144240-172.17.0.18-1596979018433:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34684,DS-f4eb03bb-7f65-4d29-a0ce-69591a53a0c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46449,DS-ea5dbec1-37b0-4c2b-90ce-043980e529de,DISK], DatanodeInfoWithStorage[127.0.0.1:36894,DS-266f6057-6de9-4dc0-9e6a-7685f43f4c24,DISK], DatanodeInfoWithStorage[127.0.0.1:36249,DS-85ddc86e-38d5-4b98-bd0d-4793538ad153,DISK], DatanodeInfoWithStorage[127.0.0.1:42346,DS-1beaa80b-35f1-4016-986c-cc32e9bc208c,DISK], DatanodeInfoWithStorage[127.0.0.1:38673,DS-42310456-556f-4166-8c05-bc24dcdced6a,DISK], DatanodeInfoWithStorage[127.0.0.1:39176,DS-fdcbad17-d556-48f2-8516-155616ba16f8,DISK]]; indices=[1, 2, 3, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-379776526-172.17.0.18-1596979830089:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34724,DS-38094636-4b90-4bb5-bf49-27596289e971,DISK], DatanodeInfoWithStorage[127.0.0.1:42766,DS-e5ddd888-50d4-460c-8bf6-5536bf8be41c,DISK], DatanodeInfoWithStorage[127.0.0.1:39705,DS-d410bbaa-9d6c-4d98-b853-a8452996b5ae,DISK], DatanodeInfoWithStorage[127.0.0.1:40255,DS-7f5d4831-6c3e-493f-8b3a-e4d003a944ca,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,DS-b1cd37bf-fbfb-4c58-8519-2790285b6898,DISK], DatanodeInfoWithStorage[127.0.0.1:45330,DS-ac84c8a9-7054-4e95-98f5-ff2673a5d506,DISK]]; indices=[0, 4, 5, 6, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-379776526-172.17.0.18-1596979830089:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34724,DS-38094636-4b90-4bb5-bf49-27596289e971,DISK], DatanodeInfoWithStorage[127.0.0.1:42766,DS-e5ddd888-50d4-460c-8bf6-5536bf8be41c,DISK], DatanodeInfoWithStorage[127.0.0.1:39705,DS-d410bbaa-9d6c-4d98-b853-a8452996b5ae,DISK], DatanodeInfoWithStorage[127.0.0.1:40255,DS-7f5d4831-6c3e-493f-8b3a-e4d003a944ca,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,DS-b1cd37bf-fbfb-4c58-8519-2790285b6898,DISK], DatanodeInfoWithStorage[127.0.0.1:45330,DS-ac84c8a9-7054-4e95-98f5-ff2673a5d506,DISK]]; indices=[0, 4, 5, 6, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-379776526-172.17.0.18-1596979830089:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34724,DS-38094636-4b90-4bb5-bf49-27596289e971,DISK], DatanodeInfoWithStorage[127.0.0.1:42766,DS-e5ddd888-50d4-460c-8bf6-5536bf8be41c,DISK], DatanodeInfoWithStorage[127.0.0.1:39705,DS-d410bbaa-9d6c-4d98-b853-a8452996b5ae,DISK], DatanodeInfoWithStorage[127.0.0.1:40255,DS-7f5d4831-6c3e-493f-8b3a-e4d003a944ca,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,DS-b1cd37bf-fbfb-4c58-8519-2790285b6898,DISK], DatanodeInfoWithStorage[127.0.0.1:45330,DS-ac84c8a9-7054-4e95-98f5-ff2673a5d506,DISK]]; indices=[0, 4, 5, 6, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-379776526-172.17.0.18-1596979830089:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34724,DS-38094636-4b90-4bb5-bf49-27596289e971,DISK], DatanodeInfoWithStorage[127.0.0.1:42766,DS-e5ddd888-50d4-460c-8bf6-5536bf8be41c,DISK], DatanodeInfoWithStorage[127.0.0.1:39705,DS-d410bbaa-9d6c-4d98-b853-a8452996b5ae,DISK], DatanodeInfoWithStorage[127.0.0.1:40255,DS-7f5d4831-6c3e-493f-8b3a-e4d003a944ca,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,DS-b1cd37bf-fbfb-4c58-8519-2790285b6898,DISK], DatanodeInfoWithStorage[127.0.0.1:45330,DS-ac84c8a9-7054-4e95-98f5-ff2673a5d506,DISK]]; indices=[0, 4, 5, 6, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-594266730-172.17.0.18-1596980095210:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39007,DS-23f84b9b-9996-4589-ba3a-06ff4023e4be,DISK], DatanodeInfoWithStorage[127.0.0.1:35287,DS-62be3b2d-cabd-4ed4-aed4-da19c5fd5abf,DISK], DatanodeInfoWithStorage[127.0.0.1:46131,DS-1ce61053-c6ef-4f65-878d-58050abb9768,DISK], DatanodeInfoWithStorage[127.0.0.1:44875,DS-c8d2f6af-edf9-4a22-b7d7-e73b431088f5,DISK], DatanodeInfoWithStorage[127.0.0.1:39875,DS-9ac8ecb2-22b7-4bde-8962-096ea4376b5b,DISK], DatanodeInfoWithStorage[127.0.0.1:32956,DS-7991ccf8-1d32-4cf8-9766-eed4eccb69b0,DISK]]; indices=[2, 3, 4, 5, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-594266730-172.17.0.18-1596980095210:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39007,DS-23f84b9b-9996-4589-ba3a-06ff4023e4be,DISK], DatanodeInfoWithStorage[127.0.0.1:35287,DS-62be3b2d-cabd-4ed4-aed4-da19c5fd5abf,DISK], DatanodeInfoWithStorage[127.0.0.1:46131,DS-1ce61053-c6ef-4f65-878d-58050abb9768,DISK], DatanodeInfoWithStorage[127.0.0.1:44875,DS-c8d2f6af-edf9-4a22-b7d7-e73b431088f5,DISK], DatanodeInfoWithStorage[127.0.0.1:39875,DS-9ac8ecb2-22b7-4bde-8962-096ea4376b5b,DISK], DatanodeInfoWithStorage[127.0.0.1:32956,DS-7991ccf8-1d32-4cf8-9766-eed4eccb69b0,DISK]]; indices=[2, 3, 4, 5, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-594266730-172.17.0.18-1596980095210:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39007,DS-23f84b9b-9996-4589-ba3a-06ff4023e4be,DISK], DatanodeInfoWithStorage[127.0.0.1:35287,DS-62be3b2d-cabd-4ed4-aed4-da19c5fd5abf,DISK], DatanodeInfoWithStorage[127.0.0.1:46131,DS-1ce61053-c6ef-4f65-878d-58050abb9768,DISK], DatanodeInfoWithStorage[127.0.0.1:44875,DS-c8d2f6af-edf9-4a22-b7d7-e73b431088f5,DISK], DatanodeInfoWithStorage[127.0.0.1:39875,DS-9ac8ecb2-22b7-4bde-8962-096ea4376b5b,DISK], DatanodeInfoWithStorage[127.0.0.1:32956,DS-7991ccf8-1d32-4cf8-9766-eed4eccb69b0,DISK]]; indices=[2, 3, 4, 5, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-594266730-172.17.0.18-1596980095210:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39007,DS-23f84b9b-9996-4589-ba3a-06ff4023e4be,DISK], DatanodeInfoWithStorage[127.0.0.1:35287,DS-62be3b2d-cabd-4ed4-aed4-da19c5fd5abf,DISK], DatanodeInfoWithStorage[127.0.0.1:46131,DS-1ce61053-c6ef-4f65-878d-58050abb9768,DISK], DatanodeInfoWithStorage[127.0.0.1:44875,DS-c8d2f6af-edf9-4a22-b7d7-e73b431088f5,DISK], DatanodeInfoWithStorage[127.0.0.1:39875,DS-9ac8ecb2-22b7-4bde-8962-096ea4376b5b,DISK], DatanodeInfoWithStorage[127.0.0.1:32956,DS-7991ccf8-1d32-4cf8-9766-eed4eccb69b0,DISK]]; indices=[2, 3, 4, 5, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1617702630-172.17.0.18-1596980844788:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33583,DS-014e6449-5585-4b4a-b848-f57af60ae34e,DISK], DatanodeInfoWithStorage[127.0.0.1:46461,DS-6e7b9e2d-23b5-4ef0-9edc-694b8001ca7d,DISK], DatanodeInfoWithStorage[127.0.0.1:33272,DS-4a3a4f9d-72db-4a21-9699-e0f8c200f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:42258,DS-444bed5b-af75-4a61-b144-01fc8795929a,DISK], DatanodeInfoWithStorage[127.0.0.1:40130,DS-2f7cc87c-448b-4134-82f9-6a365625acad,DISK], DatanodeInfoWithStorage[127.0.0.1:41508,DS-84de7dd4-c8b7-4dff-b853-79745b5d7c32,DISK], DatanodeInfoWithStorage[127.0.0.1:43222,DS-a08cc059-a6a7-4035-90be-57d1eaa5df96,DISK]]; indices=[1, 2, 3, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1617702630-172.17.0.18-1596980844788:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33583,DS-014e6449-5585-4b4a-b848-f57af60ae34e,DISK], DatanodeInfoWithStorage[127.0.0.1:46461,DS-6e7b9e2d-23b5-4ef0-9edc-694b8001ca7d,DISK], DatanodeInfoWithStorage[127.0.0.1:33272,DS-4a3a4f9d-72db-4a21-9699-e0f8c200f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:42258,DS-444bed5b-af75-4a61-b144-01fc8795929a,DISK], DatanodeInfoWithStorage[127.0.0.1:40130,DS-2f7cc87c-448b-4134-82f9-6a365625acad,DISK], DatanodeInfoWithStorage[127.0.0.1:41508,DS-84de7dd4-c8b7-4dff-b853-79745b5d7c32,DISK], DatanodeInfoWithStorage[127.0.0.1:43222,DS-a08cc059-a6a7-4035-90be-57d1eaa5df96,DISK]]; indices=[1, 2, 3, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1617702630-172.17.0.18-1596980844788:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33583,DS-014e6449-5585-4b4a-b848-f57af60ae34e,DISK], DatanodeInfoWithStorage[127.0.0.1:46461,DS-6e7b9e2d-23b5-4ef0-9edc-694b8001ca7d,DISK], DatanodeInfoWithStorage[127.0.0.1:33272,DS-4a3a4f9d-72db-4a21-9699-e0f8c200f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:42258,DS-444bed5b-af75-4a61-b144-01fc8795929a,DISK], DatanodeInfoWithStorage[127.0.0.1:40130,DS-2f7cc87c-448b-4134-82f9-6a365625acad,DISK], DatanodeInfoWithStorage[127.0.0.1:41508,DS-84de7dd4-c8b7-4dff-b853-79745b5d7c32,DISK], DatanodeInfoWithStorage[127.0.0.1:43222,DS-a08cc059-a6a7-4035-90be-57d1eaa5df96,DISK]]; indices=[1, 2, 3, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1617702630-172.17.0.18-1596980844788:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33583,DS-014e6449-5585-4b4a-b848-f57af60ae34e,DISK], DatanodeInfoWithStorage[127.0.0.1:46461,DS-6e7b9e2d-23b5-4ef0-9edc-694b8001ca7d,DISK], DatanodeInfoWithStorage[127.0.0.1:33272,DS-4a3a4f9d-72db-4a21-9699-e0f8c200f2c5,DISK], DatanodeInfoWithStorage[127.0.0.1:42258,DS-444bed5b-af75-4a61-b144-01fc8795929a,DISK], DatanodeInfoWithStorage[127.0.0.1:40130,DS-2f7cc87c-448b-4134-82f9-6a365625acad,DISK], DatanodeInfoWithStorage[127.0.0.1:41508,DS-84de7dd4-c8b7-4dff-b853-79745b5d7c32,DISK], DatanodeInfoWithStorage[127.0.0.1:43222,DS-a08cc059-a6a7-4035-90be-57d1eaa5df96,DISK]]; indices=[1, 2, 3, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-262449376-172.17.0.18-1596981059509:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33185,DS-3f222c2a-ad4c-463d-9d4c-7a5f25fc41d6,DISK], DatanodeInfoWithStorage[127.0.0.1:42929,DS-cee037dc-8b0e-4ac1-abcc-fc8b9d2326cd,DISK], DatanodeInfoWithStorage[127.0.0.1:44531,DS-8cd0eb3a-d569-4ab1-8464-a153268dd073,DISK], DatanodeInfoWithStorage[127.0.0.1:42854,DS-6099de95-35da-45ed-b767-ec134496cb4f,DISK], DatanodeInfoWithStorage[127.0.0.1:46725,DS-1cc9de6a-3338-4f27-ae15-6ee210595c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:43364,DS-384d3350-d5e0-4bfd-820f-c21b4cd9c13d,DISK], DatanodeInfoWithStorage[127.0.0.1:32904,DS-db7d247e-9122-4ed2-bbc6-1dcb983a007e,DISK]]; indices=[1, 2, 4, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-262449376-172.17.0.18-1596981059509:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33185,DS-3f222c2a-ad4c-463d-9d4c-7a5f25fc41d6,DISK], DatanodeInfoWithStorage[127.0.0.1:42929,DS-cee037dc-8b0e-4ac1-abcc-fc8b9d2326cd,DISK], DatanodeInfoWithStorage[127.0.0.1:44531,DS-8cd0eb3a-d569-4ab1-8464-a153268dd073,DISK], DatanodeInfoWithStorage[127.0.0.1:42854,DS-6099de95-35da-45ed-b767-ec134496cb4f,DISK], DatanodeInfoWithStorage[127.0.0.1:46725,DS-1cc9de6a-3338-4f27-ae15-6ee210595c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:43364,DS-384d3350-d5e0-4bfd-820f-c21b4cd9c13d,DISK], DatanodeInfoWithStorage[127.0.0.1:32904,DS-db7d247e-9122-4ed2-bbc6-1dcb983a007e,DISK]]; indices=[1, 2, 4, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-262449376-172.17.0.18-1596981059509:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33185,DS-3f222c2a-ad4c-463d-9d4c-7a5f25fc41d6,DISK], DatanodeInfoWithStorage[127.0.0.1:42929,DS-cee037dc-8b0e-4ac1-abcc-fc8b9d2326cd,DISK], DatanodeInfoWithStorage[127.0.0.1:44531,DS-8cd0eb3a-d569-4ab1-8464-a153268dd073,DISK], DatanodeInfoWithStorage[127.0.0.1:42854,DS-6099de95-35da-45ed-b767-ec134496cb4f,DISK], DatanodeInfoWithStorage[127.0.0.1:46725,DS-1cc9de6a-3338-4f27-ae15-6ee210595c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:43364,DS-384d3350-d5e0-4bfd-820f-c21b4cd9c13d,DISK], DatanodeInfoWithStorage[127.0.0.1:32904,DS-db7d247e-9122-4ed2-bbc6-1dcb983a007e,DISK]]; indices=[1, 2, 4, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-262449376-172.17.0.18-1596981059509:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33185,DS-3f222c2a-ad4c-463d-9d4c-7a5f25fc41d6,DISK], DatanodeInfoWithStorage[127.0.0.1:42929,DS-cee037dc-8b0e-4ac1-abcc-fc8b9d2326cd,DISK], DatanodeInfoWithStorage[127.0.0.1:44531,DS-8cd0eb3a-d569-4ab1-8464-a153268dd073,DISK], DatanodeInfoWithStorage[127.0.0.1:42854,DS-6099de95-35da-45ed-b767-ec134496cb4f,DISK], DatanodeInfoWithStorage[127.0.0.1:46725,DS-1cc9de6a-3338-4f27-ae15-6ee210595c6a,DISK], DatanodeInfoWithStorage[127.0.0.1:43364,DS-384d3350-d5e0-4bfd-820f-c21b4cd9c13d,DISK], DatanodeInfoWithStorage[127.0.0.1:32904,DS-db7d247e-9122-4ed2-bbc6-1dcb983a007e,DISK]]; indices=[1, 2, 4, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2085510741-172.17.0.18-1596981367617:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43012,DS-fd85b2e7-d3b8-4dd3-9eb1-09f6da9d6063,DISK], DatanodeInfoWithStorage[127.0.0.1:44940,DS-2137b2cd-d485-4ccc-95e4-bcf57181599a,DISK], DatanodeInfoWithStorage[127.0.0.1:39189,DS-5e32ada1-9391-4f80-a828-d189ad3d2a36,DISK], DatanodeInfoWithStorage[127.0.0.1:42787,DS-d669e6fd-5ae5-401a-83b0-ec2c11d51c04,DISK], DatanodeInfoWithStorage[127.0.0.1:41419,DS-0d908b11-b218-4b7f-aff0-efa42213b8a8,DISK], DatanodeInfoWithStorage[127.0.0.1:40142,DS-0791490f-dae7-4279-a5ad-99f988dad63c,DISK], DatanodeInfoWithStorage[127.0.0.1:42389,DS-74621eac-55f3-4151-8466-d1fe92a9bbbe,DISK]]; indices=[1, 2, 4, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2085510741-172.17.0.18-1596981367617:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43012,DS-fd85b2e7-d3b8-4dd3-9eb1-09f6da9d6063,DISK], DatanodeInfoWithStorage[127.0.0.1:44940,DS-2137b2cd-d485-4ccc-95e4-bcf57181599a,DISK], DatanodeInfoWithStorage[127.0.0.1:39189,DS-5e32ada1-9391-4f80-a828-d189ad3d2a36,DISK], DatanodeInfoWithStorage[127.0.0.1:42787,DS-d669e6fd-5ae5-401a-83b0-ec2c11d51c04,DISK], DatanodeInfoWithStorage[127.0.0.1:41419,DS-0d908b11-b218-4b7f-aff0-efa42213b8a8,DISK], DatanodeInfoWithStorage[127.0.0.1:40142,DS-0791490f-dae7-4279-a5ad-99f988dad63c,DISK], DatanodeInfoWithStorage[127.0.0.1:42389,DS-74621eac-55f3-4151-8466-d1fe92a9bbbe,DISK]]; indices=[1, 2, 4, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2085510741-172.17.0.18-1596981367617:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43012,DS-fd85b2e7-d3b8-4dd3-9eb1-09f6da9d6063,DISK], DatanodeInfoWithStorage[127.0.0.1:44940,DS-2137b2cd-d485-4ccc-95e4-bcf57181599a,DISK], DatanodeInfoWithStorage[127.0.0.1:39189,DS-5e32ada1-9391-4f80-a828-d189ad3d2a36,DISK], DatanodeInfoWithStorage[127.0.0.1:42787,DS-d669e6fd-5ae5-401a-83b0-ec2c11d51c04,DISK], DatanodeInfoWithStorage[127.0.0.1:41419,DS-0d908b11-b218-4b7f-aff0-efa42213b8a8,DISK], DatanodeInfoWithStorage[127.0.0.1:40142,DS-0791490f-dae7-4279-a5ad-99f988dad63c,DISK], DatanodeInfoWithStorage[127.0.0.1:42389,DS-74621eac-55f3-4151-8466-d1fe92a9bbbe,DISK]]; indices=[1, 2, 4, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2085510741-172.17.0.18-1596981367617:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43012,DS-fd85b2e7-d3b8-4dd3-9eb1-09f6da9d6063,DISK], DatanodeInfoWithStorage[127.0.0.1:44940,DS-2137b2cd-d485-4ccc-95e4-bcf57181599a,DISK], DatanodeInfoWithStorage[127.0.0.1:39189,DS-5e32ada1-9391-4f80-a828-d189ad3d2a36,DISK], DatanodeInfoWithStorage[127.0.0.1:42787,DS-d669e6fd-5ae5-401a-83b0-ec2c11d51c04,DISK], DatanodeInfoWithStorage[127.0.0.1:41419,DS-0d908b11-b218-4b7f-aff0-efa42213b8a8,DISK], DatanodeInfoWithStorage[127.0.0.1:40142,DS-0791490f-dae7-4279-a5ad-99f988dad63c,DISK], DatanodeInfoWithStorage[127.0.0.1:42389,DS-74621eac-55f3-4151-8466-d1fe92a9bbbe,DISK]]; indices=[1, 2, 4, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1855864098-172.17.0.18-1596982018113:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36831,DS-984c07bd-a888-48b8-bf91-c649274e0bbc,DISK], DatanodeInfoWithStorage[127.0.0.1:36699,DS-e871103b-a122-4671-be61-ac9f6e056cb6,DISK], DatanodeInfoWithStorage[127.0.0.1:33510,DS-365b78d5-8c77-4516-a6f7-8f802a48f6e9,DISK], DatanodeInfoWithStorage[127.0.0.1:34553,DS-1bca7f89-b83b-40dd-81a5-38bad63bbeb4,DISK], DatanodeInfoWithStorage[127.0.0.1:33924,DS-cd010b70-7387-4f8e-b181-2eb567e8901d,DISK], DatanodeInfoWithStorage[127.0.0.1:45321,DS-8532a4d3-73ad-4b2e-9410-a53625e99333,DISK], DatanodeInfoWithStorage[127.0.0.1:37444,DS-8133ab4a-6718-4376-885e-8d37331f579a,DISK]]; indices=[0, 2, 4, 5, 7, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1855864098-172.17.0.18-1596982018113:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36831,DS-984c07bd-a888-48b8-bf91-c649274e0bbc,DISK], DatanodeInfoWithStorage[127.0.0.1:36699,DS-e871103b-a122-4671-be61-ac9f6e056cb6,DISK], DatanodeInfoWithStorage[127.0.0.1:33510,DS-365b78d5-8c77-4516-a6f7-8f802a48f6e9,DISK], DatanodeInfoWithStorage[127.0.0.1:34553,DS-1bca7f89-b83b-40dd-81a5-38bad63bbeb4,DISK], DatanodeInfoWithStorage[127.0.0.1:33924,DS-cd010b70-7387-4f8e-b181-2eb567e8901d,DISK], DatanodeInfoWithStorage[127.0.0.1:45321,DS-8532a4d3-73ad-4b2e-9410-a53625e99333,DISK], DatanodeInfoWithStorage[127.0.0.1:37444,DS-8133ab4a-6718-4376-885e-8d37331f579a,DISK]]; indices=[0, 2, 4, 5, 7, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1855864098-172.17.0.18-1596982018113:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36831,DS-984c07bd-a888-48b8-bf91-c649274e0bbc,DISK], DatanodeInfoWithStorage[127.0.0.1:36699,DS-e871103b-a122-4671-be61-ac9f6e056cb6,DISK], DatanodeInfoWithStorage[127.0.0.1:33510,DS-365b78d5-8c77-4516-a6f7-8f802a48f6e9,DISK], DatanodeInfoWithStorage[127.0.0.1:34553,DS-1bca7f89-b83b-40dd-81a5-38bad63bbeb4,DISK], DatanodeInfoWithStorage[127.0.0.1:33924,DS-cd010b70-7387-4f8e-b181-2eb567e8901d,DISK], DatanodeInfoWithStorage[127.0.0.1:45321,DS-8532a4d3-73ad-4b2e-9410-a53625e99333,DISK], DatanodeInfoWithStorage[127.0.0.1:37444,DS-8133ab4a-6718-4376-885e-8d37331f579a,DISK]]; indices=[0, 2, 4, 5, 7, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1855864098-172.17.0.18-1596982018113:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36831,DS-984c07bd-a888-48b8-bf91-c649274e0bbc,DISK], DatanodeInfoWithStorage[127.0.0.1:36699,DS-e871103b-a122-4671-be61-ac9f6e056cb6,DISK], DatanodeInfoWithStorage[127.0.0.1:33510,DS-365b78d5-8c77-4516-a6f7-8f802a48f6e9,DISK], DatanodeInfoWithStorage[127.0.0.1:34553,DS-1bca7f89-b83b-40dd-81a5-38bad63bbeb4,DISK], DatanodeInfoWithStorage[127.0.0.1:33924,DS-cd010b70-7387-4f8e-b181-2eb567e8901d,DISK], DatanodeInfoWithStorage[127.0.0.1:45321,DS-8532a4d3-73ad-4b2e-9410-a53625e99333,DISK], DatanodeInfoWithStorage[127.0.0.1:37444,DS-8133ab4a-6718-4376-885e-8d37331f579a,DISK]]; indices=[0, 2, 4, 5, 7, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1078996448-172.17.0.18-1596982395134:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45560,DS-2afe6b9a-1990-4c49-a375-de5d336543fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37294,DS-a5cfdf61-7a27-4c4c-8fd7-2c2ad3faad7c,DISK], DatanodeInfoWithStorage[127.0.0.1:45007,DS-19cb1f45-cdfb-4d95-b1fb-b2605c23b944,DISK], DatanodeInfoWithStorage[127.0.0.1:40070,DS-4a95f02f-9258-421f-aae2-4f6d68780070,DISK], DatanodeInfoWithStorage[127.0.0.1:37175,DS-dbc511fd-5b66-4f2e-9c29-99ed9cd67200,DISK], DatanodeInfoWithStorage[127.0.0.1:36956,DS-0b58edd1-cd2f-4b79-9274-d6f4cc00709d,DISK]]; indices=[0, 1, 3, 4, 5, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1078996448-172.17.0.18-1596982395134:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45560,DS-2afe6b9a-1990-4c49-a375-de5d336543fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37294,DS-a5cfdf61-7a27-4c4c-8fd7-2c2ad3faad7c,DISK], DatanodeInfoWithStorage[127.0.0.1:45007,DS-19cb1f45-cdfb-4d95-b1fb-b2605c23b944,DISK], DatanodeInfoWithStorage[127.0.0.1:40070,DS-4a95f02f-9258-421f-aae2-4f6d68780070,DISK], DatanodeInfoWithStorage[127.0.0.1:37175,DS-dbc511fd-5b66-4f2e-9c29-99ed9cd67200,DISK], DatanodeInfoWithStorage[127.0.0.1:36956,DS-0b58edd1-cd2f-4b79-9274-d6f4cc00709d,DISK]]; indices=[0, 1, 3, 4, 5, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1078996448-172.17.0.18-1596982395134:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45560,DS-2afe6b9a-1990-4c49-a375-de5d336543fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37294,DS-a5cfdf61-7a27-4c4c-8fd7-2c2ad3faad7c,DISK], DatanodeInfoWithStorage[127.0.0.1:45007,DS-19cb1f45-cdfb-4d95-b1fb-b2605c23b944,DISK], DatanodeInfoWithStorage[127.0.0.1:40070,DS-4a95f02f-9258-421f-aae2-4f6d68780070,DISK], DatanodeInfoWithStorage[127.0.0.1:37175,DS-dbc511fd-5b66-4f2e-9c29-99ed9cd67200,DISK], DatanodeInfoWithStorage[127.0.0.1:36956,DS-0b58edd1-cd2f-4b79-9274-d6f4cc00709d,DISK]]; indices=[0, 1, 3, 4, 5, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-1078996448-172.17.0.18-1596982395134:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45560,DS-2afe6b9a-1990-4c49-a375-de5d336543fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37294,DS-a5cfdf61-7a27-4c4c-8fd7-2c2ad3faad7c,DISK], DatanodeInfoWithStorage[127.0.0.1:45007,DS-19cb1f45-cdfb-4d95-b1fb-b2605c23b944,DISK], DatanodeInfoWithStorage[127.0.0.1:40070,DS-4a95f02f-9258-421f-aae2-4f6d68780070,DISK], DatanodeInfoWithStorage[127.0.0.1:37175,DS-dbc511fd-5b66-4f2e-9c29-99ed9cd67200,DISK], DatanodeInfoWithStorage[127.0.0.1:36956,DS-0b58edd1-cd2f-4b79-9274-d6f4cc00709d,DISK]]; indices=[0, 1, 3, 4, 5, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-207904435-172.17.0.18-1596982702586:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44938,DS-86603ba9-aaeb-4050-87db-95b0e07dfcf8,DISK], DatanodeInfoWithStorage[127.0.0.1:37929,DS-808ae0bb-a4b8-461f-a047-c40ab5a13e37,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,DS-b9cc7404-64fd-47c8-ba55-42dcee30ca3d,DISK], DatanodeInfoWithStorage[127.0.0.1:43414,DS-a05b15dd-b356-4d94-97c9-a33dc0021c8a,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-2fe65ddc-1a8a-45dd-93a5-74cfea86658f,DISK], DatanodeInfoWithStorage[127.0.0.1:36624,DS-1ec21f9b-3107-4126-ad6d-2426a3168cc4,DISK]]; indices=[0, 1, 2, 6, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-207904435-172.17.0.18-1596982702586:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44938,DS-86603ba9-aaeb-4050-87db-95b0e07dfcf8,DISK], DatanodeInfoWithStorage[127.0.0.1:37929,DS-808ae0bb-a4b8-461f-a047-c40ab5a13e37,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,DS-b9cc7404-64fd-47c8-ba55-42dcee30ca3d,DISK], DatanodeInfoWithStorage[127.0.0.1:43414,DS-a05b15dd-b356-4d94-97c9-a33dc0021c8a,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-2fe65ddc-1a8a-45dd-93a5-74cfea86658f,DISK], DatanodeInfoWithStorage[127.0.0.1:36624,DS-1ec21f9b-3107-4126-ad6d-2426a3168cc4,DISK]]; indices=[0, 1, 2, 6, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-207904435-172.17.0.18-1596982702586:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44938,DS-86603ba9-aaeb-4050-87db-95b0e07dfcf8,DISK], DatanodeInfoWithStorage[127.0.0.1:37929,DS-808ae0bb-a4b8-461f-a047-c40ab5a13e37,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,DS-b9cc7404-64fd-47c8-ba55-42dcee30ca3d,DISK], DatanodeInfoWithStorage[127.0.0.1:43414,DS-a05b15dd-b356-4d94-97c9-a33dc0021c8a,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-2fe65ddc-1a8a-45dd-93a5-74cfea86658f,DISK], DatanodeInfoWithStorage[127.0.0.1:36624,DS-1ec21f9b-3107-4126-ad6d-2426a3168cc4,DISK]]; indices=[0, 1, 2, 6, 7, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-207904435-172.17.0.18-1596982702586:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44938,DS-86603ba9-aaeb-4050-87db-95b0e07dfcf8,DISK], DatanodeInfoWithStorage[127.0.0.1:37929,DS-808ae0bb-a4b8-461f-a047-c40ab5a13e37,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,DS-b9cc7404-64fd-47c8-ba55-42dcee30ca3d,DISK], DatanodeInfoWithStorage[127.0.0.1:43414,DS-a05b15dd-b356-4d94-97c9-a33dc0021c8a,DISK], DatanodeInfoWithStorage[127.0.0.1:34318,DS-2fe65ddc-1a8a-45dd-93a5-74cfea86658f,DISK], DatanodeInfoWithStorage[127.0.0.1:36624,DS-1ec21f9b-3107-4126-ad6d-2426a3168cc4,DISK]]; indices=[0, 1, 2, 6, 7, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.sync.behind.writes
component: hdfs:DataNode
v1: false
v2: true
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1375303843-172.17.0.18-1596982790154:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45689,DS-612483da-a24a-4953-ba6c-715aef86588a,DISK], DatanodeInfoWithStorage[127.0.0.1:32779,DS-e7dd9e4e-73b1-4e97-a97e-8684ac1d9c78,DISK], DatanodeInfoWithStorage[127.0.0.1:38752,DS-9a02f488-e713-4a84-ad03-173340552a28,DISK], DatanodeInfoWithStorage[127.0.0.1:45136,DS-ea901662-009e-4e60-ba03-ed1ecb3234b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43242,DS-5d83f41a-823c-42b4-9877-1e014bf1d487,DISK], DatanodeInfoWithStorage[127.0.0.1:41315,DS-9a821680-2e1e-49b4-a0bd-0a085c6574af,DISK], DatanodeInfoWithStorage[127.0.0.1:44640,DS-2b8911f2-f8d7-4292-90f3-c09c1399289a,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1375303843-172.17.0.18-1596982790154:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45689,DS-612483da-a24a-4953-ba6c-715aef86588a,DISK], DatanodeInfoWithStorage[127.0.0.1:32779,DS-e7dd9e4e-73b1-4e97-a97e-8684ac1d9c78,DISK], DatanodeInfoWithStorage[127.0.0.1:38752,DS-9a02f488-e713-4a84-ad03-173340552a28,DISK], DatanodeInfoWithStorage[127.0.0.1:45136,DS-ea901662-009e-4e60-ba03-ed1ecb3234b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43242,DS-5d83f41a-823c-42b4-9877-1e014bf1d487,DISK], DatanodeInfoWithStorage[127.0.0.1:41315,DS-9a821680-2e1e-49b4-a0bd-0a085c6574af,DISK], DatanodeInfoWithStorage[127.0.0.1:44640,DS-2b8911f2-f8d7-4292-90f3-c09c1399289a,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1375303843-172.17.0.18-1596982790154:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45689,DS-612483da-a24a-4953-ba6c-715aef86588a,DISK], DatanodeInfoWithStorage[127.0.0.1:32779,DS-e7dd9e4e-73b1-4e97-a97e-8684ac1d9c78,DISK], DatanodeInfoWithStorage[127.0.0.1:38752,DS-9a02f488-e713-4a84-ad03-173340552a28,DISK], DatanodeInfoWithStorage[127.0.0.1:45136,DS-ea901662-009e-4e60-ba03-ed1ecb3234b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43242,DS-5d83f41a-823c-42b4-9877-1e014bf1d487,DISK], DatanodeInfoWithStorage[127.0.0.1:41315,DS-9a821680-2e1e-49b4-a0bd-0a085c6574af,DISK], DatanodeInfoWithStorage[127.0.0.1:44640,DS-2b8911f2-f8d7-4292-90f3-c09c1399289a,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1375303843-172.17.0.18-1596982790154:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45689,DS-612483da-a24a-4953-ba6c-715aef86588a,DISK], DatanodeInfoWithStorage[127.0.0.1:32779,DS-e7dd9e4e-73b1-4e97-a97e-8684ac1d9c78,DISK], DatanodeInfoWithStorage[127.0.0.1:38752,DS-9a02f488-e713-4a84-ad03-173340552a28,DISK], DatanodeInfoWithStorage[127.0.0.1:45136,DS-ea901662-009e-4e60-ba03-ed1ecb3234b2,DISK], DatanodeInfoWithStorage[127.0.0.1:43242,DS-5d83f41a-823c-42b4-9877-1e014bf1d487,DISK], DatanodeInfoWithStorage[127.0.0.1:41315,DS-9a821680-2e1e-49b4-a0bd-0a085c6574af,DISK], DatanodeInfoWithStorage[127.0.0.1:44640,DS-2b8911f2-f8d7-4292-90f3-c09c1399289a,DISK]]; indices=[0, 2, 3, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 6 out of 50
v1v1v2v2 failed with probability 15 out of 50
result: false positive !!!
Total execution time in seconds : 6576
