reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1289495993-172.17.0.4-1597068750062:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38830,46b12536-1c26-48a2-9469-0e96990860f5,DISK], DatanodeInfoWithStorage[127.0.0.1:41690,02ba9742-2315-486b-80ef-f1476bf2acea,DISK], DatanodeInfoWithStorage[127.0.0.1:40180,e4b857c4-8df8-4a36-885c-69f85c251c39,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1289495993-172.17.0.4-1597068750062:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38830,4e92f3af-a2c8-4699-8644-bbee52d1f33e,DISK], DatanodeInfoWithStorage[127.0.0.1:41690,735b966f-daa1-46a0-b628-77e9bc0ff323,DISK], DatanodeInfoWithStorage[127.0.0.1:40180,5fe4b9d9-438b-40a0-9176-b70825543e4a,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1289495993-172.17.0.4-1597068750062:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38830,4e92f3af-a2c8-4699-8644-bbee52d1f33e,DISK], DatanodeInfoWithStorage[127.0.0.1:41690,735b966f-daa1-46a0-b628-77e9bc0ff323,DISK], DatanodeInfoWithStorage[127.0.0.1:40180,5fe4b9d9-438b-40a0-9176-b70825543e4a,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1289495993-172.17.0.4-1597068750062:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38830,46b12536-1c26-48a2-9469-0e96990860f5,DISK], DatanodeInfoWithStorage[127.0.0.1:41690,02ba9742-2315-486b-80ef-f1476bf2acea,DISK], DatanodeInfoWithStorage[127.0.0.1:40180,e4b857c4-8df8-4a36-885c-69f85c251c39,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1289495993-172.17.0.4-1597068750062:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38830,4e92f3af-a2c8-4699-8644-bbee52d1f33e,DISK], DatanodeInfoWithStorage[127.0.0.1:41690,735b966f-daa1-46a0-b628-77e9bc0ff323,DISK], DatanodeInfoWithStorage[127.0.0.1:40180,5fe4b9d9-438b-40a0-9176-b70825543e4a,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1289495993-172.17.0.4-1597068750062:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38830,4e92f3af-a2c8-4699-8644-bbee52d1f33e,DISK], DatanodeInfoWithStorage[127.0.0.1:41690,735b966f-daa1-46a0-b628-77e9bc0ff323,DISK], DatanodeInfoWithStorage[127.0.0.1:40180,5fe4b9d9-438b-40a0-9176-b70825543e4a,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-136333174-172.17.0.4-1597068810765:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42706,d9d27d70-87f9-4553-b132-9a1f2ec4298f,DISK], DatanodeInfoWithStorage[127.0.0.1:42897,02134486-4698-4ee9-9a4b-d3059d5e98d3,DISK], DatanodeInfoWithStorage[127.0.0.1:46545,813825a6-f3ae-40c7-8234-88a3df303edb,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-136333174-172.17.0.4-1597068810765:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42706,2f90c3d7-a91b-451c-9cbd-607d4b72a624,DISK], DatanodeInfoWithStorage[127.0.0.1:42897,cf0b150e-b189-42ad-bd21-9be23e8b7924,DISK], DatanodeInfoWithStorage[127.0.0.1:46545,5f85dc89-a873-49ca-a81c-d0670d62bc5c,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-136333174-172.17.0.4-1597068810765:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42706,2f90c3d7-a91b-451c-9cbd-607d4b72a624,DISK], DatanodeInfoWithStorage[127.0.0.1:42897,cf0b150e-b189-42ad-bd21-9be23e8b7924,DISK], DatanodeInfoWithStorage[127.0.0.1:46545,5f85dc89-a873-49ca-a81c-d0670d62bc5c,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-136333174-172.17.0.4-1597068810765:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42706,d9d27d70-87f9-4553-b132-9a1f2ec4298f,DISK], DatanodeInfoWithStorage[127.0.0.1:42897,02134486-4698-4ee9-9a4b-d3059d5e98d3,DISK], DatanodeInfoWithStorage[127.0.0.1:46545,813825a6-f3ae-40c7-8234-88a3df303edb,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-136333174-172.17.0.4-1597068810765:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42706,2f90c3d7-a91b-451c-9cbd-607d4b72a624,DISK], DatanodeInfoWithStorage[127.0.0.1:42897,cf0b150e-b189-42ad-bd21-9be23e8b7924,DISK], DatanodeInfoWithStorage[127.0.0.1:46545,5f85dc89-a873-49ca-a81c-d0670d62bc5c,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-136333174-172.17.0.4-1597068810765:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42706,2f90c3d7-a91b-451c-9cbd-607d4b72a624,DISK], DatanodeInfoWithStorage[127.0.0.1:42897,cf0b150e-b189-42ad-bd21-9be23e8b7924,DISK], DatanodeInfoWithStorage[127.0.0.1:46545,5f85dc89-a873-49ca-a81c-d0670d62bc5c,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-723306723-172.17.0.4-1597069733455:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33243,8f0abe56-36b1-4e5d-a9a7-e5247128dfcc,DISK], DatanodeInfoWithStorage[127.0.0.1:41265,b4cf7925-d05c-4864-8a87-bbb2c34463b2,DISK], DatanodeInfoWithStorage[127.0.0.1:35044,648aaccc-8b06-4726-84ce-f8b60b6f82fb,DISK], DatanodeInfoWithStorage[127.0.0.1:45815,747e3300-df8a-43e3-ad8c-876a682de2bc,DISK], DatanodeInfoWithStorage[127.0.0.1:34890,fd0ca839-4fc2-4e9b-9430-2d76557405c4,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-723306723-172.17.0.4-1597069733455:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33243,e2de032f-172e-4c0a-9d3e-15998069c2fc,DISK], DatanodeInfoWithStorage[127.0.0.1:41265,942ac1bc-870d-488b-8f62-a00f3e0871f5,DISK], DatanodeInfoWithStorage[127.0.0.1:35044,80c8595f-09dd-4d72-a55f-075f92647ffe,DISK], DatanodeInfoWithStorage[127.0.0.1:45815,23f9e182-7b49-4d99-be24-6584fd9dce6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34890,329bd624-5068-47d5-91e2-ab220f74f38d,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-723306723-172.17.0.4-1597069733455:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33243,e2de032f-172e-4c0a-9d3e-15998069c2fc,DISK], DatanodeInfoWithStorage[127.0.0.1:41265,942ac1bc-870d-488b-8f62-a00f3e0871f5,DISK], DatanodeInfoWithStorage[127.0.0.1:35044,80c8595f-09dd-4d72-a55f-075f92647ffe,DISK], DatanodeInfoWithStorage[127.0.0.1:45815,23f9e182-7b49-4d99-be24-6584fd9dce6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34890,329bd624-5068-47d5-91e2-ab220f74f38d,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-723306723-172.17.0.4-1597069733455:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33243,8f0abe56-36b1-4e5d-a9a7-e5247128dfcc,DISK], DatanodeInfoWithStorage[127.0.0.1:41265,b4cf7925-d05c-4864-8a87-bbb2c34463b2,DISK], DatanodeInfoWithStorage[127.0.0.1:35044,648aaccc-8b06-4726-84ce-f8b60b6f82fb,DISK], DatanodeInfoWithStorage[127.0.0.1:45815,747e3300-df8a-43e3-ad8c-876a682de2bc,DISK], DatanodeInfoWithStorage[127.0.0.1:34890,fd0ca839-4fc2-4e9b-9430-2d76557405c4,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-723306723-172.17.0.4-1597069733455:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33243,e2de032f-172e-4c0a-9d3e-15998069c2fc,DISK], DatanodeInfoWithStorage[127.0.0.1:41265,942ac1bc-870d-488b-8f62-a00f3e0871f5,DISK], DatanodeInfoWithStorage[127.0.0.1:35044,80c8595f-09dd-4d72-a55f-075f92647ffe,DISK], DatanodeInfoWithStorage[127.0.0.1:45815,23f9e182-7b49-4d99-be24-6584fd9dce6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34890,329bd624-5068-47d5-91e2-ab220f74f38d,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-723306723-172.17.0.4-1597069733455:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33243,e2de032f-172e-4c0a-9d3e-15998069c2fc,DISK], DatanodeInfoWithStorage[127.0.0.1:41265,942ac1bc-870d-488b-8f62-a00f3e0871f5,DISK], DatanodeInfoWithStorage[127.0.0.1:35044,80c8595f-09dd-4d72-a55f-075f92647ffe,DISK], DatanodeInfoWithStorage[127.0.0.1:45815,23f9e182-7b49-4d99-be24-6584fd9dce6e,DISK], DatanodeInfoWithStorage[127.0.0.1:34890,329bd624-5068-47d5-91e2-ab220f74f38d,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1736629513-172.17.0.4-1597069763637:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40222,8adb3370-1c3c-4170-89e3-1052502c3d04,DISK], DatanodeInfoWithStorage[127.0.0.1:43144,3a205c86-62d1-4adc-b22b-2c77765f9adb,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,d76813cb-b7d9-4078-bf40-c1a9a77ff7f3,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1736629513-172.17.0.4-1597069763637:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40222,9ea1cac8-29b8-4b0a-9267-6488de51877c,DISK], DatanodeInfoWithStorage[127.0.0.1:43144,c9d09480-1429-40b9-b7e2-255d53811c81,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,acacfb07-8812-4b98-ad20-4b43f17a5c4c,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1736629513-172.17.0.4-1597069763637:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40222,9ea1cac8-29b8-4b0a-9267-6488de51877c,DISK], DatanodeInfoWithStorage[127.0.0.1:43144,c9d09480-1429-40b9-b7e2-255d53811c81,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,acacfb07-8812-4b98-ad20-4b43f17a5c4c,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1736629513-172.17.0.4-1597069763637:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40222,8adb3370-1c3c-4170-89e3-1052502c3d04,DISK], DatanodeInfoWithStorage[127.0.0.1:43144,3a205c86-62d1-4adc-b22b-2c77765f9adb,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,d76813cb-b7d9-4078-bf40-c1a9a77ff7f3,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1736629513-172.17.0.4-1597069763637:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40222,9ea1cac8-29b8-4b0a-9267-6488de51877c,DISK], DatanodeInfoWithStorage[127.0.0.1:43144,c9d09480-1429-40b9-b7e2-255d53811c81,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,acacfb07-8812-4b98-ad20-4b43f17a5c4c,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1736629513-172.17.0.4-1597069763637:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40222,9ea1cac8-29b8-4b0a-9267-6488de51877c,DISK], DatanodeInfoWithStorage[127.0.0.1:43144,c9d09480-1429-40b9-b7e2-255d53811c81,DISK], DatanodeInfoWithStorage[127.0.0.1:44086,acacfb07-8812-4b98-ad20-4b43f17a5c4c,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1783424970-172.17.0.4-1597070131301:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43291,1ed824f0-d475-4832-9bef-e1e0a6b6a186,DISK], DatanodeInfoWithStorage[127.0.0.1:44018,0b3ebd8a-745d-4bd5-a690-1c600393685c,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,7d9c5869-3a22-465c-a123-fd0bef76ff9a,DISK], DatanodeInfoWithStorage[127.0.0.1:40739,118be898-ea01-4854-bf89-6c8644eccc80,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,627b6d39-c09c-4286-842b-bff847eb88e6,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1783424970-172.17.0.4-1597070131301:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43291,aa5df81f-1c03-4a3a-9079-05d6f05c69cb,DISK], DatanodeInfoWithStorage[127.0.0.1:44018,02412701-7d2b-4b27-bb28-941a0a36cad4,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,ebe29933-39ae-421c-bbc4-72948c4b4d50,DISK], DatanodeInfoWithStorage[127.0.0.1:40739,5d8383f9-3f07-4edf-8f4c-92c66f880f96,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,1f1b8363-5491-4f02-8d2c-082cecbeeb83,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1783424970-172.17.0.4-1597070131301:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43291,aa5df81f-1c03-4a3a-9079-05d6f05c69cb,DISK], DatanodeInfoWithStorage[127.0.0.1:44018,02412701-7d2b-4b27-bb28-941a0a36cad4,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,ebe29933-39ae-421c-bbc4-72948c4b4d50,DISK], DatanodeInfoWithStorage[127.0.0.1:40739,5d8383f9-3f07-4edf-8f4c-92c66f880f96,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,1f1b8363-5491-4f02-8d2c-082cecbeeb83,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1783424970-172.17.0.4-1597070131301:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43291,1ed824f0-d475-4832-9bef-e1e0a6b6a186,DISK], DatanodeInfoWithStorage[127.0.0.1:44018,0b3ebd8a-745d-4bd5-a690-1c600393685c,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,7d9c5869-3a22-465c-a123-fd0bef76ff9a,DISK], DatanodeInfoWithStorage[127.0.0.1:40739,118be898-ea01-4854-bf89-6c8644eccc80,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,627b6d39-c09c-4286-842b-bff847eb88e6,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1783424970-172.17.0.4-1597070131301:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43291,aa5df81f-1c03-4a3a-9079-05d6f05c69cb,DISK], DatanodeInfoWithStorage[127.0.0.1:44018,02412701-7d2b-4b27-bb28-941a0a36cad4,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,ebe29933-39ae-421c-bbc4-72948c4b4d50,DISK], DatanodeInfoWithStorage[127.0.0.1:40739,5d8383f9-3f07-4edf-8f4c-92c66f880f96,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,1f1b8363-5491-4f02-8d2c-082cecbeeb83,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1783424970-172.17.0.4-1597070131301:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43291,aa5df81f-1c03-4a3a-9079-05d6f05c69cb,DISK], DatanodeInfoWithStorage[127.0.0.1:44018,02412701-7d2b-4b27-bb28-941a0a36cad4,DISK], DatanodeInfoWithStorage[127.0.0.1:46823,ebe29933-39ae-421c-bbc4-72948c4b4d50,DISK], DatanodeInfoWithStorage[127.0.0.1:40739,5d8383f9-3f07-4edf-8f4c-92c66f880f96,DISK], DatanodeInfoWithStorage[127.0.0.1:32863,1f1b8363-5491-4f02-8d2c-082cecbeeb83,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2008082029-172.17.0.4-1597070687496:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37814,1f93160b-b242-4ec8-afdf-417f5193f507,DISK], DatanodeInfoWithStorage[127.0.0.1:44643,59458c62-8fb0-4d5e-b513-76b6ec8cacee,DISK], DatanodeInfoWithStorage[127.0.0.1:43341,2a49a968-65a7-4cbb-9273-5f21cea577fa,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-2008082029-172.17.0.4-1597070687496:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37814,60c1b40b-78e5-4378-b852-3f53da0e1b8a,DISK], DatanodeInfoWithStorage[127.0.0.1:44643,056e1b0b-d169-4d81-b333-20c7abd2685e,DISK], DatanodeInfoWithStorage[127.0.0.1:43341,53b4c3a8-a345-4952-84fe-a9c1c4136e2d,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-2008082029-172.17.0.4-1597070687496:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37814,60c1b40b-78e5-4378-b852-3f53da0e1b8a,DISK], DatanodeInfoWithStorage[127.0.0.1:44643,056e1b0b-d169-4d81-b333-20c7abd2685e,DISK], DatanodeInfoWithStorage[127.0.0.1:43341,53b4c3a8-a345-4952-84fe-a9c1c4136e2d,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2008082029-172.17.0.4-1597070687496:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37814,1f93160b-b242-4ec8-afdf-417f5193f507,DISK], DatanodeInfoWithStorage[127.0.0.1:44643,59458c62-8fb0-4d5e-b513-76b6ec8cacee,DISK], DatanodeInfoWithStorage[127.0.0.1:43341,2a49a968-65a7-4cbb-9273-5f21cea577fa,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-2008082029-172.17.0.4-1597070687496:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37814,60c1b40b-78e5-4378-b852-3f53da0e1b8a,DISK], DatanodeInfoWithStorage[127.0.0.1:44643,056e1b0b-d169-4d81-b333-20c7abd2685e,DISK], DatanodeInfoWithStorage[127.0.0.1:43341,53b4c3a8-a345-4952-84fe-a9c1c4136e2d,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-2008082029-172.17.0.4-1597070687496:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37814,60c1b40b-78e5-4378-b852-3f53da0e1b8a,DISK], DatanodeInfoWithStorage[127.0.0.1:44643,056e1b0b-d169-4d81-b333-20c7abd2685e,DISK], DatanodeInfoWithStorage[127.0.0.1:43341,53b4c3a8-a345-4952-84fe-a9c1c4136e2d,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-841585013-172.17.0.4-1597070818228:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40422,f32ea4ba-acea-4574-8a2a-f20514999eda,DISK], DatanodeInfoWithStorage[127.0.0.1:37031,6bcb2af7-91be-4fa9-8716-41919ca6b32a,DISK], DatanodeInfoWithStorage[127.0.0.1:34605,7963b7e5-2101-4162-86b3-77cb87b75fa4,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-841585013-172.17.0.4-1597070818228:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40422,6b8dea44-81ef-4b45-a26a-9cb7879d0f40,DISK], DatanodeInfoWithStorage[127.0.0.1:37031,499eb6e1-b0b1-478b-b5db-b78971943700,DISK], DatanodeInfoWithStorage[127.0.0.1:34605,49275620-6c6d-4830-a59a-c418f1d9c21b,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-841585013-172.17.0.4-1597070818228:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40422,6b8dea44-81ef-4b45-a26a-9cb7879d0f40,DISK], DatanodeInfoWithStorage[127.0.0.1:37031,499eb6e1-b0b1-478b-b5db-b78971943700,DISK], DatanodeInfoWithStorage[127.0.0.1:34605,49275620-6c6d-4830-a59a-c418f1d9c21b,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-841585013-172.17.0.4-1597070818228:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40422,f32ea4ba-acea-4574-8a2a-f20514999eda,DISK], DatanodeInfoWithStorage[127.0.0.1:37031,6bcb2af7-91be-4fa9-8716-41919ca6b32a,DISK], DatanodeInfoWithStorage[127.0.0.1:34605,7963b7e5-2101-4162-86b3-77cb87b75fa4,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-841585013-172.17.0.4-1597070818228:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40422,6b8dea44-81ef-4b45-a26a-9cb7879d0f40,DISK], DatanodeInfoWithStorage[127.0.0.1:37031,499eb6e1-b0b1-478b-b5db-b78971943700,DISK], DatanodeInfoWithStorage[127.0.0.1:34605,49275620-6c6d-4830-a59a-c418f1d9c21b,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-841585013-172.17.0.4-1597070818228:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40422,6b8dea44-81ef-4b45-a26a-9cb7879d0f40,DISK], DatanodeInfoWithStorage[127.0.0.1:37031,499eb6e1-b0b1-478b-b5db-b78971943700,DISK], DatanodeInfoWithStorage[127.0.0.1:34605,49275620-6c6d-4830-a59a-c418f1d9c21b,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-218592584-172.17.0.4-1597070986485:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46062,f0018401-50ae-4b60-83f1-2ba7caad59d2,DISK], DatanodeInfoWithStorage[127.0.0.1:43842,78a8af67-cdd5-4626-b515-ae909004f1ee,DISK], DatanodeInfoWithStorage[127.0.0.1:40932,e61cef25-fb3f-42ef-8282-d700ea15a5c8,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-218592584-172.17.0.4-1597070986485:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46062,d60efca5-bb99-485b-bafa-47bea0a79f52,DISK], DatanodeInfoWithStorage[127.0.0.1:43842,e79fafbc-5f17-4734-9279-365394cc99e6,DISK], DatanodeInfoWithStorage[127.0.0.1:40932,27943642-221f-4f41-bf65-c1f5117ed26d,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-218592584-172.17.0.4-1597070986485:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46062,d60efca5-bb99-485b-bafa-47bea0a79f52,DISK], DatanodeInfoWithStorage[127.0.0.1:43842,e79fafbc-5f17-4734-9279-365394cc99e6,DISK], DatanodeInfoWithStorage[127.0.0.1:40932,27943642-221f-4f41-bf65-c1f5117ed26d,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-218592584-172.17.0.4-1597070986485:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46062,f0018401-50ae-4b60-83f1-2ba7caad59d2,DISK], DatanodeInfoWithStorage[127.0.0.1:43842,78a8af67-cdd5-4626-b515-ae909004f1ee,DISK], DatanodeInfoWithStorage[127.0.0.1:40932,e61cef25-fb3f-42ef-8282-d700ea15a5c8,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-218592584-172.17.0.4-1597070986485:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46062,d60efca5-bb99-485b-bafa-47bea0a79f52,DISK], DatanodeInfoWithStorage[127.0.0.1:43842,e79fafbc-5f17-4734-9279-365394cc99e6,DISK], DatanodeInfoWithStorage[127.0.0.1:40932,27943642-221f-4f41-bf65-c1f5117ed26d,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-218592584-172.17.0.4-1597070986485:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46062,d60efca5-bb99-485b-bafa-47bea0a79f52,DISK], DatanodeInfoWithStorage[127.0.0.1:43842,e79fafbc-5f17-4734-9279-365394cc99e6,DISK], DatanodeInfoWithStorage[127.0.0.1:40932,27943642-221f-4f41-bf65-c1f5117ed26d,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1691634952-172.17.0.4-1597071016113:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34399,4c048738-2d8f-4551-80c4-7f60ee9d84c9,DISK], DatanodeInfoWithStorage[127.0.0.1:34227,b6fff06d-37b0-44b0-a397-27aecabbaee1,DISK], DatanodeInfoWithStorage[127.0.0.1:46207,63589f78-8510-4696-bbca-6d18853b5419,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1691634952-172.17.0.4-1597071016113:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:34399,43a961c3-bc16-4546-8760-f2622384f818,DISK], DatanodeInfoWithStorage[127.0.0.1:34227,1420cb38-4ad4-444d-9ca9-b98b9f965201,DISK], DatanodeInfoWithStorage[127.0.0.1:46207,310e417a-fa57-4813-9380-cd9eac805e1a,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1691634952-172.17.0.4-1597071016113:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:34399,43a961c3-bc16-4546-8760-f2622384f818,DISK], DatanodeInfoWithStorage[127.0.0.1:34227,1420cb38-4ad4-444d-9ca9-b98b9f965201,DISK], DatanodeInfoWithStorage[127.0.0.1:46207,310e417a-fa57-4813-9380-cd9eac805e1a,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1691634952-172.17.0.4-1597071016113:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34399,4c048738-2d8f-4551-80c4-7f60ee9d84c9,DISK], DatanodeInfoWithStorage[127.0.0.1:34227,b6fff06d-37b0-44b0-a397-27aecabbaee1,DISK], DatanodeInfoWithStorage[127.0.0.1:46207,63589f78-8510-4696-bbca-6d18853b5419,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1691634952-172.17.0.4-1597071016113:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:34399,43a961c3-bc16-4546-8760-f2622384f818,DISK], DatanodeInfoWithStorage[127.0.0.1:34227,1420cb38-4ad4-444d-9ca9-b98b9f965201,DISK], DatanodeInfoWithStorage[127.0.0.1:46207,310e417a-fa57-4813-9380-cd9eac805e1a,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1691634952-172.17.0.4-1597071016113:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:34399,43a961c3-bc16-4546-8760-f2622384f818,DISK], DatanodeInfoWithStorage[127.0.0.1:34227,1420cb38-4ad4-444d-9ca9-b98b9f965201,DISK], DatanodeInfoWithStorage[127.0.0.1:46207,310e417a-fa57-4813-9380-cd9eac805e1a,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1316137760-172.17.0.4-1597071159685:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43710,17059cbb-84c4-4d35-bb2f-1a72e234ab44,DISK], DatanodeInfoWithStorage[127.0.0.1:44132,021dac68-84f0-4e20-ae82-2dcde1e98997,DISK], DatanodeInfoWithStorage[127.0.0.1:38360,433ba38c-20d6-481f-a2b9-afff018307d7,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1316137760-172.17.0.4-1597071159685:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:43710,755c52f9-c4b1-48e9-904c-962a66bb2e89,DISK], DatanodeInfoWithStorage[127.0.0.1:44132,40fd9c7e-e036-43b6-9b73-f73cb03247e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38360,4e1f7add-ef07-4b9e-9174-0fa83ec9d3f4,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1316137760-172.17.0.4-1597071159685:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:43710,755c52f9-c4b1-48e9-904c-962a66bb2e89,DISK], DatanodeInfoWithStorage[127.0.0.1:44132,40fd9c7e-e036-43b6-9b73-f73cb03247e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38360,4e1f7add-ef07-4b9e-9174-0fa83ec9d3f4,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1316137760-172.17.0.4-1597071159685:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43710,17059cbb-84c4-4d35-bb2f-1a72e234ab44,DISK], DatanodeInfoWithStorage[127.0.0.1:44132,021dac68-84f0-4e20-ae82-2dcde1e98997,DISK], DatanodeInfoWithStorage[127.0.0.1:38360,433ba38c-20d6-481f-a2b9-afff018307d7,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1316137760-172.17.0.4-1597071159685:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:43710,755c52f9-c4b1-48e9-904c-962a66bb2e89,DISK], DatanodeInfoWithStorage[127.0.0.1:44132,40fd9c7e-e036-43b6-9b73-f73cb03247e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38360,4e1f7add-ef07-4b9e-9174-0fa83ec9d3f4,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1316137760-172.17.0.4-1597071159685:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:43710,755c52f9-c4b1-48e9-904c-962a66bb2e89,DISK], DatanodeInfoWithStorage[127.0.0.1:44132,40fd9c7e-e036-43b6-9b73-f73cb03247e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38360,4e1f7add-ef07-4b9e-9174-0fa83ec9d3f4,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1056021022-172.17.0.4-1597071271466:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41306,2ac2487f-9256-45b2-9ede-64d2935ed3f7,DISK], DatanodeInfoWithStorage[127.0.0.1:37805,7558e4c0-7c58-445d-a37a-c4a92b29943f,DISK], DatanodeInfoWithStorage[127.0.0.1:43933,ea5980dc-c67a-4630-8d9b-f78a6fc78796,DISK], DatanodeInfoWithStorage[127.0.0.1:34497,068ba552-9a78-47c6-8245-3eb69ebc20ff,DISK], DatanodeInfoWithStorage[127.0.0.1:34505,8d0dc98a-9c59-48e7-bd05-a35aed310384,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1056021022-172.17.0.4-1597071271466:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41306,9340f972-cf7a-4463-b8f1-96e52e49086d,DISK], DatanodeInfoWithStorage[127.0.0.1:37805,529b6bcd-0266-4c39-b0e2-6f166e30a3e5,DISK], DatanodeInfoWithStorage[127.0.0.1:43933,117548fc-6dba-428f-8f29-adc4609533ab,DISK], DatanodeInfoWithStorage[127.0.0.1:34497,3d2c306a-361e-4293-b2f0-8d9e42ff78af,DISK], DatanodeInfoWithStorage[127.0.0.1:34505,db57d70c-1bf2-44a7-bed7-aee7833636fb,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1056021022-172.17.0.4-1597071271466:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41306,9340f972-cf7a-4463-b8f1-96e52e49086d,DISK], DatanodeInfoWithStorage[127.0.0.1:37805,529b6bcd-0266-4c39-b0e2-6f166e30a3e5,DISK], DatanodeInfoWithStorage[127.0.0.1:43933,117548fc-6dba-428f-8f29-adc4609533ab,DISK], DatanodeInfoWithStorage[127.0.0.1:34497,3d2c306a-361e-4293-b2f0-8d9e42ff78af,DISK], DatanodeInfoWithStorage[127.0.0.1:34505,db57d70c-1bf2-44a7-bed7-aee7833636fb,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1056021022-172.17.0.4-1597071271466:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41306,2ac2487f-9256-45b2-9ede-64d2935ed3f7,DISK], DatanodeInfoWithStorage[127.0.0.1:37805,7558e4c0-7c58-445d-a37a-c4a92b29943f,DISK], DatanodeInfoWithStorage[127.0.0.1:43933,ea5980dc-c67a-4630-8d9b-f78a6fc78796,DISK], DatanodeInfoWithStorage[127.0.0.1:34497,068ba552-9a78-47c6-8245-3eb69ebc20ff,DISK], DatanodeInfoWithStorage[127.0.0.1:34505,8d0dc98a-9c59-48e7-bd05-a35aed310384,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1056021022-172.17.0.4-1597071271466:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41306,9340f972-cf7a-4463-b8f1-96e52e49086d,DISK], DatanodeInfoWithStorage[127.0.0.1:37805,529b6bcd-0266-4c39-b0e2-6f166e30a3e5,DISK], DatanodeInfoWithStorage[127.0.0.1:43933,117548fc-6dba-428f-8f29-adc4609533ab,DISK], DatanodeInfoWithStorage[127.0.0.1:34497,3d2c306a-361e-4293-b2f0-8d9e42ff78af,DISK], DatanodeInfoWithStorage[127.0.0.1:34505,db57d70c-1bf2-44a7-bed7-aee7833636fb,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1056021022-172.17.0.4-1597071271466:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41306,9340f972-cf7a-4463-b8f1-96e52e49086d,DISK], DatanodeInfoWithStorage[127.0.0.1:37805,529b6bcd-0266-4c39-b0e2-6f166e30a3e5,DISK], DatanodeInfoWithStorage[127.0.0.1:43933,117548fc-6dba-428f-8f29-adc4609533ab,DISK], DatanodeInfoWithStorage[127.0.0.1:34497,3d2c306a-361e-4293-b2f0-8d9e42ff78af,DISK], DatanodeInfoWithStorage[127.0.0.1:34505,db57d70c-1bf2-44a7-bed7-aee7833636fb,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-816743012-172.17.0.4-1597071300865:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35355,46f51ef1-33ac-4590-a2de-4995adf3ce1a,DISK], DatanodeInfoWithStorage[127.0.0.1:42611,73944206-7453-466b-8d31-fae86263f453,DISK], DatanodeInfoWithStorage[127.0.0.1:42080,da573f91-af1e-48f8-a2f1-a8ee2139b76b,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-816743012-172.17.0.4-1597071300865:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:35355,b568e619-4db4-427c-97e1-35b4a23d4bf0,DISK], DatanodeInfoWithStorage[127.0.0.1:42611,770ed96c-8917-4654-b1a8-f84362c69b76,DISK], DatanodeInfoWithStorage[127.0.0.1:42080,ffa126aa-2df5-4c8a-837b-39edd1135008,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-816743012-172.17.0.4-1597071300865:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:35355,b568e619-4db4-427c-97e1-35b4a23d4bf0,DISK], DatanodeInfoWithStorage[127.0.0.1:42611,770ed96c-8917-4654-b1a8-f84362c69b76,DISK], DatanodeInfoWithStorage[127.0.0.1:42080,ffa126aa-2df5-4c8a-837b-39edd1135008,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-816743012-172.17.0.4-1597071300865:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35355,46f51ef1-33ac-4590-a2de-4995adf3ce1a,DISK], DatanodeInfoWithStorage[127.0.0.1:42611,73944206-7453-466b-8d31-fae86263f453,DISK], DatanodeInfoWithStorage[127.0.0.1:42080,da573f91-af1e-48f8-a2f1-a8ee2139b76b,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-816743012-172.17.0.4-1597071300865:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:35355,b568e619-4db4-427c-97e1-35b4a23d4bf0,DISK], DatanodeInfoWithStorage[127.0.0.1:42611,770ed96c-8917-4654-b1a8-f84362c69b76,DISK], DatanodeInfoWithStorage[127.0.0.1:42080,ffa126aa-2df5-4c8a-837b-39edd1135008,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-816743012-172.17.0.4-1597071300865:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:35355,b568e619-4db4-427c-97e1-35b4a23d4bf0,DISK], DatanodeInfoWithStorage[127.0.0.1:42611,770ed96c-8917-4654-b1a8-f84362c69b76,DISK], DatanodeInfoWithStorage[127.0.0.1:42080,ffa126aa-2df5-4c8a-837b-39edd1135008,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-725989040-172.17.0.4-1597071398209:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36523,0f9c3081-617e-43cf-873f-c22f6fa8bc5b,DISK], DatanodeInfoWithStorage[127.0.0.1:37056,20c0d1e9-bc2f-4c1b-8a17-c3b0a45c5652,DISK], DatanodeInfoWithStorage[127.0.0.1:38264,73cdc89a-6096-473a-a442-06b67ca72ed2,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-725989040-172.17.0.4-1597071398209:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36523,88e42a3b-54e9-4d59-8628-82613ffa009b,DISK], DatanodeInfoWithStorage[127.0.0.1:37056,0a983d73-eb2f-4ce6-9ee2-474afecb48c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38264,ac5d41d0-6784-43bb-8aab-b6c65a7d7cfd,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-725989040-172.17.0.4-1597071398209:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36523,88e42a3b-54e9-4d59-8628-82613ffa009b,DISK], DatanodeInfoWithStorage[127.0.0.1:37056,0a983d73-eb2f-4ce6-9ee2-474afecb48c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38264,ac5d41d0-6784-43bb-8aab-b6c65a7d7cfd,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-725989040-172.17.0.4-1597071398209:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36523,0f9c3081-617e-43cf-873f-c22f6fa8bc5b,DISK], DatanodeInfoWithStorage[127.0.0.1:37056,20c0d1e9-bc2f-4c1b-8a17-c3b0a45c5652,DISK], DatanodeInfoWithStorage[127.0.0.1:38264,73cdc89a-6096-473a-a442-06b67ca72ed2,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-725989040-172.17.0.4-1597071398209:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36523,88e42a3b-54e9-4d59-8628-82613ffa009b,DISK], DatanodeInfoWithStorage[127.0.0.1:37056,0a983d73-eb2f-4ce6-9ee2-474afecb48c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38264,ac5d41d0-6784-43bb-8aab-b6c65a7d7cfd,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-725989040-172.17.0.4-1597071398209:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36523,88e42a3b-54e9-4d59-8628-82613ffa009b,DISK], DatanodeInfoWithStorage[127.0.0.1:37056,0a983d73-eb2f-4ce6-9ee2-474afecb48c6,DISK], DatanodeInfoWithStorage[127.0.0.1:38264,ac5d41d0-6784-43bb-8aab-b6c65a7d7cfd,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-956974377-172.17.0.4-1597071425367:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39456,4fad92c2-686f-442a-aefa-edf61613ae8c,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,c3fb1897-799d-4fb3-ab71-118d09c09fcb,DISK], DatanodeInfoWithStorage[127.0.0.1:40418,ae1253a7-be23-496c-a675-1545ecace812,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-956974377-172.17.0.4-1597071425367:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39456,a438302e-e4b2-4abe-9e57-6c0626beed71,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,20493aa3-56b4-4e45-b35a-45c2a1ff7d1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40418,dd9f3596-82ce-4826-9f82-7e3a55f47ec0,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-956974377-172.17.0.4-1597071425367:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39456,a438302e-e4b2-4abe-9e57-6c0626beed71,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,20493aa3-56b4-4e45-b35a-45c2a1ff7d1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40418,dd9f3596-82ce-4826-9f82-7e3a55f47ec0,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-956974377-172.17.0.4-1597071425367:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39456,4fad92c2-686f-442a-aefa-edf61613ae8c,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,c3fb1897-799d-4fb3-ab71-118d09c09fcb,DISK], DatanodeInfoWithStorage[127.0.0.1:40418,ae1253a7-be23-496c-a675-1545ecace812,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-956974377-172.17.0.4-1597071425367:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39456,a438302e-e4b2-4abe-9e57-6c0626beed71,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,20493aa3-56b4-4e45-b35a-45c2a1ff7d1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40418,dd9f3596-82ce-4826-9f82-7e3a55f47ec0,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-956974377-172.17.0.4-1597071425367:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39456,a438302e-e4b2-4abe-9e57-6c0626beed71,DISK], DatanodeInfoWithStorage[127.0.0.1:45231,20493aa3-56b4-4e45-b35a-45c2a1ff7d1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40418,dd9f3596-82ce-4826-9f82-7e3a55f47ec0,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1273403900-172.17.0.4-1597071564971:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44485,1d3f59d4-5428-4aa7-b8e6-785756b2932f,DISK], DatanodeInfoWithStorage[127.0.0.1:39609,2e2faf67-4228-4bc1-bb2e-7312e4340e69,DISK], DatanodeInfoWithStorage[127.0.0.1:34721,3dc3ece7-b529-4db3-a608-0178c1938da6,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1273403900-172.17.0.4-1597071564971:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44485,42be334f-70a9-49ca-93b5-c9262546571e,DISK], DatanodeInfoWithStorage[127.0.0.1:39609,d4b1fb94-fc21-4f9f-b542-b05293fb70e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34721,c560fe90-04cc-43f4-80e7-c5df436905f6,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1273403900-172.17.0.4-1597071564971:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44485,42be334f-70a9-49ca-93b5-c9262546571e,DISK], DatanodeInfoWithStorage[127.0.0.1:39609,d4b1fb94-fc21-4f9f-b542-b05293fb70e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34721,c560fe90-04cc-43f4-80e7-c5df436905f6,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1273403900-172.17.0.4-1597071564971:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44485,1d3f59d4-5428-4aa7-b8e6-785756b2932f,DISK], DatanodeInfoWithStorage[127.0.0.1:39609,2e2faf67-4228-4bc1-bb2e-7312e4340e69,DISK], DatanodeInfoWithStorage[127.0.0.1:34721,3dc3ece7-b529-4db3-a608-0178c1938da6,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1273403900-172.17.0.4-1597071564971:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44485,42be334f-70a9-49ca-93b5-c9262546571e,DISK], DatanodeInfoWithStorage[127.0.0.1:39609,d4b1fb94-fc21-4f9f-b542-b05293fb70e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34721,c560fe90-04cc-43f4-80e7-c5df436905f6,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1273403900-172.17.0.4-1597071564971:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44485,42be334f-70a9-49ca-93b5-c9262546571e,DISK], DatanodeInfoWithStorage[127.0.0.1:39609,d4b1fb94-fc21-4f9f-b542-b05293fb70e7,DISK], DatanodeInfoWithStorage[127.0.0.1:34721,c560fe90-04cc-43f4-80e7-c5df436905f6,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1598299909-172.17.0.4-1597071593851:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40175,42fa7e10-2683-4880-afd6-166999e3e67c,DISK], DatanodeInfoWithStorage[127.0.0.1:42005,33ddfc08-ad80-4a53-9c7c-1fe9d5f5f7a5,DISK], DatanodeInfoWithStorage[127.0.0.1:32989,95873f1f-375d-43c5-8314-2a01dae7fdbb,DISK], DatanodeInfoWithStorage[127.0.0.1:41689,d03c059f-67a9-445d-874b-cebf37e6930e,DISK], DatanodeInfoWithStorage[127.0.0.1:34567,42a24e88-df8f-43e5-8030-76782c4e8753,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1598299909-172.17.0.4-1597071593851:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40175,d69ff601-70a3-473b-8431-75fd62b99572,DISK], DatanodeInfoWithStorage[127.0.0.1:42005,0f930951-bf9a-464e-9e3d-d82ef5942745,DISK], DatanodeInfoWithStorage[127.0.0.1:32989,148a34aa-da54-4287-b960-c3643c13161b,DISK], DatanodeInfoWithStorage[127.0.0.1:41689,5731ddd6-f138-4b68-9b99-6ca1c347f99b,DISK], DatanodeInfoWithStorage[127.0.0.1:34567,e2c645b3-ce0a-44a2-82ab-77598a23c5b2,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1598299909-172.17.0.4-1597071593851:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40175,d69ff601-70a3-473b-8431-75fd62b99572,DISK], DatanodeInfoWithStorage[127.0.0.1:42005,0f930951-bf9a-464e-9e3d-d82ef5942745,DISK], DatanodeInfoWithStorage[127.0.0.1:32989,148a34aa-da54-4287-b960-c3643c13161b,DISK], DatanodeInfoWithStorage[127.0.0.1:41689,5731ddd6-f138-4b68-9b99-6ca1c347f99b,DISK], DatanodeInfoWithStorage[127.0.0.1:34567,e2c645b3-ce0a-44a2-82ab-77598a23c5b2,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1598299909-172.17.0.4-1597071593851:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40175,42fa7e10-2683-4880-afd6-166999e3e67c,DISK], DatanodeInfoWithStorage[127.0.0.1:42005,33ddfc08-ad80-4a53-9c7c-1fe9d5f5f7a5,DISK], DatanodeInfoWithStorage[127.0.0.1:32989,95873f1f-375d-43c5-8314-2a01dae7fdbb,DISK], DatanodeInfoWithStorage[127.0.0.1:41689,d03c059f-67a9-445d-874b-cebf37e6930e,DISK], DatanodeInfoWithStorage[127.0.0.1:34567,42a24e88-df8f-43e5-8030-76782c4e8753,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1598299909-172.17.0.4-1597071593851:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40175,d69ff601-70a3-473b-8431-75fd62b99572,DISK], DatanodeInfoWithStorage[127.0.0.1:42005,0f930951-bf9a-464e-9e3d-d82ef5942745,DISK], DatanodeInfoWithStorage[127.0.0.1:32989,148a34aa-da54-4287-b960-c3643c13161b,DISK], DatanodeInfoWithStorage[127.0.0.1:41689,5731ddd6-f138-4b68-9b99-6ca1c347f99b,DISK], DatanodeInfoWithStorage[127.0.0.1:34567,e2c645b3-ce0a-44a2-82ab-77598a23c5b2,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1598299909-172.17.0.4-1597071593851:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40175,d69ff601-70a3-473b-8431-75fd62b99572,DISK], DatanodeInfoWithStorage[127.0.0.1:42005,0f930951-bf9a-464e-9e3d-d82ef5942745,DISK], DatanodeInfoWithStorage[127.0.0.1:32989,148a34aa-da54-4287-b960-c3643c13161b,DISK], DatanodeInfoWithStorage[127.0.0.1:41689,5731ddd6-f138-4b68-9b99-6ca1c347f99b,DISK], DatanodeInfoWithStorage[127.0.0.1:34567,e2c645b3-ce0a-44a2-82ab-77598a23c5b2,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-71308235-172.17.0.4-1597071806692:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45314,d296aece-ff7a-49ba-bc86-88d48594df2e,DISK], DatanodeInfoWithStorage[127.0.0.1:34101,20fd6b37-5bf8-4fe1-9b5a-e5481047aeb6,DISK], DatanodeInfoWithStorage[127.0.0.1:41120,7a8a6d50-8a6c-431d-99e1-42c02c39b3a7,DISK], DatanodeInfoWithStorage[127.0.0.1:40801,ccc8a73b-54e5-41f8-84ee-d90fc4b916b7,DISK], DatanodeInfoWithStorage[127.0.0.1:35228,9ba6e7b7-36ba-4742-920a-b8591aee5ff8,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-71308235-172.17.0.4-1597071806692:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45314,8f3e4ac2-45c9-4885-bc7d-5c329377b612,DISK], DatanodeInfoWithStorage[127.0.0.1:34101,79888838-925b-4472-8c59-2b6bc6692a6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41120,7b9093fc-137a-429a-9b8d-dae6b5961e73,DISK], DatanodeInfoWithStorage[127.0.0.1:40801,114ec98b-576e-4d60-86ff-618e19f90bb8,DISK], DatanodeInfoWithStorage[127.0.0.1:35228,190246c1-d92d-424d-9d49-b961760351df,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-71308235-172.17.0.4-1597071806692:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45314,8f3e4ac2-45c9-4885-bc7d-5c329377b612,DISK], DatanodeInfoWithStorage[127.0.0.1:34101,79888838-925b-4472-8c59-2b6bc6692a6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41120,7b9093fc-137a-429a-9b8d-dae6b5961e73,DISK], DatanodeInfoWithStorage[127.0.0.1:40801,114ec98b-576e-4d60-86ff-618e19f90bb8,DISK], DatanodeInfoWithStorage[127.0.0.1:35228,190246c1-d92d-424d-9d49-b961760351df,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-71308235-172.17.0.4-1597071806692:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45314,d296aece-ff7a-49ba-bc86-88d48594df2e,DISK], DatanodeInfoWithStorage[127.0.0.1:34101,20fd6b37-5bf8-4fe1-9b5a-e5481047aeb6,DISK], DatanodeInfoWithStorage[127.0.0.1:41120,7a8a6d50-8a6c-431d-99e1-42c02c39b3a7,DISK], DatanodeInfoWithStorage[127.0.0.1:40801,ccc8a73b-54e5-41f8-84ee-d90fc4b916b7,DISK], DatanodeInfoWithStorage[127.0.0.1:35228,9ba6e7b7-36ba-4742-920a-b8591aee5ff8,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-71308235-172.17.0.4-1597071806692:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45314,8f3e4ac2-45c9-4885-bc7d-5c329377b612,DISK], DatanodeInfoWithStorage[127.0.0.1:34101,79888838-925b-4472-8c59-2b6bc6692a6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41120,7b9093fc-137a-429a-9b8d-dae6b5961e73,DISK], DatanodeInfoWithStorage[127.0.0.1:40801,114ec98b-576e-4d60-86ff-618e19f90bb8,DISK], DatanodeInfoWithStorage[127.0.0.1:35228,190246c1-d92d-424d-9d49-b961760351df,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-71308235-172.17.0.4-1597071806692:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45314,8f3e4ac2-45c9-4885-bc7d-5c329377b612,DISK], DatanodeInfoWithStorage[127.0.0.1:34101,79888838-925b-4472-8c59-2b6bc6692a6c,DISK], DatanodeInfoWithStorage[127.0.0.1:41120,7b9093fc-137a-429a-9b8d-dae6b5961e73,DISK], DatanodeInfoWithStorage[127.0.0.1:40801,114ec98b-576e-4d60-86ff-618e19f90bb8,DISK], DatanodeInfoWithStorage[127.0.0.1:35228,190246c1-d92d-424d-9d49-b961760351df,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2002750401-172.17.0.4-1597072024772:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41881,a253be8c-9749-4dda-8d41-4805e00adcfc,DISK], DatanodeInfoWithStorage[127.0.0.1:35793,9d939b05-6909-4767-a82f-2179131ea26c,DISK], DatanodeInfoWithStorage[127.0.0.1:43491,8773e99b-37a3-480b-9a58-752da518c50b,DISK], DatanodeInfoWithStorage[127.0.0.1:42470,6da14490-1ae8-488e-b3ad-47d58c8555ca,DISK], DatanodeInfoWithStorage[127.0.0.1:39518,ddfec56f-f79b-40d2-982c-632ace987102,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2002750401-172.17.0.4-1597072024772:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41881,dbd00aeb-bd42-4b39-b176-a1d60b075170,DISK], DatanodeInfoWithStorage[127.0.0.1:35793,b4e8ed91-6ce5-48ee-8498-e718b8b4c772,DISK], DatanodeInfoWithStorage[127.0.0.1:43491,d9909c6d-0058-424f-a43e-f4b1270b89d1,DISK], DatanodeInfoWithStorage[127.0.0.1:42470,6d128bdb-0e8a-40e0-82d2-929c85243940,DISK], DatanodeInfoWithStorage[127.0.0.1:39518,e5bc0e7d-437f-43f8-b90c-1dfa0c694628,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2002750401-172.17.0.4-1597072024772:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41881,dbd00aeb-bd42-4b39-b176-a1d60b075170,DISK], DatanodeInfoWithStorage[127.0.0.1:35793,b4e8ed91-6ce5-48ee-8498-e718b8b4c772,DISK], DatanodeInfoWithStorage[127.0.0.1:43491,d9909c6d-0058-424f-a43e-f4b1270b89d1,DISK], DatanodeInfoWithStorage[127.0.0.1:42470,6d128bdb-0e8a-40e0-82d2-929c85243940,DISK], DatanodeInfoWithStorage[127.0.0.1:39518,e5bc0e7d-437f-43f8-b90c-1dfa0c694628,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2002750401-172.17.0.4-1597072024772:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41881,a253be8c-9749-4dda-8d41-4805e00adcfc,DISK], DatanodeInfoWithStorage[127.0.0.1:35793,9d939b05-6909-4767-a82f-2179131ea26c,DISK], DatanodeInfoWithStorage[127.0.0.1:43491,8773e99b-37a3-480b-9a58-752da518c50b,DISK], DatanodeInfoWithStorage[127.0.0.1:42470,6da14490-1ae8-488e-b3ad-47d58c8555ca,DISK], DatanodeInfoWithStorage[127.0.0.1:39518,ddfec56f-f79b-40d2-982c-632ace987102,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2002750401-172.17.0.4-1597072024772:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41881,dbd00aeb-bd42-4b39-b176-a1d60b075170,DISK], DatanodeInfoWithStorage[127.0.0.1:35793,b4e8ed91-6ce5-48ee-8498-e718b8b4c772,DISK], DatanodeInfoWithStorage[127.0.0.1:43491,d9909c6d-0058-424f-a43e-f4b1270b89d1,DISK], DatanodeInfoWithStorage[127.0.0.1:42470,6d128bdb-0e8a-40e0-82d2-929c85243940,DISK], DatanodeInfoWithStorage[127.0.0.1:39518,e5bc0e7d-437f-43f8-b90c-1dfa0c694628,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2002750401-172.17.0.4-1597072024772:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:41881,dbd00aeb-bd42-4b39-b176-a1d60b075170,DISK], DatanodeInfoWithStorage[127.0.0.1:35793,b4e8ed91-6ce5-48ee-8498-e718b8b4c772,DISK], DatanodeInfoWithStorage[127.0.0.1:43491,d9909c6d-0058-424f-a43e-f4b1270b89d1,DISK], DatanodeInfoWithStorage[127.0.0.1:42470,6d128bdb-0e8a-40e0-82d2-929c85243940,DISK], DatanodeInfoWithStorage[127.0.0.1:39518,e5bc0e7d-437f-43f8-b90c-1dfa0c694628,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-274536340-172.17.0.4-1597072049097:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40479,21184cb0-e1ae-4305-ae5f-9a2acb0a46a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,a32dd3d2-1a4f-4e0e-a671-45a5c0ad09ed,DISK], DatanodeInfoWithStorage[127.0.0.1:44243,eb1a5142-e601-4abd-8357-d7c50ff495f6,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-274536340-172.17.0.4-1597072049097:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40479,d368233c-b0b8-4b75-81a3-e126959643d8,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,e3bbb288-4eb4-4375-a96e-108b697dc095,DISK], DatanodeInfoWithStorage[127.0.0.1:44243,f29dc6fe-227f-49c2-b638-f91813fd80aa,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-274536340-172.17.0.4-1597072049097:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40479,d368233c-b0b8-4b75-81a3-e126959643d8,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,e3bbb288-4eb4-4375-a96e-108b697dc095,DISK], DatanodeInfoWithStorage[127.0.0.1:44243,f29dc6fe-227f-49c2-b638-f91813fd80aa,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-274536340-172.17.0.4-1597072049097:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40479,21184cb0-e1ae-4305-ae5f-9a2acb0a46a5,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,a32dd3d2-1a4f-4e0e-a671-45a5c0ad09ed,DISK], DatanodeInfoWithStorage[127.0.0.1:44243,eb1a5142-e601-4abd-8357-d7c50ff495f6,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-274536340-172.17.0.4-1597072049097:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40479,d368233c-b0b8-4b75-81a3-e126959643d8,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,e3bbb288-4eb4-4375-a96e-108b697dc095,DISK], DatanodeInfoWithStorage[127.0.0.1:44243,f29dc6fe-227f-49c2-b638-f91813fd80aa,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-274536340-172.17.0.4-1597072049097:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40479,d368233c-b0b8-4b75-81a3-e126959643d8,DISK], DatanodeInfoWithStorage[127.0.0.1:42891,e3bbb288-4eb4-4375-a96e-108b697dc095,DISK], DatanodeInfoWithStorage[127.0.0.1:44243,f29dc6fe-227f-49c2-b638-f91813fd80aa,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1976818199-172.17.0.4-1597072128356:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33041,c3792dbd-107c-45a3-9188-3c4b4ae4f3b2,DISK], DatanodeInfoWithStorage[127.0.0.1:33408,b845768a-cd1e-445b-a815-4f0b40dcc9e3,DISK], DatanodeInfoWithStorage[127.0.0.1:46591,8d00fdf1-0196-468a-8319-42fe65a31845,DISK], DatanodeInfoWithStorage[127.0.0.1:34385,167388bd-823f-4088-95b5-21d8696a0ba8,DISK], DatanodeInfoWithStorage[127.0.0.1:37907,0de463f9-653f-4b98-ba01-30b81ef5f65a,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1976818199-172.17.0.4-1597072128356:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33041,b6a3c6f1-e99e-46f7-9484-b7918a6e313f,DISK], DatanodeInfoWithStorage[127.0.0.1:33408,0127926e-9741-4ed6-873e-66df39b61a50,DISK], DatanodeInfoWithStorage[127.0.0.1:46591,f39ed029-43d8-4694-839b-61192066e993,DISK], DatanodeInfoWithStorage[127.0.0.1:34385,df493f88-6841-4751-b9b7-f2160389eb03,DISK], DatanodeInfoWithStorage[127.0.0.1:37907,eef057a8-ed33-4b62-a9c2-af702af41d1a,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1976818199-172.17.0.4-1597072128356:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33041,b6a3c6f1-e99e-46f7-9484-b7918a6e313f,DISK], DatanodeInfoWithStorage[127.0.0.1:33408,0127926e-9741-4ed6-873e-66df39b61a50,DISK], DatanodeInfoWithStorage[127.0.0.1:46591,f39ed029-43d8-4694-839b-61192066e993,DISK], DatanodeInfoWithStorage[127.0.0.1:34385,df493f88-6841-4751-b9b7-f2160389eb03,DISK], DatanodeInfoWithStorage[127.0.0.1:37907,eef057a8-ed33-4b62-a9c2-af702af41d1a,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1976818199-172.17.0.4-1597072128356:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33041,c3792dbd-107c-45a3-9188-3c4b4ae4f3b2,DISK], DatanodeInfoWithStorage[127.0.0.1:33408,b845768a-cd1e-445b-a815-4f0b40dcc9e3,DISK], DatanodeInfoWithStorage[127.0.0.1:46591,8d00fdf1-0196-468a-8319-42fe65a31845,DISK], DatanodeInfoWithStorage[127.0.0.1:34385,167388bd-823f-4088-95b5-21d8696a0ba8,DISK], DatanodeInfoWithStorage[127.0.0.1:37907,0de463f9-653f-4b98-ba01-30b81ef5f65a,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1976818199-172.17.0.4-1597072128356:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33041,b6a3c6f1-e99e-46f7-9484-b7918a6e313f,DISK], DatanodeInfoWithStorage[127.0.0.1:33408,0127926e-9741-4ed6-873e-66df39b61a50,DISK], DatanodeInfoWithStorage[127.0.0.1:46591,f39ed029-43d8-4694-839b-61192066e993,DISK], DatanodeInfoWithStorage[127.0.0.1:34385,df493f88-6841-4751-b9b7-f2160389eb03,DISK], DatanodeInfoWithStorage[127.0.0.1:37907,eef057a8-ed33-4b62-a9c2-af702af41d1a,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1976818199-172.17.0.4-1597072128356:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:33041,b6a3c6f1-e99e-46f7-9484-b7918a6e313f,DISK], DatanodeInfoWithStorage[127.0.0.1:33408,0127926e-9741-4ed6-873e-66df39b61a50,DISK], DatanodeInfoWithStorage[127.0.0.1:46591,f39ed029-43d8-4694-839b-61192066e993,DISK], DatanodeInfoWithStorage[127.0.0.1:34385,df493f88-6841-4751-b9b7-f2160389eb03,DISK], DatanodeInfoWithStorage[127.0.0.1:37907,eef057a8-ed33-4b62-a9c2-af702af41d1a,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1495867742-172.17.0.4-1597072251751:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39687,93fbd8de-e2f7-4d0b-a9d3-1d57aff93db2,DISK], DatanodeInfoWithStorage[127.0.0.1:35212,2ca3267e-64d3-4e12-9fcb-3354ba52afec,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,586bb6d0-4f74-4c03-8c84-8299866409e8,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1495867742-172.17.0.4-1597072251751:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39687,33b22d11-9f3b-4881-8a9a-5dad02f63965,DISK], DatanodeInfoWithStorage[127.0.0.1:35212,01d360bd-73d0-4d9d-8630-6c2a97b8359d,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,00c48a79-3c44-48c0-8275-0b82449b70f0,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1495867742-172.17.0.4-1597072251751:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39687,33b22d11-9f3b-4881-8a9a-5dad02f63965,DISK], DatanodeInfoWithStorage[127.0.0.1:35212,01d360bd-73d0-4d9d-8630-6c2a97b8359d,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,00c48a79-3c44-48c0-8275-0b82449b70f0,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1495867742-172.17.0.4-1597072251751:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39687,93fbd8de-e2f7-4d0b-a9d3-1d57aff93db2,DISK], DatanodeInfoWithStorage[127.0.0.1:35212,2ca3267e-64d3-4e12-9fcb-3354ba52afec,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,586bb6d0-4f74-4c03-8c84-8299866409e8,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1495867742-172.17.0.4-1597072251751:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39687,33b22d11-9f3b-4881-8a9a-5dad02f63965,DISK], DatanodeInfoWithStorage[127.0.0.1:35212,01d360bd-73d0-4d9d-8630-6c2a97b8359d,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,00c48a79-3c44-48c0-8275-0b82449b70f0,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1495867742-172.17.0.4-1597072251751:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39687,33b22d11-9f3b-4881-8a9a-5dad02f63965,DISK], DatanodeInfoWithStorage[127.0.0.1:35212,01d360bd-73d0-4d9d-8630-6c2a97b8359d,DISK], DatanodeInfoWithStorage[127.0.0.1:41165,00c48a79-3c44-48c0-8275-0b82449b70f0,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-426902931-172.17.0.4-1597072360734:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45792,92a3eb4d-ba97-4d7f-996a-4d35a9ceb331,DISK], DatanodeInfoWithStorage[127.0.0.1:33889,91b2d98e-1f41-4d6e-afad-4ad78fac550d,DISK], DatanodeInfoWithStorage[127.0.0.1:41354,7ff7deff-c376-454c-b1ed-e56dfb8c8061,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-426902931-172.17.0.4-1597072360734:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45792,f38697dc-7b11-49e1-9fd1-c432a6d8aec0,DISK], DatanodeInfoWithStorage[127.0.0.1:33889,a157de97-c280-4a12-9a8f-2c752f6e269c,DISK], DatanodeInfoWithStorage[127.0.0.1:41354,48285325-5ea2-4450-8522-055e10c246fb,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-426902931-172.17.0.4-1597072360734:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45792,f38697dc-7b11-49e1-9fd1-c432a6d8aec0,DISK], DatanodeInfoWithStorage[127.0.0.1:33889,a157de97-c280-4a12-9a8f-2c752f6e269c,DISK], DatanodeInfoWithStorage[127.0.0.1:41354,48285325-5ea2-4450-8522-055e10c246fb,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-426902931-172.17.0.4-1597072360734:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45792,92a3eb4d-ba97-4d7f-996a-4d35a9ceb331,DISK], DatanodeInfoWithStorage[127.0.0.1:33889,91b2d98e-1f41-4d6e-afad-4ad78fac550d,DISK], DatanodeInfoWithStorage[127.0.0.1:41354,7ff7deff-c376-454c-b1ed-e56dfb8c8061,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-426902931-172.17.0.4-1597072360734:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45792,f38697dc-7b11-49e1-9fd1-c432a6d8aec0,DISK], DatanodeInfoWithStorage[127.0.0.1:33889,a157de97-c280-4a12-9a8f-2c752f6e269c,DISK], DatanodeInfoWithStorage[127.0.0.1:41354,48285325-5ea2-4450-8522-055e10c246fb,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-426902931-172.17.0.4-1597072360734:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45792,f38697dc-7b11-49e1-9fd1-c432a6d8aec0,DISK], DatanodeInfoWithStorage[127.0.0.1:33889,a157de97-c280-4a12-9a8f-2c752f6e269c,DISK], DatanodeInfoWithStorage[127.0.0.1:41354,48285325-5ea2-4450-8522-055e10c246fb,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2039678888-172.17.0.4-1597072530971:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45530,2ba29947-8dd8-49e1-83e2-137ed62d69c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46049,71cac9bb-be82-4ecd-9050-4debde3ebbda,DISK], DatanodeInfoWithStorage[127.0.0.1:36244,17a77a40-14de-4281-93b3-c42059af2bb6,DISK], DatanodeInfoWithStorage[127.0.0.1:41854,0bf0ab75-af13-4e16-9c4b-cee5d6374a73,DISK], DatanodeInfoWithStorage[127.0.0.1:41652,3f523123-c134-448c-90d2-4fcfc180d8b8,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2039678888-172.17.0.4-1597072530971:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45530,908a8c7d-1e5a-4152-8398-ed4d14c8a793,DISK], DatanodeInfoWithStorage[127.0.0.1:46049,0b11dcb0-4b64-41f0-92dc-a1742b6acc4e,DISK], DatanodeInfoWithStorage[127.0.0.1:36244,70fdb1ee-50fb-4b99-b7a8-1c00dc9f0f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:41854,fca5cbe3-c9dc-42ee-b848-3901c6f6dd0b,DISK], DatanodeInfoWithStorage[127.0.0.1:41652,d9737662-4254-487e-bad9-e0d798755c50,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2039678888-172.17.0.4-1597072530971:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45530,908a8c7d-1e5a-4152-8398-ed4d14c8a793,DISK], DatanodeInfoWithStorage[127.0.0.1:46049,0b11dcb0-4b64-41f0-92dc-a1742b6acc4e,DISK], DatanodeInfoWithStorage[127.0.0.1:36244,70fdb1ee-50fb-4b99-b7a8-1c00dc9f0f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:41854,fca5cbe3-c9dc-42ee-b848-3901c6f6dd0b,DISK], DatanodeInfoWithStorage[127.0.0.1:41652,d9737662-4254-487e-bad9-e0d798755c50,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2039678888-172.17.0.4-1597072530971:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45530,2ba29947-8dd8-49e1-83e2-137ed62d69c1,DISK], DatanodeInfoWithStorage[127.0.0.1:46049,71cac9bb-be82-4ecd-9050-4debde3ebbda,DISK], DatanodeInfoWithStorage[127.0.0.1:36244,17a77a40-14de-4281-93b3-c42059af2bb6,DISK], DatanodeInfoWithStorage[127.0.0.1:41854,0bf0ab75-af13-4e16-9c4b-cee5d6374a73,DISK], DatanodeInfoWithStorage[127.0.0.1:41652,3f523123-c134-448c-90d2-4fcfc180d8b8,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2039678888-172.17.0.4-1597072530971:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45530,908a8c7d-1e5a-4152-8398-ed4d14c8a793,DISK], DatanodeInfoWithStorage[127.0.0.1:46049,0b11dcb0-4b64-41f0-92dc-a1742b6acc4e,DISK], DatanodeInfoWithStorage[127.0.0.1:36244,70fdb1ee-50fb-4b99-b7a8-1c00dc9f0f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:41854,fca5cbe3-c9dc-42ee-b848-3901c6f6dd0b,DISK], DatanodeInfoWithStorage[127.0.0.1:41652,d9737662-4254-487e-bad9-e0d798755c50,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2039678888-172.17.0.4-1597072530971:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:45530,908a8c7d-1e5a-4152-8398-ed4d14c8a793,DISK], DatanodeInfoWithStorage[127.0.0.1:46049,0b11dcb0-4b64-41f0-92dc-a1742b6acc4e,DISK], DatanodeInfoWithStorage[127.0.0.1:36244,70fdb1ee-50fb-4b99-b7a8-1c00dc9f0f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:41854,fca5cbe3-c9dc-42ee-b848-3901c6f6dd0b,DISK], DatanodeInfoWithStorage[127.0.0.1:41652,d9737662-4254-487e-bad9-e0d798755c50,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2049706433-172.17.0.4-1597072767688:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46686,de36e454-674c-4437-876c-8cb4901495d1,DISK], DatanodeInfoWithStorage[127.0.0.1:41780,a5d55bfd-322e-4216-8aa5-9d9db81714d9,DISK], DatanodeInfoWithStorage[127.0.0.1:42089,d8d8d055-0520-4fae-98d0-f0b065dc1279,DISK], DatanodeInfoWithStorage[127.0.0.1:41576,e7b45347-26e0-4708-9065-e904aede48fa,DISK], DatanodeInfoWithStorage[127.0.0.1:36345,29fc2aa4-dc56-46e1-b46a-5e2297f374c0,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2049706433-172.17.0.4-1597072767688:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46686,2bd2d84c-c5f1-4624-9b97-6ab4a8f54e69,DISK], DatanodeInfoWithStorage[127.0.0.1:41780,2b8bf1c0-c388-4e1e-a578-55a8f5f591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:42089,b34f4ae9-19d8-4623-9f2f-105fcc2a78c2,DISK], DatanodeInfoWithStorage[127.0.0.1:41576,61e72568-6a9c-4deb-8a04-9ca1364779dd,DISK], DatanodeInfoWithStorage[127.0.0.1:36345,3f45f866-662c-4523-ab45-8903c6daa6c1,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2049706433-172.17.0.4-1597072767688:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46686,2bd2d84c-c5f1-4624-9b97-6ab4a8f54e69,DISK], DatanodeInfoWithStorage[127.0.0.1:41780,2b8bf1c0-c388-4e1e-a578-55a8f5f591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:42089,b34f4ae9-19d8-4623-9f2f-105fcc2a78c2,DISK], DatanodeInfoWithStorage[127.0.0.1:41576,61e72568-6a9c-4deb-8a04-9ca1364779dd,DISK], DatanodeInfoWithStorage[127.0.0.1:36345,3f45f866-662c-4523-ab45-8903c6daa6c1,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2049706433-172.17.0.4-1597072767688:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46686,de36e454-674c-4437-876c-8cb4901495d1,DISK], DatanodeInfoWithStorage[127.0.0.1:41780,a5d55bfd-322e-4216-8aa5-9d9db81714d9,DISK], DatanodeInfoWithStorage[127.0.0.1:42089,d8d8d055-0520-4fae-98d0-f0b065dc1279,DISK], DatanodeInfoWithStorage[127.0.0.1:41576,e7b45347-26e0-4708-9065-e904aede48fa,DISK], DatanodeInfoWithStorage[127.0.0.1:36345,29fc2aa4-dc56-46e1-b46a-5e2297f374c0,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2049706433-172.17.0.4-1597072767688:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46686,2bd2d84c-c5f1-4624-9b97-6ab4a8f54e69,DISK], DatanodeInfoWithStorage[127.0.0.1:41780,2b8bf1c0-c388-4e1e-a578-55a8f5f591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:42089,b34f4ae9-19d8-4623-9f2f-105fcc2a78c2,DISK], DatanodeInfoWithStorage[127.0.0.1:41576,61e72568-6a9c-4deb-8a04-9ca1364779dd,DISK], DatanodeInfoWithStorage[127.0.0.1:36345,3f45f866-662c-4523-ab45-8903c6daa6c1,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2049706433-172.17.0.4-1597072767688:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46686,2bd2d84c-c5f1-4624-9b97-6ab4a8f54e69,DISK], DatanodeInfoWithStorage[127.0.0.1:41780,2b8bf1c0-c388-4e1e-a578-55a8f5f591ae,DISK], DatanodeInfoWithStorage[127.0.0.1:42089,b34f4ae9-19d8-4623-9f2f-105fcc2a78c2,DISK], DatanodeInfoWithStorage[127.0.0.1:41576,61e72568-6a9c-4deb-8a04-9ca1364779dd,DISK], DatanodeInfoWithStorage[127.0.0.1:36345,3f45f866-662c-4523-ab45-8903c6daa6c1,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1841914041-172.17.0.4-1597072793951:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44211,e11cdfc8-c3d5-4f08-8cdc-023b6e9309ac,DISK], DatanodeInfoWithStorage[127.0.0.1:44350,c9e0fa7b-0327-48e1-b75e-0b40029c8212,DISK], DatanodeInfoWithStorage[127.0.0.1:33993,f5bc7b2a-633d-461f-9bc4-bb5ddb7dc5f6,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1841914041-172.17.0.4-1597072793951:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44211,a1f7892a-3282-40cf-a99a-850dec8e261e,DISK], DatanodeInfoWithStorage[127.0.0.1:44350,1fe26357-7a03-434b-8a32-3ba1053fc418,DISK], DatanodeInfoWithStorage[127.0.0.1:33993,0e3e0288-75f8-4501-a751-6c608001d4f6,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1841914041-172.17.0.4-1597072793951:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44211,a1f7892a-3282-40cf-a99a-850dec8e261e,DISK], DatanodeInfoWithStorage[127.0.0.1:44350,1fe26357-7a03-434b-8a32-3ba1053fc418,DISK], DatanodeInfoWithStorage[127.0.0.1:33993,0e3e0288-75f8-4501-a751-6c608001d4f6,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1841914041-172.17.0.4-1597072793951:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44211,e11cdfc8-c3d5-4f08-8cdc-023b6e9309ac,DISK], DatanodeInfoWithStorage[127.0.0.1:44350,c9e0fa7b-0327-48e1-b75e-0b40029c8212,DISK], DatanodeInfoWithStorage[127.0.0.1:33993,f5bc7b2a-633d-461f-9bc4-bb5ddb7dc5f6,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1841914041-172.17.0.4-1597072793951:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44211,a1f7892a-3282-40cf-a99a-850dec8e261e,DISK], DatanodeInfoWithStorage[127.0.0.1:44350,1fe26357-7a03-434b-8a32-3ba1053fc418,DISK], DatanodeInfoWithStorage[127.0.0.1:33993,0e3e0288-75f8-4501-a751-6c608001d4f6,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1841914041-172.17.0.4-1597072793951:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44211,a1f7892a-3282-40cf-a99a-850dec8e261e,DISK], DatanodeInfoWithStorage[127.0.0.1:44350,1fe26357-7a03-434b-8a32-3ba1053fc418,DISK], DatanodeInfoWithStorage[127.0.0.1:33993,0e3e0288-75f8-4501-a751-6c608001d4f6,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1415677232-172.17.0.4-1597072902972:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37460,6546345a-a8a5-4097-aba2-4e050a8be040,DISK], DatanodeInfoWithStorage[127.0.0.1:38706,2a23cfa1-1b35-45fa-b83f-f72fd7e5c0e4,DISK], DatanodeInfoWithStorage[127.0.0.1:45493,552144f5-efb4-43af-8e65-c6504140b36d,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1415677232-172.17.0.4-1597072902972:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37460,66d5bb11-3e2a-4e3f-aec9-2b447e0b0b33,DISK], DatanodeInfoWithStorage[127.0.0.1:38706,91aa173e-73a2-4710-80ca-4a1b2eda9215,DISK], DatanodeInfoWithStorage[127.0.0.1:45493,3a92f5e5-812d-4d41-9374-d45679f69b5f,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1415677232-172.17.0.4-1597072902972:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37460,66d5bb11-3e2a-4e3f-aec9-2b447e0b0b33,DISK], DatanodeInfoWithStorage[127.0.0.1:38706,91aa173e-73a2-4710-80ca-4a1b2eda9215,DISK], DatanodeInfoWithStorage[127.0.0.1:45493,3a92f5e5-812d-4d41-9374-d45679f69b5f,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1415677232-172.17.0.4-1597072902972:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37460,6546345a-a8a5-4097-aba2-4e050a8be040,DISK], DatanodeInfoWithStorage[127.0.0.1:38706,2a23cfa1-1b35-45fa-b83f-f72fd7e5c0e4,DISK], DatanodeInfoWithStorage[127.0.0.1:45493,552144f5-efb4-43af-8e65-c6504140b36d,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1415677232-172.17.0.4-1597072902972:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37460,66d5bb11-3e2a-4e3f-aec9-2b447e0b0b33,DISK], DatanodeInfoWithStorage[127.0.0.1:38706,91aa173e-73a2-4710-80ca-4a1b2eda9215,DISK], DatanodeInfoWithStorage[127.0.0.1:45493,3a92f5e5-812d-4d41-9374-d45679f69b5f,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1415677232-172.17.0.4-1597072902972:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:37460,66d5bb11-3e2a-4e3f-aec9-2b447e0b0b33,DISK], DatanodeInfoWithStorage[127.0.0.1:38706,91aa173e-73a2-4710-80ca-4a1b2eda9215,DISK], DatanodeInfoWithStorage[127.0.0.1:45493,3a92f5e5-812d-4d41-9374-d45679f69b5f,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-354593089-172.17.0.4-1597072930690:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43270,95fbe5ea-8be4-4259-b615-39e5a594d067,DISK], DatanodeInfoWithStorage[127.0.0.1:35753,d4b359e8-6652-43b4-bddc-617c544c14fc,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,ef661d90-3273-4ca0-bf46-70161c447ef6,DISK], DatanodeInfoWithStorage[127.0.0.1:39830,70c8ca3a-9d0b-47c8-aaf6-83b8ba7169ba,DISK], DatanodeInfoWithStorage[127.0.0.1:45907,27c4f3c1-8544-4266-b050-e772aa243cf0,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-354593089-172.17.0.4-1597072930690:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43270,aea6dfef-a3c9-469d-8d6a-b7cbe352fa13,DISK], DatanodeInfoWithStorage[127.0.0.1:35753,34c3071a-2bc1-46e1-a737-48a7583930a0,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,206c07e5-5174-4677-a088-d011231de12d,DISK], DatanodeInfoWithStorage[127.0.0.1:39830,2e5a0f6a-a23d-4f57-bfd0-f73d15fba43a,DISK], DatanodeInfoWithStorage[127.0.0.1:45907,e5e4ca00-03ce-4ac3-93cf-e1f427a11dcd,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-354593089-172.17.0.4-1597072930690:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43270,aea6dfef-a3c9-469d-8d6a-b7cbe352fa13,DISK], DatanodeInfoWithStorage[127.0.0.1:35753,34c3071a-2bc1-46e1-a737-48a7583930a0,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,206c07e5-5174-4677-a088-d011231de12d,DISK], DatanodeInfoWithStorage[127.0.0.1:39830,2e5a0f6a-a23d-4f57-bfd0-f73d15fba43a,DISK], DatanodeInfoWithStorage[127.0.0.1:45907,e5e4ca00-03ce-4ac3-93cf-e1f427a11dcd,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-354593089-172.17.0.4-1597072930690:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:43270,95fbe5ea-8be4-4259-b615-39e5a594d067,DISK], DatanodeInfoWithStorage[127.0.0.1:35753,d4b359e8-6652-43b4-bddc-617c544c14fc,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,ef661d90-3273-4ca0-bf46-70161c447ef6,DISK], DatanodeInfoWithStorage[127.0.0.1:39830,70c8ca3a-9d0b-47c8-aaf6-83b8ba7169ba,DISK], DatanodeInfoWithStorage[127.0.0.1:45907,27c4f3c1-8544-4266-b050-e772aa243cf0,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-354593089-172.17.0.4-1597072930690:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43270,aea6dfef-a3c9-469d-8d6a-b7cbe352fa13,DISK], DatanodeInfoWithStorage[127.0.0.1:35753,34c3071a-2bc1-46e1-a737-48a7583930a0,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,206c07e5-5174-4677-a088-d011231de12d,DISK], DatanodeInfoWithStorage[127.0.0.1:39830,2e5a0f6a-a23d-4f57-bfd0-f73d15fba43a,DISK], DatanodeInfoWithStorage[127.0.0.1:45907,e5e4ca00-03ce-4ac3-93cf-e1f427a11dcd,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-354593089-172.17.0.4-1597072930690:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:43270,aea6dfef-a3c9-469d-8d6a-b7cbe352fa13,DISK], DatanodeInfoWithStorage[127.0.0.1:35753,34c3071a-2bc1-46e1-a737-48a7583930a0,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,206c07e5-5174-4677-a088-d011231de12d,DISK], DatanodeInfoWithStorage[127.0.0.1:39830,2e5a0f6a-a23d-4f57-bfd0-f73d15fba43a,DISK], DatanodeInfoWithStorage[127.0.0.1:45907,e5e4ca00-03ce-4ac3-93cf-e1f427a11dcd,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2138851903-172.17.0.4-1597073489403:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46503,73f20637-3109-49db-a16a-88c751bd8571,DISK], DatanodeInfoWithStorage[127.0.0.1:33869,55954bb4-51e7-42c6-b00e-331fe2725e1f,DISK], DatanodeInfoWithStorage[127.0.0.1:43246,8c00b5de-69d9-44e9-9ca5-88b0803859f5,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,59248fa9-467c-49f9-ac19-b569910bc9ab,DISK], DatanodeInfoWithStorage[127.0.0.1:36871,7b6c695e-6993-425d-befd-4881af56fbf6,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2138851903-172.17.0.4-1597073489403:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46503,80c17157-f830-42df-ae9e-3950aaaa5d3d,DISK], DatanodeInfoWithStorage[127.0.0.1:33869,7172c51c-4c77-408e-a847-68a40cfcc691,DISK], DatanodeInfoWithStorage[127.0.0.1:43246,55d5c275-a13b-45d7-8ee7-acf254503693,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,1d4de722-558f-4f87-b840-8178429c552f,DISK], DatanodeInfoWithStorage[127.0.0.1:36871,4943a366-7c4d-49d2-8d62-097005650aa3,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2138851903-172.17.0.4-1597073489403:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46503,80c17157-f830-42df-ae9e-3950aaaa5d3d,DISK], DatanodeInfoWithStorage[127.0.0.1:33869,7172c51c-4c77-408e-a847-68a40cfcc691,DISK], DatanodeInfoWithStorage[127.0.0.1:43246,55d5c275-a13b-45d7-8ee7-acf254503693,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,1d4de722-558f-4f87-b840-8178429c552f,DISK], DatanodeInfoWithStorage[127.0.0.1:36871,4943a366-7c4d-49d2-8d62-097005650aa3,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2138851903-172.17.0.4-1597073489403:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46503,73f20637-3109-49db-a16a-88c751bd8571,DISK], DatanodeInfoWithStorage[127.0.0.1:33869,55954bb4-51e7-42c6-b00e-331fe2725e1f,DISK], DatanodeInfoWithStorage[127.0.0.1:43246,8c00b5de-69d9-44e9-9ca5-88b0803859f5,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,59248fa9-467c-49f9-ac19-b569910bc9ab,DISK], DatanodeInfoWithStorage[127.0.0.1:36871,7b6c695e-6993-425d-befd-4881af56fbf6,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-2138851903-172.17.0.4-1597073489403:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46503,80c17157-f830-42df-ae9e-3950aaaa5d3d,DISK], DatanodeInfoWithStorage[127.0.0.1:33869,7172c51c-4c77-408e-a847-68a40cfcc691,DISK], DatanodeInfoWithStorage[127.0.0.1:43246,55d5c275-a13b-45d7-8ee7-acf254503693,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,1d4de722-558f-4f87-b840-8178429c552f,DISK], DatanodeInfoWithStorage[127.0.0.1:36871,4943a366-7c4d-49d2-8d62-097005650aa3,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-2138851903-172.17.0.4-1597073489403:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46503,80c17157-f830-42df-ae9e-3950aaaa5d3d,DISK], DatanodeInfoWithStorage[127.0.0.1:33869,7172c51c-4c77-408e-a847-68a40cfcc691,DISK], DatanodeInfoWithStorage[127.0.0.1:43246,55d5c275-a13b-45d7-8ee7-acf254503693,DISK], DatanodeInfoWithStorage[127.0.0.1:38358,1d4de722-558f-4f87-b840-8178429c552f,DISK], DatanodeInfoWithStorage[127.0.0.1:36871,4943a366-7c4d-49d2-8d62-097005650aa3,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1632738216-172.17.0.4-1597073847347:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39276,9278e2b9-73f8-4ee9-b00b-65c3c9c4d6f1,DISK], DatanodeInfoWithStorage[127.0.0.1:44074,2e2abd55-d87a-4e16-9a23-fbcfa734cb13,DISK], DatanodeInfoWithStorage[127.0.0.1:45741,dc4820bc-8880-40c3-8924-28b8c836c3d8,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1632738216-172.17.0.4-1597073847347:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39276,6944682e-8a25-498b-b816-84557d8cf910,DISK], DatanodeInfoWithStorage[127.0.0.1:44074,2c74c864-a8a6-4ef3-8ce0-1096f8c326c0,DISK], DatanodeInfoWithStorage[127.0.0.1:45741,c93aded1-5f27-4662-8479-8266a8f91dcb,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1632738216-172.17.0.4-1597073847347:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39276,6944682e-8a25-498b-b816-84557d8cf910,DISK], DatanodeInfoWithStorage[127.0.0.1:44074,2c74c864-a8a6-4ef3-8ce0-1096f8c326c0,DISK], DatanodeInfoWithStorage[127.0.0.1:45741,c93aded1-5f27-4662-8479-8266a8f91dcb,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1632738216-172.17.0.4-1597073847347:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39276,9278e2b9-73f8-4ee9-b00b-65c3c9c4d6f1,DISK], DatanodeInfoWithStorage[127.0.0.1:44074,2e2abd55-d87a-4e16-9a23-fbcfa734cb13,DISK], DatanodeInfoWithStorage[127.0.0.1:45741,dc4820bc-8880-40c3-8924-28b8c836c3d8,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1632738216-172.17.0.4-1597073847347:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39276,6944682e-8a25-498b-b816-84557d8cf910,DISK], DatanodeInfoWithStorage[127.0.0.1:44074,2c74c864-a8a6-4ef3-8ce0-1096f8c326c0,DISK], DatanodeInfoWithStorage[127.0.0.1:45741,c93aded1-5f27-4662-8479-8266a8f91dcb,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1632738216-172.17.0.4-1597073847347:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:39276,6944682e-8a25-498b-b816-84557d8cf910,DISK], DatanodeInfoWithStorage[127.0.0.1:44074,2c74c864-a8a6-4ef3-8ce0-1096f8c326c0,DISK], DatanodeInfoWithStorage[127.0.0.1:45741,c93aded1-5f27-4662-8479-8266a8f91dcb,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-972905905-172.17.0.4-1597074322280:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46046,4b24cdcd-f9c1-4c25-b53e-5a7450655cb6,DISK], DatanodeInfoWithStorage[127.0.0.1:35923,5ffbdbe3-2f16-4109-ac42-6704254bf412,DISK], DatanodeInfoWithStorage[127.0.0.1:46814,89fcd657-e2cd-4e88-a96e-643e32fc4561,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-972905905-172.17.0.4-1597074322280:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46046,96442944-5cd7-4cff-8083-441d6079c752,DISK], DatanodeInfoWithStorage[127.0.0.1:35923,1b9ced62-6ee2-4d3b-ba5f-ced61f3842b9,DISK], DatanodeInfoWithStorage[127.0.0.1:46814,0bb1d03e-a299-4695-9c1d-d330f5645180,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-972905905-172.17.0.4-1597074322280:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46046,96442944-5cd7-4cff-8083-441d6079c752,DISK], DatanodeInfoWithStorage[127.0.0.1:35923,1b9ced62-6ee2-4d3b-ba5f-ced61f3842b9,DISK], DatanodeInfoWithStorage[127.0.0.1:46814,0bb1d03e-a299-4695-9c1d-d330f5645180,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-972905905-172.17.0.4-1597074322280:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46046,4b24cdcd-f9c1-4c25-b53e-5a7450655cb6,DISK], DatanodeInfoWithStorage[127.0.0.1:35923,5ffbdbe3-2f16-4109-ac42-6704254bf412,DISK], DatanodeInfoWithStorage[127.0.0.1:46814,89fcd657-e2cd-4e88-a96e-643e32fc4561,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-972905905-172.17.0.4-1597074322280:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46046,96442944-5cd7-4cff-8083-441d6079c752,DISK], DatanodeInfoWithStorage[127.0.0.1:35923,1b9ced62-6ee2-4d3b-ba5f-ced61f3842b9,DISK], DatanodeInfoWithStorage[127.0.0.1:46814,0bb1d03e-a299-4695-9c1d-d330f5645180,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-972905905-172.17.0.4-1597074322280:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46046,96442944-5cd7-4cff-8083-441d6079c752,DISK], DatanodeInfoWithStorage[127.0.0.1:35923,1b9ced62-6ee2-4d3b-ba5f-ced61f3842b9,DISK], DatanodeInfoWithStorage[127.0.0.1:46814,0bb1d03e-a299-4695-9c1d-d330f5645180,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1208398092-172.17.0.4-1597074430313:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38732,48a42043-d1b2-49eb-b26c-4869633ef816,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,e767bef8-8dca-48a6-bfb9-9b4c5c9c9a78,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,10c6f153-2eb3-4cae-af0d-0072c801d10b,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1208398092-172.17.0.4-1597074430313:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38732,3cc4619a-7861-4f9f-abd2-e935ea1eef32,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,1d083da7-bb63-4014-8b3d-0b029e4df6af,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,d83c98dc-8e80-43f7-ae5f-8151bf4f6944,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1208398092-172.17.0.4-1597074430313:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38732,3cc4619a-7861-4f9f-abd2-e935ea1eef32,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,1d083da7-bb63-4014-8b3d-0b029e4df6af,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,d83c98dc-8e80-43f7-ae5f-8151bf4f6944,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1208398092-172.17.0.4-1597074430313:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38732,48a42043-d1b2-49eb-b26c-4869633ef816,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,e767bef8-8dca-48a6-bfb9-9b4c5c9c9a78,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,10c6f153-2eb3-4cae-af0d-0072c801d10b,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1208398092-172.17.0.4-1597074430313:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38732,3cc4619a-7861-4f9f-abd2-e935ea1eef32,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,1d083da7-bb63-4014-8b3d-0b029e4df6af,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,d83c98dc-8e80-43f7-ae5f-8151bf4f6944,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1208398092-172.17.0.4-1597074430313:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38732,3cc4619a-7861-4f9f-abd2-e935ea1eef32,DISK], DatanodeInfoWithStorage[127.0.0.1:40998,1d083da7-bb63-4014-8b3d-0b029e4df6af,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,d83c98dc-8e80-43f7-ae5f-8151bf4f6944,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-521196474-172.17.0.4-1597074451747:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44714,42328aa2-e2d4-49df-9a24-86627c75b3a4,DISK], DatanodeInfoWithStorage[127.0.0.1:42145,9dcebd19-1cb6-4a33-92bd-8064dd1659ff,DISK], DatanodeInfoWithStorage[127.0.0.1:36634,4a227907-c6af-437e-8d62-28dec5984e12,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-521196474-172.17.0.4-1597074451747:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44714,5295c83c-38e3-4248-8064-dc31f0f74de9,DISK], DatanodeInfoWithStorage[127.0.0.1:42145,ed974311-57c7-4a47-924c-77836e2a11c6,DISK], DatanodeInfoWithStorage[127.0.0.1:36634,b6d46d83-b56b-468f-bdb7-6b3553954eb3,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-521196474-172.17.0.4-1597074451747:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44714,5295c83c-38e3-4248-8064-dc31f0f74de9,DISK], DatanodeInfoWithStorage[127.0.0.1:42145,ed974311-57c7-4a47-924c-77836e2a11c6,DISK], DatanodeInfoWithStorage[127.0.0.1:36634,b6d46d83-b56b-468f-bdb7-6b3553954eb3,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-521196474-172.17.0.4-1597074451747:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44714,42328aa2-e2d4-49df-9a24-86627c75b3a4,DISK], DatanodeInfoWithStorage[127.0.0.1:42145,9dcebd19-1cb6-4a33-92bd-8064dd1659ff,DISK], DatanodeInfoWithStorage[127.0.0.1:36634,4a227907-c6af-437e-8d62-28dec5984e12,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-521196474-172.17.0.4-1597074451747:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44714,5295c83c-38e3-4248-8064-dc31f0f74de9,DISK], DatanodeInfoWithStorage[127.0.0.1:42145,ed974311-57c7-4a47-924c-77836e2a11c6,DISK], DatanodeInfoWithStorage[127.0.0.1:36634,b6d46d83-b56b-468f-bdb7-6b3553954eb3,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-521196474-172.17.0.4-1597074451747:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:44714,5295c83c-38e3-4248-8064-dc31f0f74de9,DISK], DatanodeInfoWithStorage[127.0.0.1:42145,ed974311-57c7-4a47-924c-77836e2a11c6,DISK], DatanodeInfoWithStorage[127.0.0.1:36634,b6d46d83-b56b-468f-bdb7-6b3553954eb3,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1612820074-172.17.0.4-1597074694560:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38312,267151d1-f16e-4dbe-aa0b-2354ba790c8b,DISK], DatanodeInfoWithStorage[127.0.0.1:38413,1c3e790f-1aa1-4efc-8070-ce2a9a8fd352,DISK], DatanodeInfoWithStorage[127.0.0.1:42637,1b16e6ba-63a2-4ee6-b824-1e4e85f64cb9,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1612820074-172.17.0.4-1597074694560:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38312,0dd37c2a-917d-4684-880e-a27b660e5d4b,DISK], DatanodeInfoWithStorage[127.0.0.1:38413,3cd3f438-277f-42c4-978f-91cc898802f1,DISK], DatanodeInfoWithStorage[127.0.0.1:42637,e461d162-d330-4263-bf7c-4fe636157d4f,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1612820074-172.17.0.4-1597074694560:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38312,0dd37c2a-917d-4684-880e-a27b660e5d4b,DISK], DatanodeInfoWithStorage[127.0.0.1:38413,3cd3f438-277f-42c4-978f-91cc898802f1,DISK], DatanodeInfoWithStorage[127.0.0.1:42637,e461d162-d330-4263-bf7c-4fe636157d4f,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1612820074-172.17.0.4-1597074694560:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38312,267151d1-f16e-4dbe-aa0b-2354ba790c8b,DISK], DatanodeInfoWithStorage[127.0.0.1:38413,1c3e790f-1aa1-4efc-8070-ce2a9a8fd352,DISK], DatanodeInfoWithStorage[127.0.0.1:42637,1b16e6ba-63a2-4ee6-b824-1e4e85f64cb9,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1612820074-172.17.0.4-1597074694560:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38312,0dd37c2a-917d-4684-880e-a27b660e5d4b,DISK], DatanodeInfoWithStorage[127.0.0.1:38413,3cd3f438-277f-42c4-978f-91cc898802f1,DISK], DatanodeInfoWithStorage[127.0.0.1:42637,e461d162-d330-4263-bf7c-4fe636157d4f,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1612820074-172.17.0.4-1597074694560:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38312,0dd37c2a-917d-4684-880e-a27b660e5d4b,DISK], DatanodeInfoWithStorage[127.0.0.1:38413,3cd3f438-277f-42c4-978f-91cc898802f1,DISK], DatanodeInfoWithStorage[127.0.0.1:42637,e461d162-d330-4263-bf7c-4fe636157d4f,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1741998275-172.17.0.4-1597074832557:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36505,20637862-d48e-469d-ab07-4f374bcfac63,DISK], DatanodeInfoWithStorage[127.0.0.1:33133,f4db704c-f10a-44c7-99a7-16723f3095b7,DISK], DatanodeInfoWithStorage[127.0.0.1:45366,dbd0cdca-ce49-46b7-ab13-b880f199847a,DISK], DatanodeInfoWithStorage[127.0.0.1:43806,cd3eb1b9-8856-481d-b420-f600ff274bd5,DISK], DatanodeInfoWithStorage[127.0.0.1:36075,c0a54cf4-5bd0-44ab-89f3-1517272d366c,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1741998275-172.17.0.4-1597074832557:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:36505,7e7b67e2-42db-47ce-b481-5e4257d187ba,DISK], DatanodeInfoWithStorage[127.0.0.1:33133,617d8325-6e5c-4e3f-b522-72e7ee02dfcb,DISK], DatanodeInfoWithStorage[127.0.0.1:45366,55cb5b9e-7d8a-490c-b4a0-4fec162ce6b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43806,e6e7dcf6-f22b-4118-bd53-7029d9564466,DISK], DatanodeInfoWithStorage[127.0.0.1:36075,dbee759e-b6d9-456b-ac1e-defcb37649d9,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1741998275-172.17.0.4-1597074832557:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:36505,7e7b67e2-42db-47ce-b481-5e4257d187ba,DISK], DatanodeInfoWithStorage[127.0.0.1:33133,617d8325-6e5c-4e3f-b522-72e7ee02dfcb,DISK], DatanodeInfoWithStorage[127.0.0.1:45366,55cb5b9e-7d8a-490c-b4a0-4fec162ce6b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43806,e6e7dcf6-f22b-4118-bd53-7029d9564466,DISK], DatanodeInfoWithStorage[127.0.0.1:36075,dbee759e-b6d9-456b-ac1e-defcb37649d9,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1741998275-172.17.0.4-1597074832557:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36505,20637862-d48e-469d-ab07-4f374bcfac63,DISK], DatanodeInfoWithStorage[127.0.0.1:33133,f4db704c-f10a-44c7-99a7-16723f3095b7,DISK], DatanodeInfoWithStorage[127.0.0.1:45366,dbd0cdca-ce49-46b7-ab13-b880f199847a,DISK], DatanodeInfoWithStorage[127.0.0.1:43806,cd3eb1b9-8856-481d-b420-f600ff274bd5,DISK], DatanodeInfoWithStorage[127.0.0.1:36075,c0a54cf4-5bd0-44ab-89f3-1517272d366c,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1741998275-172.17.0.4-1597074832557:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:36505,7e7b67e2-42db-47ce-b481-5e4257d187ba,DISK], DatanodeInfoWithStorage[127.0.0.1:33133,617d8325-6e5c-4e3f-b522-72e7ee02dfcb,DISK], DatanodeInfoWithStorage[127.0.0.1:45366,55cb5b9e-7d8a-490c-b4a0-4fec162ce6b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43806,e6e7dcf6-f22b-4118-bd53-7029d9564466,DISK], DatanodeInfoWithStorage[127.0.0.1:36075,dbee759e-b6d9-456b-ac1e-defcb37649d9,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1741998275-172.17.0.4-1597074832557:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:36505,7e7b67e2-42db-47ce-b481-5e4257d187ba,DISK], DatanodeInfoWithStorage[127.0.0.1:33133,617d8325-6e5c-4e3f-b522-72e7ee02dfcb,DISK], DatanodeInfoWithStorage[127.0.0.1:45366,55cb5b9e-7d8a-490c-b4a0-4fec162ce6b8,DISK], DatanodeInfoWithStorage[127.0.0.1:43806,e6e7dcf6-f22b-4118-bd53-7029d9564466,DISK], DatanodeInfoWithStorage[127.0.0.1:36075,dbee759e-b6d9-456b-ac1e-defcb37649d9,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1954382197-172.17.0.4-1597074857625:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42804,3551f45c-54f7-465d-ada4-ec313d4f2f43,DISK], DatanodeInfoWithStorage[127.0.0.1:37415,731099a9-d2ec-413b-8384-221e42f60d12,DISK], DatanodeInfoWithStorage[127.0.0.1:38333,d16444d4-7a90-4885-9c5a-911e4eb6dcaf,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1954382197-172.17.0.4-1597074857625:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42804,e7171c6e-27b7-414b-a86f-c8f31601a782,DISK], DatanodeInfoWithStorage[127.0.0.1:37415,fb176d5c-5036-4080-9bd7-57ba3511b436,DISK], DatanodeInfoWithStorage[127.0.0.1:38333,1a089ddb-6b17-492c-8476-f8684d3e501b,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1954382197-172.17.0.4-1597074857625:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42804,e7171c6e-27b7-414b-a86f-c8f31601a782,DISK], DatanodeInfoWithStorage[127.0.0.1:37415,fb176d5c-5036-4080-9bd7-57ba3511b436,DISK], DatanodeInfoWithStorage[127.0.0.1:38333,1a089ddb-6b17-492c-8476-f8684d3e501b,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1954382197-172.17.0.4-1597074857625:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42804,3551f45c-54f7-465d-ada4-ec313d4f2f43,DISK], DatanodeInfoWithStorage[127.0.0.1:37415,731099a9-d2ec-413b-8384-221e42f60d12,DISK], DatanodeInfoWithStorage[127.0.0.1:38333,d16444d4-7a90-4885-9c5a-911e4eb6dcaf,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1954382197-172.17.0.4-1597074857625:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42804,e7171c6e-27b7-414b-a86f-c8f31601a782,DISK], DatanodeInfoWithStorage[127.0.0.1:37415,fb176d5c-5036-4080-9bd7-57ba3511b436,DISK], DatanodeInfoWithStorage[127.0.0.1:38333,1a089ddb-6b17-492c-8476-f8684d3e501b,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1954382197-172.17.0.4-1597074857625:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:42804,e7171c6e-27b7-414b-a86f-c8f31601a782,DISK], DatanodeInfoWithStorage[127.0.0.1:37415,fb176d5c-5036-4080-9bd7-57ba3511b436,DISK], DatanodeInfoWithStorage[127.0.0.1:38333,1a089ddb-6b17-492c-8476-f8684d3e501b,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1590799389-172.17.0.4-1597074913034:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36471,385014b2-45b8-41ea-89d5-6c1d74bc834f,DISK], DatanodeInfoWithStorage[127.0.0.1:46512,cc0e0b51-7fc2-40d7-b14e-8d3071b8cf35,DISK], DatanodeInfoWithStorage[127.0.0.1:34575,d330d872-4693-40ce-b03f-b4bd945495de,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1590799389-172.17.0.4-1597074913034:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36471,cbd25675-9887-41cd-afbe-d6da0787f42f,DISK], DatanodeInfoWithStorage[127.0.0.1:46512,6d6d0f4f-adeb-438c-9796-5d02b7784948,DISK], DatanodeInfoWithStorage[127.0.0.1:34575,609f6f16-ba72-4aa0-b92e-0a21651ca041,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1590799389-172.17.0.4-1597074913034:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36471,cbd25675-9887-41cd-afbe-d6da0787f42f,DISK], DatanodeInfoWithStorage[127.0.0.1:46512,6d6d0f4f-adeb-438c-9796-5d02b7784948,DISK], DatanodeInfoWithStorage[127.0.0.1:34575,609f6f16-ba72-4aa0-b92e-0a21651ca041,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1590799389-172.17.0.4-1597074913034:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36471,385014b2-45b8-41ea-89d5-6c1d74bc834f,DISK], DatanodeInfoWithStorage[127.0.0.1:46512,cc0e0b51-7fc2-40d7-b14e-8d3071b8cf35,DISK], DatanodeInfoWithStorage[127.0.0.1:34575,d330d872-4693-40ce-b03f-b4bd945495de,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1590799389-172.17.0.4-1597074913034:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36471,cbd25675-9887-41cd-afbe-d6da0787f42f,DISK], DatanodeInfoWithStorage[127.0.0.1:46512,6d6d0f4f-adeb-438c-9796-5d02b7784948,DISK], DatanodeInfoWithStorage[127.0.0.1:34575,609f6f16-ba72-4aa0-b92e-0a21651ca041,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1590799389-172.17.0.4-1597074913034:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:36471,cbd25675-9887-41cd-afbe-d6da0787f42f,DISK], DatanodeInfoWithStorage[127.0.0.1:46512,6d6d0f4f-adeb-438c-9796-5d02b7784948,DISK], DatanodeInfoWithStorage[127.0.0.1:34575,609f6f16-ba72-4aa0-b92e-0a21651ca041,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1234169265-172.17.0.4-1597075082206:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46158,fa5a662c-ca1a-47f6-8e02-a74a7d1093d1,DISK], DatanodeInfoWithStorage[127.0.0.1:43083,12be12df-d0a0-4143-8ebf-b90fc7dacfb0,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,6bc53949-2214-40f3-ab85-df3b56cb6cf9,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1234169265-172.17.0.4-1597075082206:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46158,273bffa2-f17a-4a53-9238-a9aeb122b7fe,DISK], DatanodeInfoWithStorage[127.0.0.1:43083,85d81017-b347-4f60-8e5b-2e9b771de9bf,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,abf9b333-aeed-4528-9c4a-2e174790de51,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1234169265-172.17.0.4-1597075082206:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46158,273bffa2-f17a-4a53-9238-a9aeb122b7fe,DISK], DatanodeInfoWithStorage[127.0.0.1:43083,85d81017-b347-4f60-8e5b-2e9b771de9bf,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,abf9b333-aeed-4528-9c4a-2e174790de51,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1234169265-172.17.0.4-1597075082206:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46158,fa5a662c-ca1a-47f6-8e02-a74a7d1093d1,DISK], DatanodeInfoWithStorage[127.0.0.1:43083,12be12df-d0a0-4143-8ebf-b90fc7dacfb0,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,6bc53949-2214-40f3-ab85-df3b56cb6cf9,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1234169265-172.17.0.4-1597075082206:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46158,273bffa2-f17a-4a53-9238-a9aeb122b7fe,DISK], DatanodeInfoWithStorage[127.0.0.1:43083,85d81017-b347-4f60-8e5b-2e9b771de9bf,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,abf9b333-aeed-4528-9c4a-2e174790de51,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1234169265-172.17.0.4-1597075082206:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:46158,273bffa2-f17a-4a53-9238-a9aeb122b7fe,DISK], DatanodeInfoWithStorage[127.0.0.1:43083,85d81017-b347-4f60-8e5b-2e9b771de9bf,DISK], DatanodeInfoWithStorage[127.0.0.1:42578,abf9b333-aeed-4528-9c4a-2e174790de51,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1062511251-172.17.0.4-1597075218334:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40086,b7dca4be-2d72-4fa7-84df-d9c662137984,DISK], DatanodeInfoWithStorage[127.0.0.1:34221,4a01f722-6342-4aca-aac2-204708552419,DISK], DatanodeInfoWithStorage[127.0.0.1:46174,d1b5a8ca-66b2-4d94-a8e7-7400db24cdb1,DISK], DatanodeInfoWithStorage[127.0.0.1:38036,262569f1-c150-4c72-b695-db2adc966760,DISK], DatanodeInfoWithStorage[127.0.0.1:39768,b445c489-7fb9-4640-a400-a32aabba2456,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1062511251-172.17.0.4-1597075218334:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40086,e6d0593a-1b25-4a23-94f8-f845d9246eeb,DISK], DatanodeInfoWithStorage[127.0.0.1:34221,9972e7df-8cad-413b-8edc-bc6eda277f27,DISK], DatanodeInfoWithStorage[127.0.0.1:46174,cb1e706b-0d47-4513-9e18-7435e0228220,DISK], DatanodeInfoWithStorage[127.0.0.1:38036,31e0a8ec-289c-46fb-8ae7-207656eb1f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:39768,ae2b6301-90a5-4a51-aa2e-df51adb5b710,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1062511251-172.17.0.4-1597075218334:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40086,e6d0593a-1b25-4a23-94f8-f845d9246eeb,DISK], DatanodeInfoWithStorage[127.0.0.1:34221,9972e7df-8cad-413b-8edc-bc6eda277f27,DISK], DatanodeInfoWithStorage[127.0.0.1:46174,cb1e706b-0d47-4513-9e18-7435e0228220,DISK], DatanodeInfoWithStorage[127.0.0.1:38036,31e0a8ec-289c-46fb-8ae7-207656eb1f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:39768,ae2b6301-90a5-4a51-aa2e-df51adb5b710,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1062511251-172.17.0.4-1597075218334:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40086,b7dca4be-2d72-4fa7-84df-d9c662137984,DISK], DatanodeInfoWithStorage[127.0.0.1:34221,4a01f722-6342-4aca-aac2-204708552419,DISK], DatanodeInfoWithStorage[127.0.0.1:46174,d1b5a8ca-66b2-4d94-a8e7-7400db24cdb1,DISK], DatanodeInfoWithStorage[127.0.0.1:38036,262569f1-c150-4c72-b695-db2adc966760,DISK], DatanodeInfoWithStorage[127.0.0.1:39768,b445c489-7fb9-4640-a400-a32aabba2456,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1062511251-172.17.0.4-1597075218334:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40086,e6d0593a-1b25-4a23-94f8-f845d9246eeb,DISK], DatanodeInfoWithStorage[127.0.0.1:34221,9972e7df-8cad-413b-8edc-bc6eda277f27,DISK], DatanodeInfoWithStorage[127.0.0.1:46174,cb1e706b-0d47-4513-9e18-7435e0228220,DISK], DatanodeInfoWithStorage[127.0.0.1:38036,31e0a8ec-289c-46fb-8ae7-207656eb1f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:39768,ae2b6301-90a5-4a51-aa2e-df51adb5b710,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1062511251-172.17.0.4-1597075218334:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40086,e6d0593a-1b25-4a23-94f8-f845d9246eeb,DISK], DatanodeInfoWithStorage[127.0.0.1:34221,9972e7df-8cad-413b-8edc-bc6eda277f27,DISK], DatanodeInfoWithStorage[127.0.0.1:46174,cb1e706b-0d47-4513-9e18-7435e0228220,DISK], DatanodeInfoWithStorage[127.0.0.1:38036,31e0a8ec-289c-46fb-8ae7-207656eb1f1e,DISK], DatanodeInfoWithStorage[127.0.0.1:39768,ae2b6301-90a5-4a51-aa2e-df51adb5b710,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1238274665-172.17.0.4-1597075244795:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46146,54f02b00-2487-4eca-9188-6b92d59dfdcc,DISK], DatanodeInfoWithStorage[127.0.0.1:42204,8563dd76-e103-4987-b1a3-f7169722c0b9,DISK], DatanodeInfoWithStorage[127.0.0.1:44071,b653a808-13c9-44b9-877f-43ca01e55725,DISK], DatanodeInfoWithStorage[127.0.0.1:35246,fcec3672-1f7f-4634-a249-7544ea2bcb4d,DISK], DatanodeInfoWithStorage[127.0.0.1:42353,e8542efd-3c30-4168-8338-228f813149a9,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1238274665-172.17.0.4-1597075244795:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46146,782caf07-2b36-4edb-bcbf-722c79605ec1,DISK], DatanodeInfoWithStorage[127.0.0.1:42204,4dbe86ad-50ed-4268-bacf-7a1b17c3808e,DISK], DatanodeInfoWithStorage[127.0.0.1:44071,72706079-49f6-4e71-a83a-bbf032ebe39f,DISK], DatanodeInfoWithStorage[127.0.0.1:35246,d7599ae9-5c3b-4f62-808c-7dc2d30acedf,DISK], DatanodeInfoWithStorage[127.0.0.1:42353,0911a455-4f52-4a50-9d81-4f653e3c9d94,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1238274665-172.17.0.4-1597075244795:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46146,782caf07-2b36-4edb-bcbf-722c79605ec1,DISK], DatanodeInfoWithStorage[127.0.0.1:42204,4dbe86ad-50ed-4268-bacf-7a1b17c3808e,DISK], DatanodeInfoWithStorage[127.0.0.1:44071,72706079-49f6-4e71-a83a-bbf032ebe39f,DISK], DatanodeInfoWithStorage[127.0.0.1:35246,d7599ae9-5c3b-4f62-808c-7dc2d30acedf,DISK], DatanodeInfoWithStorage[127.0.0.1:42353,0911a455-4f52-4a50-9d81-4f653e3c9d94,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1238274665-172.17.0.4-1597075244795:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:46146,54f02b00-2487-4eca-9188-6b92d59dfdcc,DISK], DatanodeInfoWithStorage[127.0.0.1:42204,8563dd76-e103-4987-b1a3-f7169722c0b9,DISK], DatanodeInfoWithStorage[127.0.0.1:44071,b653a808-13c9-44b9-877f-43ca01e55725,DISK], DatanodeInfoWithStorage[127.0.0.1:35246,fcec3672-1f7f-4634-a249-7544ea2bcb4d,DISK], DatanodeInfoWithStorage[127.0.0.1:42353,e8542efd-3c30-4168-8338-228f813149a9,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1238274665-172.17.0.4-1597075244795:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46146,782caf07-2b36-4edb-bcbf-722c79605ec1,DISK], DatanodeInfoWithStorage[127.0.0.1:42204,4dbe86ad-50ed-4268-bacf-7a1b17c3808e,DISK], DatanodeInfoWithStorage[127.0.0.1:44071,72706079-49f6-4e71-a83a-bbf032ebe39f,DISK], DatanodeInfoWithStorage[127.0.0.1:35246,d7599ae9-5c3b-4f62-808c-7dc2d30acedf,DISK], DatanodeInfoWithStorage[127.0.0.1:42353,0911a455-4f52-4a50-9d81-4f653e3c9d94,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1238274665-172.17.0.4-1597075244795:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:46146,782caf07-2b36-4edb-bcbf-722c79605ec1,DISK], DatanodeInfoWithStorage[127.0.0.1:42204,4dbe86ad-50ed-4268-bacf-7a1b17c3808e,DISK], DatanodeInfoWithStorage[127.0.0.1:44071,72706079-49f6-4e71-a83a-bbf032ebe39f,DISK], DatanodeInfoWithStorage[127.0.0.1:35246,d7599ae9-5c3b-4f62-808c-7dc2d30acedf,DISK], DatanodeInfoWithStorage[127.0.0.1:42353,0911a455-4f52-4a50-9d81-4f653e3c9d94,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1603363738-172.17.0.4-1597075481400:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38585,513f4280-aec4-462f-b05a-9fe377aac490,DISK], DatanodeInfoWithStorage[127.0.0.1:32809,b9730c15-79d2-47f7-b494-2c14dd00e264,DISK], DatanodeInfoWithStorage[127.0.0.1:37885,07aa7304-0ce3-48a5-8771-bcde35689f69,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1603363738-172.17.0.4-1597075481400:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38585,6aeef53b-8a40-48b5-b742-bf9c0c12b1c9,DISK], DatanodeInfoWithStorage[127.0.0.1:32809,fa6d8f50-dc9a-4346-9e60-62014bcd6b55,DISK], DatanodeInfoWithStorage[127.0.0.1:37885,8a3a18f5-0059-4ef9-9d35-51495a169d54,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1603363738-172.17.0.4-1597075481400:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38585,6aeef53b-8a40-48b5-b742-bf9c0c12b1c9,DISK], DatanodeInfoWithStorage[127.0.0.1:32809,fa6d8f50-dc9a-4346-9e60-62014bcd6b55,DISK], DatanodeInfoWithStorage[127.0.0.1:37885,8a3a18f5-0059-4ef9-9d35-51495a169d54,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1603363738-172.17.0.4-1597075481400:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38585,513f4280-aec4-462f-b05a-9fe377aac490,DISK], DatanodeInfoWithStorage[127.0.0.1:32809,b9730c15-79d2-47f7-b494-2c14dd00e264,DISK], DatanodeInfoWithStorage[127.0.0.1:37885,07aa7304-0ce3-48a5-8771-bcde35689f69,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1603363738-172.17.0.4-1597075481400:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38585,6aeef53b-8a40-48b5-b742-bf9c0c12b1c9,DISK], DatanodeInfoWithStorage[127.0.0.1:32809,fa6d8f50-dc9a-4346-9e60-62014bcd6b55,DISK], DatanodeInfoWithStorage[127.0.0.1:37885,8a3a18f5-0059-4ef9-9d35-51495a169d54,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1603363738-172.17.0.4-1597075481400:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:38585,6aeef53b-8a40-48b5-b742-bf9c0c12b1c9,DISK], DatanodeInfoWithStorage[127.0.0.1:32809,fa6d8f50-dc9a-4346-9e60-62014bcd6b55,DISK], DatanodeInfoWithStorage[127.0.0.1:37885,8a3a18f5-0059-4ef9-9d35-51495a169d54,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1060203873-172.17.0.4-1597075803659:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38814,3a5a2644-2b80-42a4-9c74-0c868e55566d,DISK], DatanodeInfoWithStorage[127.0.0.1:36414,9322faab-d917-43dd-a2a1-060dcab9697a,DISK], DatanodeInfoWithStorage[127.0.0.1:41320,4014fb09-c86f-4443-a3ec-e2b5a6031f52,DISK], DatanodeInfoWithStorage[127.0.0.1:37532,bd5e9b8d-2004-4f56-b563-7d320a8efa46,DISK], DatanodeInfoWithStorage[127.0.0.1:45608,40c71c0e-955a-4de4-846e-bb502af5d245,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1060203873-172.17.0.4-1597075803659:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:38814,ec6c3cdf-194b-41ea-87da-248d5b18530c,DISK], DatanodeInfoWithStorage[127.0.0.1:36414,89159e32-f32e-4631-8e80-217a6df9e6e2,DISK], DatanodeInfoWithStorage[127.0.0.1:41320,422630de-3191-4da5-b5a3-767306af39c6,DISK], DatanodeInfoWithStorage[127.0.0.1:37532,4674787d-d5cb-4830-9ccb-f5d433ae4663,DISK], DatanodeInfoWithStorage[127.0.0.1:45608,e50773c2-76d1-4991-9fa7-08d8485e7c2b,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1060203873-172.17.0.4-1597075803659:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:38814,ec6c3cdf-194b-41ea-87da-248d5b18530c,DISK], DatanodeInfoWithStorage[127.0.0.1:36414,89159e32-f32e-4631-8e80-217a6df9e6e2,DISK], DatanodeInfoWithStorage[127.0.0.1:41320,422630de-3191-4da5-b5a3-767306af39c6,DISK], DatanodeInfoWithStorage[127.0.0.1:37532,4674787d-d5cb-4830-9ccb-f5d433ae4663,DISK], DatanodeInfoWithStorage[127.0.0.1:45608,e50773c2-76d1-4991-9fa7-08d8485e7c2b,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 3 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=3); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1060203873-172.17.0.4-1597075803659:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38814,3a5a2644-2b80-42a4-9c74-0c868e55566d,DISK], DatanodeInfoWithStorage[127.0.0.1:36414,9322faab-d917-43dd-a2a1-060dcab9697a,DISK], DatanodeInfoWithStorage[127.0.0.1:41320,4014fb09-c86f-4443-a3ec-e2b5a6031f52,DISK], DatanodeInfoWithStorage[127.0.0.1:37532,bd5e9b8d-2004-4f56-b563-7d320a8efa46,DISK], DatanodeInfoWithStorage[127.0.0.1:45608,40c71c0e-955a-4de4-846e-bb502af5d245,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-1060203873-172.17.0.4-1597075803659:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:38814,ec6c3cdf-194b-41ea-87da-248d5b18530c,DISK], DatanodeInfoWithStorage[127.0.0.1:36414,89159e32-f32e-4631-8e80-217a6df9e6e2,DISK], DatanodeInfoWithStorage[127.0.0.1:41320,422630de-3191-4da5-b5a3-767306af39c6,DISK], DatanodeInfoWithStorage[127.0.0.1:37532,4674787d-d5cb-4830-9ccb-f5d433ae4663,DISK], DatanodeInfoWithStorage[127.0.0.1:45608,e50773c2-76d1-4991-9fa7-08d8485e7c2b,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-1060203873-172.17.0.4-1597075803659:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:38814,ec6c3cdf-194b-41ea-87da-248d5b18530c,DISK], DatanodeInfoWithStorage[127.0.0.1:36414,89159e32-f32e-4631-8e80-217a6df9e6e2,DISK], DatanodeInfoWithStorage[127.0.0.1:41320,422630de-3191-4da5-b5a3-767306af39c6,DISK], DatanodeInfoWithStorage[127.0.0.1:37532,4674787d-d5cb-4830-9ccb-f5d433ae4663,DISK], DatanodeInfoWithStorage[127.0.0.1:45608,e50773c2-76d1-4991-9fa7-08d8485e7c2b,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1880891641-172.17.0.4-1597076141237:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40234,3f8d2ffb-f436-431c-bf33-62edd614273b,DISK], DatanodeInfoWithStorage[127.0.0.1:39413,4d9f9629-4acb-4a4a-97ac-7107c41b9c5a,DISK], DatanodeInfoWithStorage[127.0.0.1:36447,a90a98cf-5f65-4df6-8b29-28023caac5d4,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1880891641-172.17.0.4-1597076141237:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40234,0078c603-7629-4c6e-8d11-c217547a1beb,DISK], DatanodeInfoWithStorage[127.0.0.1:39413,e21ee1a4-4529-42e0-8533-2cb07edc4454,DISK], DatanodeInfoWithStorage[127.0.0.1:36447,bca36e23-e829-4039-b349-dd5a1a234f2c,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1880891641-172.17.0.4-1597076141237:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40234,0078c603-7629-4c6e-8d11-c217547a1beb,DISK], DatanodeInfoWithStorage[127.0.0.1:39413,e21ee1a4-4529-42e0-8533-2cb07edc4454,DISK], DatanodeInfoWithStorage[127.0.0.1:36447,bca36e23-e829-4039-b349-dd5a1a234f2c,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1880891641-172.17.0.4-1597076141237:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40234,3f8d2ffb-f436-431c-bf33-62edd614273b,DISK], DatanodeInfoWithStorage[127.0.0.1:39413,4d9f9629-4acb-4a4a-97ac-7107c41b9c5a,DISK], DatanodeInfoWithStorage[127.0.0.1:36447,a90a98cf-5f65-4df6-8b29-28023caac5d4,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-1880891641-172.17.0.4-1597076141237:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40234,0078c603-7629-4c6e-8d11-c217547a1beb,DISK], DatanodeInfoWithStorage[127.0.0.1:39413,e21ee1a4-4529-42e0-8533-2cb07edc4454,DISK], DatanodeInfoWithStorage[127.0.0.1:36447,bca36e23-e829-4039-b349-dd5a1a234f2c,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-1880891641-172.17.0.4-1597076141237:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:40234,0078c603-7629-4c6e-8d11-c217547a1beb,DISK], DatanodeInfoWithStorage[127.0.0.1:39413,e21ee1a4-4529-42e0-8533-2cb07edc4454,DISK], DatanodeInfoWithStorage[127.0.0.1:36447,bca36e23-e829-4039-b349-dd5a1a234f2c,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-236663504-172.17.0.4-1597076168938:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45417,de78b2d5-2380-4997-a925-303570b1d9f6,DISK], DatanodeInfoWithStorage[127.0.0.1:43309,1b2ec79e-00ad-492b-8c19-4f84389cf280,DISK], DatanodeInfoWithStorage[127.0.0.1:37370,2ea384ea-34e3-4f0c-b64c-9691e70fb488,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-236663504-172.17.0.4-1597076168938:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45417,e7efcebc-f44b-4918-b597-a874a4e7f083,DISK], DatanodeInfoWithStorage[127.0.0.1:43309,82676828-3867-41b7-9034-899afb821285,DISK], DatanodeInfoWithStorage[127.0.0.1:37370,90479d0a-2c69-4149-bfc9-34b5643aefea,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-236663504-172.17.0.4-1597076168938:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45417,e7efcebc-f44b-4918-b597-a874a4e7f083,DISK], DatanodeInfoWithStorage[127.0.0.1:43309,82676828-3867-41b7-9034-899afb821285,DISK], DatanodeInfoWithStorage[127.0.0.1:37370,90479d0a-2c69-4149-bfc9-34b5643aefea,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
stackTrace: java.io.IOException: 2 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=2); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-236663504-172.17.0.4-1597076168938:blk_-9223372036854775760_1003; getBlockSize()=4194304; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45417,de78b2d5-2380-4997-a925-303570b1d9f6,DISK], DatanodeInfoWithStorage[127.0.0.1:43309,1b2ec79e-00ad-492b-8c19-4f84389cf280,DISK], DatanodeInfoWithStorage[127.0.0.1:37370,2ea384ea-34e3-4f0c-b64c-9691e70fb488,DISK]]; indices=[0, 1, 2]}, LocatedStripedBlock{BP-236663504-172.17.0.4-1597076168938:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45417,e7efcebc-f44b-4918-b597-a874a4e7f083,DISK], DatanodeInfoWithStorage[127.0.0.1:43309,82676828-3867-41b7-9034-899afb821285,DISK], DatanodeInfoWithStorage[127.0.0.1:37370,90479d0a-2c69-4149-bfc9-34b5643aefea,DISK]]; indices=[0, 1, 2]}];  lastLocatedBlock=LocatedStripedBlock{BP-236663504-172.17.0.4-1597076168938:blk_-9223372036854775744_1004; getBlockSize()=4194304; corrupt=false; offset=4194304; locs=[DatanodeInfoWithStorage[127.0.0.1:45417,e7efcebc-f44b-4918-b597-a874a4e7f083,DISK], DatanodeInfoWithStorage[127.0.0.1:43309,82676828-3867-41b7-9034-899afb821285,DISK], DatanodeInfoWithStorage[127.0.0.1:37370,90479d0a-2c69-4149-bfc9-34b5643aefea,DISK]]; indices=[0, 1, 2]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=XOR-2-1-1024k, Schema=[ECSchema=[Codec=xor, numDataUnits=2, numParityUnits=1]], CellSize=1048576, Id=4]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-591086098-172.17.0.4-1597076508416:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34413,e6355703-e6cb-40d8-b51f-ad54916579d3,DISK], DatanodeInfoWithStorage[127.0.0.1:35530,0f0ee6c0-90f1-40a7-a7f7-f721329f526c,DISK], DatanodeInfoWithStorage[127.0.0.1:36927,184563e3-80c3-4a8e-9ce4-6a75262f3a5f,DISK], DatanodeInfoWithStorage[127.0.0.1:33022,866c1d95-25dd-4952-ad88-889667e99c41,DISK], DatanodeInfoWithStorage[127.0.0.1:34297,b256ccfa-8b4d-4c1d-ab7c-38439c4da398,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-591086098-172.17.0.4-1597076508416:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:34413,9d6e46d0-3795-4390-be60-2018ba5f08d9,DISK], DatanodeInfoWithStorage[127.0.0.1:35530,2da7b1cc-305b-44cf-8bff-71d7fa9dfdb2,DISK], DatanodeInfoWithStorage[127.0.0.1:36927,31808d73-7171-416a-b08c-3db0bed7ce72,DISK], DatanodeInfoWithStorage[127.0.0.1:33022,c2908fc5-0102-42e2-8cad-affa0395d70e,DISK], DatanodeInfoWithStorage[127.0.0.1:34297,fabaebcc-22ba-47ce-93ec-1d172b90f2c6,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-591086098-172.17.0.4-1597076508416:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:34413,9d6e46d0-3795-4390-be60-2018ba5f08d9,DISK], DatanodeInfoWithStorage[127.0.0.1:35530,2da7b1cc-305b-44cf-8bff-71d7fa9dfdb2,DISK], DatanodeInfoWithStorage[127.0.0.1:36927,31808d73-7171-416a-b08c-3db0bed7ce72,DISK], DatanodeInfoWithStorage[127.0.0.1:33022,c2908fc5-0102-42e2-8cad-affa0395d70e,DISK], DatanodeInfoWithStorage[127.0.0.1:34297,fabaebcc-22ba-47ce-93ec-1d172b90f2c6,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-591086098-172.17.0.4-1597076508416:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34413,e6355703-e6cb-40d8-b51f-ad54916579d3,DISK], DatanodeInfoWithStorage[127.0.0.1:35530,0f0ee6c0-90f1-40a7-a7f7-f721329f526c,DISK], DatanodeInfoWithStorage[127.0.0.1:36927,184563e3-80c3-4a8e-9ce4-6a75262f3a5f,DISK], DatanodeInfoWithStorage[127.0.0.1:33022,866c1d95-25dd-4952-ad88-889667e99c41,DISK], DatanodeInfoWithStorage[127.0.0.1:34297,b256ccfa-8b4d-4c1d-ab7c-38439c4da398,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-591086098-172.17.0.4-1597076508416:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:34413,9d6e46d0-3795-4390-be60-2018ba5f08d9,DISK], DatanodeInfoWithStorage[127.0.0.1:35530,2da7b1cc-305b-44cf-8bff-71d7fa9dfdb2,DISK], DatanodeInfoWithStorage[127.0.0.1:36927,31808d73-7171-416a-b08c-3db0bed7ce72,DISK], DatanodeInfoWithStorage[127.0.0.1:33022,c2908fc5-0102-42e2-8cad-affa0395d70e,DISK], DatanodeInfoWithStorage[127.0.0.1:34297,fabaebcc-22ba-47ce-93ec-1d172b90f2c6,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-591086098-172.17.0.4-1597076508416:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:34413,9d6e46d0-3795-4390-be60-2018ba5f08d9,DISK], DatanodeInfoWithStorage[127.0.0.1:35530,2da7b1cc-305b-44cf-8bff-71d7fa9dfdb2,DISK], DatanodeInfoWithStorage[127.0.0.1:36927,31808d73-7171-416a-b08c-3db0bed7ce72,DISK], DatanodeInfoWithStorage[127.0.0.1:33022,c2908fc5-0102-42e2-8cad-affa0395d70e,DISK], DatanodeInfoWithStorage[127.0.0.1:34297,fabaebcc-22ba-47ce-93ec-1d172b90f2c6,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.datanode.max.transfer.threads
component: hdfs:DataNode
v1: 4096
v2: 1
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy#testStatefulRead
reconfPoint: -1
result: -1
failureMessage: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-203828973-172.17.0.4-1597076647101:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40132,55244587-c977-4ecd-9e39-dbf766b0e89c,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,8757ebc6-35f7-4a2f-9e15-f564d34f30f9,DISK], DatanodeInfoWithStorage[127.0.0.1:35589,5a0e0f51-8e12-4f3a-aff0-07d1ea29d969,DISK], DatanodeInfoWithStorage[127.0.0.1:37746,a30d13e4-73fc-4aba-9a97-96cb4475b624,DISK], DatanodeInfoWithStorage[127.0.0.1:42366,ec3e98ae-9202-4102-95ab-56ae53f85287,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-203828973-172.17.0.4-1597076647101:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40132,8a719cf9-e5e5-41d8-9f7c-ad1fd9b95d38,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,dc425e3a-d55c-4d20-b2bf-75f81db76a0a,DISK], DatanodeInfoWithStorage[127.0.0.1:35589,ec965714-437e-49f3-be39-16d88d7b512d,DISK], DatanodeInfoWithStorage[127.0.0.1:37746,6fa57c75-68ec-40c1-8c2a-96824e30cfa0,DISK], DatanodeInfoWithStorage[127.0.0.1:42366,2987fed0-56b1-4b11-9d49-8b17bc4aa48b,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-203828973-172.17.0.4-1597076647101:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40132,8a719cf9-e5e5-41d8-9f7c-ad1fd9b95d38,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,dc425e3a-d55c-4d20-b2bf-75f81db76a0a,DISK], DatanodeInfoWithStorage[127.0.0.1:35589,ec965714-437e-49f3-be39-16d88d7b512d,DISK], DatanodeInfoWithStorage[127.0.0.1:37746,6fa57c75-68ec-40c1-8c2a-96824e30cfa0,DISK], DatanodeInfoWithStorage[127.0.0.1:42366,2987fed0-56b1-4b11-9d49-8b17bc4aa48b,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
stackTrace: java.io.IOException: 4 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=4); locatedBlocks is: LocatedBlocks{;  fileLength=12582912;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-203828973-172.17.0.4-1597076647101:blk_-9223372036854775760_1003; getBlockSize()=6291456; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40132,55244587-c977-4ecd-9e39-dbf766b0e89c,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,8757ebc6-35f7-4a2f-9e15-f564d34f30f9,DISK], DatanodeInfoWithStorage[127.0.0.1:35589,5a0e0f51-8e12-4f3a-aff0-07d1ea29d969,DISK], DatanodeInfoWithStorage[127.0.0.1:37746,a30d13e4-73fc-4aba-9a97-96cb4475b624,DISK], DatanodeInfoWithStorage[127.0.0.1:42366,ec3e98ae-9202-4102-95ab-56ae53f85287,DISK]]; indices=[0, 1, 2, 3, 4]}, LocatedStripedBlock{BP-203828973-172.17.0.4-1597076647101:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40132,8a719cf9-e5e5-41d8-9f7c-ad1fd9b95d38,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,dc425e3a-d55c-4d20-b2bf-75f81db76a0a,DISK], DatanodeInfoWithStorage[127.0.0.1:35589,ec965714-437e-49f3-be39-16d88d7b512d,DISK], DatanodeInfoWithStorage[127.0.0.1:37746,6fa57c75-68ec-40c1-8c2a-96824e30cfa0,DISK], DatanodeInfoWithStorage[127.0.0.1:42366,2987fed0-56b1-4b11-9d49-8b17bc4aa48b,DISK]]; indices=[0, 1, 2, 3, 4]}];  lastLocatedBlock=LocatedStripedBlock{BP-203828973-172.17.0.4-1597076647101:blk_-9223372036854775744_1004; getBlockSize()=6291456; corrupt=false; offset=6291456; locs=[DatanodeInfoWithStorage[127.0.0.1:40132,8a719cf9-e5e5-41d8-9f7c-ad1fd9b95d38,DISK], DatanodeInfoWithStorage[127.0.0.1:34760,dc425e3a-d55c-4d20-b2bf-75f81db76a0a,DISK], DatanodeInfoWithStorage[127.0.0.1:35589,ec965714-437e-49f3-be39-16d88d7b512d,DISK], DatanodeInfoWithStorage[127.0.0.1:37746,6fa57c75-68ec-40c1-8c2a-96824e30cfa0,DISK], DatanodeInfoWithStorage[127.0.0.1:42366,2987fed0-56b1-4b11-9d49-8b17bc4aa48b,DISK]]; indices=[0, 1, 2, 3, 4]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-3-2-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=3, numParityUnits=2]], CellSize=1048576, Id=2]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:836)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:383)
	at org.apache.hadoop.hdfs.TestDFSStripedInputStream.testStatefulRead(TestDFSStripedInputStream.java:324)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 19 out of 50
v1v1v2v2 failed with probability 26 out of 50
result: false positive !!!
Total execution time in seconds : 8482
