reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-117855496-172.17.0.5-1598144104139:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41905,DS-994ced99-eb77-4cf7-bd8a-88459e91eab6,DISK], DatanodeInfoWithStorage[127.0.0.1:37887,DS-92c0e706-b957-4446-9c52-2d7af3796d83,DISK], DatanodeInfoWithStorage[127.0.0.1:38173,DS-71280359-39e9-416a-9d8d-072b8736d593,DISK], DatanodeInfoWithStorage[127.0.0.1:33950,DS-975190a4-cee0-42f3-abb2-d646857be7ca,DISK], DatanodeInfoWithStorage[127.0.0.1:33204,DS-feec6ca3-fa69-46ee-aa9e-7b886c9b7fed,DISK], DatanodeInfoWithStorage[127.0.0.1:37574,DS-1031bc49-afac-4de8-84b8-ce3851da520e,DISK]]; indices=[0, 3, 5, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-117855496-172.17.0.5-1598144104139:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41905,DS-994ced99-eb77-4cf7-bd8a-88459e91eab6,DISK], DatanodeInfoWithStorage[127.0.0.1:37887,DS-92c0e706-b957-4446-9c52-2d7af3796d83,DISK], DatanodeInfoWithStorage[127.0.0.1:38173,DS-71280359-39e9-416a-9d8d-072b8736d593,DISK], DatanodeInfoWithStorage[127.0.0.1:33950,DS-975190a4-cee0-42f3-abb2-d646857be7ca,DISK], DatanodeInfoWithStorage[127.0.0.1:33204,DS-feec6ca3-fa69-46ee-aa9e-7b886c9b7fed,DISK], DatanodeInfoWithStorage[127.0.0.1:37574,DS-1031bc49-afac-4de8-84b8-ce3851da520e,DISK]]; indices=[0, 3, 5, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-117855496-172.17.0.5-1598144104139:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41905,DS-994ced99-eb77-4cf7-bd8a-88459e91eab6,DISK], DatanodeInfoWithStorage[127.0.0.1:37887,DS-92c0e706-b957-4446-9c52-2d7af3796d83,DISK], DatanodeInfoWithStorage[127.0.0.1:38173,DS-71280359-39e9-416a-9d8d-072b8736d593,DISK], DatanodeInfoWithStorage[127.0.0.1:33950,DS-975190a4-cee0-42f3-abb2-d646857be7ca,DISK], DatanodeInfoWithStorage[127.0.0.1:33204,DS-feec6ca3-fa69-46ee-aa9e-7b886c9b7fed,DISK], DatanodeInfoWithStorage[127.0.0.1:37574,DS-1031bc49-afac-4de8-84b8-ce3851da520e,DISK]]; indices=[0, 3, 5, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-117855496-172.17.0.5-1598144104139:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41905,DS-994ced99-eb77-4cf7-bd8a-88459e91eab6,DISK], DatanodeInfoWithStorage[127.0.0.1:37887,DS-92c0e706-b957-4446-9c52-2d7af3796d83,DISK], DatanodeInfoWithStorage[127.0.0.1:38173,DS-71280359-39e9-416a-9d8d-072b8736d593,DISK], DatanodeInfoWithStorage[127.0.0.1:33950,DS-975190a4-cee0-42f3-abb2-d646857be7ca,DISK], DatanodeInfoWithStorage[127.0.0.1:33204,DS-feec6ca3-fa69-46ee-aa9e-7b886c9b7fed,DISK], DatanodeInfoWithStorage[127.0.0.1:37574,DS-1031bc49-afac-4de8-84b8-ce3851da520e,DISK]]; indices=[0, 3, 5, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-551517111-172.17.0.5-1598144187161:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40863,DS-c0c44525-a6ad-48f9-90fb-9e0cea67781d,DISK], DatanodeInfoWithStorage[127.0.0.1:34542,DS-e06add09-9309-46d8-b8cf-28ec1f25d68e,DISK], DatanodeInfoWithStorage[127.0.0.1:37309,DS-87f01efa-0ac4-4726-bb4b-fab455df5363,DISK], DatanodeInfoWithStorage[127.0.0.1:37653,DS-75530a6e-2dd2-4145-9bd6-0aa92ea23469,DISK], DatanodeInfoWithStorage[127.0.0.1:43685,DS-885bf3a8-7255-4d57-b519-15edce687c19,DISK], DatanodeInfoWithStorage[127.0.0.1:35123,DS-55ec5d5e-0b9f-4ac6-a61f-76478bd38ca3,DISK]]; indices=[1, 3, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-551517111-172.17.0.5-1598144187161:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40863,DS-c0c44525-a6ad-48f9-90fb-9e0cea67781d,DISK], DatanodeInfoWithStorage[127.0.0.1:34542,DS-e06add09-9309-46d8-b8cf-28ec1f25d68e,DISK], DatanodeInfoWithStorage[127.0.0.1:37309,DS-87f01efa-0ac4-4726-bb4b-fab455df5363,DISK], DatanodeInfoWithStorage[127.0.0.1:37653,DS-75530a6e-2dd2-4145-9bd6-0aa92ea23469,DISK], DatanodeInfoWithStorage[127.0.0.1:43685,DS-885bf3a8-7255-4d57-b519-15edce687c19,DISK], DatanodeInfoWithStorage[127.0.0.1:35123,DS-55ec5d5e-0b9f-4ac6-a61f-76478bd38ca3,DISK]]; indices=[1, 3, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-551517111-172.17.0.5-1598144187161:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40863,DS-c0c44525-a6ad-48f9-90fb-9e0cea67781d,DISK], DatanodeInfoWithStorage[127.0.0.1:34542,DS-e06add09-9309-46d8-b8cf-28ec1f25d68e,DISK], DatanodeInfoWithStorage[127.0.0.1:37309,DS-87f01efa-0ac4-4726-bb4b-fab455df5363,DISK], DatanodeInfoWithStorage[127.0.0.1:37653,DS-75530a6e-2dd2-4145-9bd6-0aa92ea23469,DISK], DatanodeInfoWithStorage[127.0.0.1:43685,DS-885bf3a8-7255-4d57-b519-15edce687c19,DISK], DatanodeInfoWithStorage[127.0.0.1:35123,DS-55ec5d5e-0b9f-4ac6-a61f-76478bd38ca3,DISK]]; indices=[1, 3, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-551517111-172.17.0.5-1598144187161:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40863,DS-c0c44525-a6ad-48f9-90fb-9e0cea67781d,DISK], DatanodeInfoWithStorage[127.0.0.1:34542,DS-e06add09-9309-46d8-b8cf-28ec1f25d68e,DISK], DatanodeInfoWithStorage[127.0.0.1:37309,DS-87f01efa-0ac4-4726-bb4b-fab455df5363,DISK], DatanodeInfoWithStorage[127.0.0.1:37653,DS-75530a6e-2dd2-4145-9bd6-0aa92ea23469,DISK], DatanodeInfoWithStorage[127.0.0.1:43685,DS-885bf3a8-7255-4d57-b519-15edce687c19,DISK], DatanodeInfoWithStorage[127.0.0.1:35123,DS-55ec5d5e-0b9f-4ac6-a61f-76478bd38ca3,DISK]]; indices=[1, 3, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2109239180-172.17.0.5-1598144345519:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38031,DS-0d955e28-a93b-42b3-9e96-38688a273504,DISK], DatanodeInfoWithStorage[127.0.0.1:34803,DS-5eba084f-1ae9-409b-a74c-4aac4c03ee30,DISK], DatanodeInfoWithStorage[127.0.0.1:39044,DS-46bb8492-6d14-46eb-85ec-04dcb8a9d374,DISK], DatanodeInfoWithStorage[127.0.0.1:40330,DS-48bd0dcd-b5cc-4626-a450-e9f9b866246b,DISK], DatanodeInfoWithStorage[127.0.0.1:45716,DS-9fd64deb-e6a9-4cdb-aae5-a5149f45eea5,DISK], DatanodeInfoWithStorage[127.0.0.1:41502,DS-33331e6d-2d30-4630-8ec2-f078b36f88de,DISK], DatanodeInfoWithStorage[127.0.0.1:45395,DS-4d37b136-2802-4f87-8dba-c2950733fe3c,DISK]]; indices=[0, 2, 4, 5, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2109239180-172.17.0.5-1598144345519:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38031,DS-0d955e28-a93b-42b3-9e96-38688a273504,DISK], DatanodeInfoWithStorage[127.0.0.1:34803,DS-5eba084f-1ae9-409b-a74c-4aac4c03ee30,DISK], DatanodeInfoWithStorage[127.0.0.1:39044,DS-46bb8492-6d14-46eb-85ec-04dcb8a9d374,DISK], DatanodeInfoWithStorage[127.0.0.1:40330,DS-48bd0dcd-b5cc-4626-a450-e9f9b866246b,DISK], DatanodeInfoWithStorage[127.0.0.1:45716,DS-9fd64deb-e6a9-4cdb-aae5-a5149f45eea5,DISK], DatanodeInfoWithStorage[127.0.0.1:41502,DS-33331e6d-2d30-4630-8ec2-f078b36f88de,DISK], DatanodeInfoWithStorage[127.0.0.1:45395,DS-4d37b136-2802-4f87-8dba-c2950733fe3c,DISK]]; indices=[0, 2, 4, 5, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2109239180-172.17.0.5-1598144345519:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38031,DS-0d955e28-a93b-42b3-9e96-38688a273504,DISK], DatanodeInfoWithStorage[127.0.0.1:34803,DS-5eba084f-1ae9-409b-a74c-4aac4c03ee30,DISK], DatanodeInfoWithStorage[127.0.0.1:39044,DS-46bb8492-6d14-46eb-85ec-04dcb8a9d374,DISK], DatanodeInfoWithStorage[127.0.0.1:40330,DS-48bd0dcd-b5cc-4626-a450-e9f9b866246b,DISK], DatanodeInfoWithStorage[127.0.0.1:45716,DS-9fd64deb-e6a9-4cdb-aae5-a5149f45eea5,DISK], DatanodeInfoWithStorage[127.0.0.1:41502,DS-33331e6d-2d30-4630-8ec2-f078b36f88de,DISK], DatanodeInfoWithStorage[127.0.0.1:45395,DS-4d37b136-2802-4f87-8dba-c2950733fe3c,DISK]]; indices=[0, 2, 4, 5, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2109239180-172.17.0.5-1598144345519:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38031,DS-0d955e28-a93b-42b3-9e96-38688a273504,DISK], DatanodeInfoWithStorage[127.0.0.1:34803,DS-5eba084f-1ae9-409b-a74c-4aac4c03ee30,DISK], DatanodeInfoWithStorage[127.0.0.1:39044,DS-46bb8492-6d14-46eb-85ec-04dcb8a9d374,DISK], DatanodeInfoWithStorage[127.0.0.1:40330,DS-48bd0dcd-b5cc-4626-a450-e9f9b866246b,DISK], DatanodeInfoWithStorage[127.0.0.1:45716,DS-9fd64deb-e6a9-4cdb-aae5-a5149f45eea5,DISK], DatanodeInfoWithStorage[127.0.0.1:41502,DS-33331e6d-2d30-4630-8ec2-f078b36f88de,DISK], DatanodeInfoWithStorage[127.0.0.1:45395,DS-4d37b136-2802-4f87-8dba-c2950733fe3c,DISK]]; indices=[0, 2, 4, 5, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1356220243-172.17.0.5-1598144496241:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36215,DS-e74c2622-78ca-46e5-ba0f-7f54c2e60264,DISK], DatanodeInfoWithStorage[127.0.0.1:39126,DS-731ce815-d132-43ba-ace1-784e2ae3f95c,DISK], DatanodeInfoWithStorage[127.0.0.1:35033,DS-5061a2e1-05ef-475f-8ee3-e892087c4308,DISK], DatanodeInfoWithStorage[127.0.0.1:45501,DS-a196afe8-7c08-46c7-a904-7143898c921a,DISK], DatanodeInfoWithStorage[127.0.0.1:37189,DS-c91344a2-f1fa-43e5-a6bf-0fdaa5a2f815,DISK], DatanodeInfoWithStorage[127.0.0.1:42786,DS-eb4079b1-53dc-4331-abc3-3e151129b3c7,DISK]]; indices=[3, 6, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1356220243-172.17.0.5-1598144496241:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36215,DS-e74c2622-78ca-46e5-ba0f-7f54c2e60264,DISK], DatanodeInfoWithStorage[127.0.0.1:39126,DS-731ce815-d132-43ba-ace1-784e2ae3f95c,DISK], DatanodeInfoWithStorage[127.0.0.1:35033,DS-5061a2e1-05ef-475f-8ee3-e892087c4308,DISK], DatanodeInfoWithStorage[127.0.0.1:45501,DS-a196afe8-7c08-46c7-a904-7143898c921a,DISK], DatanodeInfoWithStorage[127.0.0.1:37189,DS-c91344a2-f1fa-43e5-a6bf-0fdaa5a2f815,DISK], DatanodeInfoWithStorage[127.0.0.1:42786,DS-eb4079b1-53dc-4331-abc3-3e151129b3c7,DISK]]; indices=[3, 6, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1356220243-172.17.0.5-1598144496241:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36215,DS-e74c2622-78ca-46e5-ba0f-7f54c2e60264,DISK], DatanodeInfoWithStorage[127.0.0.1:39126,DS-731ce815-d132-43ba-ace1-784e2ae3f95c,DISK], DatanodeInfoWithStorage[127.0.0.1:35033,DS-5061a2e1-05ef-475f-8ee3-e892087c4308,DISK], DatanodeInfoWithStorage[127.0.0.1:45501,DS-a196afe8-7c08-46c7-a904-7143898c921a,DISK], DatanodeInfoWithStorage[127.0.0.1:37189,DS-c91344a2-f1fa-43e5-a6bf-0fdaa5a2f815,DISK], DatanodeInfoWithStorage[127.0.0.1:42786,DS-eb4079b1-53dc-4331-abc3-3e151129b3c7,DISK]]; indices=[3, 6, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1356220243-172.17.0.5-1598144496241:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:36215,DS-e74c2622-78ca-46e5-ba0f-7f54c2e60264,DISK], DatanodeInfoWithStorage[127.0.0.1:39126,DS-731ce815-d132-43ba-ace1-784e2ae3f95c,DISK], DatanodeInfoWithStorage[127.0.0.1:35033,DS-5061a2e1-05ef-475f-8ee3-e892087c4308,DISK], DatanodeInfoWithStorage[127.0.0.1:45501,DS-a196afe8-7c08-46c7-a904-7143898c921a,DISK], DatanodeInfoWithStorage[127.0.0.1:37189,DS-c91344a2-f1fa-43e5-a6bf-0fdaa5a2f815,DISK], DatanodeInfoWithStorage[127.0.0.1:42786,DS-eb4079b1-53dc-4331-abc3-3e151129b3c7,DISK]]; indices=[3, 6, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1236968025-172.17.0.5-1598144579033:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42539,DS-c1b5852d-f187-4ea8-8350-7efdc115f1ee,DISK], DatanodeInfoWithStorage[127.0.0.1:36877,DS-122bd980-cdcf-4a2d-9f07-082bed04896a,DISK], DatanodeInfoWithStorage[127.0.0.1:43910,DS-157f774c-bdde-46ba-a81a-557ef931a446,DISK], DatanodeInfoWithStorage[127.0.0.1:38689,DS-b04e96ae-3b02-46cc-a242-5d2f729cf54a,DISK], DatanodeInfoWithStorage[127.0.0.1:37408,DS-6baa75e0-b554-43ac-b06b-6a18f0933bd8,DISK], DatanodeInfoWithStorage[127.0.0.1:43591,DS-aaf38fe9-ec0f-4449-b40c-6028efb25293,DISK]]; indices=[0, 2, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1236968025-172.17.0.5-1598144579033:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42539,DS-c1b5852d-f187-4ea8-8350-7efdc115f1ee,DISK], DatanodeInfoWithStorage[127.0.0.1:36877,DS-122bd980-cdcf-4a2d-9f07-082bed04896a,DISK], DatanodeInfoWithStorage[127.0.0.1:43910,DS-157f774c-bdde-46ba-a81a-557ef931a446,DISK], DatanodeInfoWithStorage[127.0.0.1:38689,DS-b04e96ae-3b02-46cc-a242-5d2f729cf54a,DISK], DatanodeInfoWithStorage[127.0.0.1:37408,DS-6baa75e0-b554-43ac-b06b-6a18f0933bd8,DISK], DatanodeInfoWithStorage[127.0.0.1:43591,DS-aaf38fe9-ec0f-4449-b40c-6028efb25293,DISK]]; indices=[0, 2, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1236968025-172.17.0.5-1598144579033:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42539,DS-c1b5852d-f187-4ea8-8350-7efdc115f1ee,DISK], DatanodeInfoWithStorage[127.0.0.1:36877,DS-122bd980-cdcf-4a2d-9f07-082bed04896a,DISK], DatanodeInfoWithStorage[127.0.0.1:43910,DS-157f774c-bdde-46ba-a81a-557ef931a446,DISK], DatanodeInfoWithStorage[127.0.0.1:38689,DS-b04e96ae-3b02-46cc-a242-5d2f729cf54a,DISK], DatanodeInfoWithStorage[127.0.0.1:37408,DS-6baa75e0-b554-43ac-b06b-6a18f0933bd8,DISK], DatanodeInfoWithStorage[127.0.0.1:43591,DS-aaf38fe9-ec0f-4449-b40c-6028efb25293,DISK]]; indices=[0, 2, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1236968025-172.17.0.5-1598144579033:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42539,DS-c1b5852d-f187-4ea8-8350-7efdc115f1ee,DISK], DatanodeInfoWithStorage[127.0.0.1:36877,DS-122bd980-cdcf-4a2d-9f07-082bed04896a,DISK], DatanodeInfoWithStorage[127.0.0.1:43910,DS-157f774c-bdde-46ba-a81a-557ef931a446,DISK], DatanodeInfoWithStorage[127.0.0.1:38689,DS-b04e96ae-3b02-46cc-a242-5d2f729cf54a,DISK], DatanodeInfoWithStorage[127.0.0.1:37408,DS-6baa75e0-b554-43ac-b06b-6a18f0933bd8,DISK], DatanodeInfoWithStorage[127.0.0.1:43591,DS-aaf38fe9-ec0f-4449-b40c-6028efb25293,DISK]]; indices=[0, 2, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-755305040-172.17.0.5-1598144896017:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42044,DS-470bf322-6f8f-4088-9eee-27fd23077040,DISK], DatanodeInfoWithStorage[127.0.0.1:37216,DS-1accc38c-b077-4b58-821d-7f57cd157f50,DISK], DatanodeInfoWithStorage[127.0.0.1:35438,DS-2f1e1fbe-62ad-47e2-9b3a-38d0912f5382,DISK], DatanodeInfoWithStorage[127.0.0.1:36392,DS-45fa73c3-d822-4610-a956-b62ec2a40095,DISK], DatanodeInfoWithStorage[127.0.0.1:46880,DS-632f6ced-bbd6-4400-810a-4a621bd2380d,DISK], DatanodeInfoWithStorage[127.0.0.1:46741,DS-513a359a-f99f-4ec2-8a71-33283bf1f094,DISK], DatanodeInfoWithStorage[127.0.0.1:39892,DS-2102a04c-e89c-4789-af25-e153f0cc2ef9,DISK]]; indices=[0, 1, 2, 4, 6, 10, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-755305040-172.17.0.5-1598144896017:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42044,DS-470bf322-6f8f-4088-9eee-27fd23077040,DISK], DatanodeInfoWithStorage[127.0.0.1:37216,DS-1accc38c-b077-4b58-821d-7f57cd157f50,DISK], DatanodeInfoWithStorage[127.0.0.1:35438,DS-2f1e1fbe-62ad-47e2-9b3a-38d0912f5382,DISK], DatanodeInfoWithStorage[127.0.0.1:36392,DS-45fa73c3-d822-4610-a956-b62ec2a40095,DISK], DatanodeInfoWithStorage[127.0.0.1:46880,DS-632f6ced-bbd6-4400-810a-4a621bd2380d,DISK], DatanodeInfoWithStorage[127.0.0.1:46741,DS-513a359a-f99f-4ec2-8a71-33283bf1f094,DISK], DatanodeInfoWithStorage[127.0.0.1:39892,DS-2102a04c-e89c-4789-af25-e153f0cc2ef9,DISK]]; indices=[0, 1, 2, 4, 6, 10, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-755305040-172.17.0.5-1598144896017:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42044,DS-470bf322-6f8f-4088-9eee-27fd23077040,DISK], DatanodeInfoWithStorage[127.0.0.1:37216,DS-1accc38c-b077-4b58-821d-7f57cd157f50,DISK], DatanodeInfoWithStorage[127.0.0.1:35438,DS-2f1e1fbe-62ad-47e2-9b3a-38d0912f5382,DISK], DatanodeInfoWithStorage[127.0.0.1:36392,DS-45fa73c3-d822-4610-a956-b62ec2a40095,DISK], DatanodeInfoWithStorage[127.0.0.1:46880,DS-632f6ced-bbd6-4400-810a-4a621bd2380d,DISK], DatanodeInfoWithStorage[127.0.0.1:46741,DS-513a359a-f99f-4ec2-8a71-33283bf1f094,DISK], DatanodeInfoWithStorage[127.0.0.1:39892,DS-2102a04c-e89c-4789-af25-e153f0cc2ef9,DISK]]; indices=[0, 1, 2, 4, 6, 10, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-755305040-172.17.0.5-1598144896017:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42044,DS-470bf322-6f8f-4088-9eee-27fd23077040,DISK], DatanodeInfoWithStorage[127.0.0.1:37216,DS-1accc38c-b077-4b58-821d-7f57cd157f50,DISK], DatanodeInfoWithStorage[127.0.0.1:35438,DS-2f1e1fbe-62ad-47e2-9b3a-38d0912f5382,DISK], DatanodeInfoWithStorage[127.0.0.1:36392,DS-45fa73c3-d822-4610-a956-b62ec2a40095,DISK], DatanodeInfoWithStorage[127.0.0.1:46880,DS-632f6ced-bbd6-4400-810a-4a621bd2380d,DISK], DatanodeInfoWithStorage[127.0.0.1:46741,DS-513a359a-f99f-4ec2-8a71-33283bf1f094,DISK], DatanodeInfoWithStorage[127.0.0.1:39892,DS-2102a04c-e89c-4789-af25-e153f0cc2ef9,DISK]]; indices=[0, 1, 2, 4, 6, 10, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1937099461-172.17.0.5-1598145123927:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34345,DS-a4532570-2b48-427a-9f8d-d6bb0823d2ad,DISK], DatanodeInfoWithStorage[127.0.0.1:37087,DS-4cfd60f0-c82b-4d15-a442-7eda250f2ee5,DISK], DatanodeInfoWithStorage[127.0.0.1:37251,DS-eef2f335-e0d9-4501-a664-fd5ad41e9044,DISK], DatanodeInfoWithStorage[127.0.0.1:34178,DS-20b87dd1-548e-4865-8a31-e0feb829f421,DISK], DatanodeInfoWithStorage[127.0.0.1:42937,DS-6ff27cd7-3d3b-424a-84b4-1ccfa74ac59b,DISK], DatanodeInfoWithStorage[127.0.0.1:40152,DS-34d2b81e-fc66-4f04-bad9-5d8249c597be,DISK], DatanodeInfoWithStorage[127.0.0.1:36650,DS-feb9a45f-4f4b-470e-ac13-f0664a458e9f,DISK]]; indices=[0, 1, 2, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1937099461-172.17.0.5-1598145123927:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34345,DS-a4532570-2b48-427a-9f8d-d6bb0823d2ad,DISK], DatanodeInfoWithStorage[127.0.0.1:37087,DS-4cfd60f0-c82b-4d15-a442-7eda250f2ee5,DISK], DatanodeInfoWithStorage[127.0.0.1:37251,DS-eef2f335-e0d9-4501-a664-fd5ad41e9044,DISK], DatanodeInfoWithStorage[127.0.0.1:34178,DS-20b87dd1-548e-4865-8a31-e0feb829f421,DISK], DatanodeInfoWithStorage[127.0.0.1:42937,DS-6ff27cd7-3d3b-424a-84b4-1ccfa74ac59b,DISK], DatanodeInfoWithStorage[127.0.0.1:40152,DS-34d2b81e-fc66-4f04-bad9-5d8249c597be,DISK], DatanodeInfoWithStorage[127.0.0.1:36650,DS-feb9a45f-4f4b-470e-ac13-f0664a458e9f,DISK]]; indices=[0, 1, 2, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1937099461-172.17.0.5-1598145123927:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34345,DS-a4532570-2b48-427a-9f8d-d6bb0823d2ad,DISK], DatanodeInfoWithStorage[127.0.0.1:37087,DS-4cfd60f0-c82b-4d15-a442-7eda250f2ee5,DISK], DatanodeInfoWithStorage[127.0.0.1:37251,DS-eef2f335-e0d9-4501-a664-fd5ad41e9044,DISK], DatanodeInfoWithStorage[127.0.0.1:34178,DS-20b87dd1-548e-4865-8a31-e0feb829f421,DISK], DatanodeInfoWithStorage[127.0.0.1:42937,DS-6ff27cd7-3d3b-424a-84b4-1ccfa74ac59b,DISK], DatanodeInfoWithStorage[127.0.0.1:40152,DS-34d2b81e-fc66-4f04-bad9-5d8249c597be,DISK], DatanodeInfoWithStorage[127.0.0.1:36650,DS-feb9a45f-4f4b-470e-ac13-f0664a458e9f,DISK]]; indices=[0, 1, 2, 6, 7, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1937099461-172.17.0.5-1598145123927:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34345,DS-a4532570-2b48-427a-9f8d-d6bb0823d2ad,DISK], DatanodeInfoWithStorage[127.0.0.1:37087,DS-4cfd60f0-c82b-4d15-a442-7eda250f2ee5,DISK], DatanodeInfoWithStorage[127.0.0.1:37251,DS-eef2f335-e0d9-4501-a664-fd5ad41e9044,DISK], DatanodeInfoWithStorage[127.0.0.1:34178,DS-20b87dd1-548e-4865-8a31-e0feb829f421,DISK], DatanodeInfoWithStorage[127.0.0.1:42937,DS-6ff27cd7-3d3b-424a-84b4-1ccfa74ac59b,DISK], DatanodeInfoWithStorage[127.0.0.1:40152,DS-34d2b81e-fc66-4f04-bad9-5d8249c597be,DISK], DatanodeInfoWithStorage[127.0.0.1:36650,DS-feb9a45f-4f4b-470e-ac13-f0664a458e9f,DISK]]; indices=[0, 1, 2, 6, 7, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-260120234-172.17.0.5-1598145286336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40325,DS-fd002df4-1b2a-4b89-908d-8148b003be08,DISK], DatanodeInfoWithStorage[127.0.0.1:36489,DS-5014931f-fc55-4788-8f33-9b60b0d45ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:35133,DS-7bf9c92b-d99f-4ba9-8b99-6209ec8ab056,DISK], DatanodeInfoWithStorage[127.0.0.1:37804,DS-aef64048-5ac5-4629-8953-ae09492acf0f,DISK], DatanodeInfoWithStorage[127.0.0.1:37403,DS-37505672-a528-4eef-a695-c637b34049d7,DISK], DatanodeInfoWithStorage[127.0.0.1:33435,DS-59f1c349-a114-4e13-b910-a7977e79bd93,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-340dd822-c10d-4a0f-957e-29a0eaacb3d4,DISK]]; indices=[0, 2, 4, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-260120234-172.17.0.5-1598145286336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40325,DS-fd002df4-1b2a-4b89-908d-8148b003be08,DISK], DatanodeInfoWithStorage[127.0.0.1:36489,DS-5014931f-fc55-4788-8f33-9b60b0d45ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:35133,DS-7bf9c92b-d99f-4ba9-8b99-6209ec8ab056,DISK], DatanodeInfoWithStorage[127.0.0.1:37804,DS-aef64048-5ac5-4629-8953-ae09492acf0f,DISK], DatanodeInfoWithStorage[127.0.0.1:37403,DS-37505672-a528-4eef-a695-c637b34049d7,DISK], DatanodeInfoWithStorage[127.0.0.1:33435,DS-59f1c349-a114-4e13-b910-a7977e79bd93,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-340dd822-c10d-4a0f-957e-29a0eaacb3d4,DISK]]; indices=[0, 2, 4, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-260120234-172.17.0.5-1598145286336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40325,DS-fd002df4-1b2a-4b89-908d-8148b003be08,DISK], DatanodeInfoWithStorage[127.0.0.1:36489,DS-5014931f-fc55-4788-8f33-9b60b0d45ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:35133,DS-7bf9c92b-d99f-4ba9-8b99-6209ec8ab056,DISK], DatanodeInfoWithStorage[127.0.0.1:37804,DS-aef64048-5ac5-4629-8953-ae09492acf0f,DISK], DatanodeInfoWithStorage[127.0.0.1:37403,DS-37505672-a528-4eef-a695-c637b34049d7,DISK], DatanodeInfoWithStorage[127.0.0.1:33435,DS-59f1c349-a114-4e13-b910-a7977e79bd93,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-340dd822-c10d-4a0f-957e-29a0eaacb3d4,DISK]]; indices=[0, 2, 4, 10, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-260120234-172.17.0.5-1598145286336:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:40325,DS-fd002df4-1b2a-4b89-908d-8148b003be08,DISK], DatanodeInfoWithStorage[127.0.0.1:36489,DS-5014931f-fc55-4788-8f33-9b60b0d45ad6,DISK], DatanodeInfoWithStorage[127.0.0.1:35133,DS-7bf9c92b-d99f-4ba9-8b99-6209ec8ab056,DISK], DatanodeInfoWithStorage[127.0.0.1:37804,DS-aef64048-5ac5-4629-8953-ae09492acf0f,DISK], DatanodeInfoWithStorage[127.0.0.1:37403,DS-37505672-a528-4eef-a695-c637b34049d7,DISK], DatanodeInfoWithStorage[127.0.0.1:33435,DS-59f1c349-a114-4e13-b910-a7977e79bd93,DISK], DatanodeInfoWithStorage[127.0.0.1:36115,DS-340dd822-c10d-4a0f-957e-29a0eaacb3d4,DISK]]; indices=[0, 2, 4, 10, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-45517528-172.17.0.5-1598145678086:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35353,DS-0d652ca9-8e7b-43aa-a966-2f7b8e0492af,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e951bb59-1c55-48d3-8f4c-3f08d2eee123,DISK], DatanodeInfoWithStorage[127.0.0.1:35736,DS-492cb0a5-c4a6-4420-82ac-d373b01f42fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-fea2ce5b-2158-4739-b0e0-cedd9c72f11c,DISK], DatanodeInfoWithStorage[127.0.0.1:44349,DS-d32c428f-5786-45dd-a063-ea95e759bf0b,DISK], DatanodeInfoWithStorage[127.0.0.1:43082,DS-cd7d9b47-f585-434f-ba38-27e18e5233d0,DISK], DatanodeInfoWithStorage[127.0.0.1:45655,DS-cc65de50-d170-400f-83c6-f68674753576,DISK]]; indices=[0, 1, 3, 4, 6, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-45517528-172.17.0.5-1598145678086:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35353,DS-0d652ca9-8e7b-43aa-a966-2f7b8e0492af,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e951bb59-1c55-48d3-8f4c-3f08d2eee123,DISK], DatanodeInfoWithStorage[127.0.0.1:35736,DS-492cb0a5-c4a6-4420-82ac-d373b01f42fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-fea2ce5b-2158-4739-b0e0-cedd9c72f11c,DISK], DatanodeInfoWithStorage[127.0.0.1:44349,DS-d32c428f-5786-45dd-a063-ea95e759bf0b,DISK], DatanodeInfoWithStorage[127.0.0.1:43082,DS-cd7d9b47-f585-434f-ba38-27e18e5233d0,DISK], DatanodeInfoWithStorage[127.0.0.1:45655,DS-cc65de50-d170-400f-83c6-f68674753576,DISK]]; indices=[0, 1, 3, 4, 6, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-45517528-172.17.0.5-1598145678086:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35353,DS-0d652ca9-8e7b-43aa-a966-2f7b8e0492af,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e951bb59-1c55-48d3-8f4c-3f08d2eee123,DISK], DatanodeInfoWithStorage[127.0.0.1:35736,DS-492cb0a5-c4a6-4420-82ac-d373b01f42fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-fea2ce5b-2158-4739-b0e0-cedd9c72f11c,DISK], DatanodeInfoWithStorage[127.0.0.1:44349,DS-d32c428f-5786-45dd-a063-ea95e759bf0b,DISK], DatanodeInfoWithStorage[127.0.0.1:43082,DS-cd7d9b47-f585-434f-ba38-27e18e5233d0,DISK], DatanodeInfoWithStorage[127.0.0.1:45655,DS-cc65de50-d170-400f-83c6-f68674753576,DISK]]; indices=[0, 1, 3, 4, 6, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-45517528-172.17.0.5-1598145678086:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35353,DS-0d652ca9-8e7b-43aa-a966-2f7b8e0492af,DISK], DatanodeInfoWithStorage[127.0.0.1:37036,DS-e951bb59-1c55-48d3-8f4c-3f08d2eee123,DISK], DatanodeInfoWithStorage[127.0.0.1:35736,DS-492cb0a5-c4a6-4420-82ac-d373b01f42fa,DISK], DatanodeInfoWithStorage[127.0.0.1:37900,DS-fea2ce5b-2158-4739-b0e0-cedd9c72f11c,DISK], DatanodeInfoWithStorage[127.0.0.1:44349,DS-d32c428f-5786-45dd-a063-ea95e759bf0b,DISK], DatanodeInfoWithStorage[127.0.0.1:43082,DS-cd7d9b47-f585-434f-ba38-27e18e5233d0,DISK], DatanodeInfoWithStorage[127.0.0.1:45655,DS-cc65de50-d170-400f-83c6-f68674753576,DISK]]; indices=[0, 1, 3, 4, 6, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-221750352-172.17.0.5-1598146231429:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33447,DS-c7e1f3b9-59b7-4ef5-a892-ff7f276f711e,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-dd64fd36-eac6-4b69-b8cf-ead7ec2d1b42,DISK], DatanodeInfoWithStorage[127.0.0.1:44863,DS-d068c3ef-afbe-4a19-be92-4ac892ad45bf,DISK], DatanodeInfoWithStorage[127.0.0.1:45320,DS-54abe59e-65b6-43cc-bf95-be672439a32a,DISK], DatanodeInfoWithStorage[127.0.0.1:42624,DS-2b8d1d0e-eca4-4eb5-b775-bd2de53e80ae,DISK], DatanodeInfoWithStorage[127.0.0.1:35448,DS-6b6bbe86-fd7c-4c11-ace0-8623a9655862,DISK]]; indices=[0, 1, 3, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-221750352-172.17.0.5-1598146231429:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33447,DS-c7e1f3b9-59b7-4ef5-a892-ff7f276f711e,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-dd64fd36-eac6-4b69-b8cf-ead7ec2d1b42,DISK], DatanodeInfoWithStorage[127.0.0.1:44863,DS-d068c3ef-afbe-4a19-be92-4ac892ad45bf,DISK], DatanodeInfoWithStorage[127.0.0.1:45320,DS-54abe59e-65b6-43cc-bf95-be672439a32a,DISK], DatanodeInfoWithStorage[127.0.0.1:42624,DS-2b8d1d0e-eca4-4eb5-b775-bd2de53e80ae,DISK], DatanodeInfoWithStorage[127.0.0.1:35448,DS-6b6bbe86-fd7c-4c11-ace0-8623a9655862,DISK]]; indices=[0, 1, 3, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-221750352-172.17.0.5-1598146231429:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33447,DS-c7e1f3b9-59b7-4ef5-a892-ff7f276f711e,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-dd64fd36-eac6-4b69-b8cf-ead7ec2d1b42,DISK], DatanodeInfoWithStorage[127.0.0.1:44863,DS-d068c3ef-afbe-4a19-be92-4ac892ad45bf,DISK], DatanodeInfoWithStorage[127.0.0.1:45320,DS-54abe59e-65b6-43cc-bf95-be672439a32a,DISK], DatanodeInfoWithStorage[127.0.0.1:42624,DS-2b8d1d0e-eca4-4eb5-b775-bd2de53e80ae,DISK], DatanodeInfoWithStorage[127.0.0.1:35448,DS-6b6bbe86-fd7c-4c11-ace0-8623a9655862,DISK]]; indices=[0, 1, 3, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-221750352-172.17.0.5-1598146231429:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33447,DS-c7e1f3b9-59b7-4ef5-a892-ff7f276f711e,DISK], DatanodeInfoWithStorage[127.0.0.1:46310,DS-dd64fd36-eac6-4b69-b8cf-ead7ec2d1b42,DISK], DatanodeInfoWithStorage[127.0.0.1:44863,DS-d068c3ef-afbe-4a19-be92-4ac892ad45bf,DISK], DatanodeInfoWithStorage[127.0.0.1:45320,DS-54abe59e-65b6-43cc-bf95-be672439a32a,DISK], DatanodeInfoWithStorage[127.0.0.1:42624,DS-2b8d1d0e-eca4-4eb5-b775-bd2de53e80ae,DISK], DatanodeInfoWithStorage[127.0.0.1:35448,DS-6b6bbe86-fd7c-4c11-ace0-8623a9655862,DISK]]; indices=[0, 1, 3, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1386469409-172.17.0.5-1598146501287:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39132,DS-1acc83f6-05bb-448b-9301-429238ea1009,DISK], DatanodeInfoWithStorage[127.0.0.1:37473,DS-8062a0d6-b955-4e67-acf3-1bf95bd98157,DISK], DatanodeInfoWithStorage[127.0.0.1:40078,DS-8a4be7f6-cf03-4c52-90af-1ba8d61b664f,DISK], DatanodeInfoWithStorage[127.0.0.1:41197,DS-9a3f649a-3a8c-4c4b-a099-2b8207dc69a2,DISK], DatanodeInfoWithStorage[127.0.0.1:33637,DS-df41d6c9-6e75-4252-ad1a-646f0c879028,DISK]]; indices=[3, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1386469409-172.17.0.5-1598146501287:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39132,DS-1acc83f6-05bb-448b-9301-429238ea1009,DISK], DatanodeInfoWithStorage[127.0.0.1:37473,DS-8062a0d6-b955-4e67-acf3-1bf95bd98157,DISK], DatanodeInfoWithStorage[127.0.0.1:40078,DS-8a4be7f6-cf03-4c52-90af-1ba8d61b664f,DISK], DatanodeInfoWithStorage[127.0.0.1:41197,DS-9a3f649a-3a8c-4c4b-a099-2b8207dc69a2,DISK], DatanodeInfoWithStorage[127.0.0.1:33637,DS-df41d6c9-6e75-4252-ad1a-646f0c879028,DISK]]; indices=[3, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1386469409-172.17.0.5-1598146501287:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39132,DS-1acc83f6-05bb-448b-9301-429238ea1009,DISK], DatanodeInfoWithStorage[127.0.0.1:37473,DS-8062a0d6-b955-4e67-acf3-1bf95bd98157,DISK], DatanodeInfoWithStorage[127.0.0.1:40078,DS-8a4be7f6-cf03-4c52-90af-1ba8d61b664f,DISK], DatanodeInfoWithStorage[127.0.0.1:41197,DS-9a3f649a-3a8c-4c4b-a099-2b8207dc69a2,DISK], DatanodeInfoWithStorage[127.0.0.1:33637,DS-df41d6c9-6e75-4252-ad1a-646f0c879028,DISK]]; indices=[3, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1386469409-172.17.0.5-1598146501287:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39132,DS-1acc83f6-05bb-448b-9301-429238ea1009,DISK], DatanodeInfoWithStorage[127.0.0.1:37473,DS-8062a0d6-b955-4e67-acf3-1bf95bd98157,DISK], DatanodeInfoWithStorage[127.0.0.1:40078,DS-8a4be7f6-cf03-4c52-90af-1ba8d61b664f,DISK], DatanodeInfoWithStorage[127.0.0.1:41197,DS-9a3f649a-3a8c-4c4b-a099-2b8207dc69a2,DISK], DatanodeInfoWithStorage[127.0.0.1:33637,DS-df41d6c9-6e75-4252-ad1a-646f0c879028,DISK]]; indices=[3, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1108206279-172.17.0.5-1598146858422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35628,DS-f0bad66c-6a93-4f93-a49d-dbd7e4cbbd45,DISK], DatanodeInfoWithStorage[127.0.0.1:36374,DS-9e3e5dd7-d365-4eac-8080-6ea02e93cf09,DISK], DatanodeInfoWithStorage[127.0.0.1:37227,DS-4f9ef160-a621-48a7-9436-21e22a880f41,DISK], DatanodeInfoWithStorage[127.0.0.1:45807,DS-30d3a9d0-65f2-4e2c-abdb-b02de3825696,DISK], DatanodeInfoWithStorage[127.0.0.1:45753,DS-57397abe-67de-4ea6-b0c1-3685ac88d1a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38341,DS-730d54ca-6186-4852-b0a5-ad06ce274609,DISK]]; indices=[3, 4, 5, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1108206279-172.17.0.5-1598146858422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35628,DS-f0bad66c-6a93-4f93-a49d-dbd7e4cbbd45,DISK], DatanodeInfoWithStorage[127.0.0.1:36374,DS-9e3e5dd7-d365-4eac-8080-6ea02e93cf09,DISK], DatanodeInfoWithStorage[127.0.0.1:37227,DS-4f9ef160-a621-48a7-9436-21e22a880f41,DISK], DatanodeInfoWithStorage[127.0.0.1:45807,DS-30d3a9d0-65f2-4e2c-abdb-b02de3825696,DISK], DatanodeInfoWithStorage[127.0.0.1:45753,DS-57397abe-67de-4ea6-b0c1-3685ac88d1a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38341,DS-730d54ca-6186-4852-b0a5-ad06ce274609,DISK]]; indices=[3, 4, 5, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1108206279-172.17.0.5-1598146858422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35628,DS-f0bad66c-6a93-4f93-a49d-dbd7e4cbbd45,DISK], DatanodeInfoWithStorage[127.0.0.1:36374,DS-9e3e5dd7-d365-4eac-8080-6ea02e93cf09,DISK], DatanodeInfoWithStorage[127.0.0.1:37227,DS-4f9ef160-a621-48a7-9436-21e22a880f41,DISK], DatanodeInfoWithStorage[127.0.0.1:45807,DS-30d3a9d0-65f2-4e2c-abdb-b02de3825696,DISK], DatanodeInfoWithStorage[127.0.0.1:45753,DS-57397abe-67de-4ea6-b0c1-3685ac88d1a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38341,DS-730d54ca-6186-4852-b0a5-ad06ce274609,DISK]]; indices=[3, 4, 5, 7, 11, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1108206279-172.17.0.5-1598146858422:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:35628,DS-f0bad66c-6a93-4f93-a49d-dbd7e4cbbd45,DISK], DatanodeInfoWithStorage[127.0.0.1:36374,DS-9e3e5dd7-d365-4eac-8080-6ea02e93cf09,DISK], DatanodeInfoWithStorage[127.0.0.1:37227,DS-4f9ef160-a621-48a7-9436-21e22a880f41,DISK], DatanodeInfoWithStorage[127.0.0.1:45807,DS-30d3a9d0-65f2-4e2c-abdb-b02de3825696,DISK], DatanodeInfoWithStorage[127.0.0.1:45753,DS-57397abe-67de-4ea6-b0c1-3685ac88d1a6,DISK], DatanodeInfoWithStorage[127.0.0.1:38341,DS-730d54ca-6186-4852-b0a5-ad06ce274609,DISK]]; indices=[3, 4, 5, 7, 11, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2071731093-172.17.0.5-1598146888781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38766,DS-672caeec-fafb-4206-8c79-f4450aaea0d5,DISK], DatanodeInfoWithStorage[127.0.0.1:33833,DS-69cc4211-56b2-4d52-a51b-efb191c17e8d,DISK], DatanodeInfoWithStorage[127.0.0.1:33853,DS-3d55e10b-b4fa-4961-b7d3-bc81a940ff42,DISK], DatanodeInfoWithStorage[127.0.0.1:44621,DS-92369ac2-0bd9-44ed-a754-3d5ee506b991,DISK], DatanodeInfoWithStorage[127.0.0.1:46182,DS-45c674e0-9836-4831-aa2b-cca7c783b9be,DISK]]; indices=[1, 2, 4, 5, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-2071731093-172.17.0.5-1598146888781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38766,DS-672caeec-fafb-4206-8c79-f4450aaea0d5,DISK], DatanodeInfoWithStorage[127.0.0.1:33833,DS-69cc4211-56b2-4d52-a51b-efb191c17e8d,DISK], DatanodeInfoWithStorage[127.0.0.1:33853,DS-3d55e10b-b4fa-4961-b7d3-bc81a940ff42,DISK], DatanodeInfoWithStorage[127.0.0.1:44621,DS-92369ac2-0bd9-44ed-a754-3d5ee506b991,DISK], DatanodeInfoWithStorage[127.0.0.1:46182,DS-45c674e0-9836-4831-aa2b-cca7c783b9be,DISK]]; indices=[1, 2, 4, 5, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2071731093-172.17.0.5-1598146888781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38766,DS-672caeec-fafb-4206-8c79-f4450aaea0d5,DISK], DatanodeInfoWithStorage[127.0.0.1:33833,DS-69cc4211-56b2-4d52-a51b-efb191c17e8d,DISK], DatanodeInfoWithStorage[127.0.0.1:33853,DS-3d55e10b-b4fa-4961-b7d3-bc81a940ff42,DISK], DatanodeInfoWithStorage[127.0.0.1:44621,DS-92369ac2-0bd9-44ed-a754-3d5ee506b991,DISK], DatanodeInfoWithStorage[127.0.0.1:46182,DS-45c674e0-9836-4831-aa2b-cca7c783b9be,DISK]]; indices=[1, 2, 4, 5, 10]}];  lastLocatedBlock=LocatedStripedBlock{BP-2071731093-172.17.0.5-1598146888781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:38766,DS-672caeec-fafb-4206-8c79-f4450aaea0d5,DISK], DatanodeInfoWithStorage[127.0.0.1:33833,DS-69cc4211-56b2-4d52-a51b-efb191c17e8d,DISK], DatanodeInfoWithStorage[127.0.0.1:33853,DS-3d55e10b-b4fa-4961-b7d3-bc81a940ff42,DISK], DatanodeInfoWithStorage[127.0.0.1:44621,DS-92369ac2-0bd9-44ed-a754-3d5ee506b991,DISK], DatanodeInfoWithStorage[127.0.0.1:46182,DS-45c674e0-9836-4831-aa2b-cca7c783b9be,DISK]]; indices=[1, 2, 4, 5, 10]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-602941019-172.17.0.5-1598146927357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42693,DS-28f7d80a-c53a-404c-9930-0369d3b4204d,DISK], DatanodeInfoWithStorage[127.0.0.1:37562,DS-6bf81d26-01f8-4093-8bbc-904d27309d49,DISK], DatanodeInfoWithStorage[127.0.0.1:42347,DS-a2000ac2-1b8d-4acd-9621-cf090fc5dbee,DISK], DatanodeInfoWithStorage[127.0.0.1:33953,DS-727e2013-4938-4702-a725-deb244768552,DISK], DatanodeInfoWithStorage[127.0.0.1:37496,DS-5f9de19f-edd1-4226-abd1-052166bb0875,DISK], DatanodeInfoWithStorage[127.0.0.1:33372,DS-a107114c-357d-489d-adb4-e3bb7dcfd48a,DISK], DatanodeInfoWithStorage[127.0.0.1:42095,DS-7af44874-5398-45fb-b0c8-a98cf7f42491,DISK]]; indices=[0, 2, 3, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-602941019-172.17.0.5-1598146927357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42693,DS-28f7d80a-c53a-404c-9930-0369d3b4204d,DISK], DatanodeInfoWithStorage[127.0.0.1:37562,DS-6bf81d26-01f8-4093-8bbc-904d27309d49,DISK], DatanodeInfoWithStorage[127.0.0.1:42347,DS-a2000ac2-1b8d-4acd-9621-cf090fc5dbee,DISK], DatanodeInfoWithStorage[127.0.0.1:33953,DS-727e2013-4938-4702-a725-deb244768552,DISK], DatanodeInfoWithStorage[127.0.0.1:37496,DS-5f9de19f-edd1-4226-abd1-052166bb0875,DISK], DatanodeInfoWithStorage[127.0.0.1:33372,DS-a107114c-357d-489d-adb4-e3bb7dcfd48a,DISK], DatanodeInfoWithStorage[127.0.0.1:42095,DS-7af44874-5398-45fb-b0c8-a98cf7f42491,DISK]]; indices=[0, 2, 3, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-602941019-172.17.0.5-1598146927357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42693,DS-28f7d80a-c53a-404c-9930-0369d3b4204d,DISK], DatanodeInfoWithStorage[127.0.0.1:37562,DS-6bf81d26-01f8-4093-8bbc-904d27309d49,DISK], DatanodeInfoWithStorage[127.0.0.1:42347,DS-a2000ac2-1b8d-4acd-9621-cf090fc5dbee,DISK], DatanodeInfoWithStorage[127.0.0.1:33953,DS-727e2013-4938-4702-a725-deb244768552,DISK], DatanodeInfoWithStorage[127.0.0.1:37496,DS-5f9de19f-edd1-4226-abd1-052166bb0875,DISK], DatanodeInfoWithStorage[127.0.0.1:33372,DS-a107114c-357d-489d-adb4-e3bb7dcfd48a,DISK], DatanodeInfoWithStorage[127.0.0.1:42095,DS-7af44874-5398-45fb-b0c8-a98cf7f42491,DISK]]; indices=[0, 2, 3, 4, 5, 10, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-602941019-172.17.0.5-1598146927357:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42693,DS-28f7d80a-c53a-404c-9930-0369d3b4204d,DISK], DatanodeInfoWithStorage[127.0.0.1:37562,DS-6bf81d26-01f8-4093-8bbc-904d27309d49,DISK], DatanodeInfoWithStorage[127.0.0.1:42347,DS-a2000ac2-1b8d-4acd-9621-cf090fc5dbee,DISK], DatanodeInfoWithStorage[127.0.0.1:33953,DS-727e2013-4938-4702-a725-deb244768552,DISK], DatanodeInfoWithStorage[127.0.0.1:37496,DS-5f9de19f-edd1-4226-abd1-052166bb0875,DISK], DatanodeInfoWithStorage[127.0.0.1:33372,DS-a107114c-357d-489d-adb4-e3bb7dcfd48a,DISK], DatanodeInfoWithStorage[127.0.0.1:42095,DS-7af44874-5398-45fb-b0c8-a98cf7f42491,DISK]]; indices=[0, 2, 3, 4, 5, 10, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1654248368-172.17.0.5-1598147097568:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45323,DS-b6525f5a-e7da-4e7e-8bfd-214c21ebce88,DISK], DatanodeInfoWithStorage[127.0.0.1:42124,DS-0c49b22f-7cef-4510-8069-3c62bd2d5233,DISK], DatanodeInfoWithStorage[127.0.0.1:33430,DS-a7d193da-14aa-4c9d-a6cb-ec1bc65aa518,DISK], DatanodeInfoWithStorage[127.0.0.1:38220,DS-fda77b2c-86fc-400e-9122-5a793d987a4b,DISK], DatanodeInfoWithStorage[127.0.0.1:40720,DS-b911c75b-0515-432a-93b1-f1957a249e2e,DISK], DatanodeInfoWithStorage[127.0.0.1:37946,DS-f25e9b22-ed68-45cc-98f6-7d27210f4235,DISK], DatanodeInfoWithStorage[127.0.0.1:33215,DS-752970e1-f816-422a-8e48-fded5afebbdc,DISK]]; indices=[0, 2, 4, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1654248368-172.17.0.5-1598147097568:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45323,DS-b6525f5a-e7da-4e7e-8bfd-214c21ebce88,DISK], DatanodeInfoWithStorage[127.0.0.1:42124,DS-0c49b22f-7cef-4510-8069-3c62bd2d5233,DISK], DatanodeInfoWithStorage[127.0.0.1:33430,DS-a7d193da-14aa-4c9d-a6cb-ec1bc65aa518,DISK], DatanodeInfoWithStorage[127.0.0.1:38220,DS-fda77b2c-86fc-400e-9122-5a793d987a4b,DISK], DatanodeInfoWithStorage[127.0.0.1:40720,DS-b911c75b-0515-432a-93b1-f1957a249e2e,DISK], DatanodeInfoWithStorage[127.0.0.1:37946,DS-f25e9b22-ed68-45cc-98f6-7d27210f4235,DISK], DatanodeInfoWithStorage[127.0.0.1:33215,DS-752970e1-f816-422a-8e48-fded5afebbdc,DISK]]; indices=[0, 2, 4, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1654248368-172.17.0.5-1598147097568:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45323,DS-b6525f5a-e7da-4e7e-8bfd-214c21ebce88,DISK], DatanodeInfoWithStorage[127.0.0.1:42124,DS-0c49b22f-7cef-4510-8069-3c62bd2d5233,DISK], DatanodeInfoWithStorage[127.0.0.1:33430,DS-a7d193da-14aa-4c9d-a6cb-ec1bc65aa518,DISK], DatanodeInfoWithStorage[127.0.0.1:38220,DS-fda77b2c-86fc-400e-9122-5a793d987a4b,DISK], DatanodeInfoWithStorage[127.0.0.1:40720,DS-b911c75b-0515-432a-93b1-f1957a249e2e,DISK], DatanodeInfoWithStorage[127.0.0.1:37946,DS-f25e9b22-ed68-45cc-98f6-7d27210f4235,DISK], DatanodeInfoWithStorage[127.0.0.1:33215,DS-752970e1-f816-422a-8e48-fded5afebbdc,DISK]]; indices=[0, 2, 4, 5, 6, 7, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1654248368-172.17.0.5-1598147097568:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:45323,DS-b6525f5a-e7da-4e7e-8bfd-214c21ebce88,DISK], DatanodeInfoWithStorage[127.0.0.1:42124,DS-0c49b22f-7cef-4510-8069-3c62bd2d5233,DISK], DatanodeInfoWithStorage[127.0.0.1:33430,DS-a7d193da-14aa-4c9d-a6cb-ec1bc65aa518,DISK], DatanodeInfoWithStorage[127.0.0.1:38220,DS-fda77b2c-86fc-400e-9122-5a793d987a4b,DISK], DatanodeInfoWithStorage[127.0.0.1:40720,DS-b911c75b-0515-432a-93b1-f1957a249e2e,DISK], DatanodeInfoWithStorage[127.0.0.1:37946,DS-f25e9b22-ed68-45cc-98f6-7d27210f4235,DISK], DatanodeInfoWithStorage[127.0.0.1:33215,DS-752970e1-f816-422a-8e48-fded5afebbdc,DISK]]; indices=[0, 2, 4, 5, 6, 7, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-560717598-172.17.0.5-1598147165679:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44056,DS-ba8583cf-a953-4282-8bc5-ef5c9f731983,DISK], DatanodeInfoWithStorage[127.0.0.1:37111,DS-873d21cf-1372-4ef3-a27a-0d226e6212af,DISK], DatanodeInfoWithStorage[127.0.0.1:36764,DS-8517f7df-7a88-44ee-a4d9-3ac24985607d,DISK], DatanodeInfoWithStorage[127.0.0.1:35412,DS-078ce7c7-66d7-4e98-b7c3-0e28ca2e5a16,DISK], DatanodeInfoWithStorage[127.0.0.1:36762,DS-ae43c5bc-2307-46e1-9960-1d5b807c8ee3,DISK], DatanodeInfoWithStorage[127.0.0.1:34854,DS-e3197348-6566-4012-9e73-ac12f0b71bdc,DISK], DatanodeInfoWithStorage[127.0.0.1:38507,DS-6b66294e-daa5-440c-9843-a9e1c368530b,DISK]]; indices=[0, 4, 5, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-560717598-172.17.0.5-1598147165679:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44056,DS-ba8583cf-a953-4282-8bc5-ef5c9f731983,DISK], DatanodeInfoWithStorage[127.0.0.1:37111,DS-873d21cf-1372-4ef3-a27a-0d226e6212af,DISK], DatanodeInfoWithStorage[127.0.0.1:36764,DS-8517f7df-7a88-44ee-a4d9-3ac24985607d,DISK], DatanodeInfoWithStorage[127.0.0.1:35412,DS-078ce7c7-66d7-4e98-b7c3-0e28ca2e5a16,DISK], DatanodeInfoWithStorage[127.0.0.1:36762,DS-ae43c5bc-2307-46e1-9960-1d5b807c8ee3,DISK], DatanodeInfoWithStorage[127.0.0.1:34854,DS-e3197348-6566-4012-9e73-ac12f0b71bdc,DISK], DatanodeInfoWithStorage[127.0.0.1:38507,DS-6b66294e-daa5-440c-9843-a9e1c368530b,DISK]]; indices=[0, 4, 5, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-560717598-172.17.0.5-1598147165679:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44056,DS-ba8583cf-a953-4282-8bc5-ef5c9f731983,DISK], DatanodeInfoWithStorage[127.0.0.1:37111,DS-873d21cf-1372-4ef3-a27a-0d226e6212af,DISK], DatanodeInfoWithStorage[127.0.0.1:36764,DS-8517f7df-7a88-44ee-a4d9-3ac24985607d,DISK], DatanodeInfoWithStorage[127.0.0.1:35412,DS-078ce7c7-66d7-4e98-b7c3-0e28ca2e5a16,DISK], DatanodeInfoWithStorage[127.0.0.1:36762,DS-ae43c5bc-2307-46e1-9960-1d5b807c8ee3,DISK], DatanodeInfoWithStorage[127.0.0.1:34854,DS-e3197348-6566-4012-9e73-ac12f0b71bdc,DISK], DatanodeInfoWithStorage[127.0.0.1:38507,DS-6b66294e-daa5-440c-9843-a9e1c368530b,DISK]]; indices=[0, 4, 5, 7, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-560717598-172.17.0.5-1598147165679:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44056,DS-ba8583cf-a953-4282-8bc5-ef5c9f731983,DISK], DatanodeInfoWithStorage[127.0.0.1:37111,DS-873d21cf-1372-4ef3-a27a-0d226e6212af,DISK], DatanodeInfoWithStorage[127.0.0.1:36764,DS-8517f7df-7a88-44ee-a4d9-3ac24985607d,DISK], DatanodeInfoWithStorage[127.0.0.1:35412,DS-078ce7c7-66d7-4e98-b7c3-0e28ca2e5a16,DISK], DatanodeInfoWithStorage[127.0.0.1:36762,DS-ae43c5bc-2307-46e1-9960-1d5b807c8ee3,DISK], DatanodeInfoWithStorage[127.0.0.1:34854,DS-e3197348-6566-4012-9e73-ac12f0b71bdc,DISK], DatanodeInfoWithStorage[127.0.0.1:38507,DS-6b66294e-daa5-440c-9843-a9e1c368530b,DISK]]; indices=[0, 4, 5, 7, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-391110998-172.17.0.5-1598147202384:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33191,DS-d2ebb3aa-4736-4245-989d-c7b6eae51215,DISK], DatanodeInfoWithStorage[127.0.0.1:42693,DS-5d40488a-a344-4f68-a351-9ed64f6b02b3,DISK], DatanodeInfoWithStorage[127.0.0.1:35210,DS-2c871c0f-9a66-46a7-ba10-e1f9d0393a48,DISK], DatanodeInfoWithStorage[127.0.0.1:40104,DS-9d8e046d-8b1c-4658-970c-3352a010c1c5,DISK], DatanodeInfoWithStorage[127.0.0.1:44332,DS-c31a93ca-8cc8-440b-bcd5-576f8eb993dc,DISK]]; indices=[1, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-391110998-172.17.0.5-1598147202384:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33191,DS-d2ebb3aa-4736-4245-989d-c7b6eae51215,DISK], DatanodeInfoWithStorage[127.0.0.1:42693,DS-5d40488a-a344-4f68-a351-9ed64f6b02b3,DISK], DatanodeInfoWithStorage[127.0.0.1:35210,DS-2c871c0f-9a66-46a7-ba10-e1f9d0393a48,DISK], DatanodeInfoWithStorage[127.0.0.1:40104,DS-9d8e046d-8b1c-4658-970c-3352a010c1c5,DISK], DatanodeInfoWithStorage[127.0.0.1:44332,DS-c31a93ca-8cc8-440b-bcd5-576f8eb993dc,DISK]]; indices=[1, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-391110998-172.17.0.5-1598147202384:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33191,DS-d2ebb3aa-4736-4245-989d-c7b6eae51215,DISK], DatanodeInfoWithStorage[127.0.0.1:42693,DS-5d40488a-a344-4f68-a351-9ed64f6b02b3,DISK], DatanodeInfoWithStorage[127.0.0.1:35210,DS-2c871c0f-9a66-46a7-ba10-e1f9d0393a48,DISK], DatanodeInfoWithStorage[127.0.0.1:40104,DS-9d8e046d-8b1c-4658-970c-3352a010c1c5,DISK], DatanodeInfoWithStorage[127.0.0.1:44332,DS-c31a93ca-8cc8-440b-bcd5-576f8eb993dc,DISK]]; indices=[1, 7, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-391110998-172.17.0.5-1598147202384:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:33191,DS-d2ebb3aa-4736-4245-989d-c7b6eae51215,DISK], DatanodeInfoWithStorage[127.0.0.1:42693,DS-5d40488a-a344-4f68-a351-9ed64f6b02b3,DISK], DatanodeInfoWithStorage[127.0.0.1:35210,DS-2c871c0f-9a66-46a7-ba10-e1f9d0393a48,DISK], DatanodeInfoWithStorage[127.0.0.1:40104,DS-9d8e046d-8b1c-4658-970c-3352a010c1c5,DISK], DatanodeInfoWithStorage[127.0.0.1:44332,DS-c31a93ca-8cc8-440b-bcd5-576f8eb993dc,DISK]]; indices=[1, 7, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-121399105-172.17.0.5-1598147238828:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34354,DS-ee49f418-7d28-4a18-a707-0f57bfd91217,DISK], DatanodeInfoWithStorage[127.0.0.1:38020,DS-dd2013b1-8c23-4db2-983b-3c551fa144d5,DISK], DatanodeInfoWithStorage[127.0.0.1:32870,DS-20a2eb75-fdc7-4b8b-b15b-f2ee032e601f,DISK], DatanodeInfoWithStorage[127.0.0.1:38826,DS-24815614-e183-4bf0-abfc-a3d6b353fcbd,DISK], DatanodeInfoWithStorage[127.0.0.1:45880,DS-2d0fba93-289c-44c8-b518-57bb2959e6f8,DISK], DatanodeInfoWithStorage[127.0.0.1:37223,DS-bce6d685-0f66-4dd0-8e24-5007bd34907f,DISK]]; indices=[5, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-121399105-172.17.0.5-1598147238828:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34354,DS-ee49f418-7d28-4a18-a707-0f57bfd91217,DISK], DatanodeInfoWithStorage[127.0.0.1:38020,DS-dd2013b1-8c23-4db2-983b-3c551fa144d5,DISK], DatanodeInfoWithStorage[127.0.0.1:32870,DS-20a2eb75-fdc7-4b8b-b15b-f2ee032e601f,DISK], DatanodeInfoWithStorage[127.0.0.1:38826,DS-24815614-e183-4bf0-abfc-a3d6b353fcbd,DISK], DatanodeInfoWithStorage[127.0.0.1:45880,DS-2d0fba93-289c-44c8-b518-57bb2959e6f8,DISK], DatanodeInfoWithStorage[127.0.0.1:37223,DS-bce6d685-0f66-4dd0-8e24-5007bd34907f,DISK]]; indices=[5, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-121399105-172.17.0.5-1598147238828:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34354,DS-ee49f418-7d28-4a18-a707-0f57bfd91217,DISK], DatanodeInfoWithStorage[127.0.0.1:38020,DS-dd2013b1-8c23-4db2-983b-3c551fa144d5,DISK], DatanodeInfoWithStorage[127.0.0.1:32870,DS-20a2eb75-fdc7-4b8b-b15b-f2ee032e601f,DISK], DatanodeInfoWithStorage[127.0.0.1:38826,DS-24815614-e183-4bf0-abfc-a3d6b353fcbd,DISK], DatanodeInfoWithStorage[127.0.0.1:45880,DS-2d0fba93-289c-44c8-b518-57bb2959e6f8,DISK], DatanodeInfoWithStorage[127.0.0.1:37223,DS-bce6d685-0f66-4dd0-8e24-5007bd34907f,DISK]]; indices=[5, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-121399105-172.17.0.5-1598147238828:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:34354,DS-ee49f418-7d28-4a18-a707-0f57bfd91217,DISK], DatanodeInfoWithStorage[127.0.0.1:38020,DS-dd2013b1-8c23-4db2-983b-3c551fa144d5,DISK], DatanodeInfoWithStorage[127.0.0.1:32870,DS-20a2eb75-fdc7-4b8b-b15b-f2ee032e601f,DISK], DatanodeInfoWithStorage[127.0.0.1:38826,DS-24815614-e183-4bf0-abfc-a3d6b353fcbd,DISK], DatanodeInfoWithStorage[127.0.0.1:45880,DS-2d0fba93-289c-44c8-b518-57bb2959e6f8,DISK], DatanodeInfoWithStorage[127.0.0.1:37223,DS-bce6d685-0f66-4dd0-8e24-5007bd34907f,DISK]]; indices=[5, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-711167856-172.17.0.5-1598147563781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32949,DS-aa89786d-9f36-476f-b859-f41e09154cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:35297,DS-bb7639e8-9912-485b-b5a0-16065c1fce16,DISK], DatanodeInfoWithStorage[127.0.0.1:43952,DS-5d8e22c3-1956-4cb9-b240-4417aa38ee52,DISK], DatanodeInfoWithStorage[127.0.0.1:36591,DS-8f5917c1-89b5-4d3e-9daf-eeec9e9b2d21,DISK], DatanodeInfoWithStorage[127.0.0.1:44906,DS-21f2b493-9ca0-476e-beda-f179329e1b76,DISK], DatanodeInfoWithStorage[127.0.0.1:33841,DS-845da47b-1f7f-4784-9859-563ad8181fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:44590,DS-b795c53a-ed84-4c4b-8c7a-4124fa7c5dc9,DISK]]; indices=[0, 1, 2, 3, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-711167856-172.17.0.5-1598147563781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32949,DS-aa89786d-9f36-476f-b859-f41e09154cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:35297,DS-bb7639e8-9912-485b-b5a0-16065c1fce16,DISK], DatanodeInfoWithStorage[127.0.0.1:43952,DS-5d8e22c3-1956-4cb9-b240-4417aa38ee52,DISK], DatanodeInfoWithStorage[127.0.0.1:36591,DS-8f5917c1-89b5-4d3e-9daf-eeec9e9b2d21,DISK], DatanodeInfoWithStorage[127.0.0.1:44906,DS-21f2b493-9ca0-476e-beda-f179329e1b76,DISK], DatanodeInfoWithStorage[127.0.0.1:33841,DS-845da47b-1f7f-4784-9859-563ad8181fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:44590,DS-b795c53a-ed84-4c4b-8c7a-4124fa7c5dc9,DISK]]; indices=[0, 1, 2, 3, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-711167856-172.17.0.5-1598147563781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32949,DS-aa89786d-9f36-476f-b859-f41e09154cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:35297,DS-bb7639e8-9912-485b-b5a0-16065c1fce16,DISK], DatanodeInfoWithStorage[127.0.0.1:43952,DS-5d8e22c3-1956-4cb9-b240-4417aa38ee52,DISK], DatanodeInfoWithStorage[127.0.0.1:36591,DS-8f5917c1-89b5-4d3e-9daf-eeec9e9b2d21,DISK], DatanodeInfoWithStorage[127.0.0.1:44906,DS-21f2b493-9ca0-476e-beda-f179329e1b76,DISK], DatanodeInfoWithStorage[127.0.0.1:33841,DS-845da47b-1f7f-4784-9859-563ad8181fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:44590,DS-b795c53a-ed84-4c4b-8c7a-4124fa7c5dc9,DISK]]; indices=[0, 1, 2, 3, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-711167856-172.17.0.5-1598147563781:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:32949,DS-aa89786d-9f36-476f-b859-f41e09154cb3,DISK], DatanodeInfoWithStorage[127.0.0.1:35297,DS-bb7639e8-9912-485b-b5a0-16065c1fce16,DISK], DatanodeInfoWithStorage[127.0.0.1:43952,DS-5d8e22c3-1956-4cb9-b240-4417aa38ee52,DISK], DatanodeInfoWithStorage[127.0.0.1:36591,DS-8f5917c1-89b5-4d3e-9daf-eeec9e9b2d21,DISK], DatanodeInfoWithStorage[127.0.0.1:44906,DS-21f2b493-9ca0-476e-beda-f179329e1b76,DISK], DatanodeInfoWithStorage[127.0.0.1:33841,DS-845da47b-1f7f-4784-9859-563ad8181fe3,DISK], DatanodeInfoWithStorage[127.0.0.1:44590,DS-b795c53a-ed84-4c4b-8c7a-4124fa7c5dc9,DISK]]; indices=[0, 1, 2, 3, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)


reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2144619713-172.17.0.5-1598147597335:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37553,DS-f21ee72a-ffca-47b6-ad8a-8ba51943e01f,DISK], DatanodeInfoWithStorage[127.0.0.1:45176,DS-21afbb41-58a6-44aa-9223-a68368d3b9cc,DISK], DatanodeInfoWithStorage[127.0.0.1:42714,DS-da8e351c-085c-4594-badf-ed86f0a8aaad,DISK], DatanodeInfoWithStorage[127.0.0.1:39972,DS-6b8e41ff-5b0f-4629-bd56-a6230dd36a29,DISK], DatanodeInfoWithStorage[127.0.0.1:39515,DS-b2e37275-a36e-450f-9e39-c2bfcf7a4499,DISK], DatanodeInfoWithStorage[127.0.0.1:44661,DS-ecd51c86-e761-4a3c-aadc-9833e78b123a,DISK]]; indices=[1, 4, 5, 6, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2144619713-172.17.0.5-1598147597335:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37553,DS-f21ee72a-ffca-47b6-ad8a-8ba51943e01f,DISK], DatanodeInfoWithStorage[127.0.0.1:45176,DS-21afbb41-58a6-44aa-9223-a68368d3b9cc,DISK], DatanodeInfoWithStorage[127.0.0.1:42714,DS-da8e351c-085c-4594-badf-ed86f0a8aaad,DISK], DatanodeInfoWithStorage[127.0.0.1:39972,DS-6b8e41ff-5b0f-4629-bd56-a6230dd36a29,DISK], DatanodeInfoWithStorage[127.0.0.1:39515,DS-b2e37275-a36e-450f-9e39-c2bfcf7a4499,DISK], DatanodeInfoWithStorage[127.0.0.1:44661,DS-ecd51c86-e761-4a3c-aadc-9833e78b123a,DISK]]; indices=[1, 4, 5, 6, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-2144619713-172.17.0.5-1598147597335:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37553,DS-f21ee72a-ffca-47b6-ad8a-8ba51943e01f,DISK], DatanodeInfoWithStorage[127.0.0.1:45176,DS-21afbb41-58a6-44aa-9223-a68368d3b9cc,DISK], DatanodeInfoWithStorage[127.0.0.1:42714,DS-da8e351c-085c-4594-badf-ed86f0a8aaad,DISK], DatanodeInfoWithStorage[127.0.0.1:39972,DS-6b8e41ff-5b0f-4629-bd56-a6230dd36a29,DISK], DatanodeInfoWithStorage[127.0.0.1:39515,DS-b2e37275-a36e-450f-9e39-c2bfcf7a4499,DISK], DatanodeInfoWithStorage[127.0.0.1:44661,DS-ecd51c86-e761-4a3c-aadc-9833e78b123a,DISK]]; indices=[1, 4, 5, 6, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-2144619713-172.17.0.5-1598147597335:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37553,DS-f21ee72a-ffca-47b6-ad8a-8ba51943e01f,DISK], DatanodeInfoWithStorage[127.0.0.1:45176,DS-21afbb41-58a6-44aa-9223-a68368d3b9cc,DISK], DatanodeInfoWithStorage[127.0.0.1:42714,DS-da8e351c-085c-4594-badf-ed86f0a8aaad,DISK], DatanodeInfoWithStorage[127.0.0.1:39972,DS-6b8e41ff-5b0f-4629-bd56-a6230dd36a29,DISK], DatanodeInfoWithStorage[127.0.0.1:39515,DS-b2e37275-a36e-450f-9e39-c2bfcf7a4499,DISK], DatanodeInfoWithStorage[127.0.0.1:44661,DS-ecd51c86-e761-4a3c-aadc-9833e78b123a,DISK]]; indices=[1, 4, 5, 6, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is -1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-392531462-172.17.0.5-1598147700299:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42565,DS-5e55dd68-800f-403d-a0c7-0f69fdc2342b,DISK], DatanodeInfoWithStorage[127.0.0.1:41755,DS-4ef6af04-0c38-47ad-9c1d-0ab64ab12d21,DISK], DatanodeInfoWithStorage[127.0.0.1:43419,DS-9151d695-52ce-47d2-8ad1-849fdf817c04,DISK], DatanodeInfoWithStorage[127.0.0.1:43793,DS-6bbd801c-0503-4e70-bab0-98ecd7222ddb,DISK], DatanodeInfoWithStorage[127.0.0.1:36234,DS-94bd9092-7fcf-4842-9c66-0470752f695c,DISK], DatanodeInfoWithStorage[127.0.0.1:34686,DS-82fed14b-86b7-4544-b48c-814cf486913f,DISK]]; indices=[0, 1, 2, 4, 10, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-392531462-172.17.0.5-1598147700299:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42565,DS-5e55dd68-800f-403d-a0c7-0f69fdc2342b,DISK], DatanodeInfoWithStorage[127.0.0.1:41755,DS-4ef6af04-0c38-47ad-9c1d-0ab64ab12d21,DISK], DatanodeInfoWithStorage[127.0.0.1:43419,DS-9151d695-52ce-47d2-8ad1-849fdf817c04,DISK], DatanodeInfoWithStorage[127.0.0.1:43793,DS-6bbd801c-0503-4e70-bab0-98ecd7222ddb,DISK], DatanodeInfoWithStorage[127.0.0.1:36234,DS-94bd9092-7fcf-4842-9c66-0470752f695c,DISK], DatanodeInfoWithStorage[127.0.0.1:34686,DS-82fed14b-86b7-4544-b48c-814cf486913f,DISK]]; indices=[0, 1, 2, 4, 10, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-392531462-172.17.0.5-1598147700299:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42565,DS-5e55dd68-800f-403d-a0c7-0f69fdc2342b,DISK], DatanodeInfoWithStorage[127.0.0.1:41755,DS-4ef6af04-0c38-47ad-9c1d-0ab64ab12d21,DISK], DatanodeInfoWithStorage[127.0.0.1:43419,DS-9151d695-52ce-47d2-8ad1-849fdf817c04,DISK], DatanodeInfoWithStorage[127.0.0.1:43793,DS-6bbd801c-0503-4e70-bab0-98ecd7222ddb,DISK], DatanodeInfoWithStorage[127.0.0.1:36234,DS-94bd9092-7fcf-4842-9c66-0470752f695c,DISK], DatanodeInfoWithStorage[127.0.0.1:34686,DS-82fed14b-86b7-4544-b48c-814cf486913f,DISK]]; indices=[0, 1, 2, 4, 10, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-392531462-172.17.0.5-1598147700299:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42565,DS-5e55dd68-800f-403d-a0c7-0f69fdc2342b,DISK], DatanodeInfoWithStorage[127.0.0.1:41755,DS-4ef6af04-0c38-47ad-9c1d-0ab64ab12d21,DISK], DatanodeInfoWithStorage[127.0.0.1:43419,DS-9151d695-52ce-47d2-8ad1-849fdf817c04,DISK], DatanodeInfoWithStorage[127.0.0.1:43793,DS-6bbd801c-0503-4e70-bab0-98ecd7222ddb,DISK], DatanodeInfoWithStorage[127.0.0.1:36234,DS-94bd9092-7fcf-4842-9c66-0470752f695c,DISK], DatanodeInfoWithStorage[127.0.0.1:34686,DS-82fed14b-86b7-4544-b48c-814cf486913f,DISK]]; indices=[0, 1, 2, 4, 10, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-236648022-172.17.0.5-1598147735000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37794,DS-db331d46-88a5-4d54-8ae0-638e91faf372,DISK], DatanodeInfoWithStorage[127.0.0.1:40977,DS-fa4a6036-165f-4430-9cc3-d6431e22d836,DISK], DatanodeInfoWithStorage[127.0.0.1:38374,DS-c6bad61c-dd2a-474e-80fe-6a831c75b72f,DISK], DatanodeInfoWithStorage[127.0.0.1:41845,DS-95be35a3-e7bc-41e6-a376-2393e162573a,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-73df3109-55b5-4ddf-9df0-e0cd7f0dab1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40820,DS-3130a1fa-a021-485f-8947-85af180a23c5,DISK]]; indices=[0, 1, 4, 5, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-236648022-172.17.0.5-1598147735000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37794,DS-db331d46-88a5-4d54-8ae0-638e91faf372,DISK], DatanodeInfoWithStorage[127.0.0.1:40977,DS-fa4a6036-165f-4430-9cc3-d6431e22d836,DISK], DatanodeInfoWithStorage[127.0.0.1:38374,DS-c6bad61c-dd2a-474e-80fe-6a831c75b72f,DISK], DatanodeInfoWithStorage[127.0.0.1:41845,DS-95be35a3-e7bc-41e6-a376-2393e162573a,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-73df3109-55b5-4ddf-9df0-e0cd7f0dab1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40820,DS-3130a1fa-a021-485f-8947-85af180a23c5,DISK]]; indices=[0, 1, 4, 5, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-236648022-172.17.0.5-1598147735000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37794,DS-db331d46-88a5-4d54-8ae0-638e91faf372,DISK], DatanodeInfoWithStorage[127.0.0.1:40977,DS-fa4a6036-165f-4430-9cc3-d6431e22d836,DISK], DatanodeInfoWithStorage[127.0.0.1:38374,DS-c6bad61c-dd2a-474e-80fe-6a831c75b72f,DISK], DatanodeInfoWithStorage[127.0.0.1:41845,DS-95be35a3-e7bc-41e6-a376-2393e162573a,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-73df3109-55b5-4ddf-9df0-e0cd7f0dab1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40820,DS-3130a1fa-a021-485f-8947-85af180a23c5,DISK]]; indices=[0, 1, 4, 5, 6, 11]}];  lastLocatedBlock=LocatedStripedBlock{BP-236648022-172.17.0.5-1598147735000:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:37794,DS-db331d46-88a5-4d54-8ae0-638e91faf372,DISK], DatanodeInfoWithStorage[127.0.0.1:40977,DS-fa4a6036-165f-4430-9cc3-d6431e22d836,DISK], DatanodeInfoWithStorage[127.0.0.1:38374,DS-c6bad61c-dd2a-474e-80fe-6a831c75b72f,DISK], DatanodeInfoWithStorage[127.0.0.1:41845,DS-95be35a3-e7bc-41e6-a376-2393e162573a,DISK], DatanodeInfoWithStorage[127.0.0.1:46881,DS-73df3109-55b5-4ddf-9df0-e0cd7f0dab1f,DISK], DatanodeInfoWithStorage[127.0.0.1:40820,DS-3130a1fa-a021-485f-8947-85af180a23c5,DISK]]; indices=[0, 1, 4, 5, 6, 11]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1598733833-172.17.0.5-1598147774248:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42582,DS-4eccfa95-ee70-4a0c-98b5-1497d9c6ca61,DISK], DatanodeInfoWithStorage[127.0.0.1:37401,DS-f917754b-85af-470f-9f17-9f0604a202b4,DISK], DatanodeInfoWithStorage[127.0.0.1:42606,DS-549661f3-4b3a-419c-8241-fbbce54adb99,DISK], DatanodeInfoWithStorage[127.0.0.1:33414,DS-37e66f04-7c5c-40f6-8664-10ffcc20a75a,DISK], DatanodeInfoWithStorage[127.0.0.1:37500,DS-c7a11dc8-21cd-4244-9aaf-c382ad2f050d,DISK], DatanodeInfoWithStorage[127.0.0.1:41477,DS-8f17b7c5-0d32-451b-97b1-1e1d72ecf444,DISK]]; indices=[0, 1, 6, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1598733833-172.17.0.5-1598147774248:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42582,DS-4eccfa95-ee70-4a0c-98b5-1497d9c6ca61,DISK], DatanodeInfoWithStorage[127.0.0.1:37401,DS-f917754b-85af-470f-9f17-9f0604a202b4,DISK], DatanodeInfoWithStorage[127.0.0.1:42606,DS-549661f3-4b3a-419c-8241-fbbce54adb99,DISK], DatanodeInfoWithStorage[127.0.0.1:33414,DS-37e66f04-7c5c-40f6-8664-10ffcc20a75a,DISK], DatanodeInfoWithStorage[127.0.0.1:37500,DS-c7a11dc8-21cd-4244-9aaf-c382ad2f050d,DISK], DatanodeInfoWithStorage[127.0.0.1:41477,DS-8f17b7c5-0d32-451b-97b1-1e1d72ecf444,DISK]]; indices=[0, 1, 6, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1598733833-172.17.0.5-1598147774248:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42582,DS-4eccfa95-ee70-4a0c-98b5-1497d9c6ca61,DISK], DatanodeInfoWithStorage[127.0.0.1:37401,DS-f917754b-85af-470f-9f17-9f0604a202b4,DISK], DatanodeInfoWithStorage[127.0.0.1:42606,DS-549661f3-4b3a-419c-8241-fbbce54adb99,DISK], DatanodeInfoWithStorage[127.0.0.1:33414,DS-37e66f04-7c5c-40f6-8664-10ffcc20a75a,DISK], DatanodeInfoWithStorage[127.0.0.1:37500,DS-c7a11dc8-21cd-4244-9aaf-c382ad2f050d,DISK], DatanodeInfoWithStorage[127.0.0.1:41477,DS-8f17b7c5-0d32-451b-97b1-1e1d72ecf444,DISK]]; indices=[0, 1, 6, 7, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1598733833-172.17.0.5-1598147774248:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42582,DS-4eccfa95-ee70-4a0c-98b5-1497d9c6ca61,DISK], DatanodeInfoWithStorage[127.0.0.1:37401,DS-f917754b-85af-470f-9f17-9f0604a202b4,DISK], DatanodeInfoWithStorage[127.0.0.1:42606,DS-549661f3-4b3a-419c-8241-fbbce54adb99,DISK], DatanodeInfoWithStorage[127.0.0.1:33414,DS-37e66f04-7c5c-40f6-8664-10ffcc20a75a,DISK], DatanodeInfoWithStorage[127.0.0.1:37500,DS-c7a11dc8-21cd-4244-9aaf-c382ad2f050d,DISK], DatanodeInfoWithStorage[127.0.0.1:41477,DS-8f17b7c5-0d32-451b-97b1-1e1d72ecf444,DISK]]; indices=[0, 1, 6, 7, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1704555087-172.17.0.5-1598147883275:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44412,DS-884161f3-1504-4aca-8b26-74b506f5ff70,DISK], DatanodeInfoWithStorage[127.0.0.1:34973,DS-04e9780d-d157-47da-9e3a-47d9df73b8be,DISK], DatanodeInfoWithStorage[127.0.0.1:33994,DS-71c633ec-023a-4cd3-a884-739c21c502e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38962,DS-b5bc9e4f-a666-43f2-bbc9-35547184deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35825,DS-635a84cd-c2c3-45b0-9b89-08f68517485f,DISK], DatanodeInfoWithStorage[127.0.0.1:37851,DS-36f7e55b-9fa8-4565-8b7a-7f56d865a8ff,DISK], DatanodeInfoWithStorage[127.0.0.1:46809,DS-b088fe12-0145-4ce1-a6a2-7f3925187837,DISK]]; indices=[0, 2, 3, 5, 6, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1704555087-172.17.0.5-1598147883275:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44412,DS-884161f3-1504-4aca-8b26-74b506f5ff70,DISK], DatanodeInfoWithStorage[127.0.0.1:34973,DS-04e9780d-d157-47da-9e3a-47d9df73b8be,DISK], DatanodeInfoWithStorage[127.0.0.1:33994,DS-71c633ec-023a-4cd3-a884-739c21c502e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38962,DS-b5bc9e4f-a666-43f2-bbc9-35547184deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35825,DS-635a84cd-c2c3-45b0-9b89-08f68517485f,DISK], DatanodeInfoWithStorage[127.0.0.1:37851,DS-36f7e55b-9fa8-4565-8b7a-7f56d865a8ff,DISK], DatanodeInfoWithStorage[127.0.0.1:46809,DS-b088fe12-0145-4ce1-a6a2-7f3925187837,DISK]]; indices=[0, 2, 3, 5, 6, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1704555087-172.17.0.5-1598147883275:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44412,DS-884161f3-1504-4aca-8b26-74b506f5ff70,DISK], DatanodeInfoWithStorage[127.0.0.1:34973,DS-04e9780d-d157-47da-9e3a-47d9df73b8be,DISK], DatanodeInfoWithStorage[127.0.0.1:33994,DS-71c633ec-023a-4cd3-a884-739c21c502e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38962,DS-b5bc9e4f-a666-43f2-bbc9-35547184deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35825,DS-635a84cd-c2c3-45b0-9b89-08f68517485f,DISK], DatanodeInfoWithStorage[127.0.0.1:37851,DS-36f7e55b-9fa8-4565-8b7a-7f56d865a8ff,DISK], DatanodeInfoWithStorage[127.0.0.1:46809,DS-b088fe12-0145-4ce1-a6a2-7f3925187837,DISK]]; indices=[0, 2, 3, 5, 6, 10, 12]}];  lastLocatedBlock=LocatedStripedBlock{BP-1704555087-172.17.0.5-1598147883275:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44412,DS-884161f3-1504-4aca-8b26-74b506f5ff70,DISK], DatanodeInfoWithStorage[127.0.0.1:34973,DS-04e9780d-d157-47da-9e3a-47d9df73b8be,DISK], DatanodeInfoWithStorage[127.0.0.1:33994,DS-71c633ec-023a-4cd3-a884-739c21c502e0,DISK], DatanodeInfoWithStorage[127.0.0.1:38962,DS-b5bc9e4f-a666-43f2-bbc9-35547184deef,DISK], DatanodeInfoWithStorage[127.0.0.1:35825,DS-635a84cd-c2c3-45b0-9b89-08f68517485f,DISK], DatanodeInfoWithStorage[127.0.0.1:37851,DS-36f7e55b-9fa8-4565-8b7a-7f56d865a8ff,DISK], DatanodeInfoWithStorage[127.0.0.1:46809,DS-b088fe12-0145-4ce1-a6a2-7f3925187837,DISK]]; indices=[0, 2, 3, 5, 6, 10, 12]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-987325703-172.17.0.5-1598147993860:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44585,DS-7504bb07-3d90-42ae-a4aa-be8d61094b2f,DISK], DatanodeInfoWithStorage[127.0.0.1:42687,DS-15373742-109c-46c3-9fb1-4b2d57328f92,DISK], DatanodeInfoWithStorage[127.0.0.1:33060,DS-d49b2c19-2b0b-4ab6-9990-98942f13441b,DISK], DatanodeInfoWithStorage[127.0.0.1:38582,DS-c2680bef-2f8b-479a-84be-a7126f58c0f8,DISK], DatanodeInfoWithStorage[127.0.0.1:43013,DS-ef72a901-39ad-47fd-8a9d-194aa81e5b40,DISK], DatanodeInfoWithStorage[127.0.0.1:46077,DS-248e50da-29c4-43a4-a86a-1ef2366a20ae,DISK]]; indices=[0, 1, 5, 7, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-987325703-172.17.0.5-1598147993860:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44585,DS-7504bb07-3d90-42ae-a4aa-be8d61094b2f,DISK], DatanodeInfoWithStorage[127.0.0.1:42687,DS-15373742-109c-46c3-9fb1-4b2d57328f92,DISK], DatanodeInfoWithStorage[127.0.0.1:33060,DS-d49b2c19-2b0b-4ab6-9990-98942f13441b,DISK], DatanodeInfoWithStorage[127.0.0.1:38582,DS-c2680bef-2f8b-479a-84be-a7126f58c0f8,DISK], DatanodeInfoWithStorage[127.0.0.1:43013,DS-ef72a901-39ad-47fd-8a9d-194aa81e5b40,DISK], DatanodeInfoWithStorage[127.0.0.1:46077,DS-248e50da-29c4-43a4-a86a-1ef2366a20ae,DISK]]; indices=[0, 1, 5, 7, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-987325703-172.17.0.5-1598147993860:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44585,DS-7504bb07-3d90-42ae-a4aa-be8d61094b2f,DISK], DatanodeInfoWithStorage[127.0.0.1:42687,DS-15373742-109c-46c3-9fb1-4b2d57328f92,DISK], DatanodeInfoWithStorage[127.0.0.1:33060,DS-d49b2c19-2b0b-4ab6-9990-98942f13441b,DISK], DatanodeInfoWithStorage[127.0.0.1:38582,DS-c2680bef-2f8b-479a-84be-a7126f58c0f8,DISK], DatanodeInfoWithStorage[127.0.0.1:43013,DS-ef72a901-39ad-47fd-8a9d-194aa81e5b40,DISK], DatanodeInfoWithStorage[127.0.0.1:46077,DS-248e50da-29c4-43a4-a86a-1ef2366a20ae,DISK]]; indices=[0, 1, 5, 7, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-987325703-172.17.0.5-1598147993860:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44585,DS-7504bb07-3d90-42ae-a4aa-be8d61094b2f,DISK], DatanodeInfoWithStorage[127.0.0.1:42687,DS-15373742-109c-46c3-9fb1-4b2d57328f92,DISK], DatanodeInfoWithStorage[127.0.0.1:33060,DS-d49b2c19-2b0b-4ab6-9990-98942f13441b,DISK], DatanodeInfoWithStorage[127.0.0.1:38582,DS-c2680bef-2f8b-479a-84be-a7126f58c0f8,DISK], DatanodeInfoWithStorage[127.0.0.1:43013,DS-ef72a901-39ad-47fd-8a9d-194aa81e5b40,DISK], DatanodeInfoWithStorage[127.0.0.1:46077,DS-248e50da-29c4-43a4-a86a-1ef2366a20ae,DISK]]; indices=[0, 1, 5, 7, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1405698522-172.17.0.5-1598148105221:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41990,DS-631f526c-95b8-4242-8549-221170de4c9f,DISK], DatanodeInfoWithStorage[127.0.0.1:37732,DS-0da472c1-5fc4-45be-b2ef-23834835f6db,DISK], DatanodeInfoWithStorage[127.0.0.1:45111,DS-f40a1fd7-c27b-454e-a78b-dbb12a4f7f5a,DISK], DatanodeInfoWithStorage[127.0.0.1:41347,DS-4e2079c9-d18b-45b1-90f1-d1cc5bccaeb2,DISK], DatanodeInfoWithStorage[127.0.0.1:34610,DS-b40f8778-81ba-45bc-a07c-43b4e4f63a98,DISK]]; indices=[2, 3, 4, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-1405698522-172.17.0.5-1598148105221:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41990,DS-631f526c-95b8-4242-8549-221170de4c9f,DISK], DatanodeInfoWithStorage[127.0.0.1:37732,DS-0da472c1-5fc4-45be-b2ef-23834835f6db,DISK], DatanodeInfoWithStorage[127.0.0.1:45111,DS-f40a1fd7-c27b-454e-a78b-dbb12a4f7f5a,DISK], DatanodeInfoWithStorage[127.0.0.1:41347,DS-4e2079c9-d18b-45b1-90f1-d1cc5bccaeb2,DISK], DatanodeInfoWithStorage[127.0.0.1:34610,DS-b40f8778-81ba-45bc-a07c-43b4e4f63a98,DISK]]; indices=[2, 3, 4, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 7 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=7); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1405698522-172.17.0.5-1598148105221:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41990,DS-631f526c-95b8-4242-8549-221170de4c9f,DISK], DatanodeInfoWithStorage[127.0.0.1:37732,DS-0da472c1-5fc4-45be-b2ef-23834835f6db,DISK], DatanodeInfoWithStorage[127.0.0.1:45111,DS-f40a1fd7-c27b-454e-a78b-dbb12a4f7f5a,DISK], DatanodeInfoWithStorage[127.0.0.1:41347,DS-4e2079c9-d18b-45b1-90f1-d1cc5bccaeb2,DISK], DatanodeInfoWithStorage[127.0.0.1:34610,DS-b40f8778-81ba-45bc-a07c-43b4e4f63a98,DISK]]; indices=[2, 3, 4, 5, 6]}];  lastLocatedBlock=LocatedStripedBlock{BP-1405698522-172.17.0.5-1598148105221:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:41990,DS-631f526c-95b8-4242-8549-221170de4c9f,DISK], DatanodeInfoWithStorage[127.0.0.1:37732,DS-0da472c1-5fc4-45be-b2ef-23834835f6db,DISK], DatanodeInfoWithStorage[127.0.0.1:45111,DS-f40a1fd7-c27b-454e-a78b-dbb12a4f7f5a,DISK], DatanodeInfoWithStorage[127.0.0.1:41347,DS-4e2079c9-d18b-45b1-90f1-d1cc5bccaeb2,DISK], DatanodeInfoWithStorage[127.0.0.1:34610,DS-b40f8778-81ba-45bc-a07c-43b4e4f63a98,DISK]]; indices=[2, 3, 4, 5, 6]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is -1

Test vvMode=v2v2
tr.result is 1
v1v1 or v2v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1102840420-172.17.0.5-1598148213418:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39555,DS-b9480f6c-6cd3-4c9d-837a-80bb3e66ac85,DISK], DatanodeInfoWithStorage[127.0.0.1:37648,DS-54c6836f-ae71-4200-8262-ea53c13aa947,DISK], DatanodeInfoWithStorage[127.0.0.1:45846,DS-695fdbce-e90d-4dac-9c72-f12c5c27bd9c,DISK], DatanodeInfoWithStorage[127.0.0.1:41191,DS-22160c22-2c58-4a1f-a62b-b0139b0ec2eb,DISK], DatanodeInfoWithStorage[127.0.0.1:34780,DS-1dac9be3-3731-4e8e-812c-e96fcb02e9f1,DISK], DatanodeInfoWithStorage[127.0.0.1:46626,DS-cf3e6171-bc57-4220-ab4c-ff8ce1dab125,DISK], DatanodeInfoWithStorage[127.0.0.1:38215,DS-b6877b08-8047-418a-b51a-899e695ec44b,DISK]]; indices=[1, 3, 4, 6, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1102840420-172.17.0.5-1598148213418:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39555,DS-b9480f6c-6cd3-4c9d-837a-80bb3e66ac85,DISK], DatanodeInfoWithStorage[127.0.0.1:37648,DS-54c6836f-ae71-4200-8262-ea53c13aa947,DISK], DatanodeInfoWithStorage[127.0.0.1:45846,DS-695fdbce-e90d-4dac-9c72-f12c5c27bd9c,DISK], DatanodeInfoWithStorage[127.0.0.1:41191,DS-22160c22-2c58-4a1f-a62b-b0139b0ec2eb,DISK], DatanodeInfoWithStorage[127.0.0.1:34780,DS-1dac9be3-3731-4e8e-812c-e96fcb02e9f1,DISK], DatanodeInfoWithStorage[127.0.0.1:46626,DS-cf3e6171-bc57-4220-ab4c-ff8ce1dab125,DISK], DatanodeInfoWithStorage[127.0.0.1:38215,DS-b6877b08-8047-418a-b51a-899e695ec44b,DISK]]; indices=[1, 3, 4, 6, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1102840420-172.17.0.5-1598148213418:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39555,DS-b9480f6c-6cd3-4c9d-837a-80bb3e66ac85,DISK], DatanodeInfoWithStorage[127.0.0.1:37648,DS-54c6836f-ae71-4200-8262-ea53c13aa947,DISK], DatanodeInfoWithStorage[127.0.0.1:45846,DS-695fdbce-e90d-4dac-9c72-f12c5c27bd9c,DISK], DatanodeInfoWithStorage[127.0.0.1:41191,DS-22160c22-2c58-4a1f-a62b-b0139b0ec2eb,DISK], DatanodeInfoWithStorage[127.0.0.1:34780,DS-1dac9be3-3731-4e8e-812c-e96fcb02e9f1,DISK], DatanodeInfoWithStorage[127.0.0.1:46626,DS-cf3e6171-bc57-4220-ab4c-ff8ce1dab125,DISK], DatanodeInfoWithStorage[127.0.0.1:38215,DS-b6877b08-8047-418a-b51a-899e695ec44b,DISK]]; indices=[1, 3, 4, 6, 10, 11, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1102840420-172.17.0.5-1598148213418:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:39555,DS-b9480f6c-6cd3-4c9d-837a-80bb3e66ac85,DISK], DatanodeInfoWithStorage[127.0.0.1:37648,DS-54c6836f-ae71-4200-8262-ea53c13aa947,DISK], DatanodeInfoWithStorage[127.0.0.1:45846,DS-695fdbce-e90d-4dac-9c72-f12c5c27bd9c,DISK], DatanodeInfoWithStorage[127.0.0.1:41191,DS-22160c22-2c58-4a1f-a62b-b0139b0ec2eb,DISK], DatanodeInfoWithStorage[127.0.0.1:34780,DS-1dac9be3-3731-4e8e-812c-e96fcb02e9f1,DISK], DatanodeInfoWithStorage[127.0.0.1:46626,DS-cf3e6171-bc57-4220-ab4c-ff8ce1dab125,DISK], DatanodeInfoWithStorage[127.0.0.1:38215,DS-b6877b08-8047-418a-b51a-899e695ec44b,DISK]]; indices=[1, 3, 4, 6, 10, 11, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1342709462-172.17.0.5-1598148415857:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42683,DS-f58a8f99-02b4-4256-b251-a8fa3120827e,DISK], DatanodeInfoWithStorage[127.0.0.1:42881,DS-e7ab0b71-1287-46e9-8461-710357630c7f,DISK], DatanodeInfoWithStorage[127.0.0.1:41723,DS-d3ba8886-f1d4-4f01-a79d-1e79a1aab2ed,DISK], DatanodeInfoWithStorage[127.0.0.1:34096,DS-f7953965-279a-44af-96d1-c2eb3385b3ff,DISK], DatanodeInfoWithStorage[127.0.0.1:35391,DS-3bb92a92-bb35-406c-899c-863f460d9a4d,DISK], DatanodeInfoWithStorage[127.0.0.1:33822,DS-dec79252-7f1e-49e5-ba0e-cee431064b4c,DISK], DatanodeInfoWithStorage[127.0.0.1:33052,DS-55b0f919-ea16-4847-b026-da8139ff5f26,DISK]]; indices=[3, 5, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1342709462-172.17.0.5-1598148415857:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42683,DS-f58a8f99-02b4-4256-b251-a8fa3120827e,DISK], DatanodeInfoWithStorage[127.0.0.1:42881,DS-e7ab0b71-1287-46e9-8461-710357630c7f,DISK], DatanodeInfoWithStorage[127.0.0.1:41723,DS-d3ba8886-f1d4-4f01-a79d-1e79a1aab2ed,DISK], DatanodeInfoWithStorage[127.0.0.1:34096,DS-f7953965-279a-44af-96d1-c2eb3385b3ff,DISK], DatanodeInfoWithStorage[127.0.0.1:35391,DS-3bb92a92-bb35-406c-899c-863f460d9a4d,DISK], DatanodeInfoWithStorage[127.0.0.1:33822,DS-dec79252-7f1e-49e5-ba0e-cee431064b4c,DISK], DatanodeInfoWithStorage[127.0.0.1:33052,DS-55b0f919-ea16-4847-b026-da8139ff5f26,DISK]]; indices=[3, 5, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 5 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=5); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-1342709462-172.17.0.5-1598148415857:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42683,DS-f58a8f99-02b4-4256-b251-a8fa3120827e,DISK], DatanodeInfoWithStorage[127.0.0.1:42881,DS-e7ab0b71-1287-46e9-8461-710357630c7f,DISK], DatanodeInfoWithStorage[127.0.0.1:41723,DS-d3ba8886-f1d4-4f01-a79d-1e79a1aab2ed,DISK], DatanodeInfoWithStorage[127.0.0.1:34096,DS-f7953965-279a-44af-96d1-c2eb3385b3ff,DISK], DatanodeInfoWithStorage[127.0.0.1:35391,DS-3bb92a92-bb35-406c-899c-863f460d9a4d,DISK], DatanodeInfoWithStorage[127.0.0.1:33822,DS-dec79252-7f1e-49e5-ba0e-cee431064b4c,DISK], DatanodeInfoWithStorage[127.0.0.1:33052,DS-55b0f919-ea16-4847-b026-da8139ff5f26,DISK]]; indices=[3, 5, 6, 7, 11, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-1342709462-172.17.0.5-1598148415857:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:42683,DS-f58a8f99-02b4-4256-b251-a8fa3120827e,DISK], DatanodeInfoWithStorage[127.0.0.1:42881,DS-e7ab0b71-1287-46e9-8461-710357630c7f,DISK], DatanodeInfoWithStorage[127.0.0.1:41723,DS-d3ba8886-f1d4-4f01-a79d-1e79a1aab2ed,DISK], DatanodeInfoWithStorage[127.0.0.1:34096,DS-f7953965-279a-44af-96d1-c2eb3385b3ff,DISK], DatanodeInfoWithStorage[127.0.0.1:35391,DS-3bb92a92-bb35-406c-899c-863f460d9a4d,DISK], DatanodeInfoWithStorage[127.0.0.1:33822,DS-dec79252-7f1e-49e5-ba0e-cee431064b4c,DISK], DatanodeInfoWithStorage[127.0.0.1:33052,DS-55b0f919-ea16-4847-b026-da8139ff5f26,DISK]]; indices=[3, 5, 6, 7, 11, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readParityChunks(StripeReader.java:211)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:341)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is -1
v1v2 test failed !!!
reconf_parameter: dfs.data.transfer.server.tcpnodelay
component: hdfs:DataNode
v1: true
v2: false
testProject: hdfs
unitTest: org.apache.hadoop.hdfs.server.namenode.TestFSImage#testSupportBlockGroup
reconfPoint: -2
result: -1
failureMessage: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-989882575-172.17.0.5-1598149159753:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44643,DS-c4d630cb-a026-49a8-a0a8-ca2b1b84e794,DISK], DatanodeInfoWithStorage[127.0.0.1:40210,DS-dcbdbdcf-c3ae-4014-9365-36e0aa11d75e,DISK], DatanodeInfoWithStorage[127.0.0.1:34429,DS-146d6824-74c0-4cfc-b288-383d91cb3ce0,DISK], DatanodeInfoWithStorage[127.0.0.1:45983,DS-10213aa2-8ffa-4dff-a394-9d6b8e1a36f1,DISK], DatanodeInfoWithStorage[127.0.0.1:33673,DS-75c5cc0b-726f-45d1-ac70-d957ddfcc2f1,DISK]]; indices=[3, 6, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-989882575-172.17.0.5-1598149159753:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44643,DS-c4d630cb-a026-49a8-a0a8-ca2b1b84e794,DISK], DatanodeInfoWithStorage[127.0.0.1:40210,DS-dcbdbdcf-c3ae-4014-9365-36e0aa11d75e,DISK], DatanodeInfoWithStorage[127.0.0.1:34429,DS-146d6824-74c0-4cfc-b288-383d91cb3ce0,DISK], DatanodeInfoWithStorage[127.0.0.1:45983,DS-10213aa2-8ffa-4dff-a394-9d6b8e1a36f1,DISK], DatanodeInfoWithStorage[127.0.0.1:33673,DS-75c5cc0b-726f-45d1-ac70-d957ddfcc2f1,DISK]]; indices=[3, 6, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
stackTrace: java.io.IOException: 6 missing blocks, the stripe is: AlignedStripe(Offset=0, length=1048576, fetchedChunksNum=0, missingChunksNum=6); locatedBlocks is: LocatedBlocks{;  fileLength=8388608;  underConstruction=false;  blocks=[LocatedStripedBlock{BP-989882575-172.17.0.5-1598149159753:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44643,DS-c4d630cb-a026-49a8-a0a8-ca2b1b84e794,DISK], DatanodeInfoWithStorage[127.0.0.1:40210,DS-dcbdbdcf-c3ae-4014-9365-36e0aa11d75e,DISK], DatanodeInfoWithStorage[127.0.0.1:34429,DS-146d6824-74c0-4cfc-b288-383d91cb3ce0,DISK], DatanodeInfoWithStorage[127.0.0.1:45983,DS-10213aa2-8ffa-4dff-a394-9d6b8e1a36f1,DISK], DatanodeInfoWithStorage[127.0.0.1:33673,DS-75c5cc0b-726f-45d1-ac70-d957ddfcc2f1,DISK]]; indices=[3, 6, 10, 12, 13]}];  lastLocatedBlock=LocatedStripedBlock{BP-989882575-172.17.0.5-1598149159753:blk_-9223372036854775792_1001; getBlockSize()=8388608; corrupt=false; offset=0; locs=[DatanodeInfoWithStorage[127.0.0.1:44643,DS-c4d630cb-a026-49a8-a0a8-ca2b1b84e794,DISK], DatanodeInfoWithStorage[127.0.0.1:40210,DS-dcbdbdcf-c3ae-4014-9365-36e0aa11d75e,DISK], DatanodeInfoWithStorage[127.0.0.1:34429,DS-146d6824-74c0-4cfc-b288-383d91cb3ce0,DISK], DatanodeInfoWithStorage[127.0.0.1:45983,DS-10213aa2-8ffa-4dff-a394-9d6b8e1a36f1,DISK], DatanodeInfoWithStorage[127.0.0.1:33673,DS-75c5cc0b-726f-45d1-ac70-d957ddfcc2f1,DISK]]; indices=[3, 6, 10, 12, 13]};  isLastBlockComplete=true;  ecPolicy=ErasureCodingPolicy=[Name=RS-10-4-1024k, Schema=[ECSchema=[Codec=rs, numDataUnits=10, numParityUnits=4]], CellSize=1048576, Id=5]}
	at org.apache.hadoop.hdfs.StripeReader.checkMissingBlocks(StripeReader.java:179)
	at org.apache.hadoop.hdfs.StripeReader.readStripe(StripeReader.java:338)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readOneStripe(DFSStripedInputStream.java:326)
	at org.apache.hadoop.hdfs.DFSStripedInputStream.readWithStrategy(DFSStripedInputStream.java:419)
	at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:829)
	at java.io.DataInputStream.read(DataInputStream.java:100)
	at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:94)
	at org.apache.hadoop.hdfs.DFSTestUtil.readFileAsBytes(DFSTestUtil.java:372)
	at org.apache.hadoop.hdfs.server.namenode.TestFSImage.testSupportBlockGroup(TestFSImage.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)



Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1

Test vvMode=v1v2
tr.result is 1

Test vvMode=v1v1
tr.result is 1

Test vvMode=v2v2
tr.result is 1
v1v2 failed with probability 10 out of 50
v1v1v2v2 failed with probability 16 out of 50
result: false positive !!!
Total execution time in seconds : 5901
